{
  "success": true,
  "permalink": "installationandupgrade",
  "title": "Installation and Upgrade",
  "content": "\r\n\r\n\r\n<div class=\"hiq-page-wrap\">\r\n<div class=\"hiq-t-wrap\">\r\n\t\t\r\n  \t  <div class=\"hiq-t \">\r\n\t\t\t\t<ul class=\"breadcrumbs\"><li><a class=\"breadcrumb-links\" hqid=\"1788908\"  href=\"/home\">Home</a></li> <li><span>&rsaquo;&rsaquo;</span><a hqid=\"3500940\" href=\"/omni\" class=\"breadcrumb-links\">Manhattan Active® Omni</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"3426481\" href=\"/store-3\" class=\"breadcrumb-links\">Store</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"2158412\" href=\"/process-configuration-guides-3\" class=\"breadcrumb-links\">Process & Configuration Guides</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"2158737\" href=\"/point-of-sale\" class=\"breadcrumb-links\">Point of Sale</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"2225114\" href=\"/process-configuration-guides-4\" class=\"breadcrumb-links\">POS Classic Guides</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"2342333\" href=\"/20.1-resilient-cloud-for-pos-draft\" class=\"breadcrumb-links\">Resilient Cloud for POS</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"2342339\" href=\"/configuration\" class=\"breadcrumb-links\">Configuration</a></li><li> <span>››</span>Installation and Upgrade</li></ul>  \t\r\n\t\t<h2>Installation and Upgrade</h2>\r\n\r\n<p></p>\r\n\r\n<div class=\"info\"><ul><li><a href=\"/installationandupgrade$automated-installation-overview\">Automated Installation Overview</a></li><li><a href=\"/installationandupgrade$prerequisites\">Prerequisites</a><ul><li><a href=\"/installationandupgrade$create-reset-heartbeat\">Create/Reset Heartbeat</a></li><li><a href=\"/installationandupgrade$scheduling-the-local-frequency-and-target-files-for-automatic-nbsp-update-deployment-group\">Scheduling the Local Frequency and Target Files for Automatic&nbsp;Update: Deployment group</a></li><li><a href=\"/installationandupgrade$posting-install-packages\">Posting Install Packages</a></li><li><a href=\"/installationandupgrade$edge-installer\">Edge Installer</a><ul><li><a href=\"/installationandupgrade$edge-installer-self-upgradable-feature\">Edge Installer Self upgradable feature</a></li></ul></li></ul></li><li><a href=\"/installationandupgrade$heartbeat\">Heartbeat</a><ul><li><a href=\"/installationandupgrade$refresh-heartbeat\">Refresh Heartbeat</a></li></ul></li><li><a href=\"/installationandupgrade$services\">Services</a></li><li><a href=\"/installationandupgrade$renew-ssl-certificate\">Renew SSL Certificate</a></li></ul></div>\r\n\r\n<h3><a name=\"automated-installation-overview\" id=\"automated-installation-overview\"></a>Automated Installation Overview</h3>\r\n\r\n<p>Resilient cloud installation and upgrade&nbsp;can now be done remotely and controlled&nbsp;from a config UI&nbsp;running on central server. This helps the users in corporate or IT admin user to configure automated installation from config UI&nbsp;on central. This&nbsp;automated process can be configured to install by creating a \"deployment group\" for a defined date, time window&nbsp;and configured for all locations&nbsp;in that organization. It&nbsp;works for fresh install or an upgrade and can be for specific location or group of locations.</p>\r\n\r\n<p>Please follow the below steps to automatically schedule installation&nbsp;of edge server for a specific version of binaries.</p>\r\n\r\n<h3><a name=\"prerequisites\" id=\"prerequisites\"></a>Prerequisites</h3>\r\n\r\n<h4><a name=\"create-reset-heartbeat\" id=\"create-reset-heartbeat\"></a>Create/Reset Heartbeat</h4>\r\n\r\n<p>In order to use the Automated installer for the first time, it relies on a unique Day 1 heartbeat, which is not the same as any current heartbeat that may be previously in place.&nbsp;In addition, in order to switch from a Manual maintenance mode to the Automated strategy on any given Edge server(s), the manually&nbsp;installed Edge servers must first be stopped.&nbsp;&nbsp;</p>\r\n\r\n<div class=\"tip\">Note:&nbsp;Manually stopping a previously installed Edge server will only be necessary for Day 1 of transition from Manual to Automated installs.</div>\r\n\r\n<p>To use the automated install, via&nbsp;central server, the first step is to identify if the location already has any heartbeat generated.&nbsp;</p>\r\n\r\n<ul>\r\n\t<li>If not then goto omnifacade config UI, edge management&gt;heartbeat to generate a heartbeat.<span style=\"color:#e74c3c;\">&nbsp;&nbsp;</span>This means there was no previously installed Edge server.</li>\r\n\t<li>If the heartbeat was&nbsp;already created (either accidently or due to&nbsp;a previous manually installed edge server), then reset the heartbeat(s) to implement one which is useable by the Automated installer AFTER stopping the local edge server(s). The generate and reset will set a default heartbeat. This should be done for all the locations which will require automated installation. For more details refer&nbsp;<a hqid=\"2342340\" href=\"/resilientcloud_configuration_guide$Heartbeat-config\">Resilient Cloud Configuration Guide</a>.</li>\r\n</ul>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<h4><a name=\"scheduling-the-local-frequency-and-target-files-for-automatic-nbsp-update-deployment-group\" id=\"scheduling-the-local-frequency-and-target-files-for-automatic-nbsp-update-deployment-group\"></a><a id=\"Deployment group\" name=\"Deployment group\"></a>Scheduling the Local Frequency and Target Files for Automatic&nbsp;Update: Deployment group</h4>\r\n\r\n<p>The Installer at each Edge should be scheduled to run automatically based on an initial date and a duration.&nbsp; &nbsp;For example, \"At this location, after December 15, 2019, run the installer every day after 10 PM for 4 hours\".&nbsp; This means the installer will check for binary install files at any locations configured this way nightly, from 10 PM to 2 AM local time.&nbsp;</p>\r\n\r\n<p>In addition, the desired Target Files are defined for each Deployment Group.&nbsp; For example, for the group above the target base install file could be called <strong>edge-server-1.0.0-9578ee0-1912130332.zip; </strong>this means \"Following the date above, and for the duration above, check to see if local version is not the same as the target.&nbsp; If it is not, download and install the target.&nbsp; If it is, no action required\". Target files are specified&nbsp;for Base code version, Custom code version, and Custom Configuration install packages.&nbsp;</p>\r\n\r\n<p>For convenience, we offer the ability to set up this schedule/targeting for groups of stores, rather than store-by-store. These groups are called Deployment Groups.&nbsp; The second step on central server is to create deployment group(s) and include store(s) in them.&nbsp;</p>\r\n\r\n<p>Refer to <a hqid=\"2342340\" href=\"/resilientcloud_configuration_guide$Deploymentgroup_Config\">Resilient Cloud Configuration Guide</a>&nbsp;for creating a new deployment&nbsp;group.</p>\r\n\r\n<h4><a name=\"posting-install-packages\" id=\"posting-install-packages\"></a>Posting Install Packages</h4>\r\n\r\n<ol>\r\n\t<li>BASE packages: The target binary zip file details of base can be found from the published code drop release notes. User need to mention only the edge base binaries;&nbsp;MySQL&nbsp;binaries details is figured out by edge installer internal in code and no longer need to be downloaded separately. The BASE package is taken direct from the retailer object store repository.</li>\r\n\t<li>CUSTOM and CUSTOM CONFIG packages: The custom and custom config&nbsp;binary details need&nbsp;to be provided by the customer and should be available in the S3 bucket in the path mentioned in application properties on&nbsp;backoffice component in KV store.</li>\r\n</ol>\r\n\r\n<h4><a name=\"edge-installer\" id=\"edge-installer\"></a>Edge Installer</h4>\r\n\r\n<p>The Edge installer is a new utility which will read the configured frequency and target files&nbsp;for a locations Deployment Group and check for, download, and process these files.&nbsp;</p>\r\n\r\n<p>The Edge installer must be present on each Edge server.</p>\r\n\r\n<p>For the edge server to automatically pick binaries based on scheduled deployment group and run the batch file, it requires&nbsp;pre-requisites that needs to be available on the edge server. Please find below the details.</p>\r\n\r\n<ol>\r\n\t<li>Get the edge installer jar file sample name = \"edgeinstaller-0.1.0-SNAPSHOT.jar\" from artifactory repo path mentioned in release notes or take it manually.</li>\r\n\t<li>Get sample files&nbsp;and prepare \"common.properties\", \"location.properties\", \"deployment.properties\", \"startup.bat\" from implementation guides.</li>\r\n\t<li>Prepare the \"truststore.jks\" and \"edge-server-dev-keystore.jks\" files</li>\r\n\t<li>Place all the above mentioned files in manh\\installationFiles folder in the edge server. (suggest to use c:\\ drive for this)</li>\r\n\t<li>Create a Windows task scheduler on the edge server which wakes every 1 hour and runs the edge installer.&nbsp;</li>\r\n\t<li>The S3 credentials needs to be defined in application properties on backoffice component in KV store.</li>\r\n</ol>\r\n\r\n<div class=\"tip\">Note: All the above steps are mandatory.&nbsp;</div>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<h5><a name=\"edge-installer-self-upgradable-feature\" id=\"edge-installer-self-upgradable-feature\"></a><strong><a id=\"EdgeselfInstaller\" name=\"EdgeselfInstaller\"></a>Edge Installer Self upgradable feature</strong></h5>\r\n\r\n<p>Edge Installer has the capability to self-upgrade itself with the latest binary configured at KV store. This happens when the edge installer self-upgradeable flag - <strong>edgeinstaller.upgrade</strong> is enabled in the application properties on Backoffice component in KV store. By default this feature is enabled.</p>\r\n\r\n<h3><a name=\"heartbeat\" id=\"heartbeat\"></a>Heartbeat</h3>\r\n\r\n<p>A POS device can lose connectivity to Active Omni Cloud service for a variety of reasons, including:&nbsp;the central server is unavailable or store network is down. To continue the ongoing sales retailer can configure store&nbsp;to use Resilient Cloud for POS running locally at the store.&nbsp;Further transactions can happen on the local Resilient Cloud \"edge\" server even in the event the Cloud components are not accessible.</p>\r\n\r\n<p>To allow a store to run on such a local server,&nbsp;it is necessary&nbsp;to pull / push the data to and from Resilient Cloud/Central. This communication needs to be authenticated. This authentication request is sent by the local&nbsp;server with username (edge+orgId+locationId) and password (heartbeat) to the central server at regular intervals for successful&nbsp;communication and data transfer.&nbsp;</p>\r\n\r\n<h5><a name=\"refresh-heartbeat\" id=\"refresh-heartbeat\"></a>Refresh Heartbeat</h5>\r\n\r\n<p>It is necessary to refresh the password (heartbeat) at regular intervals. This makes communication less susceptible to hacking, just by changing your password (heartbeat) consistently at a regular intervals, you reduce the risk that other systems/people can access/modify your data&nbsp;and ensure a more secure connection. This process flow updates the heartbeat at both servers (central/resilient cloud) and on the user entity. The steps involved in this are given below:</p>\r\n\r\n<ol>\r\n\t<li>The refresh heartbeat call is made by the Resilient Cloud server to the central by providing its current heartbeat.</li>\r\n\t<li>Central will match the heartbeat with its current heartbeat and generate a new heartbeat and send it back to the edge server. After generating new one, the earlier heartbeat is saved as&nbsp;previous heartbeat.</li>\r\n\t<li>If central does not match with current heartbeat, then it will match with previous heartbeat and does not generate the new one but send the current heartbeat back to the&nbsp;edge server.</li>\r\n\t<li>Central server also updates the user entity with the newly generated heartbeat.</li>\r\n\t<li>Resilient Cloud after receiving the new heartbeat, updates its storeHeartbeat entity and confirms the same with user entity.</li>\r\n</ol>\r\n\r\n<h3><a name=\"services\" id=\"services\"></a>Services</h3>\r\n\r\n<p>The&nbsp;APIs listed .&nbsp;Refer to API documentation for additional details on&nbsp;each service.</p>\r\n\r\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 946px;\">\r\n\t<thead>\r\n\t\t<tr>\r\n\t\t\t<th scope=\"col\" style=\"width: 168px;\">Service</th>\r\n\t\t\t<th scope=\"col\" style=\"width: 123px;\">Component</th>\r\n\t\t\t<th scope=\"col\" style=\"width: 220px;\">Group</th>\r\n\t\t\t<th scope=\"col\" style=\"width: 398px;\">Service Endpoint</th>\r\n\t\t</tr>\r\n\t</thead>\r\n\t<tbody>\r\n\t\t<tr>\r\n\t\t\t<td style=\"width: 165px;\">Store Heartbeat</td>\r\n\t\t\t<td style=\"width: 120px;\">Backoffice</td>\r\n\t\t\t<td style=\"width: 217px;\">StoreHeartbeat</td>\r\n\t\t\t<td style=\"width: 395px;\">backoffice/api/backoffice/storeHeartbeat</td>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<td style=\"width: 165px;\"><span style=\"font-family: &quot;Open Sans&quot;, arial, sans-serif;\">Store Heartbeat</span></td>\r\n\t\t\t<td style=\"width: 120px;\"><span style=\"font-family: &quot;Open Sans&quot;, arial, sans-serif;\">B</span><span style=\"font-family: &quot;Open Sans&quot;, arial, sans-serif;\">ac</span><span style=\"font-family: &quot;Open Sans&quot;, arial, sans-serif;\">koffic</span><span style=\"font-family: &quot;Open Sans&quot;, arial, sans-serif;\">e</span></td>\r\n\t\t\t<td style=\"width: 217px;\">Generating heartbeat</td>\r\n\t\t\t<td style=\"width: 395px;\">api/backoffice/storeHeartbeat/confirmHeartbeatForLocation</td>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<td style=\"width: 165px;\">Store Heartbeat</td>\r\n\t\t\t<td style=\"width: 120px;\">Backoffice</td>\r\n\t\t\t<td style=\"width: 217px;\">Reset heartbeat</td>\r\n\t\t\t<td style=\"width: 395px;\">api/backoffice/storeHeartbeat/resetHeartbeat{storeId}</td>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<td style=\"width: 165px;\">Deployment Group</td>\r\n\t\t\t<td style=\"width: 120px;\">Backoffice</td>\r\n\t\t\t<td style=\"width: 217px;\">Deployment Group</td>\r\n\t\t\t<td style=\"width: 395px;\">api/backoffice/deploymentGroup</td>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<td style=\"width: 165px;\">EdgeInstaller Information</td>\r\n\t\t\t<td style=\"width: 120px;\">Backoffice</td>\r\n\t\t\t<td style=\"width: 217px;\">EdgeInstaller</td>\r\n\t\t\t<td style=\"width: 395px;\">api/backoffice/edgeInstaller/isReadyForInstall</td>\r\n\t\t</tr>\r\n\t</tbody>\r\n</table>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<h3><a name=\"renew-ssl-certificate\" id=\"renew-ssl-certificate\"></a>Renew SSL Certificate</h3>\r\n\r\n<p><strong>1.&nbsp; Renew SSL certificate in running edge server</strong></p>\r\n\r\n<p>There could be chances that the SSL certificates in edge servers could expire.<strong>&nbsp;renew_ssl_certificate.bat script</strong>&nbsp;can be used to renew SSL certificates in the current active edge server.</p>\r\n\r\n<p>Follow the below steps.</p>\r\n\r\n<ol>\r\n\t<li>Place the new SSL certificate -&nbsp;<strong><em>edge-server-dev-keystore.jks&nbsp;</em></strong>&nbsp;in the edge installer folder.</li>\r\n\t<li>Run&nbsp;renew_ssl_certificate.bat present in the edge installer folder.</li>\r\n\t<li>The script will add the new certificate alias to trustore.jks automatically and copy both files to the current active edge server.</li>\r\n\t<li>The user will be prompted on whether to go ahead with restarting edge servers. If no, the script will exit. If yes, both base and custom edge servers will be restarted.&nbsp;&nbsp;</li>\r\n</ol>\r\n\r\n<div class=\"tip\">Note: This script should be used when the edge server is already up and running, not to be used for fresh installation. Also, new certificates will be in effect only after servers are restarted. If the user selects no in step 4, then new certificates will not be in effect.</div>\r\n\r\n<p><strong>2.&nbsp; Import self-signed certificate to access edge server from different registers</strong></p>\r\n\r\n<p>If the app or browser has to accept a self-signed domain certificate as trusted, then that certificate has to be installed on the machine under root certificates.</p>\r\n\r\n<p>You need to install the .pem file on the machine where you are running the app, then the app will see it as a trusted domain and will not ask for the prompt.</p>\r\n\r\n<p>Copy the .pem of the edge server and install it using the following command:&nbsp;</p>\r\n\r\n<ul>\r\n\t<li>Open Powershell in administrator mode. Execute the below command</li>\r\n</ul>\r\n\r\n<p><strong>Certutil</strong></p>\r\n\r\n<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\r\n\t<tbody>\r\n\t\t<tr>\r\n\t\t\t<td>\r\n\t\t\t<p><code>Certutil&nbsp;</code><code>-addStore</code>&nbsp;<code>Root {YourEdgeServerPemFile}.pem</code></p>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t</tbody>\r\n</table>\r\n\r\n\t  </div>\r\n </div>\r\n <div id=\"ui-page-fb-wrap\"></div>\r\n <div class=\"hiq-footer-wrap\">\r\n    \r\n                \r\n  </div>\r\n\r\n\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n",
  "content_length": 16267,
  "scraped_at": "2025-08-09T22:35:58.774501"
}