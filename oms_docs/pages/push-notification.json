{
  "id": "2526052",
  "permalink": "push-notification",
  "title": "Push Notifications",
  "type": "topic",
  "level": 1,
  "path": "Administrator Tools/Push Notifications",
  "raw_item": {
    "id": "2526052",
    "text": "Push Notifications",
    "title": "Push Notifications",
    "permalink": "push-notification",
    "leaf": false,
    "droppable": true,
    "expanded": true,
    "closed": true,
    "visible": true,
    "editable": true,
    "type": "topic",
    "topicType": "0",
    "status": "1",
    "iconCls": "icon-topic",
    "cls": "",
    "folder_id": "121021",
    "parent": "f;121021",
    "created_date": "1589453154",
    "modified_date": "1745854029",
    "instructor_id": null,
    "loaded": true,
    "haschildren": false,
    "callout": "0",
    "order": "20"
  },
  "success": true,
  "content": "\r\n\r\n\r\n<div class=\"hiq-page-wrap\">\r\n<div class=\"hiq-t-wrap\">\r\n\t\t\r\n  \t  <div class=\"hiq-t \">\r\n\t\t\t\t<ul class=\"breadcrumbs\"><li><a class=\"breadcrumb-links\" hqid=\"1788908\"  href=\"/home\">Home</a></li> <li><span>&rsaquo;&rsaquo;</span><a hqid=\"2161445\" href=\"/administrators\" class=\"breadcrumb-links\">Administrator Tools</a></li><li> <span>››</span>Push Notifications</li></ul>  \t\r\n\t\t<h2>Push Notifications</h2>\r\n\r\n<div class=\"info\"><ul><li><a href=\"/push-notification$overview\">Overview</a></li><li><a href=\"/push-notification$omnifacade\">Omnifacade</a></li><li><a href=\"/push-notification$store-application\">Store application</a><ul><li><a href=\"/push-notification$push-notification-sounds\">Push Notification Sounds</a></li><li><a href=\"/push-notification$custom-sound-configuration\">Custom Sound Configuration</a></li><li><a href=\"/push-notification$deep-linking\">Deep Linking</a></li><li><a href=\"/push-notification$custom-notifications\">Custom Notifications</a></li></ul></li><li><a href=\"/push-notification$contact-center-customer-engagement\">Contact Center & Customer Engagement</a></li><li><a href=\"/push-notification$services\">Services</a></li></ul></div>\r\n\r\n<h3><a name=\"overview\" id=\"overview\"></a>Overview</h3>\r\n\r\n<p>Manhattan Active Omni has the ability to send push notifications to devices to notify associates of an event. Most of the Active Omni supported push notifications are related to operations in the Store Inventory and Fulfillment (SIF) application, but push notification is&nbsp;also available for some&nbsp;omnifacade configuration UIs. Push notifications are enabled at the environment level through Firebase configuration. Once enabled, they are sent to all devices using that environment.&nbsp;</p>\r\n\r\n<p>Push notifications are supported on iOS, Android and browser. Push notifications are currently not supported on Windows. Also, browsers must not be in incognito or private mode&nbsp;to receive push notifications.</p>\r\n\r\n<p>Contact your MA Services team to configure Firebase and push notifications for your environment. See&nbsp;<a hqid=\"2745017\" href=\"/firebase-account\">Firebase account for Push Notifications</a>&nbsp;for details.</p>\r\n\r\n<h3><a name=\"omnifacade\" id=\"omnifacade\"></a>Omnifacade</h3>\r\n\r\n<p>In the browser, you can&nbsp;copy the data from one profile to another for a particular profile purpose in the provisioning profile details. Once all the data is successfully copied to&nbsp;the other profile,&nbsp;then confirmation is shown on the UI in the form of a push notification.</p>\r\n\r\n<p>Users should use&nbsp;the Omnifacade in the browser and ensure the configuration is set to allow notifications:</p>\r\n\r\n<ul>\r\n\t<li>If an authenticated omnifacade tab is open in the browser and the associate&nbsp;is viewing that browser tab, a notification is displayed to the associate.</li>\r\n\t<li>If an authenticated omnifacade tab is open in the browser&nbsp;but the associate&nbsp;is on another browser tab, the browser displays the push notification to the associate.</li>\r\n\t<li>If the browser is open but an authenticated omnifacade tab is not open, the browser shows a push notification to the associate.</li>\r\n\t<li>If the browser is not open, push notifications are held until the browser is launched.</li>\r\n</ul>\r\n\r\n<h3><a name=\"store-application\" id=\"store-application\"></a>Store application</h3>\r\n\r\n<p>Store push notifications are sent to all devices (mobile, browser) that are registered with that store. The device's current store is set upon store selection (whether it occurs automatically during login or the user manually changes stores.)</p>\r\n\r\n<div class=\"tip\"><strong>Note</strong>: Active Omni Store uses Firebase Cloud Messaging (FCM) for sending notifications to devices. FCM is used to pass the push notification payload that is sent by the Store application server to devices. The content of the message payload varies for different push notifications based on business functionality. FCM is a pass-through system that does not store payload information in a database - unless Google Analytics/ BigQuery is enabled for the Firebase account. Enabling Google Analytics allows the firebase customer to run queries over the message/payload content over a period of time for reporting purposes. Currently&nbsp;there is no&nbsp;support for any other 3rd party push notification SDK&nbsp;implementation.</div>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p>If push notifications are enabled for the environment, the following occurs based on whether the Store application is active or not:</p>\r\n\r\n<ul>\r\n\t<li><strong>Toast notification</strong> - When the application is active, the user is notified of the notification via a toast notification within the application screen.</li>\r\n\t<li><strong>OS/Browser push notification</strong> - When the application is not active, the operating system (for mobile devices) or browser displays the push notification.</li>\r\n\t<li><strong>Bell icon</strong> - When the application is active, the badge counter on the bell icon increases to represent&nbsp;a new unread notification.</li>\r\n</ul>\r\n\r\n<p>For associates using the Store mobile application and the app is configured in the device's OS configuration to allow notifications,</p>\r\n\r\n<ul>\r\n\t<li>If the Store app is active, and in the foreground,\r\n\t<ul>\r\n\t\t<li>The push notification is presented to the user as a toast notification in the Store application. Some notifications are auto dismissed and some are persisted until the user dismisses them.</li>\r\n\t\t<li>The notification plays configured beep/notification sound when the app is active, and sound is enabled.&nbsp;</li>\r\n\t\t<li>The badge counter on the bell icon increases to indicate a new unread notification.</li>\r\n\t</ul>\r\n\t</li>\r\n\t<li>If the Store app is closed or minimized, the device's mobile operating system displays the push notification. Notification when the app is inactive plays a configured beep/sound.&nbsp;This beep/sound can&nbsp;be customized using the config UI but not the device settings.</li>\r\n</ul>\r\n\r\n<div class=\"tip\"><strong>Note:</strong>&nbsp;If you wish to stop receiving push notifications on a mobile device which has previously been receiving them, you must&nbsp;either change the Store app configuration in the OS' application settings to disable notifications&nbsp;or uninstall the&nbsp;Store application.</div>\r\n\r\n<p>For associates using the Store application on a browser and the host is configured in the browser's configuration to allow notifications,</p>\r\n\r\n<ul>\r\n\t<li>If an authenticated storefacade tab is open in the browser and the user is viewing that browser tab,\r\n\t<ul>\r\n\t\t<li>The badge counter on the bell icon increases.</li>\r\n\t\t<li>A toast notification is displayed to the user on the Store application screen.\r\n\t\t<ul>\r\n\t\t\t<li><a id=\"Toast Duration\" name=\"Toast Duration\"></a>Toast notification can stay on the Store application screen based on the parameter \"Toast Duration (milliseconds)\". If a valid duration is not configured (ex. 0 or null), then the default toast duration is 6 seconds. This configuration is applicable for all the push notifications displayed in the Store application&nbsp;on the browser and on the supported devices. The Toast duration configuration works for curbside pickup notifications, if&nbsp;the '“Enable \"Dismiss\" button for all push notifications“,configuration is not enabled. If the “Enable \"Dismiss\" button for all push notifications“.button configuration is enabled, then the curbside pickup notification persists until dismissed.&nbsp;The notification plays the configured beep/notification sound.&nbsp;</li>\r\n\t\t</ul>\r\n\t\t</li>\r\n\t</ul>\r\n\t</li>\r\n\t<li>If an authenticated storefacade tab is open in the browser&nbsp;but the user is on another browser tab, the browser displays the push notification to the user.</li>\r\n\t<li>If the browser is open but an authenticated storefacade tab is not open, the browser shows a push notification to the user.</li>\r\n\t<li>If the browser is not open, push notifications are held until the browser is launched.</li>\r\n</ul>\r\n\r\n<div class=\"tip\"><strong>Note: </strong>The in-app toast notifications that are discussed on this page pertain to push notifications that appear when the Store application is in the foreground. This is not to be confused toast messages that appear in the Store app as associates perform certain activities (which are not related to push notifications.) Those toast messages do not reference the&nbsp;\"Toast Duration (milliseconds)\" configuration and instead auto-dismiss on their own pre-determined times.</div>\r\n\r\n<div class=\"tip\"><strong>Note:</strong>&nbsp;If you wish to stop receiving push notifications on a browser which has previously been receiving them, you must&nbsp;change the Store's host&nbsp;configuration in the browser&nbsp;settings to disable notifications.</div>\r\n\r\n<p>The following Store Inventory and Fulfillment processes use push notifications. Some of these always display push notifications and some can be enabled/disabled based on configuration. Refer to these guides for additional information:</p>\r\n\r\n<ul>\r\n\t<li><a hqid=\"1808791\" href=\"/fulfillment-picking-process$Push Notifications\"><span style=\"color:#3498db;\">Customer Pickup & Shipment Order</span></a></li>\r\n\t<li><a hqid=\"2497831\" href=\"/curbsidepickup$Curbside Pickup in Store Fulfillment\"><span style=\"color:#3498db;\">Curbside Pickup</span></a></li>\r\n</ul>\r\n\r\n<div class=\"tip\"><strong>Note:</strong> Browser&nbsp;connection&nbsp;should be secured to get the push notification.</div>\r\n\r\n<h4><a name=\"push-notification-sounds\" id=\"push-notification-sounds\"></a>Push Notification Sounds</h4>\r\n\r\n<p>A desired sound file&nbsp;can be assigned to each push notification&nbsp;in the store application so that the store associates get to know the urgency based on the notification sound. The&nbsp;<strong>Enable sounds for push notifications</strong>&nbsp;flag on&nbsp;the Push Notification tab of the Store Fulfillment Parameter UI&nbsp;controls whether to play assigned or a default sound.&nbsp;The tab&nbsp;<strong>Push Notification Sound&nbsp;</strong>on the Store Fulfillment Parameters UI can be used to specify the sound file name for a push notification type. The store application is pre-packaged with&nbsp;<strong>curbsidenotificationsound.mp3&nbsp;</strong>and&nbsp;<strong>defaultnotificationsound.mp3</strong>&nbsp;sounds that can be used for any of the base and custom notifications.</p>\r\n\r\n<p>A custom sound can be packaged into the store app during the custom app build process. The file name can be specified for&nbsp;the desired notification types. Base or custom sound can be assigned to custom notifications by adding a new notification type to the seed data for notification types. Notification types belong to the system augmentable profile.&nbsp;The custom code can read the sound assigned to the custom notification and pass it to the notification payload sent to the device through notification services.</p>\r\n\r\n<p>When the application is not active, a tap on the notification or volume button on the device can be used to silence the device’s notification sound. While in the application, a tap on the toast notification can be used to silence the notification sound.</p>\r\n\r\n<div class=\"tip\"><strong>Note:</strong>&nbsp;If the sound file name is not accessible or is larger than around 30 seconds, the application/device will play the default sound.</div>\r\n\r\n<div class=\"tip\"><strong>Note:</strong>&nbsp;Most browsers have a limitation of not playing configured sounds when the app is&nbsp;inactive. There may be a default OS sound for notifications played or there may be no sound.&nbsp;</div>\r\n\r\n<h4><a name=\"custom-sound-configuration\" id=\"custom-sound-configuration\"></a>Custom Sound Configuration</h4>\r\n\r\n<p>To configure custom sound settings, follow the steps below:</p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><b>Steps</b></p>\r\n\r\n<ol>\r\n\t<li>Create a folder with a chosen name, such as \"sounds,\" within the assets/plugin-configurator/ directory.</li>\r\n\t<li>Place the desired custom sound files (e.g., .mp3 format) into the \"sounds\" folder.</li>\r\n\t<li>Create hook files for Android, iOS, and browser platforms within the \"hooks\" folder, naming them as follows:\r\n\t<ul>\r\n\t\t<li>custom-android-sound.js</li>\r\n\t\t<li>custom-ios-sound.js</li>\r\n\t\t<li>custom-browser-sound.js</li>\r\n\t</ul>\r\n\t</li>\r\n\t<li>For Android, use the fs.copy() function in the custom-android-sound.js file to copy the sound files to the appropriate locations, ensuring the sound is played both when the app is active and inactive.</li>\r\n</ol>\r\n\r\n<p><div class=\"toggle_outerdiv\"><p class=\"toggle_div\"><a href=\"#tg-1\" class=\"toggle-content\"><span class=\"toggle-title\">Push Notification Custom Sound Configuration</span></a></p><div id=\"tg-1\"><p><b>Directory Structure</b></p>\n\n<ul>\n\t<li>assets/plugin-configurator/\n\t<ul>\n\t\t<li>config.json</li>\n\t\t<li>sounds\n\t\t<ul>\n\t\t\t<li>curbsidenotificationsound.mp3</li>\n\t\t</ul>\n\t\t</li>\n\t\t<li>hooks\n\t\t<ul>\n\t\t\t<li>custom-android-sound.js</li>\n\t\t\t<li>custom-ios-sound.js</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p><b>Steps</b></p>\n\n<ol>\n\t<li>Create a folder with any name, in this case <b>sounds</b> within the assets/plugin-configurator/</li>\n\t<li>Add any custom sound files(.mp3) into the <b>sounds</b> folder.</li>\n\t<li>Create hook files for android ,ios and browser within the <b>hooks</b> folder and name it <b>custom-android-sound.js </b>,<b> custom-ios-sound.js , custom-browser-sound.js.</b>&nbsp;</li>\n</ol>\n\n<p>A.&nbsp;<b>custom-android-sound.js </b>(For Android, the fs.copy() statement&nbsp; could be used to copy the sound files to the correct locations in order to play the sound when app is active or inactive.)</p>\n\n<div class=\"computer_code\">\n<p>&nbsp;</p>\n\n<p>var shell = require(&#39;shelljs&#39;);</p>\n\n<p>const config = require(&#39;../gulp/config&#39;);</p>\n\n<p>const fs = require(&quot;fs-extra&quot;)</p>\n\n<p>console.log(&quot;***** Preparing Android Before build HOOK *****&quot;);</p>\n\n<p>fs.copy(&#39;src/assets/ext/assets/plugin-configurator/sounds/curbsidenotificationsound.mp3&#39;, &quot;platforms/android/res/raw/curbsidenotificationsound.mp3&quot;)</p>\n\n<p>.then(() =&gt; console.log(&#39;Successfully copied curbsidenotificationsound.mp3 to app inactive play path (Android).&#39;))</p>\n\n<p>.catch(err =&gt; console.error(err));</p>\n\n<p>fs.copy(&#39;src/assets/ext/assets/plugin-configurator/sounds/curbsidenotificationsound.mp3&#39;, &quot;platforms/android/assets/www/assets/media/services/hardware-accessors/resources/audio/curbsidenotificationsound.mp3&quot;)</p>\n\n<p>.then(() =&gt; console.log(&#39;Successfully copied curbsidenotificationsound.mp3 to app active play path (Android).&#39;))</p>\n\n<p>.catch(err =&gt; console.error(err));</p>\n\n<p>&bull; console.log(&quot;***** END Android Before build HOOK *****&quot;);</p>\n</div>\n\n<p>&nbsp;</p>\n\n<p><strong data-renderer-mark=\"true\">B.custom-ios-sound.js </strong>(For IOS, the fs.copy() statement could be used to copy the sound files to the correct locations in order to play the sound when app is active only.)</p>\n\n<div class=\"computer_code\">\n<ul>\n\t<li>var shell = require(&#39;shelljs&#39;);</li>\n\t<li>const config = require(&#39;../gulp/config&#39;);</li>\n\t<li>const fs = require(&quot;fs-extra&quot;)</li>\n\t<li>console.log(&quot;***** Preparing IOS Before build HOOK *****&quot;);</li>\n\t<li>fs.copy(&#39;src/assets/ext/assets/plugin-configurator/sounds/curbsidenotificationsound.mp3&#39;, &quot;platforms/ios/www/assets/media/services/hardware-accessors/resources/audio/curbsidenotificationsound.mp3&quot;) .then(() =&gt; console.log(&#39;Successfully copied curbsidenotificationsound.mp3 to app active play path (IOS).&#39;)) .catch(err =&gt; console.error(err)); console.log(&quot;***** END IOS Before build HOOK *****&quot;);</li>\n</ul>\n</div>\n\n<p><strong data-renderer-mark=\"true\">For multiple files: </strong>To copy multiple files, we can add multiple<strong data-renderer-mark=\"true\"> fs.copy() </strong>statements within the same hook files<strong data-renderer-mark=\"true\"> custom-android-sound.js </strong>or<strong data-renderer-mark=\"true\"> custom-ios-sound.js. </strong>For instance,</p>\n\n<div class=\"computer_code\">\n<ul>\n\t<li>fs.copy(&#39;src/assets/ext/assets/plugin-configurator/sounds/curbsidenotificationsound.mp3&#39;, &quot;platforms/ios/www/assets/media/services/hardware-accessors/resources/audio/curbsidenotificationsound.mp3&quot;)</li>\n\t<li>then(() =&gt; console.log(&#39;Successfully copied curbsidenotificationsound.mp3 to app active play path (Android).&#39;)) .</li>\n\t<li>catch(err =&gt; console.error(err));</li>\n\t<li>fs.copy(&#39;src/assets/ext/assets/plugin-configurator/sounds/sample.mp3&#39;, &quot;platforms/ios/www/assets/media/services/hardware-accessors/resources/audio/sample.mp3&quot;) .</li>\n\t<li>then(() =&gt; console.log(&#39;Successfully copied sample.mp3 to app active play path (Android).&#39;)) .</li>\n\t<li>catch(err =&gt; console.error(err));</li>\n\t<li>fs.copy(&#39;src/assets/ext/assets/plugin-configurator/sounds/pickuporder.mp3&#39;, &quot;platforms/ios/www/assets/media/services/hardware-accessors/resources/audio/pickuporder.mp3&quot;) .</li>\n\t<li>then(() =&gt; console.log(&#39;Successfully copied pickuporder.mp3 to app active play path (Android).&#39;)) .</li>\n\t<li>catch(err =&gt; console.error(err));</li>\n</ul>\n</div>\n\n<p><strong data-renderer-mark=\"true\">C.custom-browser-sound.js : </strong>To copy multiple / single file for browser, we can use either way to copy multiple or single file for any platform.</p>\n\n<div class=\"computer_code\">\n<ul>\n\t<li>var shell = require(&#39;shelljs&#39;);</li>\n\t<li>const config = require(&#39;../gulp/config&#39;);</li>\n\t<li>const fs = require(&quot;fs-extra&quot;) console.log(&quot;***** Preparing Browser Before build HOOK *****&quot;);</li>\n\t<li>fs.readdir(&#39;src/assets/ext/assets/plugin-configurator/sounds/&#39;, (err, files) =&gt;</li>\n\t<li>{ if (err) console.log(err);</li>\n\t<li>else { console.log(&quot;\\nCurrent directory filenames:&quot;);</li>\n\t<li>files.forEach(file =&gt; { console.log(file);</li>\n\t<li>fs.copy(&#39;src/assets/ext/assets/plugin-configurator/sounds/&#39;+file, &quot;platforms/browser/www/assets/media/services/hardware-accessors/resources/audio/&quot;+file) .then(() =&gt; console.log(&#39;Successfully copied &#39;+file+&#39; to app active play path (Browser).&#39;+&quot;platforms/browser/www/assets/media/services/hardware-accessors/resources/audio/&quot;+file)) .catch(err =&gt; console.error(err)); }) } });</li>\n\t<li>console.log(&quot;***** END Browser Before build HOOK *****&quot;);</li>\n</ul>\n</div>\n\n<p data-renderer-start-pos=\"4493\">4.Create another file with the name <strong data-renderer-mark=\"true\">config-ios.xml </strong>within the <strong data-renderer-mark=\"true\">overwrite </strong>folder.</p>\n\n<p data-renderer-start-pos=\"4574\"><strong data-renderer-mark=\"true\">&nbsp; &nbsp; a.config-ios.xml </strong>(For IOS, to play the sound when app is inactive, <strong data-renderer-mark=\"true\">&lt;resource-file/&gt;</strong> tags could be added with the corresponding src and target locations.)</p>\n\n<div class=\"computer_code\" data-renderer-start-pos=\"4574\">\n<p><code>&lt;platform name=&quot;ios&quot;&gt; </code></p>\n\n<p><code>&lt;resource-file src=&quot;src/assets/ext/assets/plugin-configurator/sounds/curbsidenotificationsound.mp3&quot; target=&quot;curbsidenotificationsound.mp3&quot;/&gt;</code></p>\n</div>\n\n<p><strong data-renderer-mark=\"true\">For multiple files:</strong><em data-renderer-mark=\"true\"><strong data-renderer-mark=\"true\"> </strong></em>To copy multiple files, we can add multiple<strong data-renderer-mark=\"true\"> &lt;resource-file/&gt; </strong>tags within the same file <strong data-renderer-mark=\"true\">config-ios.xml</strong>. For instance,</p>\n\n<div class=\"computer_code\">\n<p><code>&lt;platform name=&quot;ios&quot;&gt; &lt;resource-file src=&quot;src/assets/ext/assets/plugin-configurator/sounds/curbsidenotificationsound.mp3&quot; target=&quot;curbsidenotificationsound.mp3&quot;/&gt; &lt;resource-file src=&quot;src/assets/ext/assets/plugin-configurator/sounds/sample.mp3&quot; target=&quot;sample.mp3&quot;/&gt; &lt;resource-file src=&quot;src/assets/ext/assets/plugin-configurator/sounds/pickuporder.mp3&quot; target=&quot;pickuporder.mp3&quot;/&gt; </code></p>\n</div>\n\n<p>5.Mention the locations of the hook files under <strong data-renderer-mark=\"true\">Hooks</strong> and .xml files under <strong data-renderer-mark=\"true\">OverwriteFile</strong> in <strong data-renderer-mark=\"true\">config.json</strong> file.</p>\n\n<div class=\"computer_code\">\n<p><code>{ &quot;Plugins&quot;:[], </code></p>\n\n<p><code>&quot;OverwriteFile&quot;: [ </code></p>\n\n<p><code>{ </code></p>\n\n<p><code>&quot;Type&quot;:&quot;AddContent&quot;, &quot;ReplaceContentWith&quot;:&quot;&lt;platform name=\\&quot;ios\\&quot;&gt;&quot;, &quot;ToFilePath&quot;:&quot;config.xml&quot;, &quot;FromFilePath&quot;:&quot;assets/plugin-configurator/overwrite/config-ios.xml&quot; } ], </code></p>\n\n<p><code>&quot;Hooks&quot;:</code></p>\n\n<p><code>[ </code></p>\n\n<p><code>{ &quot;Platform&quot;:&quot;ios&quot;, &quot;LifeCycle&quot;:&quot;before_build&quot;, &quot;FromFilePath&quot;:&quot;assets/plugin-configurator/hooks/custom-ios-sound.js&quot; }, </code></p>\n\n<p><code>{ </code></p>\n\n<p><code>&quot;Platform&quot;:&quot;android&quot;, &quot;LifeCycle&quot;:&quot;before_build&quot;, &quot;FromFilePath&quot;:&quot;assets/plugin-configurator/hooks/custom-android-sound.js&quot; }, </code></p>\n\n<p><code>{ </code></p>\n\n<p><code>&quot;Platform&quot;:&quot;browser&quot;, &quot;LifeCycle&quot;:&quot;before_build&quot;, &quot;FromFilePath&quot;:&quot;assets/plugin-configurator/hooks/custom-browser-sound.js&quot; } </code></p>\n\n<p><code>] </code></p>\n\n<p><code>} </code></p>\n</div>\n\n<p>&nbsp;</p>\n\n<p data-renderer-start-pos=\"6377\">6 .To play the sound when app is active, JS layer changes are required which will be available in base as part of the 21.1 market release.</p>\n\n<p data-renderer-start-pos=\"6377\"><strong data-renderer-mark=\"true\">Sample extension folder with custom sound as a start up:</strong></p>\n\n<div class=\"computer_code\" data-renderer-start-pos=\"6377\">&lt;!doctype html&gt; &lt;html&nbsp;lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta&nbsp;charset=&quot;utf-8&quot;&gt; &lt;script src=&quot;../styles/style.js&quot;&gt;&lt;/script&gt; &lt;!-- &lt;script src=&quot;ma-extension-client.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt; --&gt; &lt;script type=&quot;text/javascript&quot;&gt; var mobileApp = !!window.cordova; (function (d, script) { script = d.createElement(&#39;script&#39;); script.type = &#39;text/javascript&#39;; script.async = true; script.onload = function () { console.log(&quot;ma-extension-client.js is loaded...&quot;); }; // Below line works for browser and mobile(ios) builds. The logic takes the exact prefix as required for both. No need of mobile/web check. script.src = (window.location.origin + window.location.pathname).split(&#39;assets&#39;)[0] + &#39;assets/ma-extension-client.js&#39;; d.getElementsByTagName(&#39;head&#39;)[0].appendChild(script); }(document)); function getCustomerDetails() { console.log(&quot;Executing getCustomerDetails&quot;); MAExtension.POSUtil.returnActions.getCustomerDetails({}, function(message){ console.log(&quot;Received getCustomerDetails&quot;); console.log(message.responseData); }); } function setCustomerDetails() { var customer = { name: &quot;Easwar K&quot;, desc: &quot;Set from custom code to just test. The dats is not in a formatted manner..&quot; }; console.log(&quot;Running setCustomerDetails with:&quot;); console.log(customer); MAExtension.POSUtil.actions.setCustomerDetails(customer); } function setOrder() { var order = { name: &quot;Dummy Order&quot;, desc: &quot;Set from custom code to just test. The dats is not in a formatted manner..&quot; }; console.log(&quot;Running setOrder with:&quot;); console.log(order); MAExtension.POSUtil.actions.setOrder(order); } function getOrder() { console.log(&quot;Exectuing getOrder&quot;); MAExtension.POSUtil.returnActions.getOrder({}, function(message){ console.log(&quot;Received getOrder&quot;); console.log(message.responseData); }); } function getSelectedOrderLines() { console.log(&quot;Executing getSelectedOrderLines&quot;); MAExtension.POSUtil.returnActions.getSelectedOrderLines({}, function(message){ console.log(&quot;Received getSelectedOrderLines&quot;); console.log(message.responseData); }); } function setSelectedOrderLines() { var lines = [{ name: &quot;Dummy Order Line&quot;, desc: &quot;Set from custom code to just test. The dats is not in a formatted manner..&quot; }]; console.log(&quot;Executing setSelectedOrderLines with :&quot;); console.log(lines); MAExtension.POSUtil.actions.setSelectedOrderLines(lines); } function getPOSSettingByKey() { console.log(&quot;Executing getPOSSettingByKey with:&quot;); var key = &#39;selectedCashDrawer&#39;; console.log(key); MAExtension.POSUtil.returnActions.getPOSSettingByKey(key, function(message){ console.log(&quot;Received getPOSSettingByKey&quot;); console.log(message.responseData); }); } function getPaymentDetails() { console.log(&quot;Executing getPaymentDetails&quot;); MAExtension.POSUtil.returnActions.getPaymentDetails({}, function(message){ console.log(&quot;Received getPaymentDetails&quot;); console.log(message.responseData); }); } function jumpToScreen() { console.log(&quot;Executing jumpToScreen&quot;); MAExtension.POSUtil.actions.jumpToScreen(); } function setExtensionDataAttributes(data) { console.log(&quot;Executing setExtensionDataAttributes with:&quot;); console.log(data); MAExtension.POSUtil.actions.setExtensionDataAttributes(data); } function setCustomerActive(data) { console.log(&quot;Executing setCustomerActive with:&quot;); console.log(data); MAExtension.POSUtil.actions.setCustomerActive(data); } &lt;/script&gt; &lt;/head&gt; &lt;body style=&quot;background-color: #1f2129;&quot;&gt; &lt;div id=&quot;content&quot; class=&quot;common-util&quot;&gt; &lt;div id=&quot;showTotal&quot;&gt;&lt;/div&gt; &lt;div class=&quot;footer&quot;&gt; &lt;button id=&quot;btn&quot; class=&quot;btn btn-neutral&quot; onclick=&quot;getCustomerDetails()&quot;&gt;Test getCustomerDetails&lt;/button&gt; &lt;button id=&quot;btn&quot; class=&quot;btn btn-neutral&quot; onclick=&quot;setCustomerDetails()&quot;&gt;Test setCustomerDetails&lt;/button&gt; &lt;button id=&quot;btn&quot; class=&quot;btn btn-neutral&quot; onclick=&quot;setOrder()&quot;&gt;Test setOrder&lt;/button&gt; &lt;button id=&quot;btn&quot; class=&quot;btn btn-neutral&quot; onclick=&quot;getOrder()&quot;&gt;Test getOrder&lt;/button&gt; &lt;button id=&quot;btn&quot; class=&quot;btn btn-neutral&quot; onclick=&quot;getSelectedOrderLines()&quot;&gt;Test getSelectedOrderLines&lt;/button&gt; &lt;button id=&quot;btn&quot; class=&quot;btn btn-neutral&quot; onclick=&quot;setSelectedOrderLines()&quot;&gt;Test setSelectedOrderLines&lt;/button&gt; &lt;button id=&quot;btn&quot; class=&quot;btn btn-neutral&quot; onclick=&quot;getPOSSettingByKey()&quot;&gt;Test getPOSSettingByKey&lt;/button&gt; &lt;button id=&quot;btn&quot; class=&quot;btn btn-neutral&quot; onclick=&quot;getPaymentDetails()&quot;&gt;Test getPaymentDetails&lt;/button&gt; &lt;button id=&quot;btn&quot; class=&quot;btn btn-neutral&quot; onclick=&quot;jumpToScreen()&quot;&gt;Test jumpToScreen&lt;/button&gt; &lt;button id=&quot;btn&quot; class=&quot;btn btn-neutral&quot; onclick=&quot;setExtensionDataAttributes(5)&quot;&gt;Test setExtensionDataAttributes&lt;/button&gt; &lt;button id=&quot;btn&quot; class=&quot;btn btn-neutral&quot; onclick=&quot;setCustomerActive(&#39;test&#39;)&quot;&gt;Test setCustomerActive&lt;/button&gt; &lt;/div&gt; &lt;/div&gt; &lt;/body&gt; &lt;/html&gt;</div>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;</p>\n</div></div></p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<h4><a name=\"deep-linking\" id=\"deep-linking\"></a>Deep Linking</h4>\r\n\r\n<p>The user can navigate to a page within the Store application when clicking on a push notification (deep linking.) The following deep linking is supported for Store push notifications:</p>\r\n\r\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width:455px;\">\r\n\t<thead>\r\n\t\t<tr>\r\n\t\t\t<th scope=\"row\" style=\"width: 189px;\">&nbsp;</th>\r\n\t\t\t<th scope=\"col\" style=\"width: 69px;\">Mobile</th>\r\n\t\t\t<th scope=\"col\" style=\"width: 68px;\">Browser</th>\r\n\t\t</tr>\r\n\t</thead>\r\n\t<tbody>\r\n\t\t<tr>\r\n\t\t\t<th scope=\"row\" style=\"width: 189px;\">Toast notification</th>\r\n\t\t\t<td style=\"width: 69px;\">Yes</td>\r\n\t\t\t<td style=\"width: 68px;\">Yes</td>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<th scope=\"row\" style=\"width: 189px;\">OS/Browser push notification</th>\r\n\t\t\t<td style=\"width: 69px;\">Yes</td>\r\n\t\t\t<td style=\"width: 68px;\">No</td>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<th scope=\"row\" style=\"width: 189px;\">Bell icon</th>\r\n\t\t\t<td style=\"width: 69px;\">Yes</td>\r\n\t\t\t<td style=\"width: 68px;\">Yes</td>\r\n\t\t</tr>\r\n\t</tbody>\r\n</table>\r\n\r\n<p><br>\r\nDeep linking involves navigating to a particular page, and also passing any optional page-specific parameters that the page supports.</p>\r\n\r\n<h4><a name=\"custom-notifications\" id=\"custom-notifications\"></a>Custom Notifications</h4>\r\n\r\n<p>Retailers can create custom Store push notifications and configure them to deep link to an exposed base page ID,&nbsp;or to a custom page that they've created.&nbsp;For the list of base page IDs which are exposed for deep linking from push notifications along with any page-specific parameters they support, refer to the 'Base page IDs that support deep linking' section of the&nbsp;<a hqid=\"2587395\" href=\"/store-external-deep-link\">Store - External Deep Linking guide</a>. (The same base page IDs apply to both custom push notifications and external deep linking.)&nbsp;</p>\r\n\r\n<p>Refer to the sample custom push notification below which deep links to&nbsp;a base page ID. In this example, the base page ID (\"workflow\") is \"work-default-list\" and the optional page-specific parameters are \"fulfillmentType\", \"documentType\" and&nbsp;\"curbSideFilter.\" For custom notifications the operation must be set to \"common-notification\" and the isCustomNotification must be set to true.</p>\r\n\r\n<div class=\"computer_code\">POST:&nbsp;{{url}}/fulfillment/api/fulfillment/fulfillment/pushNotification</div>\r\n\r\n<div class=\"computer_code\">Sample Request JSON&nbsp;</div>\r\n\r\n<div class=\"computer_code\">&nbsp;{\r\n<pre><code class=\"json\">\t\"OrgId\": \"DUMMY-US\",\r\n\t\"LocationId\": \"STR1-123-US\",\r\n\t\"NotificationSound\": \"default\",\r\n\t\"NotificationPriority\": \"high\",\r\n\t\"Title\": \"New&nbsp;custom&nbsp;pick&nbsp;notification\",\r\n\t\"Body\": \"New&nbsp;custom&nbsp;pick&nbsp;notification\",\r\n\t\"Operation\": \"common-notification\",\r\n\t\"NotificationPayload\": {\r\n\t\t\"Title\": \"New&nbsp;custom&nbsp;pick&nbsp;notification\",\r\n\t\t\"Data\": \"New&nbsp;custom&nbsp;pick&nbsp;notification\",\r\n\t\t\"PagePayload\": {\r\n\t\t\t\"workFlow\": \"pick\"  \r\n\t\t},\r\n\t\t\"PageId\": \"work-default-list\", \r\n\t\t\"IsCustomNotification\": true\r\n\t}\r\n}</code></pre>\r\n</div>\r\n\r\n<div class=\"tip\"><strong>Note</strong>: In the request payload, change the \"workFlow\" and \"PageId\" based on the requirement.</div>\r\n\r\n<div class=\"computer_code\">Sample response JSON</div>\r\n\r\n<div class=\"computer_code\">\r\n<pre><code class=\"json\">{\r\n    \"success\": true,\r\n    \"header\": null,\r\n    \"data\": null,\r\n    \"messageKey\": null,\r\n    \"message\": null,\r\n    \"errors\": [],\r\n    \"exceptions\": [],\r\n    \"messages\": {\r\n        \"Message\": [],\r\n        \"Size\": 0\r\n    },\r\n    \"rootCause\": null,\r\n    \"requestUri\": null,\r\n    \"statusCode\": \"OK\"\r\n}</code>\r\n</pre>\r\n</div>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p>The Push Notification service is used to send the custom notification to the store.</p>\r\n\r\n<div class=\"computer_code\">\r\n<p>{</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;\"OrgId\":&nbsp;\"FB43-US\",</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;\"LocationId\":&nbsp;\"STR1-FB43-US\",</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;\"NotificationSound\":&nbsp;\"default\",</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;\"NotificationPriority\":&nbsp;\"high\",</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;\"Title\":&nbsp;\"New&nbsp;custom&nbsp;pick&nbsp;notification\",</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;\"Body\":&nbsp;\"New&nbsp;custom&nbsp;pick&nbsp;notification\",</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;\"Operation\":&nbsp;\"common-notification\",</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;\"NotificationPayload\":&nbsp;{</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"Title\":&nbsp;\"New&nbsp;custom&nbsp;pick&nbsp;notification\",</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"Data\":&nbsp;\"New&nbsp;custom&nbsp;pick&nbsp;notification\",</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"PagePayload\":&nbsp;{</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"workFlow\":&nbsp;\"pick\",</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"fulfillmentType\":&nbsp;\"ShipToAddress\"</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"PageId\":&nbsp;\"work-default-list\",</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"IsCustomNotification\":&nbsp;true</p>\r\n\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;}</p>\r\n\r\n<p>}</p>\r\n</div>\r\n\r\n<h3><a name=\"contact-center-customer-engagement\" id=\"contact-center-customer-engagement\"></a>Contact Center & Customer Engagement</h3>\r\n\r\n<p>Customer Engagement in the contact center supports push notifications for two-way texting. When a text message is received from a customer, it is pushed to the agent's browser without the need for a manual refresh of the screen.</p>\r\n\r\n<p>Push notifications in the contact center&nbsp;are enabled at the environmental level through Firebase configuration.&nbsp;Push notifications are supported for contact centers in Chrome, Firefox, and Safari browsers. Browsers must not be in incognito or private mode&nbsp;to receive push notifications and users must click on \"Allow\" or \"Accept\" notifications.</p>\r\n\r\n<p>Contact your MA Services team to configure Firebase and push notifications for your environment.&nbsp;See&nbsp;<a hqid=\"2745017\" href=\"/firebase-account\">Firebase account for Push Notifications</a>&nbsp;for details.</p>\r\n\r\n<h3><a name=\"services\" id=\"services\"></a>Services</h3>\r\n\r\n<p>The&nbsp;API&nbsp;listed in the following table is referenced in this document. Refer to the API documentation for additional details on&nbsp;the service.</p>\r\n\r\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 675px;\">\r\n\t<thead>\r\n\t\t<tr>\r\n\t\t\t<th scope=\"col\" style=\"width: 107px;\">Service</th>\r\n\t\t\t<th scope=\"col\" style=\"width: 70px;\"><strong>Component</strong></th>\r\n\t\t\t<th scope=\"col\" style=\"width: 159px;\"><strong>Group</strong></th>\r\n\t\t\t<th scope=\"col\" style=\"width: 287px;\">Service Endpoint</th>\r\n\t\t</tr>\r\n\t</thead>\r\n\t<tbody>\r\n\t\t<tr>\r\n\t\t\t<td style=\"width: 104px;\">Push Notification</td>\r\n\t\t\t<td style=\"width: 67px;\">Fulfillment</td>\r\n\t\t\t<td style=\"width: 156px;\">fulfillment-process-controller</td>\r\n\t\t\t<td style=\"width: 284px;\">\r\n\t\t\t<p><a href=\"https://gcpside-store-4b.pos.manh.cloud/fulfillment/swagger-ui.html#!/fulfillment45process45controller/triggerNotificationUsingPOST\">/fulfillment/api/fulfillment/fulfillment/pushNotification</a></p>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t</tbody>\r\n</table>\r\n\r\n<p data-renderer-start-pos=\"295\">&nbsp;</p>\r\n\r\n<p data-renderer-start-pos=\"456\">&nbsp;</p>\r\n\r\n\t  </div>\r\n </div>\r\n <div id=\"ui-page-fb-wrap\"></div>\r\n <div class=\"hiq-footer-wrap\">\r\n    \r\n                \r\n  </div>\r\n\r\n\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n",
  "content_length": 35874,
  "scraped_at": "2025-08-09T22:14:02.690387",
  "content_clean": "Home ››Administrator Tools ››Push Notifications Push Notifications OverviewOmnifacadeStore applicationPush Notification SoundsCustom Sound ConfigurationDeep LinkingCustom NotificationsContact Center & Customer EngagementServices Overview Manhattan Active Omni has the ability to send push notifications to devices to notify associates of an event. Most of the Active Omni supported push notifications are related to operations in the Store Inventory and Fulfillment (SIF) application, but push notification is also available for some omnifacade configuration UIs. Push notifications are enabled at the environment level through Firebase configuration. Once enabled, they are sent to all devices using that environment. Push notifications are supported on iOS, Android and browser. Push notifications are currently not supported on Windows. Also, browsers must not be in incognito or private mode to receive push notifications. Contact your MA Services team to configure Firebase and push notifications for your environment. See Firebase account for Push Notifications for details. Omnifacade In the browser, you can copy the data from one profile to another for a particular profile purpose in the provisioning profile details. Once all the data is successfully copied to the other profile, then confirmation is shown on the UI in the form of a push notification. Users should use the Omnifacade in the browser and ensure the configuration is set to allow notifications: If an authenticated omnifacade tab is open in the browser and the associate is viewing that browser tab, a notification is displayed to the associate. If an authenticated omnifacade tab is open in the browser but the associate is on another browser tab, the browser displays the push notification to the associate. If the browser is open but an authenticated omnifacade tab is not open, the browser shows a push notification to the associate. If the browser is not open, push notifications are held until the browser is launched. Store application Store push notifications are sent to all devices (mobile, browser) that are registered with that store. The device's current store is set upon store selection (whether it occurs automatically during login or the user manually changes stores.) Note: Active Omni Store uses Firebase Cloud Messaging (FCM) for sending notifications to devices. FCM is used to pass the push notification payload that is sent by the Store application server to devices. The content of the message payload varies for different push notifications based on business functionality. FCM is a pass-through system that does not store payload information in a database - unless Google Analytics/ BigQuery is enabled for the Firebase account. Enabling Google Analytics allows the firebase customer to run queries over the message/payload content over a period of time for reporting purposes. Currently there is no support for any other 3rd party push notification SDK implementation. If push notifications are enabled for the environment, the following occurs based on whether the Store application is active or not: Toast notification - When the application is active, the user is notified of the notification via a toast notification within the application screen. OS/Browser push notification - When the application is not active, the operating system (for mobile devices) or browser displays the push notification. Bell icon - When the application is active, the badge counter on the bell icon increases to represent a new unread notification. For associates using the Store mobile application and the app is configured in the device's OS configuration to allow notifications, If the Store app is active, and in the foreground, The push notification is presented to the user as a toast notification in the Store application. Some notifications are auto dismissed and some are persisted until the user dismisses them. The notification plays configured beep/notification sound when the app is active, and sound is enabled. The badge counter on the bell icon increases to indicate a new unread notification. If the Store app is closed or minimized, the device's mobile operating system displays the push notification. Notification when the app is inactive plays a configured beep/sound. This beep/sound can be customized using the config UI but not the device settings. Note: If you wish to stop receiving push notifications on a mobile device which has previously been receiving them, you must either change the Store app configuration in the OS' application settings to disable notifications or uninstall the Store application. For associates using the Store application on a browser and the host is configured in the browser's configuration to allow notifications, If an authenticated storefacade tab is open in the browser and the user is viewing that browser tab, The badge counter on the bell icon increases. A toast notification is displayed to the user on the Store application screen. Toast notification can stay on the Store application screen based on the parameter \"Toast Duration (milliseconds)\". If a valid duration is not configured (ex. 0 or null), then the default toast duration is 6 seconds. This configuration is applicable for all the push notifications displayed in the Store application on the browser and on the supported devices. The Toast duration configuration works for curbside pickup notifications, if the '“Enable \"Dismiss\" button for all push notifications“,configuration is not enabled. If the “Enable \"Dismiss\" button for all push notifications“.button configuration is enabled, then the curbside pickup notification persists until dismissed. The notification plays the configured beep/notification sound. If an authenticated storefacade tab is open in the browser but the user is on another browser tab, the browser displays the push notification to the user. If the browser is open but an authenticated storefacade tab is not open, the browser shows a push notification to the user. If the browser is not open, push notifications are held until the browser is launched. Note: The in-app toast notifications that are discussed on this page pertain to push notifications that appear when the Store application is in the foreground. This is not to be confused toast messages that appear in the Store app as associates perform certain activities (which are not related to push notifications.) Those toast messages do not reference the \"Toast Duration (milliseconds)\" configuration and instead auto-dismiss on their own pre-determined times. Note: If you wish to stop receiving push notifications on a browser which has previously been receiving them, you must change the Store's host configuration in the browser settings to disable notifications. The following Store Inventory and Fulfillment processes use push notifications. Some of these always display push notifications and some can be enabled/disabled based on configuration. Refer to these guides for additional information: Customer Pickup & Shipment Order Curbside Pickup Note: Browser connection should be secured to get the push notification. Push Notification Sounds A desired sound file can be assigned to each push notification in the store application so that the store associates get to know the urgency based on the notification sound. The Enable sounds for push notifications flag on the Push Notification tab of the Store Fulfillment Parameter UI controls whether to play assigned or a default sound. The tab Push Notification Sound on the Store Fulfillment Parameters UI can be used to specify the sound file name for a push notification type. The store application is pre-packaged with curbsidenotificationsound.mp3 and defaultnotificationsound.mp3 sounds that can be used for any of the base and custom notifications. A custom sound can be packaged into the store app during the custom app build process. The file name can be specified for the desired notification types. Base or custom sound can be assigned to custom notifications by adding a new notification type to the seed data for notification types. Notification types belong to the system augmentable profile. The custom code can read the sound assigned to the custom notification and pass it to the notification payload sent to the device through notification services. When the application is not active, a tap on the notification or volume button on the device can be used to silence the device’s notification sound. While in the application, a tap on the toast notification can be used to silence the notification sound. Note: If the sound file name is not accessible or is larger than around 30 seconds, the application/device will play the default sound. Note: Most browsers have a limitation of not playing configured sounds when the app is inactive. There may be a default OS sound for notifications played or there may be no sound. Custom Sound Configuration To configure custom sound settings, follow the steps below: Steps Create a folder with a chosen name, such as \"sounds,\" within the assets/plugin-configurator/ directory. Place the desired custom sound files (e.g., .mp3 format) into the \"sounds\" folder. Create hook files for Android, iOS, and browser platforms within the \"hooks\" folder, naming them as follows: custom-android-sound.js custom-ios-sound.js custom-browser-sound.js For Android, use the fs.copy() function in the custom-android-sound.js file to copy the sound files to the appropriate locations, ensuring the sound is played both when the app is active and inactive. Push Notification Custom Sound ConfigurationDirectory Structure assets/plugin-configurator/ config.json sounds curbsidenotificationsound.mp3 hooks custom-android-sound.js custom-ios-sound.js Steps Create a folder with any name, in this case sounds within the assets/plugin-configurator/ Add any custom sound files(.mp3) into the sounds folder. Create hook files for android ,ios and browser within the hooks folder and name it custom-android-sound.js , custom-ios-sound.js , custom-browser-sound.js. A. custom-android-sound.js (For Android, the fs.copy() statement  could be used to copy the sound files to the correct locations in order to play the sound when app is active or inactive.) var shell = require('shelljs'); const config = require('../gulp/config'); const fs = require(\"fs-extra\") console.log(\"***** Preparing Android Before build HOOK *****\"); fs.copy('src/assets/ext/assets/plugin-configurator/sounds/curbsidenotificationsound.mp3', \"platforms/android/res/raw/curbsidenotificationsound.mp3\") .then(() => console.log('Successfully copied curbsidenotificationsound.mp3 to app inactive play path (Android).')) .catch(err => console.error(err)); fs.copy('src/assets/ext/assets/plugin-configurator/sounds/curbsidenotificationsound.mp3', \"platforms/android/assets/www/assets/media/services/hardware-accessors/resources/audio/curbsidenotificationsound.mp3\") .then(() => console.log('Successfully copied curbsidenotificationsound.mp3 to app active play path (Android).')) .catch(err => console.error(err)); • console.log(\"***** END Android Before build HOOK *****\"); B.custom-ios-sound.js (For IOS, the fs.copy() statement could be used to copy the sound files to the correct locations in order to play the sound when app is active only.) var shell = require('shelljs'); const config = require('../gulp/config'); const fs = require(\"fs-extra\") console.log(\"***** Preparing IOS Before build HOOK *****\"); fs.copy('src/assets/ext/assets/plugin-configurator/sounds/curbsidenotificationsound.mp3', \"platforms/ios/www/assets/media/services/hardware-accessors/resources/audio/curbsidenotificationsound.mp3\") .then(() => console.log('Successfully copied curbsidenotificationsound.mp3 to app active play path (IOS).')) .catch(err => console.error(err)); console.log(\"***** END IOS Before build HOOK *****\"); For multiple files: To copy multiple files, we can add multiple fs.copy() statements within the same hook files custom-android-sound.js or custom-ios-sound.js. For instance, fs.copy('src/assets/ext/assets/plugin-configurator/sounds/curbsidenotificationsound.mp3', \"platforms/ios/www/assets/media/services/hardware-accessors/resources/audio/curbsidenotificationsound.mp3\") then(() => console.log('Successfully copied curbsidenotificationsound.mp3 to app active play path (Android).')) . catch(err => console.error(err)); fs.copy('src/assets/ext/assets/plugin-configurator/sounds/sample.mp3', \"platforms/ios/www/assets/media/services/hardware-accessors/resources/audio/sample.mp3\") . then(() => console.log('Successfully copied sample.mp3 to app active play path (Android).')) . catch(err => console.error(err)); fs.copy('src/assets/ext/assets/plugin-configurator/sounds/pickuporder.mp3', \"platforms/ios/www/assets/media/services/hardware-accessors/resources/audio/pickuporder.mp3\") . then(() => console.log('Successfully copied pickuporder.mp3 to app active play path (Android).')) . catch(err => console.error(err)); C.custom-browser-sound.js : To copy multiple / single file for browser, we can use either way to copy multiple or single file for any platform. var shell = require('shelljs'); const config = require('../gulp/config'); const fs = require(\"fs-extra\") console.log(\"***** Preparing Browser Before build HOOK *****\"); fs.readdir('src/assets/ext/assets/plugin-configurator/sounds/', (err, files) => { if (err) console.log(err); else { console.log(\"\\nCurrent directory filenames:\"); files.forEach(file => { console.log(file); fs.copy('src/assets/ext/assets/plugin-configurator/sounds/'+file, \"platforms/browser/www/assets/media/services/hardware-accessors/resources/audio/\"+file) .then(() => console.log('Successfully copied '+file+' to app active play path (Browser).'+\"platforms/browser/www/assets/media/services/hardware-accessors/resources/audio/\"+file)) .catch(err => console.error(err)); }) } }); console.log(\"***** END Browser Before build HOOK *****\"); 4.Create another file with the name config-ios.xml within the overwrite folder. a.config-ios.xml (For IOS, to play the sound when app is inactive, <resource-file/> tags could be added with the corresponding src and target locations.) <platform name=\"ios\"> <resource-file src=\"src/assets/ext/assets/plugin-configurator/sounds/curbsidenotificationsound.mp3\" target=\"curbsidenotificationsound.mp3\"/> For multiple files: To copy multiple files, we can add multiple <resource-file/> tags within the same file config-ios.xml. For instance, <platform name=\"ios\"> <resource-file src=\"src/assets/ext/assets/plugin-configurator/sounds/curbsidenotificationsound.mp3\" target=\"curbsidenotificationsound.mp3\"/> <resource-file src=\"src/assets/ext/assets/plugin-configurator/sounds/sample.mp3\" target=\"sample.mp3\"/> <resource-file src=\"src/assets/ext/assets/plugin-configurator/sounds/pickuporder.mp3\" target=\"pickuporder.mp3\"/> 5.Mention the locations of the hook files under Hooks and .xml files under OverwriteFile in config.json file. { \"Plugins\":[], \"OverwriteFile\": [ { \"Type\":\"AddContent\", \"ReplaceContentWith\":\"<platform name=\\\"ios\\\">\", \"ToFilePath\":\"config.xml\", \"FromFilePath\":\"assets/plugin-configurator/overwrite/config-ios.xml\" } ], \"Hooks\": [ { \"Platform\":\"ios\", \"LifeCycle\":\"before_build\", \"FromFilePath\":\"assets/plugin-configurator/hooks/custom-ios-sound.js\" }, { \"Platform\":\"android\", \"LifeCycle\":\"before_build\", \"FromFilePath\":\"assets/plugin-configurator/hooks/custom-android-sound.js\" }, { \"Platform\":\"browser\", \"LifeCycle\":\"before_build\", \"FromFilePath\":\"assets/plugin-configurator/hooks/custom-browser-sound.js\" } ] } 6 .To play the sound when app is active, JS layer changes are required which will be available in base as part of the 21.1 market release. Sample extension folder with custom sound as a start up: <!doctype html> <html lang=\"en\"> <head> <meta charset=\"utf-8\"> <script src=\"../styles/style.js\"></script> <!-- <script src=\"ma-extension-client.js\" type=\"text/javascript\"></script> --> <script type=\"text/javascript\"> var mobileApp = !!window.cordova; (function (d, script) { script = d.createElement('script'); script.type = 'text/javascript'; script.async = true; script.onload = function () { console.log(\"ma-extension-client.js is loaded...\"); }; // Below line works for browser and mobile(ios) builds. The logic takes the exact prefix as required for both. No need of mobile/web check. script.src = (window.location.origin + window.location.pathname).split('assets')[0] + 'assets/ma-extension-client.js'; d.getElementsByTagName('head')[0].appendChild(script); }(document)); function getCustomerDetails() { console.log(\"Executing getCustomerDetails\"); MAExtension.POSUtil.returnActions.getCustomerDetails({}, function(message){ console.log(\"Received getCustomerDetails\"); console.log(message.responseData); }); } function setCustomerDetails() { var customer = { name: \"Easwar K\", desc: \"Set from custom code to just test. The dats is not in a formatted manner..\" }; console.log(\"Running setCustomerDetails with:\"); console.log(customer); MAExtension.POSUtil.actions.setCustomerDetails(customer); } function setOrder() { var order = { name: \"Dummy Order\", desc: \"Set from custom code to just test. The dats is not in a formatted manner..\" }; console.log(\"Running setOrder with:\"); console.log(order); MAExtension.POSUtil.actions.setOrder(order); } function getOrder() { console.log(\"Exectuing getOrder\"); MAExtension.POSUtil.returnActions.getOrder({}, function(message){ console.log(\"Received getOrder\"); console.log(message.responseData); }); } function getSelectedOrderLines() { console.log(\"Executing getSelectedOrderLines\"); MAExtension.POSUtil.returnActions.getSelectedOrderLines({}, function(message){ console.log(\"Received getSelectedOrderLines\"); console.log(message.responseData); }); } function setSelectedOrderLines() { var lines = [{ name: \"Dummy Order Line\", desc: \"Set from custom code to just test. The dats is not in a formatted manner..\" }]; console.log(\"Executing setSelectedOrderLines with :\"); console.log(lines); MAExtension.POSUtil.actions.setSelectedOrderLines(lines); } function getPOSSettingByKey() { console.log(\"Executing getPOSSettingByKey with:\"); var key = 'selectedCashDrawer'; console.log(key); MAExtension.POSUtil.returnActions.getPOSSettingByKey(key, function(message){ console.log(\"Received getPOSSettingByKey\"); console.log(message.responseData); }); } function getPaymentDetails() { console.log(\"Executing getPaymentDetails\"); MAExtension.POSUtil.returnActions.getPaymentDetails({}, function(message){ console.log(\"Received getPaymentDetails\"); console.log(message.responseData); }); } function jumpToScreen() { console.log(\"Executing jumpToScreen\"); MAExtension.POSUtil.actions.jumpToScreen(); } function setExtensionDataAttributes(data) { console.log(\"Executing setExtensionDataAttributes with:\"); console.log(data); MAExtension.POSUtil.actions.setExtensionDataAttributes(data); } function setCustomerActive(data) { console.log(\"Executing setCustomerActive with:\"); console.log(data); MAExtension.POSUtil.actions.setCustomerActive(data); } </script> </head> <body style=\"background-color: #1f2129;\"> <div id=\"content\" class=\"common-util\"> <div id=\"showTotal\"></div> <div class=\"footer\"> <button id=\"btn\" class=\"btn btn-neutral\" onclick=\"getCustomerDetails()\">Test getCustomerDetails</button> <button id=\"btn\" class=\"btn btn-neutral\" onclick=\"setCustomerDetails()\">Test setCustomerDetails</button> <button id=\"btn\" class=\"btn btn-neutral\" onclick=\"setOrder()\">Test setOrder</button> <button id=\"btn\" class=\"btn btn-neutral\" onclick=\"getOrder()\">Test getOrder</button> <button id=\"btn\" class=\"btn btn-neutral\" onclick=\"getSelectedOrderLines()\">Test getSelectedOrderLines</button> <button id=\"btn\" class=\"btn btn-neutral\" onclick=\"setSelectedOrderLines()\">Test setSelectedOrderLines</button> <button id=\"btn\" class=\"btn btn-neutral\" onclick=\"getPOSSettingByKey()\">Test getPOSSettingByKey</button> <button id=\"btn\" class=\"btn btn-neutral\" onclick=\"getPaymentDetails()\">Test getPaymentDetails</button> <button id=\"btn\" class=\"btn btn-neutral\" onclick=\"jumpToScreen()\">Test jumpToScreen</button> <button id=\"btn\" class=\"btn btn-neutral\" onclick=\"setExtensionDataAttributes(5)\">Test setExtensionDataAttributes</button> <button id=\"btn\" class=\"btn btn-neutral\" onclick=\"setCustomerActive('test')\">Test setCustomerActive</button> </div> </div> </body> </html> Deep Linking The user can navigate to a page within the Store application when clicking on a push notification (deep linking.) The following deep linking is supported for Store push notifications: Mobile Browser Toast notification Yes Yes OS/Browser push notification Yes No Bell icon Yes Yes Deep linking involves navigating to a particular page, and also passing any optional page-specific parameters that the page supports. Custom Notifications Retailers can create custom Store push notifications and configure them to deep link to an exposed base page ID, or to a custom page that they've created. For the list of base page IDs which are exposed for deep linking from push notifications along with any page-specific parameters they support, refer to the 'Base page IDs that support deep linking' section of the Store - External Deep Linking guide. (The same base page IDs apply to both custom push notifications and external deep linking.) Refer to the sample custom push notification below which deep links to a base page ID. In this example, the base page ID (\"workflow\") is \"work-default-list\" and the optional page-specific parameters are \"fulfillmentType\", \"documentType\" and \"curbSideFilter.\" For custom notifications the operation must be set to \"common-notification\" and the isCustomNotification must be set to true. POST: {{url}}/fulfillment/api/fulfillment/fulfillment/pushNotification Sample Request JSON { \"OrgId\": \"DUMMY-US\", \"LocationId\": \"STR1-123-US\", \"NotificationSound\": \"default\", \"NotificationPriority\": \"high\", \"Title\": \"New custom pick notification\", \"Body\": \"New custom pick notification\", \"Operation\": \"common-notification\", \"NotificationPayload\": { \"Title\": \"New custom pick notification\", \"Data\": \"New custom pick notification\", \"PagePayload\": { \"workFlow\": \"pick\" }, \"PageId\": \"work-default-list\", \"IsCustomNotification\": true } } Note: In the request payload, change the \"workFlow\" and \"PageId\" based on the requirement. Sample response JSON { \"success\": true, \"header\": null, \"data\": null, \"messageKey\": null, \"message\": null, \"errors\": [], \"exceptions\": [], \"messages\": { \"Message\": [], \"Size\": 0 }, \"rootCause\": null, \"requestUri\": null, \"statusCode\": \"OK\" } The Push Notification service is used to send the custom notification to the store. { \"OrgId\": \"FB43-US\", \"LocationId\": \"STR1-FB43-US\", \"NotificationSound\": \"default\", \"NotificationPriority\": \"high\", \"Title\": \"New custom pick notification\", \"Body\": \"New custom pick notification\", \"Operation\": \"common-notification\", \"NotificationPayload\": { \"Title\": \"New custom pick notification\", \"Data\": \"New custom pick notification\", \"PagePayload\": { \"workFlow\": \"pick\", \"fulfillmentType\": \"ShipToAddress\" }, \"PageId\": \"work-default-list\", \"IsCustomNotification\": true } } Contact Center & Customer Engagement Customer Engagement in the contact center supports push notifications for two-way texting. When a text message is received from a customer, it is pushed to the agent's browser without the need for a manual refresh of the screen. Push notifications in the contact center are enabled at the environmental level through Firebase configuration. Push notifications are supported for contact centers in Chrome, Firefox, and Safari browsers. Browsers must not be in incognito or private mode to receive push notifications and users must click on \"Allow\" or \"Accept\" notifications. Contact your MA Services team to configure Firebase and push notifications for your environment. See Firebase account for Push Notifications for details. Services The API listed in the following table is referenced in this document. Refer to the API documentation for additional details on the service. Service Component Group Service Endpoint Push Notification Fulfillment fulfillment-process-controller /fulfillment/api/fulfillment/fulfillment/pushNotification"
}