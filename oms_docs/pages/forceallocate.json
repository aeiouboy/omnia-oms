{
  "id": "2641921",
  "permalink": "forceallocate",
  "title": "Force Allocate",
  "type": "topic",
  "level": 4,
  "path": "Manhattan Active® Omni/Order Management/Process & Configuration Guides/Order Promising/Force Allocate",
  "raw_item": {
    "id": "2641921",
    "text": "Force Allocate",
    "title": "Force Allocate",
    "permalink": "forceallocate",
    "leaf": false,
    "droppable": true,
    "expanded": true,
    "closed": true,
    "visible": true,
    "editable": true,
    "type": "topic",
    "topicType": "0",
    "status": "1",
    "iconCls": "icon-topic",
    "cls": "",
    "folder_id": "129588",
    "parent": "f;129588",
    "created_date": "1602560604",
    "modified_date": "1751446886",
    "instructor_id": null,
    "loaded": true,
    "haschildren": false,
    "callout": "0",
    "order": "8"
  },
  "success": true,
  "content": "\r\n\r\n\r\n<div class=\"hiq-page-wrap\">\r\n<div class=\"hiq-t-wrap\">\r\n\t\t\r\n  \t  <div class=\"hiq-t \">\r\n\t\t\t\t<ul class=\"breadcrumbs\"><li><a class=\"breadcrumb-links\" hqid=\"1788908\"  href=\"/home\">Home</a></li> <li><span>&rsaquo;&rsaquo;</span><a hqid=\"3500940\" href=\"/omni\" class=\"breadcrumb-links\">Manhattan Active® Omni</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"2158393\" href=\"/order-management\" class=\"breadcrumb-links\">Order Management</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"2158394\" href=\"/process-configuration-guides\" class=\"breadcrumb-links\">Process & Configuration Guides</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"2158972\" href=\"/order-promising\" class=\"breadcrumb-links\">Order Promising</a></li><li> <span>››</span>Force Allocate</li></ul>  \t\r\n\t\t<h2>Force Allocate</h2>\r\n\r\n<p></p>\r\n\r\n<a href=\"/substitution-during-allocation\" hqid=\"2651273\">Previous</a>&nbsp;I&nbsp;<a href=\"/forecast-reservation\" hqid=\"3575064\">Next</a>\r\n<p>&nbsp;</p>\r\n\r\n<div class=\"info\"><ul><li><a href=\"/forceallocate$overview\">Overview</a></li><li><a href=\"/forceallocate$process-flow\">Process Flow</a><ul><li><a href=\"/forceallocate$promising-process\">Promising Process</a></li><li><a href=\"/forceallocate$evaluation-of-fixed-ship-from-vs-regular-promising-flow\">Evaluation of \"Fixed ship from\" vs. Regular Promising Flow</a></li><li><a href=\"/forceallocate$reservation-process\">Reservation Process</a></li><li><a href=\"/forceallocate$form-promising-response\">Form Promising Response</a></li><li><a href=\"/forceallocate$order-release\">Order Release</a></li><li><a href=\"/forceallocate$order-ship-short\">Order Ship & Short</a></li><li><a href=\"/forceallocate$inventory-rise-and-drop\">Inventory Rise and Drop</a></li></ul></li><li><a href=\"/forceallocate$how-to-s\">How To's?</a><ul><li><a href=\"/forceallocate$how-to-set-up-force-allocate-in-the-fulfillment-optimization-config\">How to set up Force Allocate in the Fulfillment Optimization Config?</a></li></ul></li><li><a href=\"/forceallocate$implementation-flavors\">Implementation Flavors</a><ul><li><a href=\"/forceallocate$as-a-retailer-i-want-to-use-force-allocate-as-my-last-resort\">As a retailer, I want to use force allocate as my last resort</a></li><li><a href=\"/forceallocate$can-few-lines-nbsp-of-my-order-be-force-allocated-mixed-bag-scenario\">Can few lines&nbsp;of my order be force allocated (Mixed bag scenario)?</a></li><li><a href=\"/forceallocate$how-to-force-allocate-a-pick-up-at-store-nbsp-line-s\">How to force allocate a pick up at store&nbsp;line(s)</a></li><li><a href=\"/forceallocate$force-allocate-an-inventory-less-nbsp-item\">Force allocate an inventory less&nbsp;item</a></li><li><a href=\"/forceallocate$how-to-determine-if-line-s-are-force-allocated-by-promising\">How to determine if line(s) are force allocated by promising?</a></li></ul></li><li><a href=\"/forceallocate$related-articles\">Related Articles</a></li></ul></div>\r\n\r\n<h3><a name=\"overview\" id=\"overview\"></a>Overview</h3>\r\n\r\n<p>Force allocation or reservation provides an opportunity for the retailer to allocate the order(s) irrespective of the inventory levels at a location. There can be multiple use cases for this:</p>\r\n\r\n<ul>\r\n\t<li>There can be locations in the system for which the inventory might not be maintained. For example, a retailer may choose to not maintain the inventory for a vendor location. Virtual reservations are performed against such a location.</li>\r\n\t<li>The host system can decide if the order line needs to be forcefully allocated against a location. This is to handle exception scenarios such as inaccurate inventory positions in the system. In this case, force allocation is performed against such a location.</li>\r\n\t<li>Force allocation can also be achieved through promising configuration. This is used as a last resort option when the configuration is not able to allocate orders because of inventory constraints.</li>\r\n</ul>\r\n\r\n<p>Force allocation bypasses the inventory and capacity check in the promising process and allocates, provided the scheduling is successful for the location. When a location is at full capacity and an order is&nbsp;force allocated from this location, the&nbsp;order will bypass the capacity and allocate to the store.&nbsp;If you don't force allocate, it will move to backorder as expected. Refer <a href=\"https://omni.helpdocsonline.com/howpromisingworks$apply-constraints\">How Promising works</a> for more details. The following are the factors/attributes that play an important&nbsp;role in force allocation.</p>\r\n\r\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width:1350px;\">\r\n\t<thead>\r\n\t\t<tr>\r\n\t\t\t<th scope=\"col\" style=\"text-align: center; width: 301px;\">Attributes</th>\r\n\t\t\t<th scope=\"col\" style=\"text-align: center; width: 1045px;\">When it is used?</th>\r\n\t\t</tr>\r\n\t</thead>\r\n\t<tbody>\r\n\t\t<tr>\r\n\t\t\t<td style=\"width: 287px;\">\r\n\t\t\t<ul>\r\n\t\t\t\t<li>Order Line Promising Info - Ship from Location ID</li>\r\n\t\t\t\t<li>Order Line Promising Info - Is Force Allocate</li>\r\n\t\t\t\t<li>Order Line Promising Info - Delivery Method</li>\r\n\t\t\t</ul>\r\n\t\t\t</td>\r\n\t\t\t<td style=\"width: 1031px;\">\r\n\t\t\t<ul>\r\n\t\t\t\t<li>This is used in \"Fixed ship from\" flow. The retailer passes the Ship from Location ID for all the line(s). If Inventory is not maintained or inaccurate, retailer can send \"Is Force Allocate\" as true at the Order Line Promising info section as part of the Order import.</li>\r\n\t\t\t\t<li>This option works only when \"Ship from Location ID\" is populated for all the line(s) and delivery method is not \"Pick up at store\" for all the line(s).</li>\r\n\t\t\t</ul>\r\n\r\n\t\t\t<div class=\"tip\">Note :&nbsp;To make the BOPIS functional with the IsForceAllocate flag, set <strong data-renderer-mark=\"true\">isEnableForceAllocateForB2BLine</strong> to true in the promising parameters.&nbsp;When the flag is enabled, it checks for the 'ShipFromLocationId' in the OrderLinePromisingInfo, regardless of the DeliveryMethodId. If ShipFromLocationId is populated along with IsForceAllocate - BOPIS line also gets forceallocated.</div>\r\n\r\n\t\t\t<div class=\"warning\"><span style=\"color:#4e5f70;\">For Line(s) with Delivery Method - Pick up at store, force allocate passed in the request or force allocate on the prioritization tier does not&nbsp;apply.</span></div>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<td style=\"width: 287px;\">\r\n\t\t\t<ul>\r\n\t\t\t\t<li>Fulfillment Optimization Config - Force Allocate at Prioritization Tier level.</li>\r\n\t\t\t</ul>\r\n\t\t\t</td>\r\n\t\t\t<td style=\"width: 1031px;\">\r\n\t\t\t<ul>\r\n\t\t\t\t<li>This is used when a retailer wants to allocate the order(s) as a last resort option when the configuration is not able to allocate orders because of inventory constraints.</li>\r\n\t\t\t\t<li>Used in Regular promising flow (Non Retail/B2B flow).</li>\r\n\t\t\t\t<li>If Ship from Location ID is not populated for all the line(s) or Delivery method is \"Pick up at store\" for any one of the line(s) then \"Is Force Allocate\" sent in the Order Line Promising info section is completely ignored, and the force allocate flag defined in the prioritization tier overrides the order line promising info section.</li>\r\n\t\t\t</ul>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<td style=\"width: 287px;\">\r\n\t\t\t<ul>\r\n\t\t\t\t<li>Location Attribute \"Maintain On Hand, Maintain ASN, Maintain PO\" is false</li>\r\n\t\t\t</ul>\r\n\t\t\t</td>\r\n\t\t\t<td style=\"width: 1031px;\">\r\n\t\t\t<ul>\r\n\t\t\t\t<li>This is used when a retailer does not&nbsp;maintain inventory for the Vendor/Supplier location(s) but wants to allocate an order to the location.</li>\r\n\t\t\t\t<li>This is also known as Virtual Reservation.</li>\r\n\t\t\t</ul>\r\n\r\n\t\t\t<div class=\"warning\"><span style=\"color:#4e5f70;\">Force Allocate on the Inventory Location attributes is not supported. This field is deprecated. There is no way to set location to perform Force Allocate always.</span></div>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t</tbody>\r\n</table>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<h3><a name=\"process-flow\" id=\"process-flow\"></a>Process Flow</h3>\r\n\r\n<p><div class=\"toggle_outerdiv\"><p class=\"toggle_div\"><a href=\"#tg-1\" class=\"toggle-content\"><span class=\"toggle-title\">Force Allocate - Process flow</span></a></p><div id=\"tg-1\"><p><img align=\"left\" border=\"2\" class=\"\" src=\"https://dzf8vqv24eqhg.cloudfront.net/userfiles/4665/7671/ckfinder/images/qu/ForceAllocate.png?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9kemY4dnF2MjRlcWhnLmNsb3VkZnJvbnQubmV0L3VzZXJmaWxlcy80NjY1Lzc2NzEvY2tmaW5kZXIvaW1hZ2VzL3F1L0ZvcmNlQWxsb2NhdGUucG5nIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzU0NzUxNjY2fX19XX0_&Signature=a58dZRGpd001ai1P~mnhfnHZb5sTOSaLajvkhi7Jn6ksqeNFY2jmKvEi~G-Xj3YYgqStweQH~~ENt1St0mR7Hh79G4fxHsmEDPOcWhRqcCCo8MlPodHFSu4VFDytSkR2Ti8OyecDi6fIXo9Km5e4hXiqL8o3K60rGeT1ORhDqdmHWwSm-DOn6NknUBognKpxwoyk6hK8~zrfppnpCFKLrj0x8cZeKURtMvOUAMoIppvOBpjQrJ3mBvfmWsGN~RE5eq28wrxGRXaTyl0aA8aJZMXvaeybR2moLkveq4wliW5Dt0vAWI7dI0awLvIFpIB1uDgx3MjKMwglog9edWDhjQ__&Key-Pair-Id=K2TK3EG287XSFC\" style=\"margin-right:5px;padding:5px;\" /></p>\r\n\r\n\r\n</div></div></p>\r\n\r\n<h5><a name=\"promising-process\" id=\"promising-process\"></a>Promising Process</h5>\r\n\r\n<ul>\r\n\t<li><strong>Promising Request:</strong> Following are the attributes in the Promising request that&nbsp;determine if Force allocate needs to be triggered. Refer to a sample promising request\r\n\r\n\t<ul>\r\n\t\t<li>Delivery Method</li>\r\n\t\t<li>Is Force Allocate&nbsp;</li>\r\n\t\t<li>Ship From Location ID</li>\r\n\t</ul>\r\n\t</li>\r\n</ul>\r\n\r\n<div class=\"computer_code\" style=\"margin-left: 40px;\">{<br>\r\n&nbsp; \"PromisingRequestId\": \"Request001\",<br>\r\n&nbsp; \"RequestType\": \"Optimization\",<br>\r\n&nbsp; \"StrategyName\": \"ConfigID1\",<br>\r\n&nbsp; \"PromisingRequestDetail\": [<br>\r\n&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"PromisingRequestDetailId\": \"1\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>\"ShipFromLocationId\": \"DC 1\",</strong><br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"DeliveryMethodId\": \"shiptoAddress\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>\"IsForceAllocate\": true,</strong><br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ItemId\": \"Item 1\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"Quantity\": 10<br>\r\n&nbsp;&nbsp;&nbsp; },<br>\r\n&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"PromisingRequestDetailId\": \"2\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>\"ShipFromLocationId\": \"DC 2\",</strong><br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"DeliveryMethodId\": \"shiptoAddress\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>\"IsForceAllocate\": true,</strong><br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ItemId\": \"Item 2\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"Quantity\": 10<br>\r\n&nbsp;&nbsp;&nbsp; }<br>\r\n&nbsp; ]<br>\r\n}</div>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<h5><a name=\"evaluation-of-fixed-ship-from-vs-regular-promising-flow\" id=\"evaluation-of-fixed-ship-from-vs-regular-promising-flow\"></a><strong><a id=\"Evaluation of B2B vs Regular Promising Flow\" name=\"Evaluation of B2B vs Regular Promising Flow\"></a></strong>Evaluation of \"Fixed ship from\" vs. Regular Promising Flow</h5>\r\n\r\n<ul>\r\n\t<li>If Ship from Location ID is populated for all the Promising request detail and none of the Delivery method is \"Pick up at store\" then \"Fixed ship from\" promising flow is triggered.</li>\r\n\t<li>If all the order lines do not contain Ship from location ID or if \"Pick up at store\" delivery method is populated for atleast one order line, then the regular promising flow is triggered.. In this case, the Force allocate flag sent on the promising request is ignored.</li>\r\n\t<li>When \"Is Force Allocate\" is set to true on the promising request, then promising always looks only for On-hand supply record, irrespective of the future supply (PO ID, PO Line ID) sent in the promising request.</li>\r\n</ul>\r\n\r\n<p><strong>Fixed ship from Promising Flow</strong></p>\r\n\r\n<ul>\r\n\t<li>The source sent in the Promising request \"Ship from location ID\" is used for promising irrespective of it being available as part of the Fulfillment Optimization Config - Source/Tiers.</li>\r\n\t<li>Force allocation bypasses the inventory and capacity check in the promising process and allocates provided Scheduling is successful for the location.</li>\r\n\t<li>For all the line(s) with Force allocate as True, verify if the Ship from location ID maintains Inventory Location attributes such as Maintain On Hand, PO, and ASN.</li>\r\n\t<li>When \"Is Force Allocate\" is set to true on the promising request, then promising always looks only for On-hand supply record, irrespective of the future supply (PO ID, PO Line ID) sent in the promising request.</li>\r\n\t<li>If yes, set the Force allocate as True for the corresponding reservation request detail.</li>\r\n\t<li>\r\n\t<p>If supply is not maintained as part of the Virtual Reservation flow, then reservation request is not generated and&nbsp;\"Is Virtual\" is updated as true in the <a href=\"/forceallocate$Virtual Reservation\">Promising response</a> directly. Use case -&nbsp; When retailers do&nbsp;not maintain inventory for the vendor locations, the Virtual reservation is performed. If the Vendor location (\"Ship from Location ID\")&nbsp;is provided in the Promising request and Force allocate is set as true, and if&nbsp;the vendor does not maintain inventory, no reservation request is created. This is considered&nbsp;as a virtual reservation. But other constraints such as scheduling are done to check the feasibility of the location.</p>\r\n\t</li>\r\n</ul>\r\n\r\n<p><strong>Regular Promising Flow</strong></p>\r\n\r\n<ul>\r\n\t<li>For regular promising flow, the&nbsp;Force allocate flag sent on the promising request is ignored.</li>\r\n\t<li>\r\n\t<p>The Force allocate flag set on the <a href=\"/forceallocate$Tier - Force allocate\">prioritization tiers</a> (Fulfillment Optimization config) will take precedence. If no prioritization tiers are defined or the Force allocate flag is not set on the prioritization tier, then Force allocate will not be triggered even if the force allocate flag is sent on the Promising request. This is used as a last resort option when the configuration is not able to allocate orders because of inventory constraints.</p>\r\n\t</li>\r\n</ul>\r\n\r\n<div class=\"tip\"><strong>Note</strong>: The same promising request detail can be force allocated and normal allocated against two different locations depending upon which priority rule was picked. For example, if the first priority tier is a normal rule, then part of the request detail may get allocated from the location determined from that priority. If the second priority tier is a force allocate rule, the rest of the order line can be force allocated from the location determined from the second priority. In this case, two reservation details are created. The first reservation detail has ‘is Force Allocate’ flag set to false, while the second one is set as true.</div>\r\n\r\n<div class=\"warning\"><span style=\"color:#4e5f70;\"><strong>Note</strong>: For Line(s) with Delivery Method - Pick up at store, Force allocate passed in the request or force allocate on the prioritization tier does not apply.</span></div>\r\n\r\n<p><strong>Which Location is used for Force Allocation?</strong></p>\r\n\r\n<ul>\r\n\t<li>If the source is set as \"List of DCs\" and Force allocate is set on the Tiers assuming&nbsp;that the source locations and Tier locations are matching,&nbsp;then the first DC which passes scheduling is taken up for allocation.</li>\r\n\t<li>If the source is set as \"ATC View\" with no Optimization available,&nbsp;and Force allocate is set on the Tiers assuming that&nbsp;the source locations and Tier locations are matching, then the first location which passes scheduling is taken up for allocation.</li>\r\n\t<li>If the source is set as \"ATC View\"&nbsp;with Optimization available,&nbsp;and Force allocate is set on the Tiers assuming that&nbsp;the source locations and Tier locations are matching,&nbsp;then the cheapest location which passes scheduling is taken up for allocation.</li>\r\n\t<li>\r\n\t<div>Merge shipment: Merge at the highest ranked source. When the consolidation facility is passed on the promising request, the system will allocate against the consolidation location.</div>\r\n\t</li>\r\n</ul>\r\n\r\n<div>&nbsp;</div>\r\n\r\n<div><strong>Substitution</strong></div>\r\n\r\n<div>&nbsp;</div>\r\n\r\n<div>When \"Force Allocate\" attribute is enabled, items&nbsp;are allocated based on the type of substitution</div>\r\n\r\n<ul>\r\n\t<li>\r\n\t<div>If Substitution&nbsp;Type is Immediate then Substituted&nbsp;Item is allocated</div>\r\n\t</li>\r\n\t<li>\r\n\t<div>If Substitution&nbsp;Type is OnBackOrder then Original Item is allocated</div>\r\n\t</li>\r\n</ul>\r\n\r\n<p>The Force allocate flag (if set on the Tier) will be passed to the corresponding Reservation request detail.</p>\r\n\r\n<p>Refer to the below section for an example</p>\r\n\r\n<p style=\"margin-left: 40px;\"><div class=\"toggle_outerdiv\"><p class=\"toggle_div\"><a href=\"#tg-2\" class=\"toggle-content\"><span class=\"toggle-title\">Prioritization Tier - Force allocate (Example)</span></a></p><div id=\"tg-2\"><p>Consider the following Tier set up</p>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 800px;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Location Group</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Locations</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Force Allocate</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td>Group 1</td>\n\t\t\t<td>DC 1, DC 2, DC 3, DC 4</td>\n\t\t\t<td>False</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>Group 2</td>\n\t\t\t<td>DC 1, DC 2, DC 3, DC 4</td>\n\t\t\t<td>True</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<ul>\n\t<li>\n\t<p>Based on the above tier, promising will try allocations from Group 1 location(s) with force allocate as False. This will go through regular Inventory, Capacity and Scheduling checks. If there are any unfulfilled units from Tier 1 evaluation then Tier 2 group (Group 1 locations) are evaluated with Force allocate as True. In Tier 2 run, only Scheduling check is performed. Inventory and Capacity check is skipped.</p>\n\t</li>\n</ul>\n\n<p>Consider the below Promising request</p>\n\n<div class=\"computer_code\">{<br />\n&nbsp; &quot;PromisingRequestId&quot;: &quot;Request001&quot;,<br />\n&nbsp; &quot;RequestType&quot;: &quot;Optimization&quot;,<br />\n&nbsp; &quot;PromisingConfigName&quot;: &quot;ConfigID1&quot;,<br />\n&nbsp; &quot;PromisingRequestDetail&quot;: [<br />\n&nbsp;&nbsp;&nbsp; {<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;PromisingRequestDetailId&quot;: &quot;1&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ItemId&quot;: &quot;Item 1&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Quantity&quot;: 20<br />\n&nbsp;&nbsp;&nbsp; },<br />\n&nbsp;&nbsp;&nbsp; {<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;PromisingRequestDetailId&quot;: &quot;2&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ItemId&quot;: &quot;Item 2&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Quantity&quot;: 10<br />\n&nbsp;&nbsp;&nbsp; },<br />\n&nbsp;&nbsp;&nbsp; {<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;PromisingRequestDetailId&quot;: &quot;3&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ItemId&quot;: &quot;Item 3&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Quantity&quot;: 10<br />\n&nbsp;&nbsp;&nbsp; },<br />\n&nbsp; ]<br />\n}</div>\n\n<p><strong>Promising process</strong></p>\n\n<ul>\n\t<li>Tier 1 evaluation (Force allocate is False). DC 2, DC 3, DC 4 doesn&#39;t have enough supply for Item 1, Item 2, Item 3</li>\n</ul>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 700px;\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td>Promising Detail</td>\n\t\t\t<td>Item</td>\n\t\t\t<td>Requested Quantity</td>\n\t\t\t<td>Allocated quantity</td>\n\t\t\t<td>Allocated location</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>1</td>\n\t\t\t<td>Item 1</td>\n\t\t\t<td>20</td>\n\t\t\t<td>10</td>\n\t\t\t<td>DC 1</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>2</td>\n\t\t\t<td>Item 2</td>\n\t\t\t<td>10</td>\n\t\t\t<td>0</td>\n\t\t\t<td>&nbsp;</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>3</td>\n\t\t\t<td>Item 3</td>\n\t\t\t<td>10</td>\n\t\t\t<td>0</td>\n\t\t\t<td>&nbsp;</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<ul>\n\t<li>Tier 2 evaluation (Force allocate is True). Irrespective of supply level, Items are allocated against the location(s)</li>\n</ul>\n\n<ul>\n</ul>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 700px;\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td>Promising Detail</td>\n\t\t\t<td>Item</td>\n\t\t\t<td>Requested Quantity</td>\n\t\t\t<td>Allocated quantity</td>\n\t\t\t<td>Allocated location</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>1</td>\n\t\t\t<td>Item 1</td>\n\t\t\t<td>10</td>\n\t\t\t<td>10</td>\n\t\t\t<td>DC 2</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>2</td>\n\t\t\t<td>Item 2</td>\n\t\t\t<td>10</td>\n\t\t\t<td>10</td>\n\t\t\t<td>DC 3</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>3</td>\n\t\t\t<td>Item 3</td>\n\t\t\t<td>10</td>\n\t\t\t<td>10</td>\n\t\t\t<td>DC 4</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>&nbsp;</p>\n\n<p><strong>Form Reservation Request - </strong></p>\n\n<ul>\n\t<li>Reservation detail is formed for every unique allocated location for a Promising detail. In the above case, two Reservation details are created for Promising detail 1 as it is allocated to DC 1 and DC 2.</li>\n\t<li>For Reservation request detail 1 (DC 1) - Force allocate flag is set as false as Tier 1 &quot;Force allocate&quot; flag is false.</li>\n\t<li>For Reservation request detail 2 (DC 2), Reservation request detail 3 (DC 3), Reservation request detail 4 (DC 4), - Force allocate flag is set as true as Tier 2 &quot;Force allocate&quot; flag is true.</li>\n</ul>\n\n<div class=\"computer_code\">{<br />\n&nbsp; &quot;RequestId&quot;: &quot;Request001&quot;,<br />\n&nbsp; &quot;ReservationRequestDetail&quot;: [<br />\n&nbsp;&nbsp;&nbsp; {<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ReservationRequestDetailId&quot;: &quot;1&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Quantity&quot;: 10,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ItemId&quot;: &quot;Item 1&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;LocationId&quot;: &quot;DC 1&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>&quot;IsForceAllocated&quot;: false</strong><br />\n&nbsp;&nbsp;&nbsp; },<br />\n&nbsp;&nbsp;&nbsp; {<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ReservationRequestDetailId&quot;: &quot;2&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Quantity&quot;: 10,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ItemId&quot;: &quot;Item 1&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;LocationId&quot;: &quot;DC 2&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>&quot;IsForceAllocated&quot;: true</strong><br />\n&nbsp;&nbsp;&nbsp; },<br />\n&nbsp;&nbsp;&nbsp; {<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ReservationRequestDetailId&quot;: &quot;3&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Quantity&quot;: 10,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ItemId&quot;: &quot;Item 2&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;LocationId&quot;: &quot;DC 3&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>&quot;IsForceAllocated&quot;: true</strong><br />\n&nbsp;&nbsp;&nbsp; },<br />\n&nbsp;&nbsp;&nbsp; {<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ReservationRequestDetailId&quot;: &quot;4&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Quantity&quot;: 10,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ItemId&quot;: &quot;Item 3&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;LocationId&quot;: &quot;DC 4&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>&quot;IsForceAllocated&quot;: true</strong><br />\n&nbsp;&nbsp;&nbsp; }<br />\n&nbsp; ]<br />\n}</div>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;</p>\n</div></div></p>\r\n\r\n<h5><a name=\"reservation-process\" id=\"reservation-process\"></a>Reservation Process</h5>\r\n\r\n<p><strong>Reservation Request</strong></p>\r\n\r\n<p>\"Is Force Allocate\" on the Reservation request details indicates if the Reservation detail needs to be force allocated or not. This attribute is sent as part of the promising process. Refer to the above section for a sample Reservation request with Force allocate.&nbsp;</p>\r\n\r\n<p><strong>Reservation and Supply Updates</strong></p>\r\n\r\n<ul>\r\n\t<li>When \"Is Force Allocate\" is set to True on the Reservation detail then Reservation always looks only for On Hand supply record irrespective of the demand type having future supply ranked higher.</li>\r\n\t<li>If no On Hand inventory record is available for the requested Item and Location, but&nbsp;the location maintains On Hand Inventory, then</li>\r\n</ul>\r\n\r\n<div class=\"info\" style=\"margin-left: 40px;\">Reservation Match: No record is created<br>\r\nReservation Detail: Allocated quantity will be stamped as zero<br>\r\nSupply Allocated Quantity: No impact as there is no supply record</div>\r\n\r\n<ul>\r\n\t<li>If multiple On Hand Inventory record exists because of different supply type or segments or Inventory attributes, then\r\n\t<ul>\r\n\t\t<li>If Force allocate is true, the&nbsp;Reservation picks up the highest ranked On hand supply record for processing&nbsp;\r\n\t\t<ul>\r\n\t\t\t<li>If multiple On Hand records exist for different on hand supply types such as On Hand Available and On Hand Available Soon, then the top ranked supply type record is picked up for Reservation.</li>\r\n\t\t\t<li>If&nbsp;multiple On Hand records exist for the top ranked supply type because of different Segments such as&nbsp;Ecommerce, Retail and so on,&nbsp;then the supply record based on highest segment rank is picked up for Reservation</li>\r\n\t\t\t<li>If multiple On Hand records exists for the top ranked supply type because of Inventory attributes such as Location maintains Batch number, Country of origin, and so on,&nbsp;then the first supply record is picked up for Reservation</li>\r\n\t\t</ul>\r\n\t\t</li>\r\n\t\t<li>The allocated quantity on the reservation detail is the actual available quantity at the time of reservation. Reservation and Supply updates will be based on the actual available quantity. This can also be verified by the reservation matches which points to the inventory against which the reservations happened.\r\n\t\t<ul>\r\n\t\t\t<li>The allocated quantity is less than the requested quantity (same as the available quantity, if the available quantity is less than the requested quantity). Consider an example where On Hand supply record exists for Location 1 and Item 1 for 6 units. Reservation detail is sent for Location 1, Item 1, Force allocate = true for 10 units. In this case,</li>\r\n\t\t</ul>\r\n\t\t</li>\r\n\t</ul>\r\n\t</li>\r\n</ul>\r\n\r\n<div class=\"info\" style=\"margin-left: 40px;\">Reservation Match: Quantity = 6<br>\r\nReservation Detail: Quantity = 10, Allocated quantity = 6<br>\r\nSupply Allocated Quantity: 6 units</div>\r\n\r\n<ul style=\"margin-left: 40px;\">\r\n\t<li>The allocated quantity is same as the requested quantity if the available quantity is greater than or equal to the requested quantity. Consider an example where&nbsp;On Hand supply record exists for Location 1 and Item 1 for 6 units. Reservation detail is sent for Location 1, Item 1, Force allocate = true for 5 units. In this case,</li>\r\n</ul>\r\n\r\n<div class=\"info\" style=\"margin-left: 40px;\">Reservation Match: Quantity = 5<br>\r\nReservation Detail: Quantity = 5, Allocated quantity = 5<br>\r\nSupply Allocated Quantity: 5 units</div>\r\n\r\n<p><strong>Capacity Updates</strong></p>\r\n\r\n<ul>\r\n\t<li>If Force Allocate is true then Capacity full check is ignored. Capacity Utilization is updated based on the actual allocated units. Refer <a href=\"https://omni.helpdocsonline.com/how-capacity-works\">How Capacity update&nbsp;works</a> for more details.</li>\r\n</ul>\r\n\r\n<p><strong>Reservation Response</strong></p>\r\n\r\n<p>For any Reservation Details with Force Allocate as True; the force allocate flag on the reservation request detail is set to true irrespective of the actual allocated quantity being same as or less than the requested quantity. Actual allocated quantity is sent in the Reservation Response.</p>\r\n\r\n<div class=\"computer_code\" style=\"margin-left: 40px;\"><strong>Sample Reservation Response - </strong>In the below example, Detail 1 and Detail 2 are Force allocated. Allocated quantity is based on the actual available quantity. Reservation detail 3 is not force allocated.<br>\r\n<br>\r\n{<br>\r\n&nbsp; \"RequestId\": \"Request001\",<br>\r\n&nbsp; \"ReservationRequestDetail\": [<br>\r\n&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ReservationRequestDetailId\": \"1\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"Quantity\": 10,<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>\"AllocatedQuantity\": 10, </strong><br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ItemId\": \"Item 1\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"LocationId\": \"DC 1\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>\"IsForceAllocated\": false</strong><br>\r\n&nbsp;&nbsp;&nbsp; },<br>\r\n&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ReservationRequestDetailId\": \"2\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"Quantity\": 10,<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>\"AllocatedQuantity\": 10, </strong>(Available quantity more than or equal to the requested quantity)<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ItemId\": \"Item 1\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"LocationId\": \"DC 2\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>\"IsForceAllocated\": true</strong><br>\r\n&nbsp;&nbsp;&nbsp; },<br>\r\n&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ReservationRequestDetailId\": \"3\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"Quantity\": 10,<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>\"AllocatedQuantity\": 0, </strong>(Available quantity is zero for DC 3)<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ItemId\": \"Item 2\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"LocationId\": \"DC 3\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>\"IsForceAllocated\": true</strong><br>\r\n&nbsp;&nbsp;&nbsp; }<br>\r\n&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ReservationRequestDetailId\": \"4\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"Quantity\": 10,<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>\"AllocatedQuantity\": 4, </strong>(Available quantity less than the requested quantity)<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ItemId\": \"Item 3\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"LocationId\": \"DC 4\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>\"IsForceAllocated\": true</strong><br>\r\n&nbsp;&nbsp;&nbsp; }<br>\r\n&nbsp; ]<br>\r\n}</div>\r\n\r\n<h5><a name=\"form-promising-response\" id=\"form-promising-response\"></a>Form Promising Response</h5>\r\n\r\n<ul>\r\n\t<li>If Location maintains Inventory then Promising receives the Reservation response.\r\n\t<ul>\r\n\t\t<li>If the Reservation response detail has Force Allocate as True, then Allocate quantity is set as the Requested quantity while forming the promising response, but \"Is Virtual Allocation\" attribute is set to False on the Promising response. In the below example, since Force allocate is true for Reservation detail 2,3 and 4, Quantity is set as the requested quantity in the allocation object.</li>\r\n\t</ul>\r\n\t</li>\r\n</ul>\r\n\r\n<div class=\"computer_code\" style=\"margin-left: 40px;\">{<br>\r\n&nbsp; \"PromisingRequestDetailList\": [<br>\r\n&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"PromisingRequestDetailId\": \"1\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"Allocation\": [<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>\"IsVirtualAllocation\": false,</strong><br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ItemId\": \"Item 1\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>\"Quantity\": 10,</strong> \"Requested qty = 10\"<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ShipFromLocationId\": \"DC 1\"<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>\"IsVirtualAllocation\": false,</strong><br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ItemId\": \"Item 1\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>\"Quantity\": 10,</strong> \"Requested qty = 10\"<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ShipFromLocationId\": \"DC 2\"<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>\r\n&nbsp;&nbsp;&nbsp; },<br>\r\n&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"PromisingRequestDetailId\": \"2\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"Allocation\": [&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>\"IsVirtualAllocation\": false,</strong><br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ItemId\": \"Item 2\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>\"Quantity\": 10,</strong> \"Requested qty = 10\"<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ShipFromLocationId\": \"DC 3\"<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }]<br>\r\n&nbsp;&nbsp;&nbsp; },<br>\r\n&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"PromisingRequestDetailId\": \"3\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"Allocation\": [&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>\"IsVirtualAllocation\": false,</strong><br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ItemId\": \"Item 3\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>\"Quantity\": 10,</strong> \"Requested qty = 10\"<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ShipFromLocationId\": \"DC 4\"<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }]<br>\r\n&nbsp;&nbsp;&nbsp; },<br>\r\n&nbsp; ],<br>\r\n&nbsp; \"PromisingRequestId\": \"Request001\",<br>\r\n&nbsp; \"RequestType\": \"Optimization\"<br>\r\n}</div>\r\n\r\n<ul>\r\n\t<li><a id=\"Virtual Reservation\" name=\"Virtual Reservation\"></a>In case the Location does not maintain Inventory, it is considered as Virtual Reservation where Maintain On Hand, ASN, and PO supply is set as false,\r\n\r\n\t<ul>\r\n\t\t<li>The allocated quantity provided in the allocation info under promising response is same as the requested quantity, thus indicating that all units requested are reserved.</li>\r\n\t\t<li>Also, ‘is Virtual Allocation” is set to <strong><em>true</em></strong> to indicate that a virtual allocation has been done and no actual reservation entity exists.</li>\r\n\t</ul>\r\n\t</li>\r\n</ul>\r\n\r\n<div class=\"computer_code\" style=\"margin-left: 40px;\">{<br>\r\n&nbsp; \"PromisingRequestDetailList\": [<br>\r\n&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"Allocation\": [<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>\"IsVirtualAllocation\": true,</strong><br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ItemId\": \"Item 1\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"Quantity\": 10, \"Requested qty = 10\"<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ShipFromLocationId\": \"DC 4\"<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ],<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"PromisingRequestDetailId\": \"1\"<br>\r\n&nbsp;&nbsp;&nbsp; }<br>\r\n&nbsp; ],<br>\r\n&nbsp; \"PromisingRequestId\": \"Request001\",<br>\r\n&nbsp; \"RequestType\": \"Optimization\"<br>\r\n}</div>\r\n\r\n<h5><a name=\"order-release\" id=\"order-release\"></a>Order Release</h5>\r\n\r\n<ul>\r\n\t<li>When the order line is released&nbsp;irrespective of what the demand type is configured on the release template, the force allocated reservations are always released. The released quantity is same as the requested quantity.</li>\r\n\t<li>For Virtual Reservation flow, \"Is Virtual Allocation\" flag is sent in the release outbound to indicate that a virtual allocation has been done and no actual reservation entity exists.</li>\r\n</ul>\r\n\r\n<div class=\"tip\"><strong>Note</strong>: Allocated quantity on the Reservation detail can be less than the requested quantity based on the actual available unit, but release quantity on the Reservation detail will be same as the requested quantity.</div>\r\n\r\n<h5><a name=\"order-ship-short\" id=\"order-ship-short\"></a>Order Ship & Short</h5>\r\n\r\n<ul>\r\n\t<li>Ship - When the order line is shipped, the shipped quantity on the reservation detail and match is updated accordingly. It can be a partial shipment or a complete shipment. Based on the actual shipped units, Shipped quantity on the Reservation detail and matches are updated. Supply quantity is also reduced accordingly. Sometimes, the Shipped quantity will be greater than the Supply quantity due to inaccurate inventory.&nbsp;In this case, Supply quantity can go negative but it will be corrected in the next Inventory sync.</li>\r\n\t<li>Short - When an inventory is shorted from an execution system (WM of Store fulfillment), the requested quantity as well as the released quantity is reduced. The remaining quantity is back ordered. If the requested quantity gets reduced beyond the originally allocated quantity, then the allocated quantity is also reduced to match it to the requested quantity. Note: Allocated quantity can never be greater than the requested quantity</li>\r\n</ul>\r\n\r\n<h5><a name=\"inventory-rise-and-drop\" id=\"inventory-rise-and-drop\"></a>Inventory Rise and Drop</h5>\r\n\r\n<ul>\r\n\t<li>For any Reservations (force allocated), there is a possibility of allocated quantity less than the Requested quantity because of Supply constraints.</li>\r\n\t<li>But when the inventory rise happens, the allocated quantity is increased accordingly. If the inventory drop happens, the allocated quantity is reduced accordingly.</li>\r\n</ul>\r\n\r\n<p>Refer to the below section for an example</p>\r\n\r\n<p><div class=\"toggle_outerdiv\"><p class=\"toggle_div\"><a href=\"#tg-3\" class=\"toggle-content\"><span class=\"toggle-title\">Force Allocate - Post Promising process (example)</span></a></p><div id=\"tg-3\"><p>Force Reservation of an order line against Distribution Center 1 which maintains inventory.</p>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" height=\"284\" style=\"width: 1000px;\" width=\"966\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\" style=\"width: 239px; text-align: center;\"><strong>Setup</strong></th>\n\t\t\t<th scope=\"col\" style=\"width: 242px; text-align: center;\"><strong>Promising request</strong></th>\n\t\t\t<th scope=\"col\" style=\"width: 260px; text-align: center;\"><strong>Reservation Detail</strong></th>\n\t\t\t<th scope=\"col\" style=\"width: 257px; text-align: center;\"><strong>Promising Response</strong></th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"width: 239px;\">\n\t\t\t<ul>\n\t\t\t\t<li>Location: &quot;Distribution Center 1&quot;</li>\n\t\t\t\t<li>Maintains Inventory = &quot;True&quot;</li>\n\t\t\t\t<li>Inventory for Item A = &quot;3&quot; units</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"width: 242px;\">\n\t\t\t<ul>\n\t\t\t\t<li>Request ID = &ldquo;RQ002&rdquo;</li>\n\t\t\t\t<li>Request Detail ID = &ldquo;1&rdquo;</li>\n\t\t\t\t<li>Ship from Location ID = &ldquo;DC1&rdquo;</li>\n\t\t\t\t<li>Item = &ldquo;Item A&rdquo;</li>\n\t\t\t\t<li>Quantity = &ldquo;5&rdquo;</li>\n\t\t\t\t<li>Force Allocate = True</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"width: 260px;\">\n\t\t\t<ul>\n\t\t\t\t<li>Request ID = &ldquo;RQ002&rdquo;</li>\n\t\t\t\t<li>Request Detail ID = &ldquo;1&rdquo;</li>\n\t\t\t\t<li>Location ID = &ldquo;DC1&rdquo;</li>\n\t\t\t\t<li>Item = &ldquo;Item A&rdquo;</li>\n\t\t\t\t<li>Requested Quantity = &ldquo;5&rdquo;</li>\n\t\t\t\t<li>Allocated Quantity = &ldquo;3&rdquo;</li>\n\t\t\t\t<li>Released Quantity = &ldquo;0&rdquo;</li>\n\t\t\t\t<li>Shipped Quantity = &ldquo;0&rdquo;</li>\n\t\t\t\t<li><strong><em>Is Force Allocated = &quot;True&quot;</em></strong></li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"width: 257px;\">\n\t\t\t<p>Allocation Info</p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Request ID = &ldquo;RQ002&rdquo;</li>\n\t\t\t\t<li>Request Detail ID = &ldquo;1&rdquo;</li>\n\t\t\t\t<li>Ship from Location ID = &ldquo;DC1&rdquo;</li>\n\t\t\t\t<li>Item = &ldquo;Item A&rdquo;</li>\n\t\t\t\t<li>Requested Quantity = &ldquo;5&rdquo;</li>\n\t\t\t\t<li><strong>Allocated Quantity = &ldquo;5&rdquo;</strong></li>\n\t\t\t\t<li><strong>Is Virtual Allocated = &quot;False&quot;</strong></li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><strong>Post Promising Updates</strong></p>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" height=\"418\" style=\"width: 1000px;\" width=\"986\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\" style=\"width: 285px; text-align: center;\">Inventory Rise for 1 unit&nbsp;for Item A at DC1</th>\n\t\t\t<th scope=\"col\" style=\"width: 285px; text-align: center;\">Inventory Drop for 2 units&nbsp;for Item A at DC1</th>\n\t\t\t<th scope=\"col\" style=\"width: 285px; text-align: center;\">Order line is released</th>\n\t\t\t<th scope=\"col\" style=\"width: 285px; text-align: center;\">Order line is partially shipped for 3 units</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"width: 285px;\">\n\t\t\t<ul>\n\t\t\t\t<li>Request ID = &ldquo;RQ002&rdquo;</li>\n\t\t\t\t<li>Request Detail ID = &ldquo;1&rdquo;</li>\n\t\t\t\t<li>Location ID = &ldquo;DC1&rdquo;</li>\n\t\t\t\t<li>Item = &ldquo;Item A&rdquo;</li>\n\t\t\t\t<li>Requested Quantity = &ldquo;5&rdquo;</li>\n\t\t\t\t<li><span style=\"color:#16a085;\">Allocated Quantity = &ldquo;4&rdquo;</span></li>\n\t\t\t\t<li>Released Quantity = &ldquo;0&rdquo;</li>\n\t\t\t\t<li>Shipped Quantity = &ldquo;0&rdquo;</li>\n\t\t\t\t<li>Is Force Allocated = true</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"width: 285px;\">\n\t\t\t<ul>\n\t\t\t\t<li>Request ID = &ldquo;RQ002&rdquo;</li>\n\t\t\t\t<li>Request Detail ID = &ldquo;1&rdquo;</li>\n\t\t\t\t<li>Location ID = &ldquo;DC1&rdquo;</li>\n\t\t\t\t<li>Item = &ldquo;Item A&rdquo;</li>\n\t\t\t\t<li>Requested Quantity = &ldquo;5&rdquo;</li>\n\t\t\t\t<li><span style=\"color:#16a085;\">Allocated Quantity = &ldquo;2&rdquo;</span></li>\n\t\t\t\t<li>Released Quantity = &ldquo;0&rdquo;</li>\n\t\t\t\t<li>Shipped Quantity = &ldquo;0&rdquo;</li>\n\t\t\t\t<li>Is Force Allocated = true</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"width: 285px;\">\n\t\t\t<ul>\n\t\t\t\t<li>Request ID = &ldquo;RQ002&rdquo;</li>\n\t\t\t\t<li>Request Detail ID = &ldquo;1&rdquo;</li>\n\t\t\t\t<li>Location ID = &ldquo;DC1&rdquo;</li>\n\t\t\t\t<li>Item = &ldquo;Item A&rdquo;</li>\n\t\t\t\t<li>Requested Quantity = &ldquo;5&rdquo;</li>\n\t\t\t\t<li>Allocated Quantity = &ldquo;2&rdquo;</li>\n\t\t\t\t<li><span style=\"color:#16a085;\">Released Quantity = &ldquo;5&rdquo;</span></li>\n\t\t\t\t<li>Shipped Quantity = &ldquo;0&rdquo;</li>\n\t\t\t\t<li>Is Force Allocated = true</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"width: 285px;\">\n\t\t\t<ul>\n\t\t\t\t<li>Request ID = &ldquo;RQ002&rdquo;</li>\n\t\t\t\t<li>Request Detail ID = &ldquo;1&rdquo;</li>\n\t\t\t\t<li>Location ID = &ldquo;DC1&rdquo;</li>\n\t\t\t\t<li>Item = &ldquo;Item A&rdquo;</li>\n\t\t\t\t<li>Requested Quantity = &ldquo;5&rdquo;</li>\n\t\t\t\t<li>Allocated Quantity = &ldquo;2&rdquo;</li>\n\t\t\t\t<li>Released Quantity = &ldquo;5&rdquo;</li>\n\t\t\t\t<li><span style=\"color:#16a085;\">Shipped Quantity = &ldquo;3&rdquo;</span></li>\n\t\t\t\t<li>Is Force Allocated = true</li>\n\t\t\t</ul>\n\n\t\t\t<p class=\"info\">Note:&nbsp;At this point, since the availability was only 2 units and shipped quantity is 3, the inventory goes down to -1</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div></div></p>\r\n\r\n<h3><a name=\"how-to-s\" id=\"how-to-s\"></a>How To's?</h3>\r\n\r\n<h4><a name=\"how-to-set-up-force-allocate-in-the-fulfillment-optimization-config\" id=\"how-to-set-up-force-allocate-in-the-fulfillment-optimization-config\"></a><a id=\"Tier - Force allocate\" name=\"Tier - Force allocate\"></a>How to set up Force Allocate in the Fulfillment Optimization Config?</h4>\r\n\r\n<p>Refer to the below section on how to configure the prioritization rule in the Fulfillment optimization config</p>\r\n\r\n<p><div class=\"toggle_outerdiv\"><p class=\"toggle_div\"><a href=\"#tg-4\" class=\"toggle-content\"><span class=\"toggle-title\">Promising - Set up Prioritization rule</span></a></p><div id=\"tg-4\"><p>Prioritization rule can be defined under <a href=\"https://omni.helpdocsonline.com/order-promising-configuration$prioritize\">Fulfillment Optimization Config - Prioritization</a> tab.&nbsp; When creating and enabling a prioritization rule, the new ranking criteria will apply only to the future allocations. The previous orders which have been already allocated(fully) will not be affected. Note: Ensure that the list of priority rules covers all location groups and demand types because once a single priority rule is configured, promising will only return supply that matches with an existing priority rule.</p>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 1200px;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\" style=\"text-align: center; width: 135px;\">Section</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center; width: 1037px;\">Description</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"width: 133px;\">Location Group</td>\n\t\t\t<td style=\"width: 1035px;\">\n\t\t\t<p>In order to use prioritization,a retailer&nbsp;must first define location groups which are configured on the<a hqid=\"1827456\" href=\"/order-promising-configuration\"> Inventory Location Group UI</a>. Each location group is then assigned a priority. The same location can be part of multiple location groups. Consider that the following location groups&nbsp;are configured:</p>\n\n\t\t\t<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th style=\"text-align: center;\">Location Group</th>\n\t\t\t\t\t\t<th style=\"text-align: center;\">DCs</th>\n\t\t\t\t\t\t<th style=\"text-align: center;\">Stores</th>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Location Group 1</td>\n\t\t\t\t\t\t<td>DC 1</td>\n\t\t\t\t\t\t<td>Store A, Store B</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Location Group 2</td>\n\t\t\t\t\t\t<td>DC 1, DC 2</td>\n\t\t\t\t\t\t<td>Store C, Store D</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Location Group 3</td>\n\t\t\t\t\t\t<td>DC 3</td>\n\t\t\t\t\t\t<td>Store E, Store F</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Location Group 4</td>\n\t\t\t\t\t\t<td>N/a</td>\n\t\t\t\t\t\t<td>Store G</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Location Group 5</td>\n\t\t\t\t\t\t<td>N/a</td>\n\t\t\t\t\t\t<td>Store H, Store I, Store J</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\n\t\t\t<p>Once defined, the priorities of the location groups must&nbsp;be configured in the Fulfillment Optimization UI.</p>\n\n\t\t\t<table border=\"1\" cellpadding=\"0\" cellspacing=\"0\" height=\"84\" width=\"549\">\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td style=\"width: 132px;\">Priority 1</td>\n\t\t\t\t\t\t<td style=\"width: 380px;\">Location Group 1, Location Group 2</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td style=\"width: 132px;\">Priority 2</td>\n\t\t\t\t\t\t<td style=\"width: 380px;\">Location Group 3, Location Group 4</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td style=\"width: 132px;\">Priority 3</td>\n\t\t\t\t\t\t<td style=\"width: 380px;\">Location Group 5</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\n\t\t\t<p>Based on the above example, the locations corresponding to location group 1 (DC 1, Store A, Store B) and location group 2&nbsp;(DC 2, Store C, and Store D) are considered as the highest priority locations for allocation. Each location has an equal priority, and the optimization logic selects the best out of these locations for allocation by considering all the promising factors configured.</p>\n\n\t\t\t<p>Prioritize when used, promising will attempt to fulfill all units from the 1st priority Tier before evaluating the 2nd Tier. Only units that cannot be fulfilled from the locations included in the 1st priority tier will be evaluated when proceeding to the 2nd tier.&nbsp;</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"width: 133px;\">Demand Type Priority</td>\n\t\t\t<td style=\"width: 1035px;\">\n\t\t\t<p>Overrides the demand type that would be sent from order configuration in the header. So, for the execution of this priority tier, it will only consider inventory supply which maps to this demand type. This is optional. If not selected, the demand type sent from order configuration&nbsp;will be used. In Prioritization Tier, specific demand Type can also be selected. If a demand Type is selected for a Tier, then it will override header or line level demand type sent in the promising request. Once a demand type is selected for a Tier,&nbsp;promising will only consider mapped supply types as eligible inventory for allocation for that Tier. If it is selected as null, then header level demand type will be considered.</p>\n\n\t\t\t<ul>\n\t\t\t\t<li>For instance: if a retailer wants to prioritize physical on hand supply across fulfillment network followed by future supply, two tiers can be created with same location group but with different demand type as &quot;Allocation&quot; and &quot;Allocation and Future&quot; respectively. Promising will try to allocate order first from on hand supply across locations followed by future supply.</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"width: 133px;\">Segment Priority</td>\n\t\t\t<td style=\"width: 1035px;\">\n\t\t\t<p>Defines the priority of the segment against every Tier. This is optional. If not selected, all segments are considered for allocation. If any specific segment(s) are selected, then only the selected segment is used in that allocation run. For example, if Location group 1 and Segment E-Com and Retail are configured as priority 1, the first reservation attempt is made against the E-Com and Retail segmented inventory belonging to the locations configured in Location group 1. If any location in the location group does not maintain&nbsp;segments, then the entire inventory is eligible for allocation. So, in the previous scenario, for location which maintains segments, only ECom and Retail segmented inventory is eligible for reservation, and for other locations, the inventory for that item is&nbsp;eligible.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"width: 133px;\"><a href=\"https://omni.helpdocsonline.com/forceallocate\">Force Allocate</a></td>\n\t\t\t<td style=\"width: 1035px;\">\n\t\t\t<p>Force allocation or reservation provides an opportunity for the Retailer to allocate the Order(s) irrespective of the inventory levels at a location. If atleast one line doesn&#39;t have the Ship from location ID or atleast one line has Delivery method &quot;Pick up at store&quot; in the promising request then the Force allocate flag sent on the promising request is ignored. Force allocate flag set on the prioritization tiers (Fulfillment Optimization config) will take precedence. If there are no prioritization tiers defined or Force allocate flag not set on the prioritization tier then Force allocate will not be triggered even if the force allocate flag is sent on the Promising request. This is used as a last resort option when the configuration is not able to allocate orders because of inventory constraints.</p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Tier 1 (Rank 1) - Location Group 1 - Force Allocate (false)</li>\n\t\t\t\t<li>Tier 2 (Rank 2) - Location Group 2 - Force Allocate (true)</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"width: 133px;\">Allocation Overrides</td>\n\t\t\t<td style=\"width: 1035px;\">\n\t\t\t<p>Allocation overrides - Capacity and Protection can be defined at Prioritization Tier level. In addition to this, overrides can be set at Source (Header and Line overrides level). Refer <a hqid=\"2641920\" href=\"/howpromisingworks$Allocation overrides - How does it work at different levels\">how overrides works when set up at different levels</a>.</p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Refer to the <a hqid=\"2641920\" href=\"/howpromisingworks$Different ways of Allocation overrides capacity\">Different ways of overriding Capacity and its Impact on Allocation</a> for more details.</li>\n\t\t\t\t<li>Refer to the Protection Overrides and Its impact on Allocation for more details.</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"width: 133px;\">Min and Max units</td>\n\t\t\t<td style=\"width: 1035px;\">\n\t\t\t<p>Min and Max units act as a filter for the prioritization tier. If these units thresholds are configured, only fulfillment group with matching quantity will be evaluated for this fulfillment group.&nbsp;</p>\n\n\t\t\t<div class=\"warning\">In a prioritization tier that has min and/or max unit, the fuflillment will automatically be <strong>complete single source</strong>. Configure a catch all tier to make sure the order would still get allocated using split shipments if no location can fulfill it completely.&nbsp;</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div></div></p>\r\n\r\n<h3><a name=\"implementation-flavors\" id=\"implementation-flavors\"></a>Implementation Flavors</h3>\r\n\r\n<h4><a name=\"as-a-retailer-i-want-to-use-force-allocate-as-my-last-resort\" id=\"as-a-retailer-i-want-to-use-force-allocate-as-my-last-resort\"></a>As a retailer, I want to use force allocate as my last resort</h4>\r\n\r\n<ul>\r\n\t<li>Use Prioritization Tiers under Fulfillment Optimization config. Set Force allocate as False for all top ranked tier(s). Set Force allocate as True for the last Tier.</li>\r\n\t<li>Since Force allocate is False for the top ranked tier(s), Promising tries allocation using regular process.</li>\r\n\t<li>If there are unfulfilled units after all top ranked tiers evaluation, last tier is evaluated.</li>\r\n\t<li>Since Force allocate is True for the last Tier, it gets allocated even though the Inventory is not available provided scheduling is successful</li>\r\n</ul>\r\n\r\n<p class=\"info\">In case of Complete single source - If multiple order lines in a single order are created with Strategy Type=\"CompleteSingleSource\" then either they will be completely fulfilled from single source in Tier 1 or they will get force allocated completely from single location in Tier 2. It will always pick most optimized location&nbsp; (optimization enabled) from Tier 2 and allocate all the lines from it (Irrespective of Availability or Strategy Type).</p>\r\n\r\n<h4><a name=\"can-few-lines-nbsp-of-my-order-be-force-allocated-mixed-bag-scenario\" id=\"can-few-lines-nbsp-of-my-order-be-force-allocated-mixed-bag-scenario\"></a>Can few lines&nbsp;of my order be force allocated (Mixed bag scenario)?</h4>\r\n\r\n<ul>\r\n\t<li>For \"Fixed ship from\"&nbsp;flows, Ship from location ID needs to be populated for all the lines and the&nbsp;Delivery method should not be&nbsp;Pick up at store. In this flow, few lines&nbsp;in the order can be marked as \"Is Force Allocate\". The lines&nbsp;which are marked as force allocate will be allocated against the location without any Inventory check.</li>\r\n\t<li>There can be scenarios where the force allocate flag can be true for few line(s) but not for all line(s). In this case, if Ship from Location ID cannot be&nbsp;populated for all the lines, then the Force allocate flag on the Promising request is ignored and \"Force allocate flag\" set on the Prioritization tier is taken into consideration.\r\n\t<ul>\r\n\t\t<li>Force allocate at Prioritization Tier applies to all the lines&nbsp;in the Order if the Tier gets evaluated as part of promising. There is no way to control only few lines&nbsp;to be force allocated when set at Prioritization Tier level. All the lines&nbsp;with the same Fulfillment group ID and Strategy type is logically grouped for a promising run. Since the Prioritization Tier is common&nbsp;for all the lines&nbsp;in the run, the Force allocate flag gets applied based on the Tier evaluation and Inventory availability in that Tier location(s).</li>\r\n\t\t<li>If Force allocate is not set up in the Prioritization tiers because it applies to all the&nbsp;lines, then there are couple of options\r\n\t\t<ul>\r\n\t\t\t<li>Option 1 - Allow Reservation to partially allocate or back order, and then the&nbsp;Allocation object can be updated by setting Is Virtual flag as true and Allocated quantity same as the Requested quantity by:\r\n\t\t\t<ul>\r\n\t\t\t\t<li>invoking the&nbsp;User Exit \"<strong>Order:UserExit:PostAllocateOrder</strong>\" for the line(s) requested to perform Force allocate.'</li>\r\n\t\t\t\t<li>creating the lines with the right allocation and quantity detail object in the order interface</li>\r\n\t\t\t</ul>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t\t</li>\r\n\t</ul>\r\n\t</li>\r\n</ul>\r\n\r\n<p style=\"margin-left: 80px;\">The allocation and quantity detail objects to add on the order are as follows:&nbsp;</p>\r\n\r\n<div class=\"computer_code\" style=\"margin-left: 40px;\">\"Allocation\":&nbsp;[{\"ShipFromLocationId\":&nbsp;\"&lt;Location you rare force allocating on&gt;\",\"IsVirtual\":&nbsp;true,\"ItemId\":&nbsp;\"&lt;your item ID&gt;\",\"Status\":{\"StatusId\":&nbsp;\"Open\"},\"Quantity\": &lt;your item qty, must be the same as the line qty&gt;,&nbsp;\"UOM\":&nbsp;\"&lt;your UOM&gt;\"}]</div>\r\n\r\n<div class=\"computer_code\" style=\"margin-left: 40px;\">\"QuantityDetail\":[{\"Status\":&nbsp;{\"StatusId\":&nbsp;\"2000\"},\"Quantity\": &lt;your qty, must be the same as the line quantity&gt;,\"ItemId\":&nbsp;\"&lt;your Item Id&gt;\",\"UOM\":&nbsp;\"&lt;your UOM&gt;\",\"StatusId\":&nbsp;\"2000\" } ]</div>\r\n\r\n<ul style=\"margin-left: 40px;\">\r\n\t<li>Option 2 - For line(s) to be force allocated, send the Quantity details with status Allocated (2000.000) as part of the Order import itself. This way, these line(s) are not tried for allocation again. Allocation will be tried only for the rest of the line(s). In the below example, mixed bag order is imported with Order Line 1 with Force allocate as False and Order Line 2 with Force allocate as True. Order Line 1 will be tried for allocation as there is no Allocation record but Order Line 2 which is force allocated and having quantity details record will not be tried for allocation again</li>\r\n</ul>\r\n\r\n<div class=\"computer_code\" style=\"margin-left: 40px;\">{<br>\r\n&nbsp; \"OrderLine\": [<br>\r\n&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ItemId\": \"1337221\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"OrderLineId\": \"1\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"OrderLinePromisingInfo\": {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ShipFromLocationId\": null,<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"IsForceAllocate\": false<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"Quantity\": 1<br>\r\n&nbsp;&nbsp;&nbsp; },<br>\r\n&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"DeliveryMethod\": {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"DeliveryMethodId\": \"ShipToAddress\"<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ItemId\": \"MARKETPLACEITEM1\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"OrderLineId\": \"2\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"Allocation\": [<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ShipFromLocationId\": \"MARKETPLACE\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"IsVirtual\": true,<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ItemId\": \"MARKETPLACEITEM1\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"Status\": {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"StatusId\": \"Open\"<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"Quantity\": 1,<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"UOM\": \"U\"<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ],<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"QuantityDetail\": [<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"Status\": {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"StatusId\": \"2000\"<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"Quantity\": 1,<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ItemId\": \"MARKETPLACEITEM1\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"UOM\": \"U\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"StatusId\": \"2000\"<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ],<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"OrderLinePromisingInfo\": {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"ShipFromLocationId\": \"MARKETPLACE\",<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"IsForceAllocate\": true<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \"Quantity\": 1<br>\r\n&nbsp;&nbsp;&nbsp; }<br>\r\n&nbsp; ]<br>\r\n}</div>\r\n\r\n<h4><a name=\"how-to-force-allocate-a-pick-up-at-store-nbsp-line-s\" id=\"how-to-force-allocate-a-pick-up-at-store-nbsp-line-s\"></a>How to force allocate a pick up at store&nbsp;line(s)</h4>\r\n\r\n<p>Typically, for pick up in store orders, customer will walk in to the store only when there is an inventory available in the system. So, during publishing, system would show availability for customer to make a decision. When an order is placed after this confirmation, usually retailers do not want to force allocate without&nbsp;the knowledge of physical inventory being available or not. If retailers still want to force allocate a Pick up in store Orders, then here is the recommended approach</p>\r\n\r\n<ul>\r\n\t<li>For lines&nbsp;with Delivery Method - Pick up at store, force allocate passed in the request or force allocate on the prioritization tier does not apply as \"Pick up at store\" line(s), and does not go through the \"Fixed ship from\" promising flow or does not look at Prioritization Tiers.</li>\r\n\t<li>If Pick up at store lines&nbsp;are partially allocated or back ordered&nbsp;post Reservation then the Allocation object can be updated as part of User Exit \"<strong>Order:UserExit:PostAllocateOrder</strong>\" (Allocated quantity to be same as Requested quantity)</li>\r\n</ul>\r\n\r\n<div class=\"tip\"><strong>Note</strong>: ShipFromLocationId is used to populate the ship from location in Invoice Line.</div>\r\n\r\n<div class=\"tip\"><strong>Note:</strong> On the Reservation - Allocation quantity will be updated based on the actual available quantity</div>\r\n\r\n<h4><a name=\"force-allocate-an-inventory-less-nbsp-item\" id=\"force-allocate-an-inventory-less-nbsp-item\"></a>Force allocate an inventory less&nbsp;item</h4>\r\n\r\n<p>There can be scenarios where Inventory need not be maintained for few SKUs (Gift cards) and retailer would want to allocate the lines&nbsp;irrespective of the Inventory levels. To achieve this,</p>\r\n\r\n<ul>\r\n\t<li>Item can be configured as <a href=\"https://omni.helpdocsonline.com/infinite-inventory\">Infinite Inventory</a>&nbsp;at the Item Location configuration level. This way, Order line(s) will get allocated irrespective of the Inventory levels</li>\r\n</ul>\r\n\r\n<h4><a name=\"how-to-determine-if-line-s-are-force-allocated-by-promising\" id=\"how-to-determine-if-line-s-are-force-allocated-by-promising\"></a>How to determine if line(s) are force allocated by promising?</h4>\r\n\r\n<ul>\r\n\t<li>If the Force Allocate flag is sent as part of the Order/Promising request and all lines&nbsp;have Ship from Location ID, then the same flag is maintained in the Promising Response.</li>\r\n\t<li>In case, the Ship from Location ID is not populated for all the lines&nbsp;or Force allocate is not requested in the promising request,&nbsp;but if Promising does force allocation internally due to Tier configuration,&nbsp;then currently there is no way to indicate it as&nbsp;Force allocated as part of Promising response.</li>\r\n\t<li>Workaround - As part of User Exit \"<strong>Order:UserExit:PostAllocateOrder</strong>\" - A get call can be made to Reservation for the Order ID and based on the request detail ID and Allocated Location, the force allocate flag from the reservation object can be read and persisted in the Allocation object (Is Virtual or Extended attributes)</li>\r\n</ul>\r\n\r\n<h3><a name=\"related-articles\" id=\"related-articles\"></a>Related Articles</h3>\r\n\r\n<div class=\"info\"><ul class=\"related-articles\"><li><a href=\"/promising-troubleshooting\" hqid=\"2652008\">Troubleshooting</a></li><li><a href=\"/promising-rest-apis-and-user-exits\" hqid=\"2684158\">REST APIs and User Exits</a></li><li><a href=\"/customer_engagement_configurations\" hqid=\"2429187\">Customer Engagement Configurations</a></li><li><a href=\"/advance-shipping-restrictions\" hqid=\"3529483\">Advanced Shipping Restrictions</a></li><li><a href=\"/how-optimization-works-2\" hqid=\"2646833\">How Optimization Works</a></li><li><a href=\"/promising-overview\" hqid=\"2641919\">Overview</a></li><li><a href=\"/procure-to-sell\" hqid=\"3629659\">Procure To Sell</a></li><li><a href=\"/howpromisingworks\" hqid=\"2641920\">How Promising Works</a></li><li><a href=\"/substitution-during-allocation\" hqid=\"2651273\">Substitution During Allocation</a></li><li><a href=\"/forecast-reservation\" hqid=\"3575064\">Forecast Reservation</a></li></ul></div>\r\n\r\n<div id=\"\" style=\"left: -9984px; top: 91.9167px;\">&nbsp;</div>\r\n\r\n<div id=\"\" style=\"left: -9984px; top: 91.9167px;\">&nbsp;</div>\r\n\r\n\t  </div>\r\n </div>\r\n <div id=\"ui-page-fb-wrap\"></div>\r\n <div class=\"hiq-footer-wrap\">\r\n    \r\n                \r\n  </div>\r\n\r\n\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n",
  "content_length": 63614,
  "scraped_at": "2025-08-09T21:56:06.377224",
  "content_clean": "Home ››Manhattan Active® Omni››Order Management››Process & Configuration Guides››Order Promising ››Force Allocate Force Allocate Previous I Next OverviewProcess FlowPromising ProcessEvaluation of \"Fixed ship from\" vs. Regular Promising FlowReservation ProcessForm Promising ResponseOrder ReleaseOrder Ship & ShortInventory Rise and DropHow To's?How to set up Force Allocate in the Fulfillment Optimization Config?Implementation FlavorsAs a retailer, I want to use force allocate as my last resortCan few lines of my order be force allocated (Mixed bag scenario)?How to force allocate a pick up at store line(s)Force allocate an inventory less itemHow to determine if line(s) are force allocated by promising?Related Articles Overview Force allocation or reservation provides an opportunity for the retailer to allocate the order(s) irrespective of the inventory levels at a location. There can be multiple use cases for this: There can be locations in the system for which the inventory might not be maintained. For example, a retailer may choose to not maintain the inventory for a vendor location. Virtual reservations are performed against such a location. The host system can decide if the order line needs to be forcefully allocated against a location. This is to handle exception scenarios such as inaccurate inventory positions in the system. In this case, force allocation is performed against such a location. Force allocation can also be achieved through promising configuration. This is used as a last resort option when the configuration is not able to allocate orders because of inventory constraints. Force allocation bypasses the inventory and capacity check in the promising process and allocates, provided the scheduling is successful for the location. When a location is at full capacity and an order is force allocated from this location, the order will bypass the capacity and allocate to the store. If you don't force allocate, it will move to backorder as expected. Refer How Promising works for more details. The following are the factors/attributes that play an important role in force allocation. Attributes When it is used? Order Line Promising Info - Ship from Location ID Order Line Promising Info - Is Force Allocate Order Line Promising Info - Delivery Method This is used in \"Fixed ship from\" flow. The retailer passes the Ship from Location ID for all the line(s). If Inventory is not maintained or inaccurate, retailer can send \"Is Force Allocate\" as true at the Order Line Promising info section as part of the Order import. This option works only when \"Ship from Location ID\" is populated for all the line(s) and delivery method is not \"Pick up at store\" for all the line(s). Note : To make the BOPIS functional with the IsForceAllocate flag, set isEnableForceAllocateForB2BLine to true in the promising parameters. When the flag is enabled, it checks for the 'ShipFromLocationId' in the OrderLinePromisingInfo, regardless of the DeliveryMethodId. If ShipFromLocationId is populated along with IsForceAllocate - BOPIS line also gets forceallocated. For Line(s) with Delivery Method - Pick up at store, force allocate passed in the request or force allocate on the prioritization tier does not apply. Fulfillment Optimization Config - Force Allocate at Prioritization Tier level. This is used when a retailer wants to allocate the order(s) as a last resort option when the configuration is not able to allocate orders because of inventory constraints. Used in Regular promising flow (Non Retail/B2B flow). If Ship from Location ID is not populated for all the line(s) or Delivery method is \"Pick up at store\" for any one of the line(s) then \"Is Force Allocate\" sent in the Order Line Promising info section is completely ignored, and the force allocate flag defined in the prioritization tier overrides the order line promising info section. Location Attribute \"Maintain On Hand, Maintain ASN, Maintain PO\" is false This is used when a retailer does not maintain inventory for the Vendor/Supplier location(s) but wants to allocate an order to the location. This is also known as Virtual Reservation. Force Allocate on the Inventory Location attributes is not supported. This field is deprecated. There is no way to set location to perform Force Allocate always. Process Flow Force Allocate - Process flow Promising Process Promising Request: Following are the attributes in the Promising request that determine if Force allocate needs to be triggered. Refer to a sample promising request Delivery Method Is Force Allocate Ship From Location ID { \"PromisingRequestId\": \"Request001\", \"RequestType\": \"Optimization\", \"StrategyName\": \"ConfigID1\", \"PromisingRequestDetail\": [ { \"PromisingRequestDetailId\": \"1\", \"ShipFromLocationId\": \"DC 1\", \"DeliveryMethodId\": \"shiptoAddress\", \"IsForceAllocate\": true, \"ItemId\": \"Item 1\", \"Quantity\": 10 }, { \"PromisingRequestDetailId\": \"2\", \"ShipFromLocationId\": \"DC 2\", \"DeliveryMethodId\": \"shiptoAddress\", \"IsForceAllocate\": true, \"ItemId\": \"Item 2\", \"Quantity\": 10 } ] } Evaluation of \"Fixed ship from\" vs. Regular Promising Flow If Ship from Location ID is populated for all the Promising request detail and none of the Delivery method is \"Pick up at store\" then \"Fixed ship from\" promising flow is triggered. If all the order lines do not contain Ship from location ID or if \"Pick up at store\" delivery method is populated for atleast one order line, then the regular promising flow is triggered.. In this case, the Force allocate flag sent on the promising request is ignored. When \"Is Force Allocate\" is set to true on the promising request, then promising always looks only for On-hand supply record, irrespective of the future supply (PO ID, PO Line ID) sent in the promising request. Fixed ship from Promising Flow The source sent in the Promising request \"Ship from location ID\" is used for promising irrespective of it being available as part of the Fulfillment Optimization Config - Source/Tiers. Force allocation bypasses the inventory and capacity check in the promising process and allocates provided Scheduling is successful for the location. For all the line(s) with Force allocate as True, verify if the Ship from location ID maintains Inventory Location attributes such as Maintain On Hand, PO, and ASN. When \"Is Force Allocate\" is set to true on the promising request, then promising always looks only for On-hand supply record, irrespective of the future supply (PO ID, PO Line ID) sent in the promising request. If yes, set the Force allocate as True for the corresponding reservation request detail. If supply is not maintained as part of the Virtual Reservation flow, then reservation request is not generated and \"Is Virtual\" is updated as true in the Promising response directly. Use case -  When retailers do not maintain inventory for the vendor locations, the Virtual reservation is performed. If the Vendor location (\"Ship from Location ID\") is provided in the Promising request and Force allocate is set as true, and if the vendor does not maintain inventory, no reservation request is created. This is considered as a virtual reservation. But other constraints such as scheduling are done to check the feasibility of the location. Regular Promising Flow For regular promising flow, the Force allocate flag sent on the promising request is ignored. The Force allocate flag set on the prioritization tiers (Fulfillment Optimization config) will take precedence. If no prioritization tiers are defined or the Force allocate flag is not set on the prioritization tier, then Force allocate will not be triggered even if the force allocate flag is sent on the Promising request. This is used as a last resort option when the configuration is not able to allocate orders because of inventory constraints. Note: The same promising request detail can be force allocated and normal allocated against two different locations depending upon which priority rule was picked. For example, if the first priority tier is a normal rule, then part of the request detail may get allocated from the location determined from that priority. If the second priority tier is a force allocate rule, the rest of the order line can be force allocated from the location determined from the second priority. In this case, two reservation details are created. The first reservation detail has ‘is Force Allocate’ flag set to false, while the second one is set as true. Note: For Line(s) with Delivery Method - Pick up at store, Force allocate passed in the request or force allocate on the prioritization tier does not apply. Which Location is used for Force Allocation? If the source is set as \"List of DCs\" and Force allocate is set on the Tiers assuming that the source locations and Tier locations are matching, then the first DC which passes scheduling is taken up for allocation. If the source is set as \"ATC View\" with no Optimization available, and Force allocate is set on the Tiers assuming that the source locations and Tier locations are matching, then the first location which passes scheduling is taken up for allocation. If the source is set as \"ATC View\" with Optimization available, and Force allocate is set on the Tiers assuming that the source locations and Tier locations are matching, then the cheapest location which passes scheduling is taken up for allocation. Merge shipment: Merge at the highest ranked source. When the consolidation facility is passed on the promising request, the system will allocate against the consolidation location. Substitution When \"Force Allocate\" attribute is enabled, items are allocated based on the type of substitution If Substitution Type is Immediate then Substituted Item is allocated If Substitution Type is OnBackOrder then Original Item is allocated The Force allocate flag (if set on the Tier) will be passed to the corresponding Reservation request detail. Refer to the below section for an example Prioritization Tier - Force allocate (Example)Consider the following Tier set up Location Group Locations Force Allocate Group 1 DC 1, DC 2, DC 3, DC 4 False Group 2 DC 1, DC 2, DC 3, DC 4 True Based on the above tier, promising will try allocations from Group 1 location(s) with force allocate as False. This will go through regular Inventory, Capacity and Scheduling checks. If there are any unfulfilled units from Tier 1 evaluation then Tier 2 group (Group 1 locations) are evaluated with Force allocate as True. In Tier 2 run, only Scheduling check is performed. Inventory and Capacity check is skipped. Consider the below Promising request { \"PromisingRequestId\": \"Request001\", \"RequestType\": \"Optimization\", \"PromisingConfigName\": \"ConfigID1\", \"PromisingRequestDetail\": [ { \"PromisingRequestDetailId\": \"1\", \"ItemId\": \"Item 1\", \"Quantity\": 20 }, { \"PromisingRequestDetailId\": \"2\", \"ItemId\": \"Item 2\", \"Quantity\": 10 }, { \"PromisingRequestDetailId\": \"3\", \"ItemId\": \"Item 3\", \"Quantity\": 10 }, ] } Promising process Tier 1 evaluation (Force allocate is False). DC 2, DC 3, DC 4 doesn't have enough supply for Item 1, Item 2, Item 3 Promising Detail Item Requested Quantity Allocated quantity Allocated location 1 Item 1 20 10 DC 1 2 Item 2 10 0 3 Item 3 10 0 Tier 2 evaluation (Force allocate is True). Irrespective of supply level, Items are allocated against the location(s) Promising Detail Item Requested Quantity Allocated quantity Allocated location 1 Item 1 10 10 DC 2 2 Item 2 10 10 DC 3 3 Item 3 10 10 DC 4 Form Reservation Request - Reservation detail is formed for every unique allocated location for a Promising detail. In the above case, two Reservation details are created for Promising detail 1 as it is allocated to DC 1 and DC 2. For Reservation request detail 1 (DC 1) - Force allocate flag is set as false as Tier 1 \"Force allocate\" flag is false. For Reservation request detail 2 (DC 2), Reservation request detail 3 (DC 3), Reservation request detail 4 (DC 4), - Force allocate flag is set as true as Tier 2 \"Force allocate\" flag is true. { \"RequestId\": \"Request001\", \"ReservationRequestDetail\": [ { \"ReservationRequestDetailId\": \"1\", \"Quantity\": 10, \"ItemId\": \"Item 1\", \"LocationId\": \"DC 1\", \"IsForceAllocated\": false }, { \"ReservationRequestDetailId\": \"2\", \"Quantity\": 10, \"ItemId\": \"Item 1\", \"LocationId\": \"DC 2\", \"IsForceAllocated\": true }, { \"ReservationRequestDetailId\": \"3\", \"Quantity\": 10, \"ItemId\": \"Item 2\", \"LocationId\": \"DC 3\", \"IsForceAllocated\": true }, { \"ReservationRequestDetailId\": \"4\", \"Quantity\": 10, \"ItemId\": \"Item 3\", \"LocationId\": \"DC 4\", \"IsForceAllocated\": true } ] } Reservation Process Reservation Request \"Is Force Allocate\" on the Reservation request details indicates if the Reservation detail needs to be force allocated or not. This attribute is sent as part of the promising process. Refer to the above section for a sample Reservation request with Force allocate. Reservation and Supply Updates When \"Is Force Allocate\" is set to True on the Reservation detail then Reservation always looks only for On Hand supply record irrespective of the demand type having future supply ranked higher. If no On Hand inventory record is available for the requested Item and Location, but the location maintains On Hand Inventory, then Reservation Match: No record is created Reservation Detail: Allocated quantity will be stamped as zero Supply Allocated Quantity: No impact as there is no supply record If multiple On Hand Inventory record exists because of different supply type or segments or Inventory attributes, then If Force allocate is true, the Reservation picks up the highest ranked On hand supply record for processing If multiple On Hand records exist for different on hand supply types such as On Hand Available and On Hand Available Soon, then the top ranked supply type record is picked up for Reservation. If multiple On Hand records exist for the top ranked supply type because of different Segments such as Ecommerce, Retail and so on, then the supply record based on highest segment rank is picked up for Reservation If multiple On Hand records exists for the top ranked supply type because of Inventory attributes such as Location maintains Batch number, Country of origin, and so on, then the first supply record is picked up for Reservation The allocated quantity on the reservation detail is the actual available quantity at the time of reservation. Reservation and Supply updates will be based on the actual available quantity. This can also be verified by the reservation matches which points to the inventory against which the reservations happened. The allocated quantity is less than the requested quantity (same as the available quantity, if the available quantity is less than the requested quantity). Consider an example where On Hand supply record exists for Location 1 and Item 1 for 6 units. Reservation detail is sent for Location 1, Item 1, Force allocate = true for 10 units. In this case, Reservation Match: Quantity = 6 Reservation Detail: Quantity = 10, Allocated quantity = 6 Supply Allocated Quantity: 6 units The allocated quantity is same as the requested quantity if the available quantity is greater than or equal to the requested quantity. Consider an example where On Hand supply record exists for Location 1 and Item 1 for 6 units. Reservation detail is sent for Location 1, Item 1, Force allocate = true for 5 units. In this case, Reservation Match: Quantity = 5 Reservation Detail: Quantity = 5, Allocated quantity = 5 Supply Allocated Quantity: 5 units Capacity Updates If Force Allocate is true then Capacity full check is ignored. Capacity Utilization is updated based on the actual allocated units. Refer How Capacity update works for more details. Reservation Response For any Reservation Details with Force Allocate as True; the force allocate flag on the reservation request detail is set to true irrespective of the actual allocated quantity being same as or less than the requested quantity. Actual allocated quantity is sent in the Reservation Response. Sample Reservation Response - In the below example, Detail 1 and Detail 2 are Force allocated. Allocated quantity is based on the actual available quantity. Reservation detail 3 is not force allocated. { \"RequestId\": \"Request001\", \"ReservationRequestDetail\": [ { \"ReservationRequestDetailId\": \"1\", \"Quantity\": 10, \"AllocatedQuantity\": 10, \"ItemId\": \"Item 1\", \"LocationId\": \"DC 1\", \"IsForceAllocated\": false }, { \"ReservationRequestDetailId\": \"2\", \"Quantity\": 10, \"AllocatedQuantity\": 10, (Available quantity more than or equal to the requested quantity) \"ItemId\": \"Item 1\", \"LocationId\": \"DC 2\", \"IsForceAllocated\": true }, { \"ReservationRequestDetailId\": \"3\", \"Quantity\": 10, \"AllocatedQuantity\": 0, (Available quantity is zero for DC 3) \"ItemId\": \"Item 2\", \"LocationId\": \"DC 3\", \"IsForceAllocated\": true } { \"ReservationRequestDetailId\": \"4\", \"Quantity\": 10, \"AllocatedQuantity\": 4, (Available quantity less than the requested quantity) \"ItemId\": \"Item 3\", \"LocationId\": \"DC 4\", \"IsForceAllocated\": true } ] } Form Promising Response If Location maintains Inventory then Promising receives the Reservation response. If the Reservation response detail has Force Allocate as True, then Allocate quantity is set as the Requested quantity while forming the promising response, but \"Is Virtual Allocation\" attribute is set to False on the Promising response. In the below example, since Force allocate is true for Reservation detail 2,3 and 4, Quantity is set as the requested quantity in the allocation object. { \"PromisingRequestDetailList\": [ { \"PromisingRequestDetailId\": \"1\", \"Allocation\": [ { \"IsVirtualAllocation\": false, \"ItemId\": \"Item 1\", \"Quantity\": 10, \"Requested qty = 10\" \"ShipFromLocationId\": \"DC 1\" }, { \"IsVirtualAllocation\": false, \"ItemId\": \"Item 1\", \"Quantity\": 10, \"Requested qty = 10\" \"ShipFromLocationId\": \"DC 2\" }] }, { \"PromisingRequestDetailId\": \"2\", \"Allocation\": [ { \"IsVirtualAllocation\": false, \"ItemId\": \"Item 2\", \"Quantity\": 10, \"Requested qty = 10\" \"ShipFromLocationId\": \"DC 3\" }] }, { \"PromisingRequestDetailId\": \"3\", \"Allocation\": [ { \"IsVirtualAllocation\": false, \"ItemId\": \"Item 3\", \"Quantity\": 10, \"Requested qty = 10\" \"ShipFromLocationId\": \"DC 4\" }] }, ], \"PromisingRequestId\": \"Request001\", \"RequestType\": \"Optimization\" } In case the Location does not maintain Inventory, it is considered as Virtual Reservation where Maintain On Hand, ASN, and PO supply is set as false, The allocated quantity provided in the allocation info under promising response is same as the requested quantity, thus indicating that all units requested are reserved. Also, ‘is Virtual Allocation” is set to true to indicate that a virtual allocation has been done and no actual reservation entity exists. { \"PromisingRequestDetailList\": [ { \"Allocation\": [ { \"IsVirtualAllocation\": true, \"ItemId\": \"Item 1\", \"Quantity\": 10, \"Requested qty = 10\" \"ShipFromLocationId\": \"DC 4\" } ], \"PromisingRequestDetailId\": \"1\" } ], \"PromisingRequestId\": \"Request001\", \"RequestType\": \"Optimization\" } Order Release When the order line is released irrespective of what the demand type is configured on the release template, the force allocated reservations are always released. The released quantity is same as the requested quantity. For Virtual Reservation flow, \"Is Virtual Allocation\" flag is sent in the release outbound to indicate that a virtual allocation has been done and no actual reservation entity exists. Note: Allocated quantity on the Reservation detail can be less than the requested quantity based on the actual available unit, but release quantity on the Reservation detail will be same as the requested quantity. Order Ship & Short Ship - When the order line is shipped, the shipped quantity on the reservation detail and match is updated accordingly. It can be a partial shipment or a complete shipment. Based on the actual shipped units, Shipped quantity on the Reservation detail and matches are updated. Supply quantity is also reduced accordingly. Sometimes, the Shipped quantity will be greater than the Supply quantity due to inaccurate inventory. In this case, Supply quantity can go negative but it will be corrected in the next Inventory sync. Short - When an inventory is shorted from an execution system (WM of Store fulfillment), the requested quantity as well as the released quantity is reduced. The remaining quantity is back ordered. If the requested quantity gets reduced beyond the originally allocated quantity, then the allocated quantity is also reduced to match it to the requested quantity. Note: Allocated quantity can never be greater than the requested quantity Inventory Rise and Drop For any Reservations (force allocated), there is a possibility of allocated quantity less than the Requested quantity because of Supply constraints. But when the inventory rise happens, the allocated quantity is increased accordingly. If the inventory drop happens, the allocated quantity is reduced accordingly. Refer to the below section for an example Force Allocate - Post Promising process (example)Force Reservation of an order line against Distribution Center 1 which maintains inventory. Setup Promising request Reservation Detail Promising Response Location: \"Distribution Center 1\" Maintains Inventory = \"True\" Inventory for Item A = \"3\" units Request ID = “RQ002” Request Detail ID = “1” Ship from Location ID = “DC1” Item = “Item A” Quantity = “5” Force Allocate = True Request ID = “RQ002” Request Detail ID = “1” Location ID = “DC1” Item = “Item A” Requested Quantity = “5” Allocated Quantity = “3” Released Quantity = “0” Shipped Quantity = “0” Is Force Allocated = \"True\" Allocation Info Request ID = “RQ002” Request Detail ID = “1” Ship from Location ID = “DC1” Item = “Item A” Requested Quantity = “5” Allocated Quantity = “5” Is Virtual Allocated = \"False\" Post Promising Updates Inventory Rise for 1 unit for Item A at DC1 Inventory Drop for 2 units for Item A at DC1 Order line is released Order line is partially shipped for 3 units Request ID = “RQ002” Request Detail ID = “1” Location ID = “DC1” Item = “Item A” Requested Quantity = “5” Allocated Quantity = “4” Released Quantity = “0” Shipped Quantity = “0” Is Force Allocated = true Request ID = “RQ002” Request Detail ID = “1” Location ID = “DC1” Item = “Item A” Requested Quantity = “5” Allocated Quantity = “2” Released Quantity = “0” Shipped Quantity = “0” Is Force Allocated = true Request ID = “RQ002” Request Detail ID = “1” Location ID = “DC1” Item = “Item A” Requested Quantity = “5” Allocated Quantity = “2” Released Quantity = “5” Shipped Quantity = “0” Is Force Allocated = true Request ID = “RQ002” Request Detail ID = “1” Location ID = “DC1” Item = “Item A” Requested Quantity = “5” Allocated Quantity = “2” Released Quantity = “5” Shipped Quantity = “3” Is Force Allocated = true Note: At this point, since the availability was only 2 units and shipped quantity is 3, the inventory goes down to -1 How To's? How to set up Force Allocate in the Fulfillment Optimization Config? Refer to the below section on how to configure the prioritization rule in the Fulfillment optimization config Promising - Set up Prioritization rulePrioritization rule can be defined under Fulfillment Optimization Config - Prioritization tab.  When creating and enabling a prioritization rule, the new ranking criteria will apply only to the future allocations. The previous orders which have been already allocated(fully) will not be affected. Note: Ensure that the list of priority rules covers all location groups and demand types because once a single priority rule is configured, promising will only return supply that matches with an existing priority rule. Section Description Location Group In order to use prioritization,a retailer must first define location groups which are configured on the Inventory Location Group UI. Each location group is then assigned a priority. The same location can be part of multiple location groups. Consider that the following location groups are configured: Location Group DCs Stores Location Group 1 DC 1 Store A, Store B Location Group 2 DC 1, DC 2 Store C, Store D Location Group 3 DC 3 Store E, Store F Location Group 4 N/a Store G Location Group 5 N/a Store H, Store I, Store J Once defined, the priorities of the location groups must be configured in the Fulfillment Optimization UI. Priority 1 Location Group 1, Location Group 2 Priority 2 Location Group 3, Location Group 4 Priority 3 Location Group 5 Based on the above example, the locations corresponding to location group 1 (DC 1, Store A, Store B) and location group 2 (DC 2, Store C, and Store D) are considered as the highest priority locations for allocation. Each location has an equal priority, and the optimization logic selects the best out of these locations for allocation by considering all the promising factors configured. Prioritize when used, promising will attempt to fulfill all units from the 1st priority Tier before evaluating the 2nd Tier. Only units that cannot be fulfilled from the locations included in the 1st priority tier will be evaluated when proceeding to the 2nd tier. Demand Type Priority Overrides the demand type that would be sent from order configuration in the header. So, for the execution of this priority tier, it will only consider inventory supply which maps to this demand type. This is optional. If not selected, the demand type sent from order configuration will be used. In Prioritization Tier, specific demand Type can also be selected. If a demand Type is selected for a Tier, then it will override header or line level demand type sent in the promising request. Once a demand type is selected for a Tier, promising will only consider mapped supply types as eligible inventory for allocation for that Tier. If it is selected as null, then header level demand type will be considered. For instance: if a retailer wants to prioritize physical on hand supply across fulfillment network followed by future supply, two tiers can be created with same location group but with different demand type as \"Allocation\" and \"Allocation and Future\" respectively. Promising will try to allocate order first from on hand supply across locations followed by future supply. Segment Priority Defines the priority of the segment against every Tier. This is optional. If not selected, all segments are considered for allocation. If any specific segment(s) are selected, then only the selected segment is used in that allocation run. For example, if Location group 1 and Segment E-Com and Retail are configured as priority 1, the first reservation attempt is made against the E-Com and Retail segmented inventory belonging to the locations configured in Location group 1. If any location in the location group does not maintain segments, then the entire inventory is eligible for allocation. So, in the previous scenario, for location which maintains segments, only ECom and Retail segmented inventory is eligible for reservation, and for other locations, the inventory for that item is eligible. Force Allocate Force allocation or reservation provides an opportunity for the Retailer to allocate the Order(s) irrespective of the inventory levels at a location. If atleast one line doesn't have the Ship from location ID or atleast one line has Delivery method \"Pick up at store\" in the promising request then the Force allocate flag sent on the promising request is ignored. Force allocate flag set on the prioritization tiers (Fulfillment Optimization config) will take precedence. If there are no prioritization tiers defined or Force allocate flag not set on the prioritization tier then Force allocate will not be triggered even if the force allocate flag is sent on the Promising request. This is used as a last resort option when the configuration is not able to allocate orders because of inventory constraints. Tier 1 (Rank 1) - Location Group 1 - Force Allocate (false) Tier 2 (Rank 2) - Location Group 2 - Force Allocate (true) Allocation Overrides Allocation overrides - Capacity and Protection can be defined at Prioritization Tier level. In addition to this, overrides can be set at Source (Header and Line overrides level). Refer how overrides works when set up at different levels. Refer to the Different ways of overriding Capacity and its Impact on Allocation for more details. Refer to the Protection Overrides and Its impact on Allocation for more details. Min and Max units Min and Max units act as a filter for the prioritization tier. If these units thresholds are configured, only fulfillment group with matching quantity will be evaluated for this fulfillment group. In a prioritization tier that has min and/or max unit, the fuflillment will automatically be complete single source. Configure a catch all tier to make sure the order would still get allocated using split shipments if no location can fulfill it completely. Implementation Flavors As a retailer, I want to use force allocate as my last resort Use Prioritization Tiers under Fulfillment Optimization config. Set Force allocate as False for all top ranked tier(s). Set Force allocate as True for the last Tier. Since Force allocate is False for the top ranked tier(s), Promising tries allocation using regular process. If there are unfulfilled units after all top ranked tiers evaluation, last tier is evaluated. Since Force allocate is True for the last Tier, it gets allocated even though the Inventory is not available provided scheduling is successful In case of Complete single source - If multiple order lines in a single order are created with Strategy Type=\"CompleteSingleSource\" then either they will be completely fulfilled from single source in Tier 1 or they will get force allocated completely from single location in Tier 2. It will always pick most optimized location  (optimization enabled) from Tier 2 and allocate all the lines from it (Irrespective of Availability or Strategy Type). Can few lines of my order be force allocated (Mixed bag scenario)? For \"Fixed ship from\" flows, Ship from location ID needs to be populated for all the lines and the Delivery method should not be Pick up at store. In this flow, few lines in the order can be marked as \"Is Force Allocate\". The lines which are marked as force allocate will be allocated against the location without any Inventory check. There can be scenarios where the force allocate flag can be true for few line(s) but not for all line(s). In this case, if Ship from Location ID cannot be populated for all the lines, then the Force allocate flag on the Promising request is ignored and \"Force allocate flag\" set on the Prioritization tier is taken into consideration. Force allocate at Prioritization Tier applies to all the lines in the Order if the Tier gets evaluated as part of promising. There is no way to control only few lines to be force allocated when set at Prioritization Tier level. All the lines with the same Fulfillment group ID and Strategy type is logically grouped for a promising run. Since the Prioritization Tier is common for all the lines in the run, the Force allocate flag gets applied based on the Tier evaluation and Inventory availability in that Tier location(s). If Force allocate is not set up in the Prioritization tiers because it applies to all the lines, then there are couple of options Option 1 - Allow Reservation to partially allocate or back order, and then the Allocation object can be updated by setting Is Virtual flag as true and Allocated quantity same as the Requested quantity by: invoking the User Exit \"Order:UserExit:PostAllocateOrder\" for the line(s) requested to perform Force allocate.' creating the lines with the right allocation and quantity detail object in the order interface The allocation and quantity detail objects to add on the order are as follows: \"Allocation\": [{\"ShipFromLocationId\": \"<Location you rare force allocating on>\",\"IsVirtual\": true,\"ItemId\": \"<your item ID>\",\"Status\":{\"StatusId\": \"Open\"},\"Quantity\": <your item qty, must be the same as the line qty>, \"UOM\": \"<your UOM>\"}] \"QuantityDetail\":[{\"Status\": {\"StatusId\": \"2000\"},\"Quantity\": <your qty, must be the same as the line quantity>,\"ItemId\": \"<your Item Id>\",\"UOM\": \"<your UOM>\",\"StatusId\": \"2000\" } ] Option 2 - For line(s) to be force allocated, send the Quantity details with status Allocated (2000.000) as part of the Order import itself. This way, these line(s) are not tried for allocation again. Allocation will be tried only for the rest of the line(s). In the below example, mixed bag order is imported with Order Line 1 with Force allocate as False and Order Line 2 with Force allocate as True. Order Line 1 will be tried for allocation as there is no Allocation record but Order Line 2 which is force allocated and having quantity details record will not be tried for allocation again { \"OrderLine\": [ { \"ItemId\": \"1337221\", \"OrderLineId\": \"1\", \"OrderLinePromisingInfo\": { \"ShipFromLocationId\": null, \"IsForceAllocate\": false }, \"Quantity\": 1 }, { \"DeliveryMethod\": { \"DeliveryMethodId\": \"ShipToAddress\" }, \"ItemId\": \"MARKETPLACEITEM1\", \"OrderLineId\": \"2\", \"Allocation\": [ { \"ShipFromLocationId\": \"MARKETPLACE\", \"IsVirtual\": true, \"ItemId\": \"MARKETPLACEITEM1\", \"Status\": { \"StatusId\": \"Open\" }, \"Quantity\": 1, \"UOM\": \"U\" } ], \"QuantityDetail\": [ { \"Status\": { \"StatusId\": \"2000\" }, \"Quantity\": 1, \"ItemId\": \"MARKETPLACEITEM1\", \"UOM\": \"U\", \"StatusId\": \"2000\" } ], \"OrderLinePromisingInfo\": { \"ShipFromLocationId\": \"MARKETPLACE\", \"IsForceAllocate\": true }, \"Quantity\": 1 } ] } How to force allocate a pick up at store line(s) Typically, for pick up in store orders, customer will walk in to the store only when there is an inventory available in the system. So, during publishing, system would show availability for customer to make a decision. When an order is placed after this confirmation, usually retailers do not want to force allocate without the knowledge of physical inventory being available or not. If retailers still want to force allocate a Pick up in store Orders, then here is the recommended approach For lines with Delivery Method - Pick up at store, force allocate passed in the request or force allocate on the prioritization tier does not apply as \"Pick up at store\" line(s), and does not go through the \"Fixed ship from\" promising flow or does not look at Prioritization Tiers. If Pick up at store lines are partially allocated or back ordered post Reservation then the Allocation object can be updated as part of User Exit \"Order:UserExit:PostAllocateOrder\" (Allocated quantity to be same as Requested quantity) Note: ShipFromLocationId is used to populate the ship from location in Invoice Line. Note: On the Reservation - Allocation quantity will be updated based on the actual available quantity Force allocate an inventory less item There can be scenarios where Inventory need not be maintained for few SKUs (Gift cards) and retailer would want to allocate the lines irrespective of the Inventory levels. To achieve this, Item can be configured as Infinite Inventory at the Item Location configuration level. This way, Order line(s) will get allocated irrespective of the Inventory levels How to determine if line(s) are force allocated by promising? If the Force Allocate flag is sent as part of the Order/Promising request and all lines have Ship from Location ID, then the same flag is maintained in the Promising Response. In case, the Ship from Location ID is not populated for all the lines or Force allocate is not requested in the promising request, but if Promising does force allocation internally due to Tier configuration, then currently there is no way to indicate it as Force allocated as part of Promising response. Workaround - As part of User Exit \"Order:UserExit:PostAllocateOrder\" - A get call can be made to Reservation for the Order ID and based on the request detail ID and Allocated Location, the force allocate flag from the reservation object can be read and persisted in the Allocation object (Is Virtual or Extended attributes) Related Articles TroubleshootingREST APIs and User ExitsCustomer Engagement ConfigurationsAdvanced Shipping RestrictionsHow Optimization WorksOverviewProcure To SellHow Promising WorksSubstitution During AllocationForecast Reservation"
}