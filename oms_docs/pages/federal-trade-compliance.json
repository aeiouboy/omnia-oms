{
  "id": "2807894",
  "permalink": "federal-trade-compliance",
  "title": "Federal Trade Commission (FTC) Compliance",
  "type": "topic",
  "level": 5,
  "path": "Manhattan Active® Omni/Order Management/Process & Configuration Guides/Order Processing/Order Scheduling/Federal Trade Commission (FTC) Compliance",
  "raw_item": {
    "id": "2807894",
    "text": "Federal Trade Commission (FTC) Compliance",
    "title": "Federal Trade Commission (FTC) Compliance",
    "permalink": "federal-trade-compliance",
    "leaf": false,
    "droppable": true,
    "expanded": true,
    "closed": true,
    "visible": true,
    "editable": true,
    "type": "topic",
    "topicType": "0",
    "status": "1",
    "iconCls": "icon-topic",
    "cls": "",
    "folder_id": "129858",
    "parent": "f;129858",
    "created_date": "1626436057",
    "modified_date": "1728366001",
    "instructor_id": null,
    "loaded": true,
    "haschildren": false,
    "callout": "0",
    "order": "5"
  },
  "success": true,
  "content": "\r\n\r\n\r\n<div class=\"hiq-page-wrap\">\r\n<div class=\"hiq-t-wrap\">\r\n\t\t\r\n  \t  <div class=\"hiq-t \">\r\n\t\t\t\t<ul class=\"breadcrumbs\"><li><a class=\"breadcrumb-links\" hqid=\"1788908\"  href=\"/home\">Home</a></li> <li><span>&rsaquo;&rsaquo;</span><a hqid=\"3500940\" href=\"/omni\" class=\"breadcrumb-links\">Manhattan Active® Omni</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"2158393\" href=\"/order-management\" class=\"breadcrumb-links\">Order Management</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"2158394\" href=\"/process-configuration-guides\" class=\"breadcrumb-links\">Process & Configuration Guides</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"2158718\" href=\"/order-processing-2\" class=\"breadcrumb-links\">Order Processing</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"2158739\" href=\"/order-scheduling\" class=\"breadcrumb-links\">Order Scheduling</a></li><li> <span>››</span>Federal Trade Commission (FTC) Compliance</li></ul>  \t\r\n\t\t<h2>Federal Trade Commission (FTC) Compliance</h2>\r\n\r\n<p></p>\r\n\r\n<a href=\"/scheduling-rest-apis-user-exits\" hqid=\"2631751\">Previous</a>&nbsp;I&nbsp;<a href=\"/order-scheduling-troubleshooting\" hqid=\"2631764\">Next</a>\r\n<p>&nbsp;</p>\r\n\r\n<div class=\"info\"><ul><li><a href=\"/federal-trade-compliance$overview\">Overview</a></li><li><a href=\"/federal-trade-compliance$configuration\">Configuration</a><ul><li><a href=\"/federal-trade-compliance$order-configuration\">Order Configuration</a></li><li><a href=\"/federal-trade-compliance$email-configuration\">Email Configuration</a></li></ul></li><li><a href=\"/federal-trade-compliance$process-flow\">Process Flow</a></li><li><a href=\"/federal-trade-compliance$troubleshooting\">Troubleshooting</a><ul><li><a href=\"/federal-trade-compliance$milestone-is-not-getting-populated-on-the-order-line\">Milestone is not getting populated on the order line</a></li><li><a href=\"/federal-trade-compliance$the-event-is-not-populated-even-after-the-current-date-time-is-greater-than-the-nbsp-nexteventtime-nbsp-populated-for-the-order-line\">The event is not populated even after the current date/time is greater than the&nbsp;NextEventTime&nbsp;populated for the order line.</a></li><li><a href=\"/federal-trade-compliance$expectedtime-and-nexteventtime-are-not-populated-on-the-order-line\">ExpectedTime and NextEventTime are not populated on the order line</a></li><li><a href=\"/federal-trade-compliance$orderline-orderline-event-prereleasecancellation-nbsp-is-triggered-successfully-but-the-order-line-is-not-canceled\">OrderLine:OrderLine:Event:PreReleaseCancellation&nbsp;is triggered successfully, but the order line is not canceled</a></li><li><a href=\"/federal-trade-compliance$the-reasonid-nbsp-is-not-populated-properly-in-order-line-cancellation-history-nbsp\">The ReasonId&nbsp;is not populated properly in order line cancellation history&nbsp;</a></li><li><a href=\"/federal-trade-compliance$the-order-line-is-canceled-as-soon-as-it-is-created\">The order line is canceled as soon as it is created</a></li><li><a href=\"/federal-trade-compliance$ftccancellation-email-message-outbound-is-not-getting-generated\">FTCCancellation Email message outbound is not getting generated</a></li><li><a href=\"/federal-trade-compliance$ftcshipmentdelaynotification-nbsp-email-message-outbound-is-not-getting-generated\">FTCShipmentDelayNotification&nbsp;Email message outbound is not getting generated</a></li><li><a href=\"/federal-trade-compliance$the-original-promised-delivery-date-and-the-delay-or-new-promised-delivery-date-are-not-there-on-email-template-for-ftcshipmentdelaynotification-email-nbsp\">The Original Promised Delivery Date and the delay or new Promised Delivery Date are not there on Email Template for FTCShipmentDelayNotification email&nbsp;</a></li><li><a href=\"/federal-trade-compliance$can-a-retailer-take-consent-from-the-customer-nbsp-to-continue-processing-the-order-in-spite-of-any-delay-in-shipment-nbsp\">Can a retailer take consent from the customer&nbsp;to continue processing the order in spite of any delay in shipment?&nbsp;</a></li></ul></li><li><a href=\"/federal-trade-compliance$related-articles\">Related Articles</a></li></ul></div>\r\n\r\n<h3><a name=\"overview\" id=\"overview\"></a>Overview</h3>\r\n\r\n<p style=\"text-align: justify;\">Various countries have law enforcing agencies that issue laws and guidelines to safeguard and protect customer&#39;s interest.&nbsp;In United States, the Federal Trade Commission&nbsp;(FTC) enforces federal consumer protection laws that specify laws and guidelines to protect consumer interest and retailers have to comply with them.&nbsp;&nbsp;</p>\r\n\r\n<p style=\"text-align: justify;\">Manhattan Active&reg; Omni&nbsp;(MAO) supports retailers to comply with the FTC guidelines by providing tools and features to monitor orders&nbsp;for shipment delays, and&nbsp;inform the customer about the delay and take appropriate action based on the legal guidelines mandated&nbsp;by FTC.</p>\r\n\r\n<p style=\"text-align: justify;\">The following capability is provided to help retailers comply with FTC regulations by tracking and monitoring shipment delays for Ship To Address order lines and take appropriate actions as mentioned below:</p>\r\n\r\n<ul>\r\n\t<li style=\"text-align: justify;\">Track and monitor shipment delays&nbsp;with reference to the delivery date promised by the retailer that is captured in&nbsp;Promised Delivery Date on the Order Line or any other date captured on an order line attribute that&nbsp;retailer wishes&nbsp;to monitor the shipment delays,&nbsp;and cancel the order line if the promised delivery date cannot be met since the order line is not yet released. An order line cancellation email message will be triggered that can be used to communicate to the customer about the order line cancellation due to FTC compliance.</li>\r\n\t<li style=\"text-align: justify;\">Track and monitor shipment delays with reference to the expected time the items&nbsp;were supposed to be shipped by the retailer after the order is released to the DC or store so that it can be delivered to the customer as promised,&nbsp;and inform the customer about any delay in shipment via mail communication as many times the retailer deems fit - without canceling the order line.</li>\r\n\t<li style=\"text-align: justify;\">Track and monitor shipment delays with reference to the expected time the items&nbsp;were supposed to be shipped by the retailer after the order is released to the DC or store so that it can be delivered to the customer as promised,&nbsp;and <em>mark the order line for cancellation</em> if the retailer feels that&nbsp;at this point of time the delay in shipment will not be acceptable to the customer, so that if the DC or store can short the release the order line can be canceled without attempting for a reallocation. If the order line is canceled since it was marked for cancellation; an email message outbound is also triggered so that the customer can be informed of the cancellation.&nbsp;&nbsp;</li>\r\n</ul>\r\n\r\n<h3><a name=\"configuration\" id=\"configuration\"></a>Configuration</h3>\r\n\r\n<h4><a name=\"order-configuration\" id=\"order-configuration\"></a>Order Configuration</h4>\r\n\r\n<p>The following configuration has to be created for the system to monitor order lines to verify if the Ship To Address order lines&nbsp;are released and shipped within the stipulated time so that the promised delivery dates can be met for the order lines, and take appropriate action.</p>\r\n\r\n<ul>\r\n\t<li>Configurations for canceling order line due to delay in releasing the order line to DC or store:</li>\r\n</ul>\r\n\r\n<p><div class=\"toggle_outerdiv\"><p class=\"toggle_div\"><a href=\"#tg-1\" class=\"toggle-content\"><span class=\"toggle-title\">Order Line Milestone Configurations for FTC Cancellation</span></a></p><div id=\"tg-1\"><ul>\r\n\t<li>Order Line Milestone Rules have to be configured for monitoring the Ship To Address Order Lines&nbsp;to verify if there are any shipment delays hampering the delivery of shipment by the promised delivery date.&nbsp;</li>\r\n\t<li><a href=\"https://omni.helpdocsonline.com/order-orchestration$order-line-milestone-rule\">Order Line Milestone Rules UI </a>can be accessed by navigating to Menu &gt; Application Configuration &gt; Manage Order Configuration &gt; Order Line Milestone Rule</li>\r\n</ul>\r\n\r\n<ul>\r\n\t<li>Time Rules and Monitoring Rules have to be configured depending on the requirement for monitoring the order lines with Delivery Method Ship To Address with respect to a date capturing the promised delivery date on the order line for example orderLine.promissedDeliveryDate or any other base attribute or extended attribute for type timestamp.&nbsp;</li>\r\n\t<li>Depending on the Time Rules and Monitoring Rules configured for the order line milestone, the order lines that are not yet released (MaxFulfillment Status &lt; 3000) can be canceled&nbsp;by selecting the event&nbsp;OrderLine:OrderLine:Event:PreReleaseCancellation&nbsp;to be triggered if the&nbsp;OrderLine::Milestone::Released milestone is not met as per the expected time rules and monitoring rules configured.&nbsp;&nbsp;</li>\r\n\t<li>The event also generates an order line cancellation email message outbound if the order line/s&nbsp;gets canceled&nbsp;if they are having Delivery Method as Ship To Address and the Max Fulfillment Status was less than 3000 (not yet released; can be in open or allocated status).</li>\r\n\t<li>Details of the Event -&nbsp;OrderLine:OrderLine:Event:PreReleaseCancellation&nbsp;are given below:</li>\r\n</ul>\r\n\r\n<div class=\"computer_code\">&nbsp; &nbsp;{<br />\r\n&nbsp; &nbsp; &nbsp; &quot;Description&quot;: &quot;Cancel order lines not yet Released&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &quot;EventName&quot;: &quot;OrderLine:OrderLine:Event:PreReleaseCancellation&quot;<br />\r\n&nbsp; &nbsp; }</div>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<div class=\"warning\">This order event will cancel only Ship To Address Line which is not yet released.</div>\r\n\r\n<div class=\"info\" style=\"text-align: justify;\">This event also triggers the generation of&nbsp;FTCCancellation Email message outbound if the order lines are canceled due to FTC compliance without any other configurations required to me made in the system. Text message&nbsp;outbound are not generated by this event&nbsp;if the order lines are canceled due to FTC compliance.&nbsp;Refer to&nbsp;<a hqid=\"2444800\" href=\"/transactional-emails$FTC Cancellation Sample\">Transactional Emails</a>&nbsp;for details on the&nbsp;FTCCancellation Email message outbound</div>\r\n\r\n<ul>\r\n\t<li>\r\n\t<p style=\"text-align: justify;\">Custom events can be created and added to the entity&nbsp;orderLineEventDefinition&nbsp;using the below mentioned API so that they are available to be configured in the Order Line Milestone Monitoring Rules. However, the existing Events cannot be deleted or modified.</p>\r\n\r\n\t<ul>\r\n\t\t<li>POST&nbsp;{{url}}/order/api/order/orderLineEventDefinition</li>\r\n\t</ul>\r\n\t</li>\r\n</ul>\r\n\r\n<ul>\r\n\t<li>A sample Order Line Milestone Rule is given below for configuring FTC cancellation.</li>\r\n</ul>\r\n\r\n<p><strong>Use Case:</strong></p>\r\n\r\n<p>The retailer wants to monitor if the Ship To Address order line is not released a day before the promised delivery date; and if it is not yet released&nbsp;cancel the order line since the item cannot be delivered on promised delivery date as anticipated.</p>\r\n\r\n<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"1082\">\r\n\t<tbody>\r\n\t\t<tr height=\"19\">\r\n\t\t\t<td colspan=\"9\" height=\"19\" width=\"1082\"><strong>Order Line Milestone - Monitoring Rules</strong></td>\r\n\t\t</tr>\r\n\t\t<tr height=\"19\">\r\n\t\t\t<td height=\"19\"><em>RuleId</em></td>\r\n\t\t\t<td><em>MilestoneDefinitionId</em></td>\r\n\t\t\t<td><em>Type</em></td>\r\n\t\t\t<td><em>Duration</em></td>\r\n\t\t\t<td colspan=\"3\" rowspan=\"1\"><em>EventName</em></td>\r\n\t\t\t<td colspan=\"2\">RaiseAlways</td>\r\n\t\t</tr>\r\n\t\t<tr height=\"19\">\r\n\t\t\t<td height=\"19\">FTC Cancellation</td>\r\n\t\t\t<td>OrderLine::Milestone::Released</td>\r\n\t\t\t<td>EXPECTED_TIME</td>\r\n\t\t\t<td align=\"right\">-86400</td>\r\n\t\t\t<td colspan=\"3\" rowspan=\"1\">OrderLine:OrderLine:Event:PreReleaseCancellation</td>\r\n\t\t\t<td align=\"center\" colspan=\"2\">FALSE</td>\r\n\t\t</tr>\r\n\t\t<tr height=\"19\">\r\n\t\t\t<td colspan=\"9\" height=\"19\"><strong>Order Line Milestone - Time Rules</strong></td>\r\n\t\t</tr>\r\n\t\t<tr height=\"19\">\r\n\t\t\t<td height=\"19\"><em>RuleId</em></td>\r\n\t\t\t<td colspan=\"2\" rowspan=\"1\"><em>MilestoneDefinitionId</em></td>\r\n\t\t\t<td><em>Duration</em></td>\r\n\t\t\t<td>Type</td>\r\n\t\t\t<td><em>TimeProperty</em></td>\r\n\t\t\t<td><em>DependentMilestoneId</em></td>\r\n\t\t\t<td>DependentStatusId</td>\r\n\t\t</tr>\r\n\t\t<tr height=\"19\">\r\n\t\t\t<td>Expected Release Time</td>\r\n\t\t\t<td>OrderLine::Milestone::Released</td>\r\n\t\t\t<td align=\"right\">&nbsp;</td>\r\n\t\t\t<td>Null</td>\r\n\t\t\t<td>TIME_PROPERTY</td>\r\n\t\t\t<td>PromisedDeliveryDate</td>\r\n\t\t\t<td>Null</td>\r\n\t\t\t<td>Null</td>\r\n\t\t</tr>\r\n\t</tbody>\r\n</table>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p>Sample json for configuring the&nbsp;Order Line Milestone - Monitoring Rules for this use case is given below</p>\r\n\r\n<p>API:&nbsp;POST {{url}}/order/api/order/orderLineMilestoneRule/save</p>\r\n\r\n<div class=\"computer_code\">{<br />\r\n&nbsp; &quot;OrderLineMonitoringRule&quot;: [<br />\r\n&nbsp; &nbsp; {<br />\r\n&nbsp; &nbsp; &nbsp; &quot;RuleId&quot;: &quot;FTCCancellation&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &quot;MilestoneDefinitionId&quot;: &quot;OrderLine::Milestone::Released&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &quot;Duration&quot;: -86400,<br />\r\n&nbsp; &nbsp; &nbsp; &quot;EventName&quot;: &quot;OrderLine:OrderLine:Event:PreReleaseCancellation&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &quot;RaiseAlways&quot;: false,<br />\r\n&nbsp; &nbsp; &nbsp; &quot;Type&quot;: &quot;EXPECTED_TIME&quot;<br />\r\n&nbsp; &nbsp; }<br />\r\n&nbsp; ],<br />\r\n&nbsp; &quot;DeliveryMethodId&quot;: &quot;ShipToAddress&quot;,<br />\r\n&nbsp; &quot;RuleId&quot;: &quot;FTCCancellation&quot;,<br />\r\n&nbsp; &quot;OrderLineExpectedTimeRule&quot;: [<br />\r\n&nbsp; &nbsp; {<br />\r\n&nbsp; &nbsp; &nbsp; &quot;DependentMilestoneId&quot;: null,<br />\r\n&nbsp; &nbsp; &nbsp; &quot;TimeProperty&quot;: &quot;PromisedDeliveryDate&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &quot;RuleId&quot;: &quot;Expected Release Time&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &quot;MilestoneDefinitionId&quot;: &quot;OrderLine::Milestone::Released&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &quot;Duration&quot;: null,<br />\r\n&nbsp; &nbsp; &nbsp; &quot;Type&quot;: &quot;TIME_PROPERTY&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &quot;DependentStatusId&quot;: null<br />\r\n&nbsp; &nbsp; }<br />\r\n&nbsp; ],<br />\r\n&nbsp; &quot;IsGift&quot;: false,<br />\r\n&nbsp; &quot;OrderTypeId&quot;: &quot;Ecom Order&quot;,<br />\r\n&nbsp; &quot;OrderLineMilestoneRuleShippingMethod&quot;: []<br />\r\n}</div>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<div class=\"tip\">It is not mandatory to have orderLine.promisedDeliveryDate as the Time Property selected in the Milestone configurations;&nbsp;any other timestamp existing on orderLine can also be used. If the time property selected in the milestone configuration is not populated or is null; expected time and NextEventTime will not be populated and will be set to null</div>\r\n\r\n<p>The following ReasonId&nbsp;has been added to the seed data which will be populated by the system in the order line cancellation history</p>\r\n\r\n<div class=\"computer_code\">{<br />\r\n&nbsp; &nbsp; &quot;ReasonId&quot;: &quot;FTCCancelLine&quot;,<br />\r\n&nbsp; &nbsp; &quot;ReasonTypeId&quot;: &quot;Cancel&quot;,<br />\r\n&nbsp; &nbsp; &quot;Description&quot;: &quot;Cancel order line not yet released due to FTC compliance by order line mile stone event OrderLine:OrderLine:Event:PreReleaseCancellation&quot;,<br />\r\n&nbsp; &nbsp; &quot;ShortDescription&quot;: &quot;FTC Cancel Line&quot;,<br />\r\n&nbsp; &nbsp; &quot;ReallocateOnShort&quot;: false,<br />\r\n&nbsp; &nbsp; &quot;CancellationInitiatedBy&quot;: {<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &quot;InitiatedBy&quot;: &quot;System&quot;<br />\r\n&nbsp; &nbsp; }<br />\r\n}</div>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<div class=\"warning\">Note: Since ReasonId is profile based entity, the above mentioned ReasionId has to be added in each Profile. If this ResonId does not exist in the system, it will not be populated on the order line cancellation history.&nbsp;</div>\r\n\r\n<div class=\"warning\">If all the lines in the order are canceled, the entire order will be canceled</div>\r\n\r\n<div class=\"tip\" style=\"text-align: justify;\">To avoid order line cancellation due to FTC compliance wherein the order line is allocated but not yet released due to unavoidable situations, try enabling&nbsp;<a href=\"https://omni.helpdocsonline.com/continuous-allocation$how-to-enable-continuous-allocation\">Continuous Allocation</a>&nbsp;so that the order line can be reallocated to other locations and meet the promised delivery date.&nbsp;</div>\r\n</div></div></p>\r\n\r\n<ul>\r\n\t<li>Configurations for generating shipment delay intimation due to delay in shipping&nbsp;the order line from DC or store:</li>\r\n</ul>\r\n\r\n<p><div class=\"toggle_outerdiv\"><p class=\"toggle_div\"><a href=\"#tg-2\" class=\"toggle-content\"><span class=\"toggle-title\">Order Line Milestone Configurations for FTC Shipment Delay Intimation</span></a></p><div id=\"tg-2\"><ul>\n\t<li style=\"text-align: justify;\">Order Line Milestone Rules have to be configured for monitoring the Ship To Address Order Lines&nbsp;to verify if there are any shipment delays hampering the delivery of shipment after the order line is released to the DC or Store.&nbsp;</li>\n\t<li style=\"text-align: justify;\"><a href=\"https://omni.helpdocsonline.com/order-orchestration$order-line-milestone-rule\">Order Line Milestone Rules UI </a>can be accessed from the Omnifacade Menu:&nbsp;{{url}}/omnifacade/#/OrderLineMilestoneRule</li>\n</ul>\n\n<ul>\n\t<li style=\"text-align: justify;\">Time Rules and Monitoring Rules have to be configured depending on the requirement for monitoring the order lines with Delivery Method Ship To Address to trigger shipment delay intimation event if any delay occurs in shipping with respect to the expected time it would normally take for the DC or store to ship the items.&nbsp;</li>\n\t<li style=\"text-align: justify;\">Depending on the Time Rules and Monitoring Rules configured for the order line milestone, the order lines that are&nbsp;released but not yet shipped (fulfilled) (3000 &lt;=&nbsp;MaxFulfillment Status &lt; 7000) can be monitored for any delay in shipment&nbsp;by selecting the&nbsp;event&nbsp;OrderLine:OrderLine:Event:FTCDelayNotification&nbsp;to be triggered if the&nbsp;OrderLine::Milestone::Fulfilled milestone is not met as per the expected time rules and monitoring rules configured.&nbsp;&nbsp;</li>\n\t<li style=\"text-align: justify;\">The event generates a&nbsp;shipment delay intimation email message outbound if the order line/s are not yet fulfilled as expected and configured in the order line milestone.</li>\n\t<li>Details of the Event -&nbsp;OrderLine:OrderLine:Event:PreReleaseCancellation&nbsp;are given below:</li>\n</ul>\n\n<p>&nbsp; &nbsp;{<br />\n&nbsp; &nbsp; &nbsp; &quot;Description&quot;: &quot;Notify&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;delay&nbsp;in&nbsp;shipment&quot;,<br />\n&nbsp; &nbsp; &nbsp; &quot;EventName&quot;: &quot;OrderLine:OrderLine:Event:FTCDelayNotification&quot;<br />\n&nbsp; &nbsp; }</p>\n\n<p>&nbsp;</p>\n\n<p>Custom events can be created and added to the entity&nbsp;orderLineEventDefinition&nbsp;using the below mentioned API so that they are available to be configured in the Order Line Milestone Monitoring Rules. However, the existing Events cannot be deleted or modified.</p>\n\n<ul>\n\t<li>POST&nbsp;{{url}}/order/api/order/orderLineEventDefinition</li>\n\t<li>A sample Order Line Milestone Rule is given below for configuring FTC cancellation.</li>\n</ul>\n\n<p><strong>Use Case:</strong></p>\n\n<p style=\"text-align: justify;\">Retailer would want to configure the system to monitor any delay in shipping ship to address&nbsp;order lines with respect to the expected time it would take for the order lines to ship normally. The retailer also wants to communicate the delay in shipment multiple times. This can be achieved by configuring order line milestone for Fulfilled Milestone and configuring the FTCDelayNotification Event to trigger an email out bound if shipment is delayed beyond the expected time for multiple times in the Monitoring Rule. A sample order line milestone configuration is given below.</p>\n\n<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"1082\">\n\t<tbody>\n\t\t<tr height=\"19\">\n\t\t\t<td colspan=\"9\" height=\"19\" width=\"1082\"><strong>Order Line Milestone - Monitoring Rules</strong></td>\n\t\t</tr>\n\t\t<tr height=\"19\">\n\t\t\t<td height=\"19\"><em>RuleId</em></td>\n\t\t\t<td><em>MilestoneDefinitionId</em></td>\n\t\t\t<td><em>Type</em></td>\n\t\t\t<td><em>Duration</em></td>\n\t\t\t<td colspan=\"3\" rowspan=\"1\"><em>EventName</em></td>\n\t\t\t<td colspan=\"2\">RaiseAlways</td>\n\t\t</tr>\n\t\t<tr height=\"19\">\n\t\t\t<td height=\"19\">FTCShipmentDelayNotification-1</td>\n\t\t\t<td>OrderLine::Milestone::Fulfilled</td>\n\t\t\t<td>EXPECTED_TIME</td>\n\t\t\t<td align=\"right\">259200 (3 days)</td>\n\t\t\t<td colspan=\"3\" rowspan=\"1\">OrderLine:OrderLine:Event:FTCDelayNotification</td>\n\t\t\t<td align=\"center\" colspan=\"2\">FALSE</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td height=\"19\">FTCShipmentDelayNotification-2</td>\n\t\t\t<td>OrderLine::Milestone::Fulfilled</td>\n\t\t\t<td>EXPECTED_TIME</td>\n\t\t\t<td align=\"right\">518400 (6 days)</td>\n\t\t\t<td colspan=\"3\">OrderLine:OrderLine:Event:FTCDelayNotification</td>\n\t\t\t<td align=\"center\" colspan=\"2\">FALSE</td>\n\t\t</tr>\n\t\t<tr height=\"19\">\n\t\t\t<td colspan=\"9\" height=\"19\"><strong>Order Line Milestone - Time Rules</strong></td>\n\t\t</tr>\n\t\t<tr height=\"19\">\n\t\t\t<td height=\"19\"><em>RuleId</em></td>\n\t\t\t<td rowspan=\"1\"><em>MilestoneDefinitionId</em></td>\n\t\t\t<td rowspan=\"1\">Type</td>\n\t\t\t<td><em>Duration</em></td>\n\t\t\t<td colspan=\"2\" rowspan=\"1\"><em>TimeProperty</em></td>\n\t\t\t<td><em>DependentMilestoneId</em></td>\n\t\t\t<td>DependentStatusId</td>\n\t\t</tr>\n\t\t<tr height=\"19\">\n\t\t\t<td>Expected Release Time</td>\n\t\t\t<td>OrderLine::Milestone::Fulfilled</td>\n\t\t\t<td align=\"right\">AFTER_MILESTONE</td>\n\t\t\t<td>259200 (3 days)</td>\n\t\t\t<td colspan=\"2\" rowspan=\"1\">PromisedDeliveryDate</td>\n\t\t\t<td>OrderLine::Milestone::Released</td>\n\t\t\t<td>Null</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>&nbsp;</p>\n\n<p>Sample json for configuring the&nbsp;Order Line Milestone - Monitoring Rules for this use case is given below</p>\n\n<p>API:&nbsp;POST {{url}}/order/api/order/orderLineMilestoneRule/save</p>\n\n<p>{<br />\n&nbsp; &nbsp; &quot;OrderLineMonitoringRule&quot;: [<br />\n&nbsp; &nbsp; &nbsp; &nbsp; {<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;RuleId&quot;: &quot;FTCShipmentDelayNotification-1&quot;,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;MilestoneDefinitionId&quot;: &quot;OrderLine::Milestone::Fulfilled&quot;,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;Duration&quot;: 259200,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;EventName&quot;: &quot;OrderLine:OrderLine:Event:FTCDelayNotification&quot;,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;RaiseAlways&quot;: false,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;Type&quot;: &quot;EXPECTED_TIME&quot;<br />\n&nbsp; &nbsp; &nbsp; &nbsp; },<br />\n&nbsp; &nbsp; &nbsp; &nbsp; {<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;RuleId&quot;: &quot;FTCShipmentDelayNotification-2&quot;,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;MilestoneDefinitionId&quot;: &quot;OrderLine::Milestone::Fulfilled&quot;,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;Duration&quot;: 518400,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;EventName&quot;: &quot;OrderLine:OrderLine:Event:FTCDelayNotification&quot;,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;RaiseAlways&quot;: false,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;Type&quot;: &quot;EXPECTED_TIME&quot;<br />\n&nbsp; &nbsp; &nbsp; &nbsp; }<br />\n&nbsp; &nbsp; ],<br />\n&nbsp; &nbsp; &quot;DeliveryMethodId&quot;: &quot;ShipToAddress&quot;,<br />\n&nbsp; &nbsp; &quot;RuleId&quot;: &quot;FTCShipmentDelayNotification&quot;,<br />\n&nbsp; &nbsp; &quot;OrderLineExpectedTimeRule&quot;: [<br />\n&nbsp; &nbsp; &nbsp; &nbsp; {<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;DependentMilestoneId&quot;: &quot;OrderLine::Milestone::Released&quot;,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;TimeProperty&quot;: null,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;RuleId&quot;: &quot;ShipmentDelayNotification&quot;,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;MilestoneDefinitionId&quot;: &quot;OrderLine::Milestone::Fulfilled&quot;,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;Duration&quot;: 259200,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;Type&quot;: &quot;AFTER_MILESTONE&quot;,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;DependentStatusId&quot;: null<br />\n&nbsp; &nbsp; &nbsp; &nbsp; }<br />\n&nbsp; &nbsp; ],<br />\n&nbsp; &nbsp; &quot;IsGift&quot;: false,<br />\n&nbsp; &nbsp; &quot;OrderTypeId&quot;: &quot;Ecom Order&quot;,<br />\n&nbsp; &nbsp; &quot;OrderLineMilestoneRuleShippingMethod&quot;: []<br />\n}</p>\n\n<p style=\"text-align: justify;\">It is not mandatory to have a fixed duration for the milestone expected time configuration. Any timestamp attribute on orderLine.promisedDeliveryDate as the Time Property selected in the Milestone configurations, or any other timestamp existing on order&nbsp;line&nbsp;like PromisedDeliveryDate or&nbsp;PromisedShipDate or RequestedDeliveryDate or&nbsp;LatestDeliveryDate can also be used. If the time property selected in the milestone configuration is not populated or is null; the expected time and NextEventTime will not be populated and will be set to null</p>\n</div></div></p>\r\n\r\n<ul>\r\n\t<li>Configurations for marking the order line for cancellation due to delay in shipping&nbsp;the order line from DC or store:</li>\r\n</ul>\r\n\r\n<p><div class=\"toggle_outerdiv\"><p class=\"toggle_div\"><a href=\"#tg-3\" class=\"toggle-content\"><span class=\"toggle-title\">Order Line Milestone Configurations to mark order lines for Cancellation</span></a></p><div id=\"tg-3\"><ul>\n\t<li style=\"text-align: justify;\">Order Line Milestone Rules have to be configured for monitoring the Ship To Address Order Lines&nbsp;to verify if there are any shipment delays hampering the delivery of shipment&nbsp;after the order line is released to the DC or Store. If the delay in shipment implies that the items cannot be delivered on the date promised, the retailer&nbsp;may want to mark the order lines for cancellation in case fulfillment system sends a short order event - irrespective of the reallocate on short configuration set in the reasonId.</li>\n\t<li style=\"text-align: justify;\"><a href=\"https://omni.helpdocsonline.com/order-orchestration$order-line-milestone-rule\">Order Line Milestone Rules UI </a>can be accessed from the Omnifacade Menu:&nbsp;{{url}}/omnifacade/#/OrderLineMilestoneRule</li>\n</ul>\n\n<ul>\n\t<li style=\"text-align: justify;\">Time Rules and Monitoring Rules have to be configured depending on the requirement for monitoring the order lines with Delivery Method Ship To Address to trigger Event:MarkForCancellation event</li>\n\t<li style=\"text-align: justify;\">Depending on the Time Rules and Monitoring Rules configured for the order line milestone, the order lines that are not released (MaxFulfillment Status &gt; 3000) can be marked for cancellation by selecting the event&nbsp;OrderLine:OrderLine:Event:MarkForCancellation&nbsp;to be triggered if the&nbsp;OrderLine::Milestone::Released milestone is not met as per the expected time rules and monitoring rules configured.&nbsp;&nbsp;</li>\n\t<li style=\"text-align: justify;\">The event also generates an order line cancellation email message outbound if the order line/s&nbsp;gets canceled&nbsp;if they are having Delivery Method as Ship To Address and the Max Fulfillment Status is equal to 3000 (released but not yet shipped/fulfilled even partially).</li>\n\t<li style=\"text-align: justify;\">Details of the Event -&nbsp;OrderLine:OrderLine:Event:MarkForCancellation&nbsp;are given below:</li>\n</ul>\n\n<p>&nbsp; &nbsp;{<br />\n&nbsp; &nbsp; &nbsp; &quot;Description&quot;: &quot;Mark&nbsp;released&nbsp;order&nbsp;lines&nbsp;for&nbsp;cancellation&quot;,<br />\n&nbsp; &nbsp; &nbsp; &quot;EventName&quot;: &quot;OrderLine:OrderLine:Event:MarkForCancellation&quot;<br />\n&nbsp; &nbsp; }</p>\n\n<p style=\"text-align: justify;\">This order event only marks the order lines with Ship To Address delivery method, and released but not yet shipped/fulfilled (MaxFulfillment Status = 3000). The name of the attribute is&nbsp;&quot;IsMarkedForCancellation&quot; and is available under OrderLine -&gt; OrderLineAdditional. If the order line is marked for cancellation, then the attribute&nbsp;will be populated as &quot;IsMarkedForCancellation&quot; = true.&nbsp;The attribute&nbsp;&quot;IsMarkedForCancellation&quot; can also be updated using order save.&nbsp;</p>\n\n<div class=\"warning\" style=\"text-align: justify;\">If orderLineorderLineAdditional.IsMarkedForCancellation = true and short order event is received for the Release belonging to this order line, the quantity shorted in the order event will be canceled irrespective of the reallocate on short configuration&nbsp;</div>\n\n<p style=\"text-align: justify;\">This event also triggers the generation of&nbsp;FTCCancellation Email message outbound if the order lines are canceled due to&nbsp;the above mentioned behaviour without any other configurations required to me made in the system. Text message&nbsp;outbound are not generated by this event. Refer to&nbsp;<a hqid=\"2444800\" href=\"/transactional-emails\">Transactional Emails</a>&nbsp;for details on the&nbsp;FTCCancellation Email message outbound</p>\n\n<ul>\n\t<li>\n\t<p>Custom events can be created and added to the entity&nbsp;orderLineEventDefinition&nbsp;using the below mentioned API so that they are available to be configured in the Order Line Milestone Monitoring Rules. However, the existing Events cannot be deleted or modified.</p>\n\n\t<ul>\n\t\t<li>POST&nbsp;{{url}}/order/api/order/orderLineEventDefinition</li>\n\t</ul>\n\t</li>\n</ul>\n\n<ul>\n\t<li>A sample Order Line Milestone Rule is given below for configuring FTC cancellation.</li>\n</ul>\n\n<p><strong>Use Case:</strong></p>\n\n<p>The retailer wants to monitor if the Ship To Address order line is not released a day before the promised delivery date; and if it is not yet released&nbsp;cancel the order line since the item cannot be delivered on promised delivery date as anticipated.</p>\n\n<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"1082\">\n\t<tbody>\n\t\t<tr height=\"19\">\n\t\t\t<td colspan=\"9\" height=\"19\" width=\"1082\"><strong>Order Line Milestone - Monitoring Rules</strong></td>\n\t\t</tr>\n\t\t<tr height=\"19\">\n\t\t\t<td height=\"19\"><em>RuleId</em></td>\n\t\t\t<td><em>MilestoneDefinitionId</em></td>\n\t\t\t<td><em>Type</em></td>\n\t\t\t<td><em>Duration</em></td>\n\t\t\t<td colspan=\"3\" rowspan=\"1\"><em>EventName</em></td>\n\t\t\t<td colspan=\"2\">RaiseAlways</td>\n\t\t</tr>\n\t\t<tr height=\"19\">\n\t\t\t<td height=\"19\">FTCMarkForCancellation</td>\n\t\t\t<td>OrderLine::Milestone::Fulfilled</td>\n\t\t\t<td>EXPECTED_TIME</td>\n\t\t\t<td align=\"right\">259200 (3 days)</td>\n\t\t\t<td colspan=\"3\" rowspan=\"1\">OrderLine:OrderLine:Event:MarkForCancellation</td>\n\t\t\t<td align=\"center\" colspan=\"2\">FALSE</td>\n\t\t</tr>\n\t\t<tr height=\"19\">\n\t\t\t<td colspan=\"9\" height=\"19\"><strong>Order Line Milestone - Time Rules</strong></td>\n\t\t</tr>\n\t\t<tr height=\"19\">\n\t\t\t<td height=\"19\"><em>RuleId</em></td>\n\t\t\t<td rowspan=\"1\"><em>MilestoneDefinitionId</em></td>\n\t\t\t<td rowspan=\"1\">Type</td>\n\t\t\t<td><em>Duration</em></td>\n\t\t\t<td colspan=\"2\" rowspan=\"1\"><em>TimeProperty</em></td>\n\t\t\t<td><em>DependentMilestoneId</em></td>\n\t\t\t<td>DependentStatusId</td>\n\t\t</tr>\n\t\t<tr height=\"19\">\n\t\t\t<td>FTCMarkForCancellation</td>\n\t\t\t<td>OrderLine::Milestone::Fulfilled</td>\n\t\t\t<td align=\"right\">AFTER_MILESTONE</td>\n\t\t\t<td>259200 (3 days)</td>\n\t\t\t<td colspan=\"2\" rowspan=\"1\">PromisedDeliveryDate</td>\n\t\t\t<td>OrderLine::Milestone::Released</td>\n\t\t\t<td>Null</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>Sample json for configuring the&nbsp;Order Line Milestone - Monitoring Rules for this use case is given below</p>\n\n<p>API:&nbsp;POST {{url}}/order/api/order/orderLineMilestoneRule/save</p>\n\n<p>{<br />\n&nbsp; &nbsp; &quot;OrderLineMonitoringRule&quot;: [<br />\n&nbsp; &nbsp; &nbsp; &nbsp; {<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;RuleId&quot;: &quot;FTCMarkForCancellation&quot;,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;MilestoneDefinitionId&quot;: &quot;OrderLine::Milestone::Fulfilled&quot;,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;Duration&quot;: 1,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;EventName&quot;: &quot;OrderLine:OrderLine:Event:MarkForCancellation&quot;,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;RaiseAlways&quot;: false,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;Type&quot;: &quot;EXPECTED_TIME&quot;<br />\n&nbsp; &nbsp; &nbsp; &nbsp; }<br />\n&nbsp; &nbsp; ],<br />\n&nbsp; &nbsp; &quot;DeliveryMethodId&quot;: &quot;ShipToAddress&quot;,<br />\n&nbsp; &nbsp; &quot;RuleId&quot;: &quot;FTCMarkForCancellation&quot;,<br />\n&nbsp; &nbsp; &quot;OrderLineExpectedTimeRule&quot;: [<br />\n&nbsp; &nbsp; &nbsp; &nbsp; {<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;DependentMilestoneId&quot;: &quot;OrderLine::Milestone::Released&quot;,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;TimeProperty&quot;: null,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;RuleId&quot;: &quot;FTCMarkForCancellation &quot;,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;MilestoneDefinitionId&quot;: &quot;OrderLine::Milestone::Fulfilled&quot;,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;Duration&quot;: 5,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;Type&quot;: &quot;AFTER_MILESTONE&quot;,<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;DependentStatusId&quot;: null<br />\n&nbsp; &nbsp; &nbsp; &nbsp; }<br />\n&nbsp; &nbsp; ],<br />\n&nbsp; &nbsp; &quot;IsGift&quot;: false,<br />\n&nbsp; &nbsp; &quot;OrderTypeId&quot;: &quot;Ecom Order&quot;,<br />\n&nbsp; &nbsp; &quot;OrderLineMilestoneRuleShippingMethod&quot;: []<br />\n}</p>\n\n<p style=\"text-align: justify;\">It is not mandatory to have a fixed duration for the milestone expected time configuration. Any timestamp attribute on orderLine.promisedDeliveryDate as the Time Property selected in the Milestone configurations, or any other timestamp existing on the order&nbsp;line&nbsp;like PromisedDeliveryDate or&nbsp;PromisedShipDate or RequestedDeliveryDate or&nbsp;LatestDeliveryDatecan&nbsp;can also be used. If the time property selected in the milestone configuration is not populated or is null; expected time and NextEventTime will not be populated and will be set to null.&nbsp;</p>\n\n<p style=\"text-align: justify;\">The order line cancellation history will be populated with the ReasonId mentioned below (if configured) - irrespective of the ReasonId populated on the Short Order Event. The ReasonId populated on the Short Order Event will be recorded on the comments attributes of the cancel history.</p>\n\n<p>The following ReasonId&nbsp;has been added to the seed data which will be populated by the system in the order line cancellation history</p>\n\n<p>{<br />\n&nbsp; &nbsp; &quot;ReasonId&quot;: &quot;FTCCancelLine&quot;,<br />\n&nbsp; &nbsp; &quot;ReasonTypeId&quot;: &quot;Cancel&quot;,<br />\n&nbsp; &nbsp; &quot;Description&quot;: &quot;Cancel order line not yet released due to FTC compliance by order line mile stone event OrderLine:OrderLine:Event:PreReleaseCancellation&quot;,<br />\n&nbsp; &nbsp; &quot;ShortDescription&quot;: &quot;FTC Cancel Line&quot;,<br />\n&nbsp; &nbsp; &quot;ReallocateOnShort&quot;: false,<br />\n&nbsp; &nbsp; &quot;CancellationInitiatedBy&quot;: {<br />\n&nbsp; &nbsp; &nbsp; &nbsp; &quot;InitiatedBy&quot;: &quot;System&quot;<br />\n&nbsp; &nbsp; }<br />\n}</p>\n\n<p>&nbsp;</p>\n\n<div class=\"info\">Note: Since ReasonId is profile based entity, the above mentioned ReasionId has to be added in each Profile. If this ResonId does not exist in the system, it will not be populated on the order line cancellation history.&nbsp;</div>\n\n<div class=\"info\">If all the lines in the order are canceled, the entire order will be canceled</div>\n\n<div class=\"warning\" style=\"text-align: justify;\">If the attribute orderLine.orderLineAdditional.IsMarkedForCancellation = true for a order line; any&nbsp;order event other than Short is interfaced&nbsp;- it will be prepossessed accordingly and quantities will NOT be canceled just because this attribute is marked for cancellation</div>\n\n<div class=\"info\">1) The&nbsp;attribute orderLine.orderLineAdditional.IsMarkedForCancellation can be used in order line custom cancellation agent as part of the query to fetch order lines for cancellation if the retailer doe not&nbsp;want to&nbsp;cancel the lines through order event short.<br />\n2) The attribute orderLine.orderLineAdditional.IsMarkedForCancellation&nbsp;can be updated via save order call&nbsp;from True to False or from Null to False or True or from False to True.<br />\n3) Any other process like Late Order Cancellation will NOT be affected by this attribute and will be processed as usual</div>\n</div></div></p>\r\n\r\n<h4><a name=\"email-configuration\" id=\"email-configuration\"></a>Email Configuration</h4>\r\n\r\n<p>Refer&nbsp;<a hqid=\"2444800\" href=\"/transactional-emails$Configuring FTC Cancellation\">Transactional Emails</a></p>\r\n\r\n<h3><a name=\"process-flow\" id=\"process-flow\"></a>Process Flow</h3>\r\n\r\n<ul>\r\n\t<li>Process flow for canceling order line due to delay in releasing the order line to DC or Store:</li>\r\n</ul>\r\n\r\n<p><div class=\"toggle_outerdiv\"><p class=\"toggle_div\"><a href=\"#tg-4\" class=\"toggle-content\"><span class=\"toggle-title\">FTC Prerelease Cancellation Process Flow</span></a></p><div id=\"tg-4\"><p><img align=\"left\" alt=\"\" border=\"2\" class=\"\" src=\"https://dzf8vqv24eqhg.cloudfront.net/userfiles/4665/7671/ckfinder/images/qu/4017/FTCPreReleaseCancellation.jpg?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9kemY4dnF2MjRlcWhnLmNsb3VkZnJvbnQubmV0L3VzZXJmaWxlcy80NjY1Lzc2NzEvY2tmaW5kZXIvaW1hZ2VzL3F1LzQwMTcvRlRDUHJlUmVsZWFzZUNhbmNlbGxhdGlvbi5qcGciLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE3NTQ3NTE3MTl9fX1dfQ__&Signature=VNeDq4J11Q7fETsKcZMtNsM95fW8i3WJaD47pFMvPJ3HJSZ-BszC1~KZgKno6ZFzhRAl19a-XGMZmr2fKw7TYSgCPmo0HzCe36yI3cwEJMth7L7a~vXEtm~UniffCbujl6fQzSzBpdDZ72T82bui1KCFjB6SxCctPW1Pspo9Q1BlA0XxCJZQfbT040f6Hsgo3y0iYd-Gum0MI5IBLAjAk~UAMGj7ztmWZN5QCdUjjNmt4pOCb7LN-X~lB1HIPojmGqhqgAnlhekyIHohDF8y1z4uOs9SkFQMvu~kLdiy5zD-Q674jQsehacS82Z7r~lD5Cd4BHxKEzS2K9NJD73pzg__&Key-Pair-Id=K2TK3EG287XSFC\" style=\"margin-right:5px;padding:5px;\" /></p>\r\n\r\n\r\n</div></div></p>\r\n\r\n<ul>\r\n\t<li>Process flow for generating shipment delay intimation due to delay in shipping the order line from DC or Store:</li>\r\n</ul>\r\n\r\n<p><div class=\"toggle_outerdiv\"><p class=\"toggle_div\"><a href=\"#tg-5\" class=\"toggle-content\"><span class=\"toggle-title\">FTC Shipment Delay Intimation Process Flow</span></a></p><div id=\"tg-5\"><p><img src=\"https://dzf8vqv24eqhg.cloudfront.net/userfiles/4665/7671/ckfinder/images/qu/FTCShipmentDelayIntimation(1).jpg?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9kemY4dnF2MjRlcWhnLmNsb3VkZnJvbnQubmV0L3VzZXJmaWxlcy80NjY1Lzc2NzEvY2tmaW5kZXIvaW1hZ2VzL3F1L0ZUQ1NoaXBtZW50RGVsYXlJbnRpbWF0aW9uKDEpLmpwZyIsIkNvbmRpdGlvbiI6eyJEYXRlTGVzc1RoYW4iOnsiQVdTOkVwb2NoVGltZSI6MTc1NDc1MTcxOX19fV19&Signature=Fk0khDbS5--n9aGievpjx~CVhGAiFqs9RafNafmrenZnX13K1dU3FgKJKyrPMEFDMrXtIc3FF9AcLArpwP0yeHw8tBSAsqBx5Nf~He3LszIY8st2LBcraTkYnzl5S0Nw3qGEm0s661GQtcCYw~vo2jjfLHkJHu-0r6OUIP7VR2gpwUSTHUnMVSzBrXvrPXe6H9XgVW7CicJTbqzlYu8mkoVSSnCt9~53lX2q8ITHEvhjUbfIrzWAr~qibA~iHCyCPcA4-F7KZJEwpSDcu72yEe9Jg-30X3Ad117tvPlStzQuIknKdRHavXau4gOEAPT-Y3VeQneCh0cnEu3a2HF5mg__&Key-Pair-Id=K2TK3EG287XSFC\" /></p>\r\n</div></div></p>\r\n\r\n<ul>\r\n\t<li>Process flow for marking the order line for cancellation due to delay in shipping&nbsp;the order line from DC or store:</li>\r\n</ul>\r\n\r\n<p><div class=\"toggle_outerdiv\"><p class=\"toggle_div\"><a href=\"#tg-6\" class=\"toggle-content\"><span class=\"toggle-title\">FTC Mark For Cancelation Process Flow</span></a></p><div id=\"tg-6\"><p><img align=\"left\" alt=\"\" border=\"2\" class=\"\" src=\"https://dzf8vqv24eqhg.cloudfront.net/userfiles/4665/7671/ckfinder/images/qu/8954/FTCMarkForCancellation.jpg?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9kemY4dnF2MjRlcWhnLmNsb3VkZnJvbnQubmV0L3VzZXJmaWxlcy80NjY1Lzc2NzEvY2tmaW5kZXIvaW1hZ2VzL3F1Lzg5NTQvRlRDTWFya0ZvckNhbmNlbGxhdGlvbi5qcGciLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE3NTQ3NTE3MTl9fX1dfQ__&Signature=XagK54T-py4d1xRh2GICz7ymHRwWI-hUEtmjlN6FbilR163hWYf96Zo~eu-8qTRh7nJ7zofXpth0We3Ju3-vxjFjBV2P1xqGO1tW7ZDT-wYhf5R71NsxPxVyyemNpY-akGeAUWhc3JlhIy9NFn2R8G7HP3w5uD-iV~FmVOFe0UWQJ0iPvFLwrkwu5bNT-dDLgdLfqfSfQM7dw783-0M5gOe7wYDM2Ao~BHO-HAalFsg0dwLcTjTFMTePjeHKf3UeXO~mUcK9znio60ic~mE3sNHDj0jX7HNKyPsgIi~-cholK68v7szwzTYtqupO616BaGlEAvtZPqNoR7FYd1GoCg__&Key-Pair-Id=K2TK3EG287XSFC\" style=\"margin-right:5px;padding:5px;\" /></p>\r\n\r\n\r\n</div></div></p>\r\n\r\n<h3><a name=\"troubleshooting\" id=\"troubleshooting\"></a>Troubleshooting</h3>\r\n\r\n<h4><a name=\"milestone-is-not-getting-populated-on-the-order-line\" id=\"milestone-is-not-getting-populated-on-the-order-line\"></a>Milestone is not getting populated on the order line</h4>\r\n\r\n<p>Verify if the milestone is defined for DeliveryMethod ShipToAddress and Order Type is matching. If the milestone is configured properly - OrderLineMilestone will be populated on the order line as mentioned below,</p>\r\n\r\n<div class=\"computer_code\">&quot;OrderLineMilestone&quot;: [<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <strong>&quot;ExpectedTime&quot;: &quot;2021-07-13T16:16:00&quot;,</strong><br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;ActualTime&quot;: null,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <strong>&quot;MilestoneDefinitionId&quot;: &quot;OrderLine::Milestone::Released&quot;,</strong><br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;Process&quot;: null,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;MonitoringRuleId&quot;: null,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;OrgId&quot;: &quot;ecomorg&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <strong>&quot;NextEventTime&quot;: &quot;2021-07-12T16:16:00&quot;,</strong><br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;Unique_Identifier&quot;: &quot;6261928317153276777__OrderLine::Milestone::Released&quot;<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</div>\r\n\r\n<h4><a name=\"the-event-is-not-populated-even-after-the-current-date-time-is-greater-than-the-nbsp-nexteventtime-nbsp-populated-for-the-order-line\" id=\"the-event-is-not-populated-even-after-the-current-date-time-is-greater-than-the-nbsp-nexteventtime-nbsp-populated-for-the-order-line\"></a>The event is not populated even after the current date/time is greater than the&nbsp;NextEventTime&nbsp;populated for the order line.</h4>\r\n\r\n<ul>\r\n\t<li>Verify if required orderLineEventDefinition has the event OrderLine:OrderLine:Event:PreReleaseCancellation configured.</li>\r\n\t<li>Verify if extensionPoint&nbsp;FTCCancellationExtensionHandler&nbsp;is configured.</li>\r\n\t<li>If all the required data is configured properly, the OrderLineMilestoneEvent should be populated as illustrated below.</li>\r\n</ul>\r\n\r\n<div class=\"computer_code\">&quot;OrderLineMilestoneEvent&quot;: [<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&quot;MilestoneDefinitionId&quot;: &quot;OrderLine::Milestone::Released&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;Process&quot;: null,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;MonitoringRuleId&quot;: &quot;FTCCancellation&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;IsInactive&quot;: false,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;EventTime&quot;: &quot;<strong>2021-07-12T16:16:00</strong>&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;EventId&quot;: &quot;285bc11b-ad70-4bd3-87d5-f8150666ca3e&quot;<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</div>\r\n\r\n<h4><a name=\"expectedtime-and-nexteventtime-are-not-populated-on-the-order-line\" id=\"expectedtime-and-nexteventtime-are-not-populated-on-the-order-line\"></a>ExpectedTime and NextEventTime are not populated on the order line</h4>\r\n\r\n<p>Verify if the time property configured (PromisedDeliveryDate) is populated with some value. If it is null, the&nbsp;ExpectedTime and NextEventTime are not populated.</p>\r\n\r\n<h4><a name=\"orderline-orderline-event-prereleasecancellation-nbsp-is-triggered-successfully-but-the-order-line-is-not-canceled\" id=\"orderline-orderline-event-prereleasecancellation-nbsp-is-triggered-successfully-but-the-order-line-is-not-canceled\"></a>OrderLine:OrderLine:Event:PreReleaseCancellation&nbsp;is triggered successfully, but the order line is not canceled</h4>\r\n\r\n<ul>\r\n\t<li>DeliveryMethod is NOT ShipToAddress</li>\r\n\t<li>MaxFulfillmentStatus &gt; 3000</li>\r\n\t<li>There may be an error while generating FTCCancellation Email</li>\r\n\t<li>Check if the following extensionPoint is configured. If it is not configured, configure it by logining as systemadmin.</li>\r\n</ul>\r\n\r\n<div class=\"computer_code\">API:&nbsp;{{url}}/order/api/ServiceDefinition/extensionPoint</div>\r\n\r\n<div class=\"computer_code\">{<br />\r\n&nbsp; &nbsp; &quot;ExtensionHandlerId&quot;: &quot;FTCCancellationExtensionHandler&quot;,<br />\r\n&nbsp; &nbsp; &quot;ProfileId&quot;: &quot;system&quot;,<br />\r\n&nbsp; &nbsp; &quot;ExtensionhandlerRoute&quot;: [<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; {<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;ExtensionhandlerRouteId&quot;: &quot;FTCCancellationExtensionHandler&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;Source&quot;: &quot;ON_EVENT&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;SourceId&quot;: &quot;ON_EVENT&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;Destination&quot;: &quot;FTCCancellation&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;DestinationId&quot;: &quot;FTCCancellation&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;IsSync&quot;: &quot;true&quot;<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; }<br />\r\n&nbsp; &nbsp; ],<br />\r\n&nbsp; &nbsp; &quot;RegisteredExtensionPoints&quot;: [<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; {<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;ExtensionPointId&quot;: &quot;OrderLine:OrderLine:Event:PreReleaseCancellation&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;EntryCondition&quot;: null<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; }<br />\r\n&nbsp; &nbsp; ]<br />\r\n}&nbsp;</div>\r\n\r\n<h4><a name=\"the-reasonid-nbsp-is-not-populated-properly-in-order-line-cancellation-history-nbsp\" id=\"the-reasonid-nbsp-is-not-populated-properly-in-order-line-cancellation-history-nbsp\"></a>The ReasonId&nbsp;is not populated properly in order line cancellation history&nbsp;</h4>\r\n\r\n<p>Verify if the ReasonId&nbsp;&quot;ReasonId&quot;: &quot;FTCCancelLine&quot; is configured and existing for the current profile purpose.</p>\r\n\r\n<h4><a name=\"the-order-line-is-canceled-as-soon-as-it-is-created\" id=\"the-order-line-is-canceled-as-soon-as-it-is-created\"></a>The order line is canceled as soon as it is created</h4>\r\n\r\n<p>Verify if the time property configured (PromisedDeliveryDate) is populated with a date in the past (less than current date).</p>\r\n\r\n<h4><a name=\"ftccancellation-email-message-outbound-is-not-getting-generated\" id=\"ftccancellation-email-message-outbound-is-not-getting-generated\"></a>FTCCancellation Email message outbound is not getting generated</h4>\r\n\r\n<p>Refer&nbsp;<a hqid=\"2444800\" href=\"/transactional-emails$troubleshooting emails\">Transactional Emails</a>; a sample Email message outbound is given below:</p>\r\n\r\n<div class=\"computer_code\">{<br />\r\n&nbsp; &nbsp; &quot;Order&quot;: null,<br />\r\n&nbsp; &nbsp; &quot;OrderToken&quot;: &quot;WulLGApZTykmJ30nCevF043e78a6db25e729e953fdc4f6123f27&quot;,<br />\r\n&nbsp; &nbsp; &quot;CancelledOrderTotal&quot;: 42.39,<br />\r\n&nbsp; &nbsp; &quot;CancelledTotalDiscounts&quot;: 0,<br />\r\n&nbsp; &nbsp; &quot;OrderId&quot;: &quot;FTC00012&quot;,<br />\r\n&nbsp; &nbsp; &quot;CancelledItems&quot;: [<br />\r\n&nbsp; &nbsp; &nbsp; {<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &quot;OrderLineId&quot;: &quot;1&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &quot;ItemId&quot;: &quot;Tops-12238-Blue-L&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &quot;ItemShortDescription&quot;: &quot;DUVAL NOTCH NECKLINE LINEN TOP&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &quot;ItemDescription&quot;: &quot;The Duval printed linen cap sleeve top is a summer essential. Wear this with your favorite printed&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &quot;UnitPrice&quot;: 39.99,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &quot;ItemSize&quot;: &quot;L&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &quot;ItemColorDescription&quot;: &quot;Blue&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &quot;ItemSmallImageURI&quot;: &quot;http://res.cloudinary.com/com-manh-cp/image/upload/12238_poolsidebluebeachwalk_a1.jpg&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &quot;Quantity&quot;: 0,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &quot;CancelledQuantity&quot;: 1,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &quot;ItemWebURL&quot;: &quot;&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &nbsp; &quot;PromisedDeliveryDate&quot;: &quot;2021-07-13T16:16:00&quot;<br />\r\n&nbsp; &nbsp; &nbsp; }<br />\r\n&nbsp; &nbsp; ],<br />\r\n&nbsp; &nbsp; &quot;OrderSubTotal&quot;: 0,<br />\r\n&nbsp; &nbsp; &quot;EmailMessageType&quot;: &quot;FTCCancellation&quot;,<br />\r\n&nbsp; &nbsp; &quot;CurrencyCode&quot;: &quot;USD&quot;,<br />\r\n&nbsp; &nbsp; &quot;OrgId&quot;: &quot;ecomorg&quot;,<br />\r\n&nbsp; &nbsp; &quot;CustomerFirstName&quot;: &quot;John&quot;,<br />\r\n&nbsp; &nbsp; &quot;CancelledOrderSubTotal&quot;: 39.99,<br />\r\n&nbsp; &nbsp; &quot;CustomerLastName&quot;: &quot;Smith&quot;,<br />\r\n&nbsp; &nbsp; &quot;CustomerEmail&quot;: &quot;sdeshpande@manh.com&quot;,<br />\r\n&nbsp; &nbsp; &quot;TotalTaxes&quot;: 0,<br />\r\n&nbsp; &nbsp; &quot;TotalCharges&quot;: 0,<br />\r\n&nbsp; &nbsp; &quot;OrderTypeId&quot;: &quot;Ecom Order&quot;,<br />\r\n&nbsp; &nbsp; &quot;StatusId&quot;: &quot;9000.000&quot;,<br />\r\n&nbsp; &nbsp; &quot;CancelledTotalTaxes&quot;: 2.4,<br />\r\n&nbsp; &nbsp; &quot;OrderTotal&quot;: 0,<br />\r\n&nbsp; &nbsp; &quot;TotalDiscounts&quot;: 0<br />\r\n&nbsp; }&nbsp;</div>\r\n\r\n<h4><a name=\"ftcshipmentdelaynotification-nbsp-email-message-outbound-is-not-getting-generated\" id=\"ftcshipmentdelaynotification-nbsp-email-message-outbound-is-not-getting-generated\"></a>FTCShipmentDelayNotification&nbsp;Email message outbound is not getting generated</h4>\r\n\r\n<p>Refer&nbsp;<a hqid=\"2444800\" href=\"/transactional-emails$troubleshooting emails\">Transactional Emails</a>; a sample Email message outbound is given below:</p>\r\n\r\n<div class=\"computer_code\">{<br />\r\n&nbsp; &quot;Order&quot;: null,<br />\r\n&nbsp; &quot;OrderToken&quot;: &quot;L6pHQlI978rQzyFQlqMz814673e1b3486d418df339ad29a14ffc&quot;,<br />\r\n&nbsp; &quot;OrderId&quot;: &quot;FTC10003&quot;,<br />\r\n&nbsp; &quot;OrderSubTotal&quot;: 39.99,<br />\r\n&nbsp; &quot;EmailMessageType&quot;: &quot;FTCShipmentDelayIntimation&quot;,<br />\r\n&nbsp; &quot;CurrencyCode&quot;: &quot;USD&quot;,<br />\r\n&nbsp; &quot;OrgId&quot;: &quot;ecomorg&quot;,<br />\r\n&nbsp; &quot;CustomerFirstName&quot;: &quot;John&quot;,<br />\r\n&nbsp; &quot;CustomerLastName&quot;: &quot;Smith&quot;,<br />\r\n&nbsp; &quot;CustomerEmail&quot;: &quot;sdeshpande@manh.com&quot;,<br />\r\n&nbsp; &quot;TotalTaxes&quot;: 2.4,<br />\r\n&nbsp; &quot;TotalCharges&quot;: 0,<br />\r\n&nbsp; &quot;OrderTypeId&quot;: &quot;Ecom Order&quot;,<br />\r\n&nbsp; &quot;PaymentStatusId&quot;: &quot;1000.000&quot;,<br />\r\n&nbsp; &quot;Items&quot;: [<br />\r\n&nbsp; &nbsp; {<br />\r\n&nbsp; &nbsp; &nbsp; &quot;OrderLineId&quot;: &quot;1&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &quot;ItemId&quot;: &quot;Tops-12238-Blue-L&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &quot;ItemShortDescription&quot;: &quot;DUVAL NOTCH NECKLINE LINEN TOP&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &quot;ItemDescription&quot;: &quot;The Duval printed linen cap sleeve top is a summer essential. Wear this with your favorite printed&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &quot;UnitPrice&quot;: 39.99,<br />\r\n&nbsp; &nbsp; &nbsp; &quot;ItemSize&quot;: &quot;L&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &quot;ItemColorDescription&quot;: &quot;Blue&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &quot;ItemSmallImageURI&quot;: &quot;http://res.cloudinary.com/com-manh-cp/image/upload/12238_poolsidebluebeachwalk_a1.jpg&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &quot;Quantity&quot;: 1,<br />\r\n&nbsp; &nbsp; &nbsp; &quot;ItemWebURL&quot;: &quot;&quot;,<br />\r\n<strong>&nbsp; &nbsp; &nbsp; &quot;PromisedDeliveryDate&quot;: &quot;2021-07-28T04:17:00&quot;,<br />\r\n&nbsp; &nbsp; &nbsp; &quot;ShipmentDelayInSeconds&quot;: 1</strong><br />\r\n&nbsp; &nbsp; }<br />\r\n&nbsp; ],<br />\r\n&nbsp; &quot;OrderTotal&quot;: 42.39,<br />\r\n&nbsp; &quot;TotalDiscounts&quot;: 0<br />\r\n}</div>\r\n\r\n<h4><a name=\"the-original-promised-delivery-date-and-the-delay-or-new-promised-delivery-date-are-not-there-on-email-template-for-ftcshipmentdelaynotification-email-nbsp\" id=\"the-original-promised-delivery-date-and-the-delay-or-new-promised-delivery-date-are-not-there-on-email-template-for-ftcshipmentdelaynotification-email-nbsp\"></a>The Original Promised Delivery Date and the delay or new Promised Delivery Date are not there on Email Template for FTCShipmentDelayNotification email&nbsp;</h4>\r\n\r\n<p>The Promised Delivery Date and the delay or new Promised Delivery Date are not on the email template out of the box. However, it is available on the email message outbound and can be included in the email template, if required. Refer to Transactional Emails for information on how to customize email template. You can use ShipmentDelayInSeconds attribute available in the email message outbound to calculate the new Promised Delivery Date, which is basically the duration configured for the monitoring rule that triggered the OrderLine:OrderLine:Event:FTCDelayNotification event but may not represent the actual delay in real time.</p>\r\n\r\n<h4><a name=\"can-a-retailer-take-consent-from-the-customer-nbsp-to-continue-processing-the-order-in-spite-of-any-delay-in-shipment-nbsp\" id=\"can-a-retailer-take-consent-from-the-customer-nbsp-to-continue-processing-the-order-in-spite-of-any-delay-in-shipment-nbsp\"></a>Can a retailer take consent from the customer&nbsp;to continue processing the order in spite of any delay in shipment?&nbsp;</h4>\r\n\r\n<p>Currently, the system does not have any mechanism for getting consent from customers to continue the order processing in spite of any delay in shipment out of the box.</p>\r\n\r\n<h3><a name=\"related-articles\" id=\"related-articles\"></a>Related Articles</h3>\r\n\r\n<div class=\"info\"><ul class=\"related-articles\"><li><a href=\"/predict-promising-with-machine-learning\" hqid=\"2902040\">Predict Promising with Machine Learning</a></li><li><a href=\"/scheduling-rest-apis-user-exits\" hqid=\"2631751\">Rest APIs & User Exits</a></li><li><a href=\"/how-scheduling-works\" hqid=\"2630285\">How Scheduling Works</a></li><li><a href=\"/scheduling-overview\" hqid=\"2630284\">Overview</a></li><li><a href=\"/order-scheduling-troubleshooting\" hqid=\"2631764\">Troubleshooting</a></li></ul></div>\r\n\r\n\t  </div>\r\n </div>\r\n <div id=\"ui-page-fb-wrap\"></div>\r\n <div class=\"hiq-footer-wrap\">\r\n    \r\n                \r\n  </div>\r\n\r\n\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n",
  "content_length": 56120,
  "scraped_at": "2025-08-09T21:56:59.529667",
  "content_clean": "Home ››Manhattan Active® Omni››Order Management››Process & Configuration Guides››Order Processing››Order Scheduling ››Federal Trade Commission (FTC) Compliance Federal Trade Commission (FTC) Compliance Previous I Next OverviewConfigurationOrder ConfigurationEmail ConfigurationProcess FlowTroubleshootingMilestone is not getting populated on the order lineThe event is not populated even after the current date/time is greater than the NextEventTime populated for the order line.ExpectedTime and NextEventTime are not populated on the order lineOrderLine:OrderLine:Event:PreReleaseCancellation is triggered successfully, but the order line is not canceledThe ReasonId is not populated properly in order line cancellation history The order line is canceled as soon as it is createdFTCCancellation Email message outbound is not getting generatedFTCShipmentDelayNotification Email message outbound is not getting generatedThe Original Promised Delivery Date and the delay or new Promised Delivery Date are not there on Email Template for FTCShipmentDelayNotification email Can a retailer take consent from the customer to continue processing the order in spite of any delay in shipment? Related Articles Overview Various countries have law enforcing agencies that issue laws and guidelines to safeguard and protect customer's interest. In United States, the Federal Trade Commission (FTC) enforces federal consumer protection laws that specify laws and guidelines to protect consumer interest and retailers have to comply with them. Manhattan Active® Omni (MAO) supports retailers to comply with the FTC guidelines by providing tools and features to monitor orders for shipment delays, and inform the customer about the delay and take appropriate action based on the legal guidelines mandated by FTC. The following capability is provided to help retailers comply with FTC regulations by tracking and monitoring shipment delays for Ship To Address order lines and take appropriate actions as mentioned below: Track and monitor shipment delays with reference to the delivery date promised by the retailer that is captured in Promised Delivery Date on the Order Line or any other date captured on an order line attribute that retailer wishes to monitor the shipment delays, and cancel the order line if the promised delivery date cannot be met since the order line is not yet released. An order line cancellation email message will be triggered that can be used to communicate to the customer about the order line cancellation due to FTC compliance. Track and monitor shipment delays with reference to the expected time the items were supposed to be shipped by the retailer after the order is released to the DC or store so that it can be delivered to the customer as promised, and inform the customer about any delay in shipment via mail communication as many times the retailer deems fit - without canceling the order line. Track and monitor shipment delays with reference to the expected time the items were supposed to be shipped by the retailer after the order is released to the DC or store so that it can be delivered to the customer as promised, and mark the order line for cancellation if the retailer feels that at this point of time the delay in shipment will not be acceptable to the customer, so that if the DC or store can short the release the order line can be canceled without attempting for a reallocation. If the order line is canceled since it was marked for cancellation; an email message outbound is also triggered so that the customer can be informed of the cancellation. Configuration Order Configuration The following configuration has to be created for the system to monitor order lines to verify if the Ship To Address order lines are released and shipped within the stipulated time so that the promised delivery dates can be met for the order lines, and take appropriate action. Configurations for canceling order line due to delay in releasing the order line to DC or store: Order Line Milestone Configurations for FTC Cancellation Order Line Milestone Rules have to be configured for monitoring the Ship To Address Order Lines to verify if there are any shipment delays hampering the delivery of shipment by the promised delivery date. Order Line Milestone Rules UI can be accessed by navigating to Menu > Application Configuration > Manage Order Configuration > Order Line Milestone Rule Time Rules and Monitoring Rules have to be configured depending on the requirement for monitoring the order lines with Delivery Method Ship To Address with respect to a date capturing the promised delivery date on the order line for example orderLine.promissedDeliveryDate or any other base attribute or extended attribute for type timestamp. Depending on the Time Rules and Monitoring Rules configured for the order line milestone, the order lines that are not yet released (MaxFulfillment Status < 3000) can be canceled by selecting the event OrderLine:OrderLine:Event:PreReleaseCancellation to be triggered if the OrderLine::Milestone::Released milestone is not met as per the expected time rules and monitoring rules configured. The event also generates an order line cancellation email message outbound if the order line/s gets canceled if they are having Delivery Method as Ship To Address and the Max Fulfillment Status was less than 3000 (not yet released; can be in open or allocated status). Details of the Event - OrderLine:OrderLine:Event:PreReleaseCancellation are given below: { \"Description\": \"Cancel order lines not yet Released\", \"EventName\": \"OrderLine:OrderLine:Event:PreReleaseCancellation\" } This order event will cancel only Ship To Address Line which is not yet released. This event also triggers the generation of FTCCancellation Email message outbound if the order lines are canceled due to FTC compliance without any other configurations required to me made in the system. Text message outbound are not generated by this event if the order lines are canceled due to FTC compliance. Refer to Transactional Emails for details on the FTCCancellation Email message outbound Custom events can be created and added to the entity orderLineEventDefinition using the below mentioned API so that they are available to be configured in the Order Line Milestone Monitoring Rules. However, the existing Events cannot be deleted or modified. POST {{url}}/order/api/order/orderLineEventDefinition A sample Order Line Milestone Rule is given below for configuring FTC cancellation. Use Case: The retailer wants to monitor if the Ship To Address order line is not released a day before the promised delivery date; and if it is not yet released cancel the order line since the item cannot be delivered on promised delivery date as anticipated. Order Line Milestone - Monitoring Rules RuleId MilestoneDefinitionId Type Duration EventName RaiseAlways FTC Cancellation OrderLine::Milestone::Released EXPECTED_TIME -86400 OrderLine:OrderLine:Event:PreReleaseCancellation FALSE Order Line Milestone - Time Rules RuleId MilestoneDefinitionId Duration Type TimeProperty DependentMilestoneId DependentStatusId Expected Release Time OrderLine::Milestone::Released Null TIME_PROPERTY PromisedDeliveryDate Null Null Sample json for configuring the Order Line Milestone - Monitoring Rules for this use case is given below API: POST {{url}}/order/api/order/orderLineMilestoneRule/save { \"OrderLineMonitoringRule\": [ { \"RuleId\": \"FTCCancellation\", \"MilestoneDefinitionId\": \"OrderLine::Milestone::Released\", \"Duration\": -86400, \"EventName\": \"OrderLine:OrderLine:Event:PreReleaseCancellation\", \"RaiseAlways\": false, \"Type\": \"EXPECTED_TIME\" } ], \"DeliveryMethodId\": \"ShipToAddress\", \"RuleId\": \"FTCCancellation\", \"OrderLineExpectedTimeRule\": [ { \"DependentMilestoneId\": null, \"TimeProperty\": \"PromisedDeliveryDate\", \"RuleId\": \"Expected Release Time\", \"MilestoneDefinitionId\": \"OrderLine::Milestone::Released\", \"Duration\": null, \"Type\": \"TIME_PROPERTY\", \"DependentStatusId\": null } ], \"IsGift\": false, \"OrderTypeId\": \"Ecom Order\", \"OrderLineMilestoneRuleShippingMethod\": [] } It is not mandatory to have orderLine.promisedDeliveryDate as the Time Property selected in the Milestone configurations; any other timestamp existing on orderLine can also be used. If the time property selected in the milestone configuration is not populated or is null; expected time and NextEventTime will not be populated and will be set to null The following ReasonId has been added to the seed data which will be populated by the system in the order line cancellation history { \"ReasonId\": \"FTCCancelLine\", \"ReasonTypeId\": \"Cancel\", \"Description\": \"Cancel order line not yet released due to FTC compliance by order line mile stone event OrderLine:OrderLine:Event:PreReleaseCancellation\", \"ShortDescription\": \"FTC Cancel Line\", \"ReallocateOnShort\": false, \"CancellationInitiatedBy\": { \"InitiatedBy\": \"System\" } } Note: Since ReasonId is profile based entity, the above mentioned ReasionId has to be added in each Profile. If this ResonId does not exist in the system, it will not be populated on the order line cancellation history. If all the lines in the order are canceled, the entire order will be canceled To avoid order line cancellation due to FTC compliance wherein the order line is allocated but not yet released due to unavoidable situations, try enabling Continuous Allocation so that the order line can be reallocated to other locations and meet the promised delivery date. Configurations for generating shipment delay intimation due to delay in shipping the order line from DC or store: Order Line Milestone Configurations for FTC Shipment Delay Intimation Order Line Milestone Rules have to be configured for monitoring the Ship To Address Order Lines to verify if there are any shipment delays hampering the delivery of shipment after the order line is released to the DC or Store. Order Line Milestone Rules UI can be accessed from the Omnifacade Menu: {{url}}/omnifacade/#/OrderLineMilestoneRule Time Rules and Monitoring Rules have to be configured depending on the requirement for monitoring the order lines with Delivery Method Ship To Address to trigger shipment delay intimation event if any delay occurs in shipping with respect to the expected time it would normally take for the DC or store to ship the items. Depending on the Time Rules and Monitoring Rules configured for the order line milestone, the order lines that are released but not yet shipped (fulfilled) (3000 <= MaxFulfillment Status < 7000) can be monitored for any delay in shipment by selecting the event OrderLine:OrderLine:Event:FTCDelayNotification to be triggered if the OrderLine::Milestone::Fulfilled milestone is not met as per the expected time rules and monitoring rules configured. The event generates a shipment delay intimation email message outbound if the order line/s are not yet fulfilled as expected and configured in the order line milestone. Details of the Event - OrderLine:OrderLine:Event:PreReleaseCancellation are given below: { \"Description\": \"Notify if there is a delay in shipment\", \"EventName\": \"OrderLine:OrderLine:Event:FTCDelayNotification\" } Custom events can be created and added to the entity orderLineEventDefinition using the below mentioned API so that they are available to be configured in the Order Line Milestone Monitoring Rules. However, the existing Events cannot be deleted or modified. POST {{url}}/order/api/order/orderLineEventDefinition A sample Order Line Milestone Rule is given below for configuring FTC cancellation. Use Case: Retailer would want to configure the system to monitor any delay in shipping ship to address order lines with respect to the expected time it would take for the order lines to ship normally. The retailer also wants to communicate the delay in shipment multiple times. This can be achieved by configuring order line milestone for Fulfilled Milestone and configuring the FTCDelayNotification Event to trigger an email out bound if shipment is delayed beyond the expected time for multiple times in the Monitoring Rule. A sample order line milestone configuration is given below. Order Line Milestone - Monitoring Rules RuleId MilestoneDefinitionId Type Duration EventName RaiseAlways FTCShipmentDelayNotification-1 OrderLine::Milestone::Fulfilled EXPECTED_TIME 259200 (3 days) OrderLine:OrderLine:Event:FTCDelayNotification FALSE FTCShipmentDelayNotification-2 OrderLine::Milestone::Fulfilled EXPECTED_TIME 518400 (6 days) OrderLine:OrderLine:Event:FTCDelayNotification FALSE Order Line Milestone - Time Rules RuleId MilestoneDefinitionId Type Duration TimeProperty DependentMilestoneId DependentStatusId Expected Release Time OrderLine::Milestone::Fulfilled AFTER_MILESTONE 259200 (3 days) PromisedDeliveryDate OrderLine::Milestone::Released Null Sample json for configuring the Order Line Milestone - Monitoring Rules for this use case is given below API: POST {{url}}/order/api/order/orderLineMilestoneRule/save { \"OrderLineMonitoringRule\": [ { \"RuleId\": \"FTCShipmentDelayNotification-1\", \"MilestoneDefinitionId\": \"OrderLine::Milestone::Fulfilled\", \"Duration\": 259200, \"EventName\": \"OrderLine:OrderLine:Event:FTCDelayNotification\", \"RaiseAlways\": false, \"Type\": \"EXPECTED_TIME\" }, { \"RuleId\": \"FTCShipmentDelayNotification-2\", \"MilestoneDefinitionId\": \"OrderLine::Milestone::Fulfilled\", \"Duration\": 518400, \"EventName\": \"OrderLine:OrderLine:Event:FTCDelayNotification\", \"RaiseAlways\": false, \"Type\": \"EXPECTED_TIME\" } ], \"DeliveryMethodId\": \"ShipToAddress\", \"RuleId\": \"FTCShipmentDelayNotification\", \"OrderLineExpectedTimeRule\": [ { \"DependentMilestoneId\": \"OrderLine::Milestone::Released\", \"TimeProperty\": null, \"RuleId\": \"ShipmentDelayNotification\", \"MilestoneDefinitionId\": \"OrderLine::Milestone::Fulfilled\", \"Duration\": 259200, \"Type\": \"AFTER_MILESTONE\", \"DependentStatusId\": null } ], \"IsGift\": false, \"OrderTypeId\": \"Ecom Order\", \"OrderLineMilestoneRuleShippingMethod\": [] } It is not mandatory to have a fixed duration for the milestone expected time configuration. Any timestamp attribute on orderLine.promisedDeliveryDate as the Time Property selected in the Milestone configurations, or any other timestamp existing on order line like PromisedDeliveryDate or PromisedShipDate or RequestedDeliveryDate or LatestDeliveryDate can also be used. If the time property selected in the milestone configuration is not populated or is null; the expected time and NextEventTime will not be populated and will be set to null Configurations for marking the order line for cancellation due to delay in shipping the order line from DC or store: Order Line Milestone Configurations to mark order lines for Cancellation Order Line Milestone Rules have to be configured for monitoring the Ship To Address Order Lines to verify if there are any shipment delays hampering the delivery of shipment after the order line is released to the DC or Store. If the delay in shipment implies that the items cannot be delivered on the date promised, the retailer may want to mark the order lines for cancellation in case fulfillment system sends a short order event - irrespective of the reallocate on short configuration set in the reasonId. Order Line Milestone Rules UI can be accessed from the Omnifacade Menu: {{url}}/omnifacade/#/OrderLineMilestoneRule Time Rules and Monitoring Rules have to be configured depending on the requirement for monitoring the order lines with Delivery Method Ship To Address to trigger Event:MarkForCancellation event Depending on the Time Rules and Monitoring Rules configured for the order line milestone, the order lines that are not released (MaxFulfillment Status > 3000) can be marked for cancellation by selecting the event OrderLine:OrderLine:Event:MarkForCancellation to be triggered if the OrderLine::Milestone::Released milestone is not met as per the expected time rules and monitoring rules configured. The event also generates an order line cancellation email message outbound if the order line/s gets canceled if they are having Delivery Method as Ship To Address and the Max Fulfillment Status is equal to 3000 (released but not yet shipped/fulfilled even partially). Details of the Event - OrderLine:OrderLine:Event:MarkForCancellation are given below: { \"Description\": \"Mark released order lines for cancellation\", \"EventName\": \"OrderLine:OrderLine:Event:MarkForCancellation\" } This order event only marks the order lines with Ship To Address delivery method, and released but not yet shipped/fulfilled (MaxFulfillment Status = 3000). The name of the attribute is \"IsMarkedForCancellation\" and is available under OrderLine -> OrderLineAdditional. If the order line is marked for cancellation, then the attribute will be populated as \"IsMarkedForCancellation\" = true. The attribute \"IsMarkedForCancellation\" can also be updated using order save. If orderLineorderLineAdditional.IsMarkedForCancellation = true and short order event is received for the Release belonging to this order line, the quantity shorted in the order event will be canceled irrespective of the reallocate on short configuration This event also triggers the generation of FTCCancellation Email message outbound if the order lines are canceled due to the above mentioned behaviour without any other configurations required to me made in the system. Text message outbound are not generated by this event. Refer to Transactional Emails for details on the FTCCancellation Email message outbound Custom events can be created and added to the entity orderLineEventDefinition using the below mentioned API so that they are available to be configured in the Order Line Milestone Monitoring Rules. However, the existing Events cannot be deleted or modified. POST {{url}}/order/api/order/orderLineEventDefinition A sample Order Line Milestone Rule is given below for configuring FTC cancellation. Use Case: The retailer wants to monitor if the Ship To Address order line is not released a day before the promised delivery date; and if it is not yet released cancel the order line since the item cannot be delivered on promised delivery date as anticipated. Order Line Milestone - Monitoring Rules RuleId MilestoneDefinitionId Type Duration EventName RaiseAlways FTCMarkForCancellation OrderLine::Milestone::Fulfilled EXPECTED_TIME 259200 (3 days) OrderLine:OrderLine:Event:MarkForCancellation FALSE Order Line Milestone - Time Rules RuleId MilestoneDefinitionId Type Duration TimeProperty DependentMilestoneId DependentStatusId FTCMarkForCancellation OrderLine::Milestone::Fulfilled AFTER_MILESTONE 259200 (3 days) PromisedDeliveryDate OrderLine::Milestone::Released Null Sample json for configuring the Order Line Milestone - Monitoring Rules for this use case is given below API: POST {{url}}/order/api/order/orderLineMilestoneRule/save { \"OrderLineMonitoringRule\": [ { \"RuleId\": \"FTCMarkForCancellation\", \"MilestoneDefinitionId\": \"OrderLine::Milestone::Fulfilled\", \"Duration\": 1, \"EventName\": \"OrderLine:OrderLine:Event:MarkForCancellation\", \"RaiseAlways\": false, \"Type\": \"EXPECTED_TIME\" } ], \"DeliveryMethodId\": \"ShipToAddress\", \"RuleId\": \"FTCMarkForCancellation\", \"OrderLineExpectedTimeRule\": [ { \"DependentMilestoneId\": \"OrderLine::Milestone::Released\", \"TimeProperty\": null, \"RuleId\": \"FTCMarkForCancellation \", \"MilestoneDefinitionId\": \"OrderLine::Milestone::Fulfilled\", \"Duration\": 5, \"Type\": \"AFTER_MILESTONE\", \"DependentStatusId\": null } ], \"IsGift\": false, \"OrderTypeId\": \"Ecom Order\", \"OrderLineMilestoneRuleShippingMethod\": [] } It is not mandatory to have a fixed duration for the milestone expected time configuration. Any timestamp attribute on orderLine.promisedDeliveryDate as the Time Property selected in the Milestone configurations, or any other timestamp existing on the order line like PromisedDeliveryDate or PromisedShipDate or RequestedDeliveryDate or LatestDeliveryDatecan can also be used. If the time property selected in the milestone configuration is not populated or is null; expected time and NextEventTime will not be populated and will be set to null. The order line cancellation history will be populated with the ReasonId mentioned below (if configured) - irrespective of the ReasonId populated on the Short Order Event. The ReasonId populated on the Short Order Event will be recorded on the comments attributes of the cancel history. The following ReasonId has been added to the seed data which will be populated by the system in the order line cancellation history { \"ReasonId\": \"FTCCancelLine\", \"ReasonTypeId\": \"Cancel\", \"Description\": \"Cancel order line not yet released due to FTC compliance by order line mile stone event OrderLine:OrderLine:Event:PreReleaseCancellation\", \"ShortDescription\": \"FTC Cancel Line\", \"ReallocateOnShort\": false, \"CancellationInitiatedBy\": { \"InitiatedBy\": \"System\" } } Note: Since ReasonId is profile based entity, the above mentioned ReasionId has to be added in each Profile. If this ResonId does not exist in the system, it will not be populated on the order line cancellation history. If all the lines in the order are canceled, the entire order will be canceled If the attribute orderLine.orderLineAdditional.IsMarkedForCancellation = true for a order line; any order event other than Short is interfaced - it will be prepossessed accordingly and quantities will NOT be canceled just because this attribute is marked for cancellation 1) The attribute orderLine.orderLineAdditional.IsMarkedForCancellation can be used in order line custom cancellation agent as part of the query to fetch order lines for cancellation if the retailer doe not want to cancel the lines through order event short. 2) The attribute orderLine.orderLineAdditional.IsMarkedForCancellation can be updated via save order call from True to False or from Null to False or True or from False to True. 3) Any other process like Late Order Cancellation will NOT be affected by this attribute and will be processed as usual Email Configuration Refer Transactional Emails Process Flow Process flow for canceling order line due to delay in releasing the order line to DC or Store: FTC Prerelease Cancellation Process Flow Process flow for generating shipment delay intimation due to delay in shipping the order line from DC or Store: FTC Shipment Delay Intimation Process Flow Process flow for marking the order line for cancellation due to delay in shipping the order line from DC or store: FTC Mark For Cancelation Process Flow Troubleshooting Milestone is not getting populated on the order line Verify if the milestone is defined for DeliveryMethod ShipToAddress and Order Type is matching. If the milestone is configured properly - OrderLineMilestone will be populated on the order line as mentioned below, \"OrderLineMilestone\": [ { \"ExpectedTime\": \"2021-07-13T16:16:00\", \"ActualTime\": null, \"MilestoneDefinitionId\": \"OrderLine::Milestone::Released\", \"Process\": null, \"MonitoringRuleId\": null, \"OrgId\": \"ecomorg\", \"NextEventTime\": \"2021-07-12T16:16:00\", \"Unique_Identifier\": \"6261928317153276777__OrderLine::Milestone::Released\" } The event is not populated even after the current date/time is greater than the NextEventTime populated for the order line. Verify if required orderLineEventDefinition has the event OrderLine:OrderLine:Event:PreReleaseCancellation configured. Verify if extensionPoint FTCCancellationExtensionHandler is configured. If all the required data is configured properly, the OrderLineMilestoneEvent should be populated as illustrated below. \"OrderLineMilestoneEvent\": [ { \"MilestoneDefinitionId\": \"OrderLine::Milestone::Released\", \"Process\": null, \"MonitoringRuleId\": \"FTCCancellation\", \"IsInactive\": false, \"EventTime\": \"2021-07-12T16:16:00\", \"EventId\": \"285bc11b-ad70-4bd3-87d5-f8150666ca3e\" } ExpectedTime and NextEventTime are not populated on the order line Verify if the time property configured (PromisedDeliveryDate) is populated with some value. If it is null, the ExpectedTime and NextEventTime are not populated. OrderLine:OrderLine:Event:PreReleaseCancellation is triggered successfully, but the order line is not canceled DeliveryMethod is NOT ShipToAddress MaxFulfillmentStatus > 3000 There may be an error while generating FTCCancellation Email Check if the following extensionPoint is configured. If it is not configured, configure it by logining as systemadmin. API: {{url}}/order/api/ServiceDefinition/extensionPoint { \"ExtensionHandlerId\": \"FTCCancellationExtensionHandler\", \"ProfileId\": \"system\", \"ExtensionhandlerRoute\": [ { \"ExtensionhandlerRouteId\": \"FTCCancellationExtensionHandler\", \"Source\": \"ON_EVENT\", \"SourceId\": \"ON_EVENT\", \"Destination\": \"FTCCancellation\", \"DestinationId\": \"FTCCancellation\", \"IsSync\": \"true\" } ], \"RegisteredExtensionPoints\": [ { \"ExtensionPointId\": \"OrderLine:OrderLine:Event:PreReleaseCancellation\", \"EntryCondition\": null } ] } The ReasonId is not populated properly in order line cancellation history Verify if the ReasonId \"ReasonId\": \"FTCCancelLine\" is configured and existing for the current profile purpose. The order line is canceled as soon as it is created Verify if the time property configured (PromisedDeliveryDate) is populated with a date in the past (less than current date). FTCCancellation Email message outbound is not getting generated Refer Transactional Emails; a sample Email message outbound is given below: { \"Order\": null, \"OrderToken\": \"WulLGApZTykmJ30nCevF043e78a6db25e729e953fdc4f6123f27\", \"CancelledOrderTotal\": 42.39, \"CancelledTotalDiscounts\": 0, \"OrderId\": \"FTC00012\", \"CancelledItems\": [ { \"OrderLineId\": \"1\", \"ItemId\": \"Tops-12238-Blue-L\", \"ItemShortDescription\": \"DUVAL NOTCH NECKLINE LINEN TOP\", \"ItemDescription\": \"The Duval printed linen cap sleeve top is a summer essential. Wear this with your favorite printed\", \"UnitPrice\": 39.99, \"ItemSize\": \"L\", \"ItemColorDescription\": \"Blue\", \"ItemSmallImageURI\": \"http://res.cloudinary.com/com-manh-cp/image/upload/12238_poolsidebluebeachwalk_a1.jpg\", \"Quantity\": 0, \"CancelledQuantity\": 1, \"ItemWebURL\": \"\", \"PromisedDeliveryDate\": \"2021-07-13T16:16:00\" } ], \"OrderSubTotal\": 0, \"EmailMessageType\": \"FTCCancellation\", \"CurrencyCode\": \"USD\", \"OrgId\": \"ecomorg\", \"CustomerFirstName\": \"John\", \"CancelledOrderSubTotal\": 39.99, \"CustomerLastName\": \"Smith\", \"CustomerEmail\": \"sdeshpande@manh.com\", \"TotalTaxes\": 0, \"TotalCharges\": 0, \"OrderTypeId\": \"Ecom Order\", \"StatusId\": \"9000.000\", \"CancelledTotalTaxes\": 2.4, \"OrderTotal\": 0, \"TotalDiscounts\": 0 } FTCShipmentDelayNotification Email message outbound is not getting generated Refer Transactional Emails; a sample Email message outbound is given below: { \"Order\": null, \"OrderToken\": \"L6pHQlI978rQzyFQlqMz814673e1b3486d418df339ad29a14ffc\", \"OrderId\": \"FTC10003\", \"OrderSubTotal\": 39.99, \"EmailMessageType\": \"FTCShipmentDelayIntimation\", \"CurrencyCode\": \"USD\", \"OrgId\": \"ecomorg\", \"CustomerFirstName\": \"John\", \"CustomerLastName\": \"Smith\", \"CustomerEmail\": \"sdeshpande@manh.com\", \"TotalTaxes\": 2.4, \"TotalCharges\": 0, \"OrderTypeId\": \"Ecom Order\", \"PaymentStatusId\": \"1000.000\", \"Items\": [ { \"OrderLineId\": \"1\", \"ItemId\": \"Tops-12238-Blue-L\", \"ItemShortDescription\": \"DUVAL NOTCH NECKLINE LINEN TOP\", \"ItemDescription\": \"The Duval printed linen cap sleeve top is a summer essential. Wear this with your favorite printed\", \"UnitPrice\": 39.99, \"ItemSize\": \"L\", \"ItemColorDescription\": \"Blue\", \"ItemSmallImageURI\": \"http://res.cloudinary.com/com-manh-cp/image/upload/12238_poolsidebluebeachwalk_a1.jpg\", \"Quantity\": 1, \"ItemWebURL\": \"\", \"PromisedDeliveryDate\": \"2021-07-28T04:17:00\", \"ShipmentDelayInSeconds\": 1 } ], \"OrderTotal\": 42.39, \"TotalDiscounts\": 0 } The Original Promised Delivery Date and the delay or new Promised Delivery Date are not there on Email Template for FTCShipmentDelayNotification email The Promised Delivery Date and the delay or new Promised Delivery Date are not on the email template out of the box. However, it is available on the email message outbound and can be included in the email template, if required. Refer to Transactional Emails for information on how to customize email template. You can use ShipmentDelayInSeconds attribute available in the email message outbound to calculate the new Promised Delivery Date, which is basically the duration configured for the monitoring rule that triggered the OrderLine:OrderLine:Event:FTCDelayNotification event but may not represent the actual delay in real time. Can a retailer take consent from the customer to continue processing the order in spite of any delay in shipment? Currently, the system does not have any mechanism for getting consent from customers to continue the order processing in spite of any delay in shipment out of the box. Related Articles Predict Promising with Machine LearningRest APIs & User ExitsHow Scheduling WorksOverviewTroubleshooting"
}