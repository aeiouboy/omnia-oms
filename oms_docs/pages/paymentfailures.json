{
  "success": true,
  "permalink": "paymentfailures",
  "title": "Payment Failures",
  "content": "\r\n\r\n\r\n<div class=\"hiq-page-wrap\">\r\n<div class=\"hiq-t-wrap\">\r\n\t\t\r\n  \t  <div class=\"hiq-t \">\r\n\t\t\t\t<ul class=\"breadcrumbs\"><li><a class=\"breadcrumb-links\" hqid=\"1788908\"  href=\"/home\">Home</a></li> <li><span>&rsaquo;&rsaquo;</span><a hqid=\"3500940\" href=\"/omni\" class=\"breadcrumb-links\">Manhattan Active® Omni</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"2158393\" href=\"/order-management\" class=\"breadcrumb-links\">Order Management</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"2158394\" href=\"/process-configuration-guides\" class=\"breadcrumb-links\">Process & Configuration Guides</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"2163646\" href=\"/order-selling-2\" class=\"breadcrumb-links\">Order Selling</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"2163647\" href=\"/payment-2\" class=\"breadcrumb-links\">Payment</a></li><li> <span>››</span>Payment Failures</li></ul>  \t\r\n\t\t<h2>Payment Failures</h2>\r\n\r\n<p></p>\r\n\r\n<a href=\"/payment-rest-apis-and-user-exits\" hqid=\"2617717\">Previous</a>&nbsp;I&nbsp;<a href=\"/payment-health-dashboard\" hqid=\"3127204\">Next</a>\r\n<p>&nbsp;</p>\r\n\r\n<p>This page explains how to deal with common failure scenarios in payment processing, both functional and technical.</p>\r\n\r\n<div class=\"info\"><ul><li><a href=\"/paymentfailures$payment-failure-flows\">Payment Failure Flows</a><ul><li><a href=\"/paymentfailures$payment-component-unavailable\">Payment Component Unavailable</a></li><li><a href=\"/paymentfailures$payment-gateway-nbsp-unavailable\">Payment Gateway&nbsp;Unavailable</a></li><li><a href=\"/paymentfailures$accounting-for-unavailable-nbsp-responses-in-custom-gateway-components\">Accounting for Unavailable&nbsp;Responses in Custom Gateway Components</a></li><li><a href=\"/paymentfailures$disabling-auto-retry-for-unavailable-responses\">Disabling Auto-Retry for Unavailable Responses</a></li><li><a href=\"/paymentfailures$transactions-stuck-in-progress\">Transactions Stuck In Progress</a></li><li><a href=\"/paymentfailures$error-messages\">Error Messages</a></li></ul></li><li><a href=\"/paymentfailures$related-articles\">Related Articles</a></li></ul></div>\r\n\r\n<h3><a name=\"payment-failure-flows\" id=\"payment-failure-flows\"></a>Payment Failure Flows</h3>\r\n\r\n<p>There are two ways to identify orders with failed payments or fraudulent activity: order holds and payment status. For fraud, an order is put on hold to signify that order fulfillment should not proceed until the hold is resolved. Alternatively, order payment status can be used to identify orders for which authorization or settlement failed. Below are the potential failure flows for payment and how each one is handled by the system.</p>\r\n\r\n<h4 id=\"PaymentProcessing-PaymentComponentUnavailable\"><a name=\"payment-component-unavailable\" id=\"payment-component-unavailable\"></a>Payment Component Unavailable</h4>\r\n\r\n<p>If an e-commerce order is imported with payment methods, but the Payment component is down and the payment methods cannot be saved, then the Order component&nbsp;retries the entire order message, including the payment methods. However, if web services are used to save payments directly in the Payment component, then if the Payment component is unavailable, there is no automatic retry mechanism. The sender needs to retry the message until it succeeds.</p>\r\n\r\n<h4 id=\"PaymentProcessing-PaymentGatewayUnavailable\"><a name=\"payment-gateway-nbsp-unavailable\" id=\"payment-gateway-nbsp-unavailable\"></a>Payment Gateway&nbsp;Unavailable</h4>\r\n\r\n<p>Response status Unavailable is used to signify that connectivity could not be established. During order capture, if the payment component is unable to connect to the payment gateway, then the user has the following&nbsp;options:</p>\r\n\r\n<ul>\r\n\t<li>The payment method can be saved, and the Payment component will later retry calling the payment gateway.</li>\r\n\t<li>The user can enter an alternative&nbsp;payment method which uses a different gateway or is cash-based.</li>\r\n\t<li>If this occurs in store, then the&nbsp;store associate can get a voice authorization and save the payment method with the token provided.</li>\r\n</ul>\r\n\r\n<p>If the payment gateway is unavailable at times when a customer/user is not present, such as at the time of shipment, then the Payment component automatically retries X times, where X is the &#39;Number of Attempts&#39; configured in the payment configuration.&nbsp;</p>\r\n\r\n<p>When a payment transaction is created, the number of attempts is set to this value. Each time an unavailable response is received, a new, open transaction is created and the number of attempts is decremented. The open transaction is sent to the gateway the next time the execute service is called, which is typically the next scheduled payment job. When the number of attempts reaches zero, no new transactions are created. For example, if a transaction is created and the number of attempts is set to three, then the payment<em>&nbsp;</em>component attempts to send the&nbsp;transaction to the gateway a total of three times. This behavior is consistent for all payment gateways (for example,&nbsp;CyberSource, PayPal, and so on).</p>\r\n\r\n<div class=\"info\"><strong>Note : </strong>The settlement is not marked as failure even when all the attempts are exhausted. Once the number of remaining attempts become 0, no more settlement records are created and the payment status does not change.</div>\r\n\r\n<h4><a name=\"accounting-for-unavailable-nbsp-responses-in-custom-gateway-components\" id=\"accounting-for-unavailable-nbsp-responses-in-custom-gateway-components\"></a>Accounting for Unavailable&nbsp;Responses in Custom Gateway Components</h4>\r\n\r\n<p>If using a custom payment gateway component to integrate with a different third party, then the custom component needs logic to handle the following:</p>\r\n\r\n<ul>\r\n\t<li>If the custom gateway component cannot connect to the third party gateway or the connection times out, then the custom component needs logic to send an Unavailable response to the payment component.</li>\r\n\t<li>If the third party gateway responds with a status code which maps to Unavailable status (for example, they cannot process the request), then the custom component needs logic to send an Unavailable response to the payment component.</li>\r\n</ul>\r\n\r\n<p>Refer to <a href=\"https://omni.helpdocsonline.com/payment-gateway-integration$gateway-response-mappings\">Gateway Response Mapping</a> for more details on response mapping.</p>\r\n\r\n<h4><a name=\"disabling-auto-retry-for-unavailable-responses\" id=\"disabling-auto-retry-for-unavailable-responses\"></a>Disabling Auto-Retry for Unavailable Responses</h4>\r\n\r\n<p>For customer present scenarios such as POS, a retailer may want to disable this auto-retry mechanism. To disable the creation of new, open transactions when an Unavailable response is received, the payment header AllowRetry flag should be set to false. This ensures that no new payment transactions are created, when an Unavailable response is received. Instead, the POS system is responsible for initiating a retry or capturing an alternate payment method.</p>\r\n\r\n<h4><a name=\"transactions-stuck-in-progress\" id=\"transactions-stuck-in-progress\"></a>Transactions Stuck In Progress</h4>\r\n\r\n<p>When an open payment transaction is submitted to the payment gateway for processing, a record is inserted into the In Progress Transactions table. This tracks that the transaction is currently being processed by a third party, and that the Payment component has not yet received a response. When a response is received from the payment gateway, then the record is removed from the In Progress Transactions table.</p>\r\n\r\n<p>However, if no response is received from the payment gateway, then the record remains in the In Progress Transactions table. Each time the Payment component executes an open transaction, it checks to see if the transaction exists in the In Progress Transactions table. If a record does not exist, then the open transaction is sent to the gateway for processing.</p>\r\n\r\n<p>If a record does exist, then there is logic to check whether the transaction has been received by the third-party payment gateway, to ensure that a transaction is never submitted more than once. To do this, the Payment Gateway component makes a call to the third-party payment gateway to get the status of the transaction. If the third-party payment gateway returns the status of the transaction (for example, Success or Failure), then the transaction is updated in the Payment component. If the third-party payment gateway does not find the transaction, then the Payment Gateway component re-sends the open transaction for processing.</p>\r\n\r\n<p>Transactions stuck In Progress differ from transactions where the responseStatus is Unavailable. Transactions stuck In Progress indicate that the Payment Gateway component was able to contact the third-party payment gateway API, but no response was received. Transactions where the responseStatus is Unavailable indicate that the Payment Gateway component was not able to contact the third-party payment gateway API.</p>\r\n\r\n<h4 id=\"PaymentProcessing-ErrorMessages\"><a name=\"error-messages\" id=\"error-messages\"></a>Error Messages</h4>\r\n\r\n<p>The following error messages are returned as part of the Save Payment Header and Save Payment Request services. These error messages are not returned if payment is included as part of an order import. Each scenario has an error code which is given regardless of the locale. Error message, however, can be translated based on the user&#39;s locale. For example, error code pay::10001&nbsp;can display a message in English to a user in England, while error code pay::10001&nbsp;can display a message in Spanish to a user in Mexico.</p>\r\n\r\n<p>Type &#39;Error&#39; is used for responses which require immediate user action. Type &#39;Warning&#39; is used for responses which do not require immediate user action, but indicate that there may be an underlying issue. Type &#39;Info&#39; is used for responses which are purely informational and do not require user action.</p>\r\n\r\n<table border=\"1\" resolved=\"\">\r\n\t<colgroup>\r\n\t\t<col />\r\n\t\t<col />\r\n\t\t<col />\r\n\t\t<col />\r\n\t</colgroup>\r\n\t<thead>\r\n\t\t<tr>\r\n\t\t\t<th>\r\n\t\t\t<p>Scenario</p>\r\n\t\t\t</th>\r\n\t\t\t<th colspan=\"1\">\r\n\t\t\t<p>Error Type</p>\r\n\t\t\t</th>\r\n\t\t\t<th colspan=\"1\">\r\n\t\t\t<p>Error Code</p>\r\n\t\t\t</th>\r\n\t\t\t<th>\r\n\t\t\t<p>Error Message</p>\r\n\t\t\t</th>\r\n\t\t</tr>\r\n\t</thead>\r\n\t<tbody>\r\n\t\t<tr>\r\n\t\t\t<td colspan=\"1\">Payment component is down</td>\r\n\t\t\t<td colspan=\"1\">Error</td>\r\n\t\t\t<td colspan=\"1\">N/A; returned from Order component</td>\r\n\t\t\t<td colspan=\"1\">Payment cannot be processed at this time.</td>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<td>Payment Gateway component is down</td>\r\n\t\t\t<td colspan=\"1\">Warning</td>\r\n\t\t\t<td colspan=\"1\">\r\n\t\t\t<p>pay::10001</p>\r\n\t\t\t</td>\r\n\t\t\t<td>Payment cannot be processed at this time.</td>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<td>Third party payment gateway is down</td>\r\n\t\t\t<td colspan=\"1\">Warning</td>\r\n\t\t\t<td colspan=\"1\">\r\n\t\t\t<p>pay::10002</p>\r\n\t\t\t</td>\r\n\t\t\t<td>\r\n\t\t\t<p>Payment cannot be processed at this time.</p>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<td>An authorization transaction failed</td>\r\n\t\t\t<td colspan=\"1\">Info</td>\r\n\t\t\t<td colspan=\"1\">\r\n\t\t\t<p>pay::10003</p>\r\n\t\t\t</td>\r\n\t\t\t<td>Authorization failed for &lt;accountDisplayNumber&gt;. Please provide an alternate form of payment.</td>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<td colspan=\"1\">A settlement transaction failed</td>\r\n\t\t\t<td colspan=\"1\">Info</td>\r\n\t\t\t<td colspan=\"1\">\r\n\t\t\t<p>pay::10004</p>\r\n\t\t\t</td>\r\n\t\t\t<td colspan=\"1\">Settlement failed for &lt;accountDisplayNumber&gt;. Please provide an alternate form of payment.</td>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<td colspan=\"1\">A refund transaction failed</td>\r\n\t\t\t<td colspan=\"1\">Info</td>\r\n\t\t\t<td colspan=\"1\">\r\n\t\t\t<p>pay::10005</p>\r\n\t\t\t</td>\r\n\t\t\t<td colspan=\"1\">Refund failed for &lt;accountDisplayNumber&gt;. Please provide an alternate form of payment.</td>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<td colspan=\"1\">Authorization has succeeded but the payment has been flagged as fraud</td>\r\n\t\t\t<td colspan=\"1\">Info</td>\r\n\t\t\t<td colspan=\"1\">\r\n\t\t\t<p>pay::10006</p>\r\n\t\t\t</td>\r\n\t\t\t<td colspan=\"1\">Authorization has succeeded for&nbsp;&lt;accountDisplayNumber&gt;,&nbsp;but this payment has been flagged as fraud. Please review the fraud details and take action as required.</td>\r\n\t\t</tr>\r\n\t</tbody>\r\n</table>\r\n\r\n<p>Below is a sample response which contains two error messages.</p>\r\n\r\n<pre>\r\n<code>{\r\n&quot;success&quot;: true,\r\n&quot;header&quot;: null,\r\n  &quot;data&quot;:\r\n{\r\n&quot;Messages&quot;: {\r\n&quot;Message&quot;: [\r\n  {\r\n    &quot;Type&quot;: &quot;WARNING&quot;,\r\n    &quot;Code&quot;: &quot;PAY0002&quot;,\r\n    &quot;Description&quot;: &quot;Payment cannot be processed at this time because the third party payment gateway cannot be contacted.&quot;\r\n  },\r\n  {\r\n    &quot;Type&quot;: &quot;INFO&quot;,\r\n    &quot;Code&quot;: &quot;PAY0003&quot;,\r\n    &quot;Description&quot;: &quot;Authorization failed for Visa one 1112. Please provide an alternate form of payment.&quot; \r\n  }\r\n      ],\r\n&quot;Size&quot;: 2\r\n    },\r\n...</code>\r\n</pre>\r\n\r\n<h3><a name=\"related-articles\" id=\"related-articles\"></a>Related Articles</h3>\r\n\r\n<div class=\"info\"><ul class=\"related-articles\"><li><a href=\"/capturing-payment\" hqid=\"2617706\">Capturing Payment</a></li><li><a href=\"/payment-schedulers\" hqid=\"2617715\">Payment Schedulers & Batch Processing</a></li><li><a href=\"/settlement\" hqid=\"2617710\">Settlement</a></li><li><a href=\"/other-transaction-types\" hqid=\"2617712\">Other Transaction Types</a></li><li><a href=\"/authorization\" hqid=\"2617709\">Authorization</a></li><li><a href=\"/refunds\" hqid=\"2617711\">Refunds</a></li><li><a href=\"/invoicing-sales-posting\" hqid=\"2617713\">Invoicing and Sales Posting</a></li><li><a href=\"/payment-gateway-integration\" hqid=\"2617714\">Payment Gateway Integration</a></li><li><a href=\"/paymentoverview\" hqid=\"2688302\">Payment Overview</a></li><li><a href=\"/payment-types\" hqid=\"2617707\">Payment Types</a></li><li><a href=\"/how-payment-processing-works\" hqid=\"2617708\">How Payment Processing Works</a></li><li><a href=\"/payment-rest-apis-and-user-exits\" hqid=\"2617717\">Rest APIs and User Exits</a></li><li><a href=\"/payment-troubleshooting\" hqid=\"2617718\">Testing & Troubleshooting Payment</a></li><li><a href=\"/payment-health-dashboard\" hqid=\"3127204\">Payment Health Dashboard</a></li><li><a href=\"/einvoice\" hqid=\"3061519\">eInvoice </a></li><li><a href=\"/payment-fraud\" hqid=\"2617716\">Fraud</a></li></ul></div>\r\n\r\n\t  </div>\r\n </div>\r\n <div id=\"ui-page-fb-wrap\"></div>\r\n <div class=\"hiq-footer-wrap\">\r\n    \r\n                \r\n  </div>\r\n\r\n\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n",
  "content_length": 14545,
  "scraped_at": "2025-08-09T22:34:28.954049"
}