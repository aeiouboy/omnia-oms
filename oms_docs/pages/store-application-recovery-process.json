{
  "success": true,
  "permalink": "store-application-recovery-process",
  "title": "Store Application Recovery Process",
  "content": "\r\n\r\n\r\n<div class=\"hiq-page-wrap\">\r\n<div class=\"hiq-t-wrap\">\r\n\t\t\r\n  \t  <div class=\"hiq-t \">\r\n\t\t\t\t<ul class=\"breadcrumbs\"><li><a class=\"breadcrumb-links\" hqid=\"1788908\"  href=\"/home\">Home</a></li> <li><span>&rsaquo;&rsaquo;</span><a hqid=\"3500940\" href=\"/omni\" class=\"breadcrumb-links\">Manhattan Active® Omni</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"3426481\" href=\"/store-3\" class=\"breadcrumb-links\">Store</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"2158412\" href=\"/process-configuration-guides-3\" class=\"breadcrumb-links\">Process & Configuration Guides</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"2164553\" href=\"/store-common\" class=\"breadcrumb-links\">Store Common</a></li><li> <span>››</span>Store Application Recovery Process</li></ul>  \t\r\n\t\t<h2>Store Application Auto Recovery</h2>\n\n<p></p>\n\n<p><a id=\"StoreAppRecovery\" name=\"StoreAppRecovery\"></a>Customers&nbsp;using older iOS devices to run store application may complain about iOS killing the store application while it is in the background, forcing the store users to login again.&nbsp;Manhattan Active&nbsp;Store&nbsp;solutions provide an ability to recover and automatically re-login the user to the store app in the&nbsp;event of such unusual termination. This guide covers the scenarios when&nbsp;the store application can be&nbsp;recovered.</p>\n\n<div class=\"info\"><ul><li><a href=\"/store-application-recovery-process$overview\">Overview</a></li><li><a href=\"/store-application-recovery-process$recovery-configuration\">Recovery Configuration</a></li><li><a href=\"/store-application-recovery-process$recovery-process\">Recovery Process</a></li><li><a href=\"/store-application-recovery-process$workflow\">Workflow</a></li><li><a href=\"/store-application-recovery-process$services\">Services</a></li></ul></div>\n\n<h3><a name=\"overview\" id=\"overview\"></a>Overview</h3>\n\n<p>Some certified devices for Manhattan Active&nbsp;Store application have&nbsp;less RAM as compared to the newer devices from Apple. These devices can also be used by the retailers for other mobile&nbsp;applications installed on the same devices.</p>\n\n<p><strong>iOS </strong>optimizes the memory utilization on its&nbsp;devices and&nbsp;automatically terminates&nbsp;background applications to support a foreground app as necessary.  Before this feature, when this happens for&nbsp;Active Omni Store app&nbsp;(or if the associate accidentally terminates the app) upon relaunching the app, the store associate must login again. &nbsp;Additionally,&nbsp;any cart transaction that was in progress was&nbsp;abandoned and could not be retrieved. The associate will have to create the transaction from the beginning again.</p>\n\n<p>To alleviate this inconvenience, in the event of such termination, the store app re-logs the user with the app recovery feature.</p>\n\n<div class=\"tip\"><strong>Note</strong>: While we have noticed these app terminations are mostly apparent on&nbsp;older device models (iPhone 6/7 , iPod touch 6) &nbsp;due to its limited RAM, this can happen to any apple device as users can always launch more (and more memory intensive) foreground apps with store app in background.</div>\n\n<h3><a name=\"recovery-configuration\" id=\"recovery-configuration\"></a>Recovery Configuration</h3>\n\n<p><strong><a id=\"AppRecoveryDuration\" name=\"AppRecoveryDuration\"></a>Business Flag: </strong>This behavior is controlled by a Business Flag &ldquo;Time Duration For Store App Recovery (in minutes)&ldquo; in&nbsp;&quot;Store Common Configuration&quot; (i.e. under&nbsp;component-store-facade &gt; storeCommonConfig) which is also&nbsp;available as part of store common static data - storefacade/api/storefacade/storecommon/staticdata.</p>\n\n<p>The Default value = null for the business flag, When blank or null or 0 or &lt; 0 consider as BF = false. Only if value set is &gt;= 1, BF is treated as&nbsp;enabled or true. The store users will enter time duration in minutes.</p>\n\n<div class=\"warning\">(Expectation is that the associate knows the token expiration criteria from AuthServer and enters realistic number.</div>\n\n<p><strong>Data Recovery:</strong>&nbsp;The behavior to reload or retrieved POS transaction data is controlled by another flag &ldquo;Reload Application Data&rdquo;, Default = true,&nbsp;this will considered only&nbsp;when business flag above is enabled.&nbsp;This is available in POS General Config &gt; Common Config, when this is false, i.e. no transaction will be reloaded.</p>\n\n<p><strong>UI Grant:</strong>&nbsp;Store users should have access to existing ui grant &quot;ui::posservice::menu:pos-cart&quot; to reload application data.</p>\n\n<h3><a name=\"recovery-process\" id=\"recovery-process\"></a>Recovery Process</h3>\n\n<p>When this feature is enabled, application records&nbsp;<tt>appLastUsedTimeStamp</tt> at regular intervals&nbsp;and when the app is terminated - whether killed manually by user or&nbsp;any iOS driven ungraceful termination of app etc, the authentication token from the previous login is still intact in local storage for a period of time. &nbsp;When the app is opened again, rather than directing the user to the login page, the app will compare the&nbsp;<tt>appLastUsedTimeStamp</tt>&nbsp;with the configured recovery&nbsp;time, and when the app is relaunched within the configured recovery time and then the app will&nbsp;use the token to login internally. Depending on whether there was a transaction in-progress before the app was killed by iOS, the app will redirect the associate to either:&nbsp;</p>\n\n<ul>\n\t<li>POS Cart page - if the application was terminated within the configured &#39;time duration&#39; (and obviously within the period that the authentication token persists), the process will use the authentication token from the previous user to auto-login the user and auto-resume the cart from the termination point.</li>\n\t<li>The Home Page - if the associate was not in the cart (ex. Order Summary payment screen with full or partial payment initiated) the process will not attempt to resume from that exact state.&nbsp;\n\t<ul>\n\t\t<li>That transaction will be abandoned and users will need to repeat it.&nbsp;</li>\n\t\t<li>However, the previous authentication will be used to auto-log the previous user&nbsp;to the Home Page, saving the login step.</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p>Clearing of local storage data i.e. &quot;application last time stamp&quot; and &quot;transaction&quot; will happen when the user logs&nbsp;out of&nbsp;the application. Transaction is cleared from local storage when it is canceled, suspended,&nbsp;successfully completed or when the&nbsp;business flag &quot;reload application data&quot; is false.</p>\n\n<p><strong>Key Highlights of this feature</strong></p>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 1032px;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\" style=\"width: 511px; text-align: center;\">Key Highlights</th>\n\t\t\t<th scope=\"col\" style=\"width: 493px; text-align: center;\">Out of Scope</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"width: 508px;\">This feature&nbsp;is applicable only when the app has been terminated and not by our Inactivity Timeout functionality.&nbsp;</td>\n\t\t\t<td style=\"width: 491px;\">Navigation to the exact screen/pop-up from which the app was&nbsp;terminated.&nbsp; Ex. discount popup.</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"width: 508px;\">The configurations (StoreCommonStaticData and POSStaticData) based on which the associate is auto-logged in will be read from local storage. The updated config will only be available in the StoreCommonStaticData after the login operation while the home screen is being loaded.</td>\n\t\t\t<td style=\"width: 491px;\">Resuming a transaction for which partial payment was already done or even a requestLog was created for payment.</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"width: 508px;\">\n\t\t\t<p>This will retrieve below transaction with conditions</p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Order is not canceled/post voided</li>\n\t\t\t\t<li>Order is not suspended or put on hold</li>\n\t\t\t\t<li>Order is not confirmed or completed</li>\n\t\t\t\t<li>Regular Sales, Omni Sale orders</li>\n\t\t\t\t<li>Transaction with modifications i.e customer attached, loyalty number, price modified, VAS attached, Tax exempted or override, Discount or promo applied etc</li>\n\t\t\t\t<li>Order as Employee transaction</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"width: 491px;\">This will NOT retrieve any of the below transaction\n\t\t\t<ul>\n\t\t\t\t<li>Backoffice or Manager till functions</li>\n\t\t\t\t<li>Exchange tender</li>\n\t\t\t\t<li>GC enquiry transaction</li>\n\t\t\t\t<li>Post void transaction, Returns and BOPIS</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"width: 508px;\">\n\t\t\t<p>Upon auto login, there will be no restriction in making existing APIs - storeAppRoot, grants, Feature flags, listForLocations, POS/SIF/StoreCommon static data etc.&nbsp;</p>\n\n\t\t\t<p>All these existing calls will be not be impacted by this feature.</p>\n\t\t\t</td>\n\t\t\t<td style=\"width: 491px;\">&nbsp;</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>&nbsp;</p>\n\n<div class=\"tip\"><strong>Note:</strong> Store application recovery is applicable for online store applications only on iOS devices. This&nbsp;solution is not certified for&nbsp;Android or Windows operating devices nor&nbsp;is it applicable for offline store application recovery.</div>\n\n<h3><a name=\"workflow\" id=\"workflow\"></a>Workflow</h3>\n\n<p><img alt=\"\" src=\"https://dzf8vqv24eqhg.cloudfront.net/userfiles/4665/7671/ckfinder/images/qu/App%20Recovery%20-%20Proposed%20Workflow.png?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9kemY4dnF2MjRlcWhnLmNsb3VkZnJvbnQubmV0L3VzZXJmaWxlcy80NjY1Lzc2NzEvY2tmaW5kZXIvaW1hZ2VzL3F1L0FwcCUyMFJlY292ZXJ5JTIwLSUyMFByb3Bvc2VkJTIwV29ya2Zsb3cucG5nIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzU0NzU0MDkzfX19XX0_&Signature=at3rSd8lVpe6ETZuk~7OsiROXnz6RUBC2~H~OlLk6kejn5GV5AxAIYuAZfAlTxPbXRzY2dk3SCoWrVKQw3BTmQAZ0s1h7ErZ244JzPnra~cBepsdSqUmFeaMtYsY-0lxKaM-XRprwLZNS7vRRqGJm1ZVsg-8MdUxBLDl5b1GuAF~JhZ8DS4-WNnu82hP2jBTDZc-AMIeOv9i1~HvErfuwtrTdNIR93MojYAUGZYPGtP61OCdD03EOxYOp8~mFuHHHcuG5cwpdMhfvo4KNFW63kDMK2Ijhl-U8lMTBnWz5uyRQ9EWkNLtSsZfKa-aH2jQa0krW9xQtPpK6GUCD7eNxQ__&Key-Pair-Id=K2TK3EG287XSFC\" style=\"border-style: solid; width: 1276px; height: 1340px;\" /></p>\n\n<h3><a name=\"services\" id=\"services\"></a>Services</h3>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 1248px;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\" style=\"width: 167.5px;\">Service</th>\n\t\t\t<th scope=\"col\" style=\"width: 131px;\">Component</th>\n\t\t\t<th scope=\"col\" style=\"width: 153px;\">Group</th>\n\t\t\t<th scope=\"col\" style=\"width: 753px;\">Service Endpoint</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"width: 165.5px;\">App Reload Controller</td>\n\t\t\t<td style=\"width: 129px;\">posservice</td>\n\t\t\t<td style=\"width: 151px;\">App Reload Controller</td>\n\t\t\t<td style=\"width: 750px;\">posservice/api/posservice/reloadAppData</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>&nbsp;</p>\n\r\n\t  </div>\r\n </div>\r\n <div id=\"ui-page-fb-wrap\"></div>\r\n <div class=\"hiq-footer-wrap\">\r\n    \r\n                \r\n  </div>\r\n\r\n\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n",
  "content_length": 11003,
  "scraped_at": "2025-08-09T22:36:33.650256"
}