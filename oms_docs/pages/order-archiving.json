{
  "success": true,
  "permalink": "order-archiving",
  "title": "Order Archiving",
  "content": "\r\n\r\n\r\n<div class=\"hiq-page-wrap\">\r\n<div class=\"hiq-t-wrap\">\r\n\t\t\r\n  \t  <div class=\"hiq-t \">\r\n\t\t\t\t<ul class=\"breadcrumbs\"><li><a class=\"breadcrumb-links\" hqid=\"1788908\"  href=\"/home\">Home</a></li> <li><span>&rsaquo;&rsaquo;</span><a hqid=\"3500940\" href=\"/omni\" class=\"breadcrumb-links\">Manhattan Active® Omni</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"2158393\" href=\"/order-management\" class=\"breadcrumb-links\">Order Management</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"2158394\" href=\"/process-configuration-guides\" class=\"breadcrumb-links\">Process & Configuration Guides</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"2158746\" href=\"/order-orchestration-2\" class=\"breadcrumb-links\">Order Orchestration</a></li><li> <span>››</span>Order Archiving</li></ul>  \t\r\n\t\t<h2>Order Archiving</h2>\r\n\r\n<p></p>\r\n\r\n\r\n<p>&nbsp;</p>\r\n\r\n<div class=\"info\"><ul><li><a href=\"/order-archiving$overview\">Overview</a></li><li><a href=\"/order-archiving$criteria-for-archival\">Criteria for Archival</a></li><li><a href=\"/order-archiving$archiving-configuration\">Archiving Configuration</a></li><li><a href=\"/order-archiving$how-archiving-works\">How Archiving Works</a><ul><li><a href=\"/order-archiving$how-nbsp-archived-orders-are-reinstated\">How&nbsp;Archived Orders are Reinstated</a><ul><li><a href=\"/order-archiving$manually-retrieving-an-archived-order\">Manually Retrieving an Archived Order</a></li></ul></li><li><a href=\"/order-archiving$archived-order-nbsp-attributes\">Archived Order&nbsp;Attributes</a></li><li><a href=\"/order-archiving$counting-archived-orders\">Counting Archived Orders</a></li></ul></li><li><a href=\"/order-archiving$troubleshooting\">Troubleshooting</a><ul><li><a href=\"/order-archiving$how-to-know-if-an-order-is-archived-or-not-nbsp\">How to know if an order is archived or not&nbsp;</a></li><li><a href=\"/order-archiving$how-do-i-delete-orders-from-active®-omni\">How do I delete orders from Active® Omni?</a></li><li><a href=\"/order-archiving$how-to-unarchive-an-order-without-updating-an-order\">How to unarchive an order without updating an order</a></li></ul></li><li><a href=\"/order-archiving$related-articles\">Related Articles</a></li></ul></div>\r\n\r\n<h3><a name=\"overview\" id=\"overview\"></a>Overview</h3>\r\n\r\n<p>Once orders have finished their life cycle, they are archived to keep system performance at its peak. When an order is archived, it is moved from the active database schema to the archive index.</p>\r\n\r\n<div class=\"info\">Orders can be kept in the active database for a maximum of <strong>one year</strong> before being moved to the archive index. If you plan to create more than 30 million order lines per year, then please work with services&nbsp;to re-evaluate this recommendation.&nbsp;</div>\r\n\r\n<div class=\"info\">Orders can be kept in the archive index for up to<strong> five years</strong>. Additional years of retention are available for an additional fee. Purge of the archive index is set up by ops team based on each customer's retention requirements.</div>\r\n\r\n<h3><a name=\"criteria-for-archival\" id=\"criteria-for-archival\"></a>Criteria for Archival</h3>\r\n\r\n<p>An order is eligible for archival if all&nbsp;order lines are in one of the following statuses:</p>\r\n\r\n<ul>\r\n\t<li>Status of each unit of each line is in either 7000&nbsp;(Fulfilled) or 8500 (Returned) status, or an extension of these statuses</li>\r\n\t<li>If order line is canceled (both minimum and maximum fulfillment status is&nbsp;9000)</li>\r\n\t<li>Status of each unit of return line is in status 18000 (Returned), or an extension of this status</li>\r\n\t<li>If return line is canceled (both minimum and maximum fulfillment status is 19000)</li>\r\n</ul>\r\n\r\n<div class=\"info\"><strong>Note </strong>: Order archive does not archive the Promising and Reservation objects, including the Promising Trace.&nbsp;<br>\r\n<br>\r\nOrder archive also does not archive releases and allocations on an order if the order contains 260 or more releases. The rest of the order is archived, but these entities are only purged and not retained anywhere.</div>\r\n\r\n<h3><a name=\"archiving-configuration\" id=\"archiving-configuration\"></a>Archiving Configuration</h3>\r\n\r\n<p>Once the conditions for archiving are met, an order is eligible to be archived. Archiving is triggered based on the configured Number of Days after which an order becomes eligible to archive. When an order becomes eligible for archiving, an archive date is stamped on the order, and the order is archived when that date is reached.</p>\r\n\r\n<p>Configure&nbsp;<strong>Number of Days</strong>&nbsp;to archive on the Order Configuration UI in the General tab. The default setting is&nbsp;30 days.</p>\r\n\r\n<p>For example, if the&nbsp;Number of Days is set as 30, then an order is archived 30 days after every unit on the order has been fulfilled, returned, or canceled. If a two-line&nbsp;order has one line shipped on April 1 and a second line shipped on April 2, then the archive date is stamped on the order as May 2. The order is archived when the archiving scheduler executes on May 2. If the order archiving configuration is changed, any existing orders will continue to have the original archive configuration information. These can be updated manually&nbsp;by submitting&nbsp;a ticket with the dates and interval&nbsp;required.</p>\r\n\r\n<h3><a name=\"how-archiving-works\" id=\"how-archiving-works\"></a>How Archiving Works</h3>\r\n\r\n<p>The steps below describe how an order is archived:</p>\r\n\r\n<ul>\r\n\t<li>Once an order becomes eligible to archive, the Order component sends a message to the Search component to archive it. Just before archiving an order, the order is re-evaluated to ensure it still qualifies for archiving. For example, if a return has been created against it and some units are in status 8000 (Pending Return), then the order is no longer eligible for archive. Archiving checks for the order payment status. It checks for payment status to be either Refunded (7000), Paid (5000), or Not Applicable (0).&nbsp;</li>\r\n\t<li>The Search component picks up the&nbsp;message and reaches out to the&nbsp;Order Component to get the latest copy of an order and index it.</li>\r\n\t<li>The Search component picks up the&nbsp;message and reaches out to the&nbsp;Payment Component to get the latest copy of the payment and index it.</li>\r\n\t<li>After indexing successfully, the Search component sends an acknowledgement message to the Order component to delete the order and the Payment component to delete the payment.</li>\r\n\t<li>The Order and Payment components pick up the acknowledgement message and delete their respective data.</li>\r\n\t<li>The order is finally marked as archived in the Search component.</li>\r\n</ul>\r\n\r\n<p><img height=\"885\" src=\"https://dzf8vqv24eqhg.cloudfront.net/userfiles/4665/7671/ckfinder/images/qu/2039/image.png?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9kemY4dnF2MjRlcWhnLmNsb3VkZnJvbnQubmV0L3VzZXJmaWxlcy80NjY1Lzc2NzEvY2tmaW5kZXIvaW1hZ2VzL3F1LzIwMzkvaW1hZ2UucG5nIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzU0NzUzOTM3fX19XX0_&Signature=CgmK54BXLoRStItm6f~NauKuD7ucsYv0BJ2zFtA6iNV4zEhyZk-FOE0Ie1sBDkCvmWlBWLuyWhkZDrXC4Er-0tVjHIDlh1FJUcys07-zw2LXo5DSrEX3MtQ7~pM-V6t4veRzB0X47ZU6VFJhBgFndwaDLPVVyKx1LxRJ8SASe8-Rwu9C~0pxNnl1S3wiF8tm0jOV4VjFw0~52zivuo8OhBdm1ZlLgprv~RRiHR~aBKobVAnFxI9sGIRHtu6WXhG40VS5S6NdAY6W9LtQ-uprr8zCgaAU8kz8jEEsssK3e63boRhfVy83RqEvbZsOcywlIsQabVh9CTAiePrlw-X5xQ__&Key-Pair-Id=K2TK3EG287XSFC\" style=\"width: 531px; height: 513px;\" width=\"916\"></p>\r\n\r\n<h4><a name=\"how-nbsp-archived-orders-are-reinstated\" id=\"how-nbsp-archived-orders-are-reinstated\"></a><a name=\"_Retrieve_Order\"></a>How&nbsp;Archived Orders are Reinstated</h4>\r\n\r\n<p>When a user applies appeasement or returns an archived order, the system automatically moves the order from the archive database to the active database. The retrieval process is where the order and its child entities are restored in the Order component, and order payment information is restored in the Payment component.</p>\r\n\r\n<h5><a name=\"manually-retrieving-an-archived-order\" id=\"manually-retrieving-an-archived-order\"></a>Manually Retrieving an Archived Order</h5>\r\n\r\n<p>If you need to retrieve details of an archived order, the Get Order API cannot be used, since the order no longer exists in the active database. The below section describes how to get a list of archived orders and post to an external system.</p>\r\n\r\n<p><div class=\"toggle_outerdiv\"><p class=\"toggle_div\"><a href=\"#tg-1\" class=\"toggle-content\"><span class=\"toggle-title\">Manually Retrieving an Archived Order</span></a></p><div id=\"tg-1\"><p>Follow the steps below to retrieve archived orders and post to a queue for external consumption. This process retrieves orders one-by-one and cannot be done in bulk.</p>\r\n\r\n<p><strong>Step 1:&nbsp;</strong>Get your list of archived orders. One option is to use the below API and include the relevant year and month.</p>\r\n\r\n<p>POST&nbsp;{{url}}/searchv2/api/searchv2/ord*{{orgId}}:2022:01*/search</p>\r\n\r\n<pre>\r\n<code>{\r\n   &quot;query&quot;:{\r\n      &quot;term&quot;:{\r\n         &quot;IsArchived&quot;:&quot;true&quot;\r\n      }\r\n   },\r\n   &quot;size&quot;:50\r\n}</code></pre>\r\n\r\n<p><strong>Step 2:&nbsp;</strong>Write a custom utility to invoke the endpoint below. This retrieves the order from the archive storage.</p>\r\n\r\n<p data-renderer-start-pos=\"480\">GET&nbsp;{{url}}/order/api/order/extended/order/orderId/{orderId}</p>\r\n\r\n<p data-renderer-start-pos=\"549\"><strong>Step 3: </strong>From the custom utility,&nbsp;invoke your external endpoint to post the order message.</p>\r\n\r\n<p>&nbsp;</p>\r\n</div></div></p>\r\n\r\n<h4><a name=\"archived-order-nbsp-attributes\" id=\"archived-order-nbsp-attributes\"></a>Archived Order&nbsp;Attributes</h4>\r\n\r\n<p>By default, the following list of attributes are available for an archived order:</p>\r\n\r\n<p><div class=\"toggle_outerdiv\"><p class=\"toggle_div\"><a href=\"#tg-2\" class=\"toggle-content\"><span class=\"toggle-title\">Indexed Order Fields</span></a></p><div id=\"tg-2\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"363\">\n\t<thead>\n\t\t<tr height=\"21\">\n\t\t\t<th height=\"21\" scope=\"col\" width=\"363\">Attribute Name</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrgId</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderId</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">CustomerId</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">CustomerFirstName</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">CustomerLastName</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">CustomerEmail</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">CustomerPhone</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">CapturedDate</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">CreatedTimestamp</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">SellingLocationId</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">CurrencyCode</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderAdditional.QuoteExpiryDate</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderAdditional.IsPriceCheckOrder</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderLine.ItemId</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderLine.ItemDescription</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderLine.ItemColorDescription</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderLine.ParentOrderId</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderLine.OrderLineSubTotal</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderLine.SmallImageURI</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderLine.IsGift</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderLine.OrderLineId</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderLine.Quantity</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderLine.ShipToAddress</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderLine.ShipToLocationId</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderLine.IsReturn</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderLine.IsCancelled</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderLine.ItemSize</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderLine.ItemStyle</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderLine.ProductClass</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderLine.BusinessDate</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderLine.ItemShortDescription</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderLine.OrderLineAdditional.CapturedDate</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderLine.OrderLineAdditional.QuoteId</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">SellingChannel</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">StoreSaleCount</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderLineCount</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">StoreReturnCount</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">ReturnLineCount</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">CancelLineCount</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">ReturnTotalWithoutFees</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderCaptureDetail.RegisterId</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">TransactionReference.TransactionReferenceId</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">IsCancelled</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">IsPostVoided</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">IsConfirmed</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderType</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">DocType</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">TotalTaxes</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">TotalCharges</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">TotalDiscounts</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderTotal</td>\n\t\t</tr>\n\t\t<tr height=\"21\">\n\t\t\t<td height=\"21\">OrderSubTotal</td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div></div></p>\r\n\r\n<h4><a name=\"counting-archived-orders\" id=\"counting-archived-orders\"></a>Counting Archived Orders</h4>\r\n\r\n<p>It is not possible to directly count the number of orders archived in the system. However, a workaround is possible.&nbsp;</p>\r\n\r\n<ol>\r\n\t<li>Count the number of orders present in the search component: GET&nbsp;<code data-renderer-mark=\"true\">url</code>/search/api/search/order?query=(OrderId != null)</li>\r\n\t<li>Count the number of orders present in the order component: Navigate to the Order List UI, the number at the bottom of the page gives the order count which are not archived.</li>\r\n\t<li>The difference of both these numbers will be the total number of orders archived that do not have a copy in the order component anymore.</li>\r\n</ol>\r\n\r\n<h3><a name=\"troubleshooting\" id=\"troubleshooting\"></a>Troubleshooting</h3>\r\n\r\n<h4><a name=\"how-to-know-if-an-order-is-archived-or-not-nbsp\" id=\"how-to-know-if-an-order-is-archived-or-not-nbsp\"></a>How to know if an order is archived or not&nbsp;</h4>\r\n\r\n<p>After the archive job is complete, if the PurgeDate is populated for orders, it means that the order is archived. Based on the purge date the order&nbsp;will get purged.</p>\r\n\r\n<h4><a name=\"how-do-i-delete-orders-from-active®-omni\" id=\"how-do-i-delete-orders-from-active®-omni\"></a>How do I delete orders from Active® Omni?</h4>\r\n\r\n<p>You should cancel the orders that you want to delete and have the archive configured for the orders to be deleted.</p>\r\n\r\n<h4><a name=\"how-to-unarchive-an-order-without-updating-an-order\" id=\"how-to-unarchive-an-order-without-updating-an-order\"></a>How to unarchive an order without updating an order</h4>\r\n\r\n<p>To unarchive an order, use \"OrderActions\" : {\"IsArchived\" : true} along with Order Id and Save Order.</p>\r\n\r\n<h3><a name=\"related-articles\" id=\"related-articles\"></a>Related Articles</h3>\r\n\r\n<div class=\"info\"><ul class=\"related-articles\"><li><a href=\"/order_tagging\" hqid=\"2656391\">Order Tagging</a></li><li><a href=\"/order-orchestration-process\" hqid=\"1809208\">Order Orchestration Process</a></li><li><a href=\"/deliverytracking\" hqid=\"2837045\">Delivery Tracking</a></li><li><a href=\"/how-publish-order-works\" hqid=\"3041650\">Publishing Order </a></li><li><a href=\"/order-audit\" hqid=\"2700329\">Order Audit </a></li><li><a href=\"/creating-and-updating-order\" hqid=\"2700326\">Creating and Updating Order</a></li><li><a href=\"/shipping-restriction\" hqid=\"2918532\">Shipping Restriction</a></li><li><a href=\"/order-hold-and-unhold\" hqid=\"2601859\">Holds</a></li><li><a href=\"/order-cancellation\" hqid=\"2601857\">Order Cancellation</a></li><li><a href=\"/order-orchestration-configuration\" hqid=\"1809211\">Order Orchestration Configuration</a></li><li><a href=\"/cart-and-preview-mode\" hqid=\"2746028\">Cart and Preview Mode</a></li><li><a href=\"/mod-types\" hqid=\"2729796\">Mod Types</a></li></ul></div>\r\n\r\n\t  </div>\r\n </div>\r\n <div id=\"ui-page-fb-wrap\"></div>\r\n <div class=\"hiq-footer-wrap\">\r\n    \r\n                \r\n  </div>\r\n\r\n\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n",
  "content_length": 16865,
  "scraped_at": "2025-08-09T22:33:57.400959"
}