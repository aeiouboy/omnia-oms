{
  "id": "2651273",
  "permalink": "substitution-during-allocation",
  "title": "Substitution During Allocation",
  "type": "topic",
  "level": 4,
  "path": "Manhattan Active® Omni/Order Management/Process & Configuration Guides/Order Promising/Substitution During Allocation",
  "raw_item": {
    "id": "2651273",
    "text": "Substitution During Allocation",
    "title": "Substitution During Allocation",
    "permalink": "substitution-during-allocation",
    "leaf": false,
    "droppable": true,
    "expanded": true,
    "closed": true,
    "visible": true,
    "editable": true,
    "type": "topic",
    "topicType": "0",
    "status": "1",
    "iconCls": "icon-topic",
    "cls": "",
    "folder_id": "129588",
    "parent": "f;129588",
    "created_date": "1603770332",
    "modified_date": "1744198515",
    "instructor_id": null,
    "loaded": true,
    "haschildren": false,
    "callout": "0",
    "order": "7"
  },
  "success": true,
  "content": "\r\n\r\n\r\n<div class=\"hiq-page-wrap\">\r\n<div class=\"hiq-t-wrap\">\r\n\t\t\r\n  \t  <div class=\"hiq-t \">\r\n\t\t\t\t<ul class=\"breadcrumbs\"><li><a class=\"breadcrumb-links\" hqid=\"1788908\"  href=\"/home\">Home</a></li> <li><span>&rsaquo;&rsaquo;</span><a hqid=\"3500940\" href=\"/omni\" class=\"breadcrumb-links\">Manhattan Active® Omni</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"2158393\" href=\"/order-management\" class=\"breadcrumb-links\">Order Management</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"2158394\" href=\"/process-configuration-guides\" class=\"breadcrumb-links\">Process & Configuration Guides</a></li><li><span>&rsaquo;&rsaquo;</span><a hqid=\"2158972\" href=\"/order-promising\" class=\"breadcrumb-links\">Order Promising</a></li><li> <span>››</span>Substitution During Allocation</li></ul>  \t\r\n\t\t<h2>Substitution During Allocation</h2>\r\n\r\n<p></p>\r\n\r\n<a href=\"/procure-to-sell\" hqid=\"3629659\">Previous</a>&nbsp;I&nbsp;<a href=\"/forceallocate\" hqid=\"2641921\">Next</a>\r\n<p>&nbsp;</p>\r\n\r\n<div class=\"info\"><ul><li><a href=\"/substitution-during-allocation$overview\">Overview</a></li><li><a href=\"/substitution-during-allocation$process-flow\">Process Flow</a><ul><li><a href=\"/substitution-during-allocation$form-substitution-request\">Form Substitution Request</a></li><li><a href=\"/substitution-during-allocation$evaluate-substitution-rule\">Evaluate Substitution Rule</a></li><li><a href=\"/substitution-during-allocation$format-promising-request\">Format Promising Request</a></li><li><a href=\"/substitution-during-allocation$promising-process\">Promising Process</a></li><li><a href=\"/substitution-during-allocation$allocation-and-release\">Allocation and Release</a></li><li><a href=\"/substitution-during-allocation$order-selling-substitution\">Order Selling - Substitution</a></li><li><a href=\"/substitution-during-allocation$outbound-s-publish-substitution-details\">Outbound(s) - Publish Substitution Details</a></li><li><a href=\"/substitution-during-allocation$inventory-outbound-s-publish-substitution-details\">Inventory Outbound(s) - Publish Substitution Details</a></li><li><a href=\"/substitution-during-allocation$what-is-not-supported-with-substitution\">What is not supported with substitution?</a></li></ul></li><li><a href=\"/substitution-during-allocation$how-to-39-s\">How To&#39;s?</a><ul><li><a href=\"/substitution-during-allocation$how-to-set-up-substitution-rule\">How to Set up Substitution Rule</a></li></ul></li><li><a href=\"/substitution-during-allocation$implementation-flavors\">Implementation Flavors</a><ul><li><a href=\"/substitution-during-allocation$how-to-invoke-custom-substitution-rules-from-external-system\">How to Invoke Custom Substitution Rules from External System</a></li><li><a href=\"/substitution-during-allocation$how-to-add-extended-attributes-to-the-rule-condition\">How to Add Extended Attributes to the Rule Condition</a></li><li><a href=\"/substitution-during-allocation$how-to-set-up-seasonal-substitution\">How to Set up Seasonal Substitution</a></li></ul></li><li><a href=\"/substitution-during-allocation$related-article-s\">Related Article(s)</a></li></ul></div>\r\n\r\n<h3><a name=\"overview\" id=\"overview\"></a>Overview</h3>\r\n\r\n<p>Driven by business needs, retailers may want to replace an ordered item with a substitute during allocation. There may be a need to immediately substitute an Item or make a substitution when there is not enough inventory for the ordered item(s) which determine the Substitution Types - &quot;Immediate&quot; and &quot;OnBackorder&quot;. <span style=\"color: rgb(61,61,61);\">Retailers can also substitute&nbsp;different items for the same Original Item based on certain rule conditions, like Destination Country, state, and so on. </span></p>\r\n\r\n<p><strong>Substitution Types:</strong></p>\r\n\r\n<div class=\"table-wrap\">\r\n<table class=\"wrapped confluenceTable tablesorter tablesorter-default\" resolved=\"\" role=\"grid\">\r\n\t<colgroup>\r\n\t\t<col />\r\n\t\t<col />\r\n\t\t<col />\r\n\t</colgroup>\r\n\t<thead>\r\n\t\t<tr class=\"tablesorter-headerRow\" role=\"row\">\r\n\t\t</tr>\r\n\t</thead>\r\n</table>\r\n</div>\r\n\r\n<div class=\"table-wrap\">\r\n<table class=\"wrapped confluenceTable tablesorter tablesorter-default\" resolved=\"\" role=\"grid\" style=\"width: 1173px;\">\r\n\t<thead>\r\n\t\t<tr>\r\n\t\t\t<th class=\"confluenceTd\" scope=\"col\" style=\"width: 156px; text-align: center;\">Substitution Type</th>\r\n\t\t\t<th class=\"confluenceTd\" scope=\"col\" style=\"width: 298px; text-align: center;\">Description</th>\r\n\t\t\t<th class=\"confluenceTd\" scope=\"col\" style=\"width: 308px; text-align: center;\">Example</th>\r\n\t\t\t<th class=\"confluenceTd\" scope=\"col\" style=\"width: 581px; text-align: center;\">Use Case</th>\r\n\t\t</tr>\r\n\t</thead>\r\n\t<tbody aria-live=\"polite\" aria-relevant=\"all\">\r\n\t\t<tr>\r\n\t\t\t<td class=\"confluenceTd\" style=\"width: 153px;\">Immediate</td>\r\n\t\t\t<td class=\"confluenceTd\" style=\"width: 296px;\">\r\n\t\t\t<p>The Ordered Item is immediately replaced by the Substituted Item</p>\r\n\t\t\t</td>\r\n\t\t\t<td class=\"confluenceTd\" style=\"width: 305px;\">\r\n\t\t\t<ul>\r\n\t\t\t\t<li>A &rarr; B &nbsp;</li>\r\n\t\t\t\t<li>(When Order is placed for A, replace it by B)</li>\r\n\t\t\t</ul>\r\n\t\t\t</td>\r\n\t\t\t<td class=\"confluenceTd\" style=\"width: 578px;\">\r\n\t\t\t<ul>\r\n\t\t\t\t<li>Pre Order for Books - Retailers may start selling a book before they actually know the real SKU for the book (since it hasn&rsquo;t been released yet). They will take orders for a &ldquo;dummy SKU&rdquo;. Once they know the real SKU, they add an&nbsp;&ldquo;Immediate&rdquo; substitution rule for &ldquo;Dummy&rdquo;&nbsp; and re-allocate the pre-order lines before releasing to the DC.\r\n\t\t\t\t<ul>\r\n\t\t\t\t</ul>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t\t<tr role=\"row\">\r\n\t\t\t<td class=\"confluenceTd\" style=\"width: 153px;\">OnBackOrder</td>\r\n\t\t\t<td class=\"confluenceTd\" style=\"width: 296px;\">\r\n\t\t\t<p>When the available quantity of the ordered Item is less than the ordered quantity, then the substituted Item is used to make up the difference between the ordered and the available quantity.&nbsp;</p>\r\n\t\t\t</td>\r\n\t\t\t<td class=\"confluenceTd\" style=\"width: 305px;\">\r\n\t\t\t<ul>\r\n\t\t\t\t<li>&nbsp;C&rarr;D</li>\r\n\t\t\t\t<li>(When C is out of stock , then replace with D)</li>\r\n\t\t\t</ul>\r\n\t\t\t</td>\r\n\t\t\t<td class=\"confluenceTd\" style=\"width: 578px;\">\r\n\t\t\t<ul>\r\n\t\t\t\t<li>Book Rental -&nbsp;A customer might have ordered for an old book for renting, but if the retailer finds that the old book is not available, then&nbsp;the old book will be replaced with a new one.</li>\r\n\t\t\t</ul>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t\t<tr role=\"row\">\r\n\t\t\t<td class=\"confluenceTd\" style=\"width: 153px;\">\r\n\t\t\t<p>&nbsp;Conditional&nbsp;</p>\r\n\r\n\t\t\t<p>(based on certain attributes)</p>\r\n\t\t\t</td>\r\n\t\t\t<td class=\"confluenceTd\" style=\"width: 296px;\">\r\n\t\t\t<p>The substitution is made based on certain Order/ Order Line attributes (For example,&nbsp;different items may be shipped based on the destination country). A conditional substitution rule can be set for both Immediate as well as On Backorder substitutions. Refer <a href=\"/substitution-during-allocation$How to set up Substitution rule\">How to set up Substitution rule</a> for more details</p>\r\n\t\t\t</td>\r\n\t\t\t<td class=\"confluenceTd\" style=\"width: 305px;\">\r\n\t\t\t<ul>\r\n\t\t\t\t<li>&nbsp;A&nbsp;&rarr; When country of shipment = US , no substitute</li>\r\n\t\t\t\t<li>&nbsp; &nbsp;&nbsp;&rarr; When country of shipment= Canada, sub by B</li>\r\n\t\t\t\t<li>&nbsp; &nbsp;&rarr; When country of shipment = India, sub by C</li>\r\n\t\t\t</ul>\r\n\t\t\t</td>\r\n\t\t\t<td class=\"confluenceTd\" style=\"width: 578px;\">\r\n\t\t\t<ul>\r\n\t\t\t\t<li>Based on Shipping Location&nbsp;- Because of&nbsp;the regulatory rules/other business factors, when an Order is made for Item A, then the retailers have to do the following:\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li>When shipping location is US - Ship Item A (no substitute)</li>\r\n\t\t\t\t\t<li>When shipping location is CA - Ship Item B (against Ordered Item)</li>\r\n\t\t\t\t\t<li>When shipping location is IN - Ship Item C (against Ordered Item)</li>\r\n\t\t\t\t</ul>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\r\n\t\t\t<p><img height=\"113\" src=\"https://dzf8vqv24eqhg.cloudfront.net/userfiles/4665/7671/ckfinder/images/2020_10_28_03_30_362.png?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9kemY4dnF2MjRlcWhnLmNsb3VkZnJvbnQubmV0L3VzZXJmaWxlcy80NjY1Lzc2NzEvY2tmaW5kZXIvaW1hZ2VzLzIwMjBfMTBfMjhfMDNfMzBfMzYyLnBuZyIsIkNvbmRpdGlvbiI6eyJEYXRlTGVzc1RoYW4iOnsiQVdTOkVwb2NoVGltZSI6MTc1NDc1MTY2NH19fV19&Signature=kkZh7I9Rp10bdDo7DsVMeEwQCMXBQ0TZjc4RdLNfUpekfIrrgRNyasL62aXEFcOOAgGIXn0pffuX~QwAT5dkEawXCa4MG2HC5CA7sTmIjlLooU8mlE7UCZy8wFa7~OmQiMswE5250YA7t0-dn30ngPbd83gZtMhv6EntSiRGuiq9mICx1y9Pp4VmeUGeklWY-PWA-QCKhGArQB3Et~v-z4BxzBuni~q2AaGPcRvxptp6L7dm48tZOkGgP2lgUqibjRvW-YrzQGp4tmjtlkBufSzSG7eWmyqDxvYsSI8V~MUceGc-V~Karfu0f7dENx6hbOp4NqUexo9e~SfGsG3KxQ__&Key-Pair-Id=K2TK3EG287XSFC\" width=\"593\" /></p>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t</tbody>\r\n</table>\r\n</div>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<h3><a name=\"process-flow\" id=\"process-flow\"></a>Process Flow</h3>\r\n\r\n<p><div class=\"toggle_outerdiv\"><p class=\"toggle_div\"><a href=\"#tg-1\" class=\"toggle-content\"><span class=\"toggle-title\">Substitution - Process flow</span></a></p><div id=\"tg-1\"><p><img align=\"left\" border=\"2\" class=\"\" src=\"https://dzf8vqv24eqhg.cloudfront.net/userfiles/4665/7671/ckfinder/images/Substitution.png?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9kemY4dnF2MjRlcWhnLmNsb3VkZnJvbnQubmV0L3VzZXJmaWxlcy80NjY1Lzc2NzEvY2tmaW5kZXIvaW1hZ2VzL1N1YnN0aXR1dGlvbi5wbmciLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE3NTQ3NTE2NjR9fX1dfQ__&Signature=nxFmvfjtUOY6iGltyc9N809oYmmXVXfWkt6smpBm4MLUOQzGOiFQYRK8Smf26URLemtQ9DEzlHjCKpto4BL9ic0IDMnfZ0zsYe~O5JNVJPfAmmrumKi1cacD3PYULNKARMnx5GUAmLqw7Lv1ivGxzH1mOerbzyWb6NHWrk3mL0-uDybezEwowXH0HQJ5uNb3xhwm9xyPendmz4W9-l5DPjUb0YfNbc~uazEQgdR4awTOROYfWbzI9J~4U3iiD1AbEC3opjo~xSsTB1iw9v9sEozzHe0ejshMalJlr0R6ILiEgdvXoAZxrK44bcSXgGl2E-ZNd883ZXHlt071DVdAQg__&Key-Pair-Id=K2TK3EG287XSFC\" style=\"margin-right:5px;padding:5px;\" /></p>\n\n\n</div></div></p>\r\n\r\n<h5><a name=\"form-substitution-request\" id=\"form-substitution-request\"></a>Form Substitution Request</h5>\r\n\r\n<p>Substitution rule evaluation can be controlled for a <a hqid=\"2641920\" href=\"/howpromisingworks$Evaluate Substitution Rules\">Fulfillment Optimization Configuration</a>&nbsp;by the Enable Substitution Rule attribute. Only when this attribute is enabled, the system performs substitution subject to availability of active and applicable substitution rule.&nbsp;Otherwise,&nbsp;the system ignores the substitution rules even if it is present. The substitution rules which are set for an&nbsp;Item are also cached in inventory. If &quot;Enable Substitution Request&quot; is true, then a substitution request is created which has the Item id(s) and the order/ order line attributes. Based on the substitution request, substitution rule evaluation takes place in inventory (API - <span class=\"path\">/api/inventory/substitution/getSubstituteItems</span>), and a response is sent back to promising. The response has the details of Substitute Item, Substitution Type, and the sequence of the substitute items. An User Exit (Promising::Substitution::UserExit::GetSubstituteItems) is exposed here to fetch substitution rules from external system. Refer to the section below for a sample substitution request and response</p>\r\n\r\n<p><div class=\"toggle_outerdiv\"><p class=\"toggle_div\"><a href=\"#tg-2\" class=\"toggle-content\"><span class=\"toggle-title\">Substitution Request - Sample</span></a></p><div id=\"tg-2\"><div class=\"computer_code\">{<br />\n&nbsp; &quot;SubstitutionRequestDetail&quot;: [<br />\n&nbsp;&nbsp;&nbsp; {<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Address&quot;: {<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Address1&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Address2&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Address3&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;City&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Country&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;County&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Email&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;FirstName&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;LastName&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Latitude&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Longitude&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Phone&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;PostalCode&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;State&quot;: &quot;string&quot;<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;BatchNumber&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;CarrierCode&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ConsolidationLocationId&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;CountryOfOrigin&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;DeliveryMethodId&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;DemandType&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Extended&quot;: {},<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;InventoryAttribute1&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;InventoryAttribute2&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;InventoryAttribute3&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;InventoryAttribute4&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;InventoryAttribute5&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;InventorySegmentId&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;InventoryTypeId&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;IsConfirmed&quot;: false,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;IsForceAllocate&quot;: false,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ItemId&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ProductStatusId&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;RequestId&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;RequestedDeliveryDate&quot;: &quot;2020-10-28T00:57:55.931Z&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ServiceLevelCode&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ShipFromLocationId&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ShipToLocationId&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ShippingMethodId&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;StrategyType&quot;: &quot;string&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;SubstitutionRequestDetailId&quot;: &quot;string&quot;<br />\n&nbsp;&nbsp;&nbsp; }<br />\n&nbsp; ],<br />\n&nbsp; &quot;SubstitutionRequestId&quot;: &quot;string&quot;,<br />\n&nbsp; &quot;SubstitutionType&quot;: &quot;string&quot;<br />\n}</div>\n</div></div></p>\r\n\r\n<p><div class=\"toggle_outerdiv\"><p class=\"toggle_div\"><a href=\"#tg-3\" class=\"toggle-content\"><span class=\"toggle-title\">Substitution Response - Sample</span></a></p><div id=\"tg-3\"><div class=\"computer_code\">\n<div>\n<div>\n<div>\n<div class=\"signature-container\">\n<div class=\"snippet\" style=\"display: block;\">\n<div class=\"snippet_json\" style=\"display: block;\">\n<pre>\n<code class=\"hljs json\">  {\n    &quot;<span class=\"hljs-attr\">SubstitutionResponseDetail</span>&quot;: [\n      {\n        &quot;<span class=\"hljs-attr\">RequestId</span>&quot;: <span class=\"hljs-string\">&quot;string&quot;</span>,\n        &quot;<span class=\"hljs-attr\">SubstituteItems</span>&quot;: [\n          {\n            &quot;<span class=\"hljs-attr\">ItemId</span>&quot;: <span class=\"hljs-string\">&quot;string&quot;</span>,\n            &quot;<span class=\"hljs-attr\">Sequence</span>&quot;: <span class=\"hljs-number\">0</span>\n          }\n        ],\n        &quot;<span class=\"hljs-attr\">SubstitutionType</span>&quot;: <span class=\"hljs-string\">&quot;string&quot;</span>\n      }\n    ]\n  }</code>\n</pre>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div></div></p>\r\n\r\n<div class=\"tip\"><strong>Note</strong>: Substitution and Reapportionment cannot be enabled at the same time for a Fulfillment Optimization Configuration.</div>\r\n\r\n<h5><a name=\"evaluate-substitution-rule\" id=\"evaluate-substitution-rule\"></a>Evaluate Substitution Rule</h5>\r\n\r\n<p>Multiple substitution rule(s) with different substitution type can be defined for an Item. Refer <a href=\"/substitution-during-allocation$How to set up Substitution rule\">How to set up Substitution rule for different Substitution Types</a>.</p>\r\n\r\n<ul>\r\n\t<li>When both &quot;Immediate&quot; and &quot;OnBackorder&quot; substitution rules are active for the same item, then, irrespective of the rank of the rules, the &quot;Immediate&quot; substitution rule is selected.</li>\r\n\t<li>When more than one valid substitution rule is available for the same item and substitution type&nbsp;with different ranks, then the rule with the higher rank (numerically lesser value) is selected for evaluation.</li>\r\n\t<li>When more than one valid substitution rule is available for the same item and substitution type&nbsp;with the same rank, then the rule which was updated last is selected for evaluation.</li>\r\n\t<li>When the &quot;Immediate&quot; rule is set up for an original&nbsp;Item and &quot;On Back order&quot; rule for substitute item&nbsp;[ A&rarr;B (Immediate) and B&rarr;C (On Back order)&nbsp;],&nbsp;if&nbsp;an Order is placed for Item A and the inventory for Item B is not adequate to fulfill the order, then allocation happens from Item C for the remaining quantity. Note that, if the inventory for Item C is not adequate and the Order is backordered (or partially backordered), then if there is a rise in the inventory for Item C, then the Order (for parent Item A) does not get re-allocated. Orders are re-allocated upon rise in inventory for Item A or Item B only.</li>\r\n</ul>\r\n\r\n<p><div class=\"toggle_outerdiv\"><p class=\"toggle_div\"><a href=\"#tg-4\" class=\"toggle-content\"><span class=\"toggle-title\">Evaluate Substitution Rule - Examples</span></a></p><div id=\"tg-4\"><p><strong>Example 1 - Two immediate rules available</strong></p>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 900px;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Substitution Rule</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Rank</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Substitution Type</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Original Items</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Substituted Item(s)</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Rule condition</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>Rule 1</td>\n\t\t\t<td>1</td>\n\t\t\t<td>Immediate</td>\n\t\t\t<td>Item A-PreOrder</td>\n\t\t\t<td>Item B</td>\n\t\t\t<td>na</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>Rule 2</td>\n\t\t\t<td>2</td>\n\t\t\t<td>Immediate</td>\n\t\t\t<td>Item A-PreOrder</td>\n\t\t\t<td>Item A</td>\n\t\t\t<td>na</td>\n\t\t</tr>\n\t</thead>\n</table>\n\n<p>Substitution Response for Item A-PreOrder: Rule 1 is given preference as it is the Immediate substitution type with better rank.</p>\n\n<div class=\"computer_code\">{<br />\n&nbsp; &quot;SubstitutionResponseDetail&quot;: [<br />\n&nbsp;&nbsp;&nbsp; {<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;RequestId&quot;: &quot;01&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;SubstituteItems&quot;: [<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ItemId&quot;: &quot;Item B&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Sequence&quot;:<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ],<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;SubstitutionType&quot;: &quot;Immediate&quot;<br />\n&nbsp;&nbsp;&nbsp; }<br />\n&nbsp; ]<br />\n}</div>\n\n<p>&nbsp;</p>\n\n<p><strong>Example 2 - Two substitution rules available with different substitution types</strong></p>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 900px;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Substitution Rule</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Rank</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Substitution Type</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Original Items</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Substituted Item(s)</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Rule condition</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>Rule 1</td>\n\t\t\t<td>1</td>\n\t\t\t<td>Immediate</td>\n\t\t\t<td>Item A-PreOrder</td>\n\t\t\t<td>Item A</td>\n\t\t\t<td>na</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>Rule 2</td>\n\t\t\t<td>2</td>\n\t\t\t<td>OnBackorder</td>\n\t\t\t<td>Item A-PreOrder</td>\n\t\t\t<td>\n\t\t\t<ul>\n\t\t\t\t<li>Item B (sequence 1),</li>\n\t\t\t\t<li>Item C (Sequence 2)</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td>na</td>\n\t\t</tr>\n\t</thead>\n</table>\n\n<p>Substitution Response for Item A-PreOrder: Rule 1 is given preference as it is Immediate</p>\n\n<div class=\"computer_code\">{<br />\n&nbsp; &quot;SubstitutionResponseDetail&quot;: [<br />\n&nbsp;&nbsp;&nbsp; {<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;RequestId&quot;: &quot;01&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;SubstituteItems&quot;: [<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ItemId&quot;: &quot;Item A&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Sequence&quot;:<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ],<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;SubstitutionType&quot;: &quot;Immediate&quot;<br />\n&nbsp;&nbsp;&nbsp; }<br />\n&nbsp; ]<br />\n}</div>\n\n<p>&nbsp;</p>\n\n<p><strong>Example 3 - &quot;OnBackOrder&quot; is ranked higher than the Immediate Rule. </strong></p>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 900px;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Substitution Rule</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Rank</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Substitution Type</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Original Items</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Substituted Item(s)</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Rule condition</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>Rule 1</td>\n\t\t\t<td>2</td>\n\t\t\t<td>Immediate</td>\n\t\t\t<td>Item A-PreOrder</td>\n\t\t\t<td>Item A</td>\n\t\t\t<td>na</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>Rule 2</td>\n\t\t\t<td>1</td>\n\t\t\t<td>OnBackorder</td>\n\t\t\t<td>Item A-PreOrder</td>\n\t\t\t<td>\n\t\t\t<ul>\n\t\t\t\t<li>Item B (sequence 1),</li>\n\t\t\t\t<li>Item C (Sequence 2)</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td>na</td>\n\t\t</tr>\n\t</thead>\n</table>\n\n<p>Substitution Response for Item A-PreOrder: Immediate rule (Rule 1) is given preference over OnBackOrder (Rule 2) even though the rank is lesser.</p>\n\n<div class=\"computer_code\">{<br />\n&nbsp; &quot;SubstitutionResponseDetail&quot;: [<br />\n&nbsp;&nbsp;&nbsp; {<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;RequestId&quot;: &quot;01&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;SubstituteItems&quot;: [<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ItemId&quot;: &quot;Item A&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Sequence&quot;:<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ],<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;SubstitutionType&quot;: &quot;Immediate&quot;<br />\n&nbsp;&nbsp;&nbsp; }<br />\n&nbsp; ]<br />\n}</div>\n\n<p>&nbsp;</p>\n\n<p><strong>Example 4 - OnBackOrder rule with multiple Substituted Item(s)</strong></p>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 900px;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Substitution Rule</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Rank</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Substitution Type</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Original Items</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Substituted Item(s)</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Rule condition</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>Rule 1</td>\n\t\t\t<td>2</td>\n\t\t\t<td>OnBackorder</td>\n\t\t\t<td>Item A-PreOrder</td>\n\t\t\t<td>\n\t\t\t<ul>\n\t\t\t\t<li>Item B (sequence 1),</li>\n\t\t\t\t<li>Item C (Sequence 2)</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td>na</td>\n\t\t</tr>\n\t</thead>\n</table>\n\n<p>Substitution Response for Item A-PreOrder:</p>\n\n<div class=\"computer_code\">{<br />\n&nbsp; &quot;SubstitutionResponseDetail&quot;: [<br />\n&nbsp;&nbsp;&nbsp; {<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;RequestId&quot;: &quot;01&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;SubstituteItems&quot;: [<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ItemId&quot;: &quot;Item B&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Sequence&quot;: &quot;1&quot;<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ItemId&quot;: &quot;Item C&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Sequence&quot;: &quot;2&quot;<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ],<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;SubstitutionType&quot;: &quot;OnBackorder&quot;<br />\n&nbsp;&nbsp;&nbsp; }<br />\n&nbsp; ]<br />\n}</div>\n</div></div></p>\r\n\r\n<h5><a name=\"format-promising-request\" id=\"format-promising-request\"></a>Format Promising Request</h5>\r\n\r\n<ul>\r\n\t<li>If the Substitution Type is &quot;Immediate&quot;, the original Item is replaced with the substituted Item in the promising request.</li>\r\n\t<li>If the Substitution Type is &quot;On Back Order&quot; then the substituted Item is appended to the promising request. Promising tries allocation for the original Item. On back order - Promising tries allocation for the substituted Item(s) based on the &quot;On Back Order&quot; rule.</li>\r\n</ul>\r\n\r\n<h5><a name=\"promising-process\" id=\"promising-process\"></a>Promising Process</h5>\r\n\r\n<ul>\r\n\t<li>As part of promising, an immediate&nbsp;rule (if available) is evaluated for the Original Item. If there are any unfulfilled units for the Substituted Item,&nbsp;then the system evaluates the On Backorder rule for the Substituted Item.\r\n\t<ul>\r\n\t\t<li>If the &ldquo;OnBackorder&quot; rule&nbsp;is available, then the system performs promising for the Substituted Item(s) available as part of OnBackorder rule in the same sequence mentioned in the Substitution rule.</li>\r\n\t\t<li>If the &ldquo;OnBackorder rule&rdquo; is not available or Inventory for Substituted Item is not available&nbsp;as part of On Backorder rule, then the unfulfilled units are back ordered.</li>\r\n\t</ul>\r\n\t</li>\r\n\t<li>\r\n\t<p><a id=\"Substitution Types - Impact on Allocation\" name=\"Substitution Types - Impact on Allocation\"></a> Refer to the below section on the different types of substitution and its impact on Promising</p>\r\n\r\n\t<p><div class=\"toggle_outerdiv\"><p class=\"toggle_div\"><a href=\"#tg-5\" class=\"toggle-content\"><span class=\"toggle-title\">Substitution Types - Impact on Allocation</span></a></p><div id=\"tg-5\"><p>Substitution allows retailers&nbsp;to configure rules when an alternate item can be used to fulfill an order. &nbsp;Substitution rules can be configured to immediately substitute the ordered item with an alternate item or&nbsp;substitute the ordered item only when the original item is out of stock. &nbsp;Additionally, retailers may add a condition which must be satisfied in order for the substitution to be applied. For example, when the order is shipped&nbsp;to Canada or the order line is a rental, then apply substitution. Substitutions are enabled for 1:1 quantity ratios and 1:1 items. There are three types of substitution:</p>\n\n<p><strong>Immediate Substitution - </strong>With immediate substitution, the inventory of the originally ordered item is not considered and the configured items are&nbsp;substituted as long as it has inventory. If the substitute item does not have inventory, backordered item record is created using the originally ordered item. For immediate substitution rules, only a single substitute item may be configured. A sequence of substitute items cannot be configured for immediate substitution rules. This type of substitution is useful when the actual Item ID is different or has changed from the time the original order was placed.</p>\n\n<p><strong>Example</strong></p>\n\n<ul>\n\t<li>Substitution Rule Configuration:</li>\n</ul>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Ordered Item (parent)</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Substitution Type</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Substitute Item(s)</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td>Item A Preorder</td>\n\t\t\t<td>Immediate</td>\n\t\t\t<td>Item A</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<ul>\n\t<li>Inventory Availability:</li>\n</ul>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Item</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Available Inventory</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td>Item A Preorder</td>\n\t\t\t<td>99999</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>Item A</td>\n\t\t\t<td>6</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<ul>\n\t<li>An order is placed for 10 units of Item A preorder. Allocation Result is:</li>\n</ul>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\" style=\"width: 209px; text-align: center;\">Item</th>\n\t\t\t<th scope=\"col\" style=\"width: 134px; text-align: center;\">Quantity</th>\n\t\t\t<th scope=\"col\" style=\"width: 142px; text-align: center;\">Status</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"width: 207px;\">Item A</td>\n\t\t\t<td style=\"width: 131px;\">6</td>\n\t\t\t<td style=\"width: 139px;\">Allocated</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"width: 207px;\">Item A Preorder</td>\n\t\t\t<td style=\"width: 131px;\">4</td>\n\t\t\t<td style=\"width: 139px;\">Backordered</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>&nbsp;</p>\n\n<p><strong>OnBackorder Substitution -&nbsp; </strong>With OnBackorder substitution, the substitute item will only be allocated if the original item is out of stock. If inventory does not exist for either the original item or the substitute item, then a backordered item record is created for the originally ordered item. For On Backorder substitution rules, retailers may configure a sequence of substitute items to replace the ordered item. OnBackorder substitution is useful when retailers have an equivalent item which they would like to continue selling if the original item becomes unavailable.</p>\n\n<p><strong>Example&nbsp;</strong></p>\n\n<ul>\n\t<li>Substitution Rule Configuration:</li>\n</ul>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Ordered Item (parent)</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Substitution Type</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Substitute Item(s)</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td>Item A Used Condition</td>\n\t\t\t<td>OnBackorder</td>\n\t\t\t<td>\n\t\t\t<ul>\n\t\t\t\t<li>1- Item A Like New Condition</li>\n\t\t\t\t<li>2- Item A&nbsp;New Condition</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<ul>\n\t<li>Inventory Availability:</li>\n</ul>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Item</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Available Inventory</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td>Item A Used Condition</td>\n\t\t\t<td>3</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>Item A Like New Condition</td>\n\t\t\t<td>4</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>Item A New Condition</td>\n\t\t\t<td>2</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<ul>\n\t<li>An order is placed for 10 units of Item A Used Condition. Allocation Result is:</li>\n</ul>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\" style=\"width: 348px; text-align: center;\">Item</th>\n\t\t\t<th scope=\"col\" style=\"width: 136px; text-align: center;\">Quantity</th>\n\t\t\t<th scope=\"col\" style=\"width: 142px; text-align: center;\">Status</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"width: 345px;\">Item A Used Condition</td>\n\t\t\t<td style=\"width: 133px;\">3</td>\n\t\t\t<td style=\"width: 139px;\">Allocated</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"width: 345px;\">Item A Like New Condition</td>\n\t\t\t<td style=\"width: 133px;\">4</td>\n\t\t\t<td style=\"width: 139px;\">Allocated</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"width: 345px;\">Item A New Condition</td>\n\t\t\t<td style=\"width: 133px;\">2</td>\n\t\t\t<td style=\"width: 139px;\">Allocated</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"width: 345px;\">Item A Used Condition</td>\n\t\t\t<td style=\"width: 133px;\">1</td>\n\t\t\t<td style=\"width: 139px;\">Backordered</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>&nbsp;</p>\n\n<p><strong>Conditional Substitution -&nbsp; </strong>Conditions may be added to substitution rules to perform substitution only when certain conditions are met. If there are multiple substitution rules for a single item, then each rule is evaluated in the order of rank. Each condition is evaluated before moving to the next substitution rule and if a condition is met, then that substitution rule is used for promising. This type of substitution is useful when retailers need to control when substitution happens or does not happen based on attributes from the order or promising request.</p>\n\n<p><strong>Example</strong></p>\n\n<ul>\n\t<li>Substitution Rule Configuration:</li>\n</ul>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 700px;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\" style=\"width: 137px; text-align: center;\">Ordered Item (parent)</th>\n\t\t\t<th scope=\"col\" style=\"width: 53px; text-align: center;\">Rank</th>\n\t\t\t<th scope=\"col\" style=\"width: 115px; text-align: center;\">Substitution Type</th>\n\t\t\t<th scope=\"col\" style=\"width: 149px; text-align: center;\">Condition</th>\n\t\t\t<th scope=\"col\" style=\"width: 177px; text-align: center;\">Substitute Item(s)</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"width: 134px;\">Item A</td>\n\t\t\t<td style=\"width: 50px;\">1</td>\n\t\t\t<td style=\"width: 112px;\">Immediate</td>\n\t\t\t<td style=\"width: 146px;\">Destination Country = US</td>\n\t\t\t<td style=\"width: 174px;\">\n\t\t\t<p>Item A - US version</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"width: 134px;\">Item A</td>\n\t\t\t<td style=\"width: 50px;\">2</td>\n\t\t\t<td style=\"width: 112px;\">Immediate</td>\n\t\t\t<td style=\"width: 146px;\">Destination Country = CA</td>\n\t\t\t<td style=\"width: 174px;\">Item A - Canada version</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<ul>\n\t<li>Inventory Availability:</li>\n</ul>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Item</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Available Inventory</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td>Item A</td>\n\t\t\t<td>100</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>Item A&nbsp; - US version</td>\n\t\t\t<td>6</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>Item A - Canada version</td>\n\t\t\t<td>4</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<ul>\n\t<li>An order is placed for 10 units of Item A. Destination Country is US. Allocation Result is:</li>\n</ul>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\" style=\"width: 348px; text-align: center;\">Item</th>\n\t\t\t<th scope=\"col\" style=\"width: 136px; text-align: center;\">Quantity</th>\n\t\t\t<th scope=\"col\" style=\"width: 142px; text-align: center;\">Status</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"width: 345px;\">Item A - US version</td>\n\t\t\t<td style=\"width: 133px;\">6</td>\n\t\t\t<td style=\"width: 139px;\">Allocated</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"width: 345px;\">Item A&nbsp;</td>\n\t\t\t<td style=\"width: 133px;\">4</td>\n\t\t\t<td style=\"width: 139px;\">Backordered</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<ul>\n\t<li>An order is placed for 10 units of Item A. Destination Country is UK. Allocation Result is:</li>\n</ul>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\" style=\"width: 348px; text-align: center;\">Item</th>\n\t\t\t<th scope=\"col\" style=\"width: 136px; text-align: center;\">Quantity</th>\n\t\t\t<th scope=\"col\" style=\"width: 142px; text-align: center;\">Status</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"width: 345px;\">Item A&nbsp;</td>\n\t\t\t<td style=\"width: 133px;\">10</td>\n\t\t\t<td style=\"width: 139px;\">Allocated</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>&nbsp;</p>\n\n<p><strong>Immediate and OnBackorder substitution together - </strong>Substitution rules may be combined together only in one scenario. A single Immediate substitution rule may be combined with a single OnBackorder&nbsp;substitution rule for the same item to fulfill the originally ordered item only if the immediate substitute item is unavailable. This is most useful for seasonal products for which retailers are trying to exhaust inventory for a particular seasonal item before resuming sale of the standard item.</p>\n\n<p><strong>Example</strong></p>\n\n<ul>\n\t<li>Substitution Rule Configuration:</li>\n</ul>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Ordered Item (parent)</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Substitution Type</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Substitute Item(s)</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td>Coca Cola</td>\n\t\t\t<td>Immediate</td>\n\t\t\t<td>Coca Cola Christmas</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>Coca Cola Christmas</td>\n\t\t\t<td>On Backorder</td>\n\t\t\t<td>Coca Cola</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<ul>\n\t<li>Inventory Availability:</li>\n</ul>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Item</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Available Inventory</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td>Coca Cola</td>\n\t\t\t<td>100</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>Coca Cola Christmas</td>\n\t\t\t<td>2</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<ul>\n\t<li>An order is placed for 10 units of Coca Cola. Allocation Result is:</li>\n</ul>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 500px;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\" style=\"width: 348px; text-align: center;\">Item</th>\n\t\t\t<th scope=\"col\" style=\"width: 136px; text-align: center;\">Allocated Quantity</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"width: 345px;\">Coca Cola Christmas</td>\n\t\t\t<td style=\"width: 133px;\">2</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"width: 345px;\">Coca Cola</td>\n\t\t\t<td style=\"width: 133px;\">8</td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div></div></p>\r\n\t</li>\r\n\t<li>When the &quot;Force Allocate&quot; attribute is enabled, items&nbsp;are allocated based on the type of substitution\r\n\t<ul>\r\n\t\t<li>If Substitution&nbsp;Type is Immediate, then the Substituted Item is allocated</li>\r\n\t\t<li>If Substitution&nbsp;Type is OnBackOrder, then Original Item is allocated</li>\r\n\t</ul>\r\n\t</li>\r\n\t<li>If a substituted item has been &quot;pre-reserved&quot; against an Original item, post which there is a change to the substitution rule, when the Order (which has pre-reservation) is placed, then reservation does not happen against the pre-reserved item. The substitution rule gets re-evaluated and allocation is processed against the new substitution rule.&nbsp;</li>\r\n</ul>\r\n\r\n<h5><a name=\"allocation-and-release\" id=\"allocation-and-release\"></a>Allocation and Release</h5>\r\n\r\n<ul>\r\n\t<li>If an order line is allocated against substitution item(s) then the Original and Substituted Item(s) are persisted and sent in the Release outbound to the Fulfillment system.</li>\r\n\t<li>If all unit(s) are not allocated post evaluating substitution rules, then the Original Item is persisted in the Back Order Line Item. Upon inventory rise for the Original or the Substituted Item(s), these units are tried for promising again.</li>\r\n</ul>\r\n\r\n<h5><a name=\"order-selling-substitution\" id=\"order-selling-substitution\"></a>Order Selling - Substitution</h5>\r\n\r\n<ul>\r\n\t<li>Price, Tax and Invoice are based on the Original Item. The substituted Item has no impact on the dollar value.</li>\r\n\t<li>Return of substituted items is not supported. When a substituted item is returned&nbsp;at the time of item verification, it gets flagged that the returned item is different from the ordered item. A workaround is to cancel the return with variance and create a new return order with &quot;Receipt Expected&quot; as &quot;No&quot; so that the invoice gets settled.&nbsp;</li>\r\n</ul>\r\n\r\n<h5><a name=\"outbound-s-publish-substitution-details\" id=\"outbound-s-publish-substitution-details\"></a>Outbound(s) - Publish Substitution Details</h5>\r\n\r\n<p>Substitution Information (Substitution Type, Substitution Item) is sent in the following Outbounds</p>\r\n\r\n<ul>\r\n\t<li>Release Outbound</li>\r\n\t<li>Sales Posting</li>\r\n\t<li>Get Order</li>\r\n\t<li>Publish Order/Order Line.</li>\r\n</ul>\r\n\r\n<div class=\"confluence-information-macro confluence-information-macro-note conf-macro output-block\" data-hasbody=\"true\" data-macro-id=\"67e689cb-f121-4df5-98fc-623c26c5410f\" data-macro-name=\"note\">\r\n<div class=\"confluence-information-macro-body\">\r\n<div class=\"tip\"><strong>Note</strong>: The Item attributes sent in the outbound are pertaining to the Original Ordered Item and not the Substituted Item. In case, the item attributes are required for the substituted Item then a separate custom call should be done.</div>\r\n</div>\r\n</div>\r\n\r\n<h5><a name=\"inventory-outbound-s-publish-substitution-details\" id=\"inventory-outbound-s-publish-substitution-details\"></a><a id=\"Inventory Outbounds - Substitution Details\" name=\"Inventory Outbounds - Substitution Details\"></a>Inventory Outbound(s) - Publish Substitution Details</h5>\r\n\r\n<p>When the &ldquo;Include Substitutions&rdquo; is enabled in the ATC view, the substitution details are included as part of the availability picture for the parent item. Refer to <a hqid=\"2588668\" href=\"/publish-availability$Publish Availability - Substitution\">Publish Availability with Substitution</a> for more details. Following details are included as part of Substitution details (sample below).</p>\r\n\r\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" height=\"225\" width=\"1005\">\r\n\t<thead>\r\n\t\t<tr>\r\n\t\t\t<th scope=\"col\" style=\"text-align: center; width: 174px;\">Attributes</th>\r\n\t\t\t<th scope=\"col\" style=\"text-align: center; width: 803px;\">Details</th>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<td style=\"width: 172px;\"><span style=\"height:59.1pt\"><span lang=\"EN-US\">TotalIncludingSubstituteItem</span></span></td>\r\n\t\t\t<td style=\"width: 801px;\">\r\n\t\t\t<ul>\r\n\t\t\t\t<li style=\"text-align: justify; padding: 3.6pt 7.2pt;\"><span style=\"height:59.1pt\"><span lang=\"EN-US\">Immediate Substitution:&nbsp;Available&nbsp;quantity of the substituted Item. The original item quantity is not included as it is immediately substituted.&nbsp;</span></span></li>\r\n\t\t\t</ul>\r\n\r\n\t\t\t<p style=\"text-align: justify; padding: 3.6pt 7.2pt;\">&nbsp;<strong>Note</strong>:&nbsp;This does not include original item quantity</p>\r\n\r\n\t\t\t<ul>\r\n\t\t\t\t<li style=\"text-align: justify; padding: 3.6pt 7.2pt;\"><span style=\"height:59.1pt\"><span lang=\"EN-US\">On Back Order Substitution: Sum of the Original and all substituted Item(s) available quantity. </span></span>SUM(&quot;Original Item Available Quantity&quot; + &quot;All Substitute Item Available Quantity&quot;).</li>\r\n\t\t\t</ul>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<td style=\"width: 172px;\"><span style=\"height:32.3pt\"><span lang=\"EN-US\">SubstituteItemsAvailable</span></span></td>\r\n\t\t\t<td style=\"width: 801px;\"><span style=\"height:32.3pt\"><span lang=\"EN-US\" style=\"color:black\">This is set to true if there are any Substitution Item(s) available as part of the availability calls. Otherwise, it is set to false.</span></span></td>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<td style=\"width: 172px;\"><span style=\"height:26.55pt\"><span lang=\"EN-US\" style=\"color:black\">SubstitutionDetails</span></span></td>\r\n\t\t\t<td style=\"width: 801px;\"><span style=\"height:26.55pt\"><span lang=\"EN-US\" style=\"color:black\">Contains the Substitution Item and its availability details (Status and Quantity)</span></span></td>\r\n\t\t</tr>\r\n\t</thead>\r\n</table>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><div class=\"toggle_outerdiv\"><p class=\"toggle_div\"><a href=\"#tg-6\" class=\"toggle-content\"><span class=\"toggle-title\">Availability with Substitution details</span></a></p><div id=\"tg-6\"><div class=\"computer_code\"><code class=\"java string\">&quot;TotalIncludingSubstituteItems&quot;</code><code class=\"java plain\">:</code><code class=\"java value\">10</code><code class=\"java plain\">,</code>\n<div class=\"line number18 index17 alt1\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"java string\">&quot;SubstituteItemsAvailable&quot;</code><code class=\"java plain\">:</code><code class=\"java keyword\">true</code></div>\n\n<div class=\"line number19 index18 alt2\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"java string\">&quot;SubstitutionDetails&quot;</code><code class=\"java plain\">:{</code></div>\n\n<div class=\"line number20 index19 alt1\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java string\">&quot;TotalQuantityOfSubstituteItems&quot;</code><code class=\"java plain\">:</code><code class=\"java value\">10</code><code class=\"java plain\">,</code></div>\n\n<div class=\"line number21 index20 alt2\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java string\">&quot;SubstituteItems&quot;</code><code class=\"java plain\">:[</code></div>\n\n<div class=\"line number22 index21 alt1\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java plain\">{</code></div>\n\n<div class=\"line number23 index22 alt2\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java string\">&quot;ItemId&quot;</code><code class=\"java plain\">:</code><code class=\"java string\">&quot;ItemB&quot;</code><code class=\"java plain\">,</code></div>\n\n<div class=\"line number24 index23 alt1\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java string\">&quot;Status&quot;</code><code class=\"java plain\">:</code><code class=\"java string\">&quot;AVAILABLE&quot;</code><code class=\"java plain\">,</code></div>\n\n<div class=\"line number25 index24 alt2\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java string\">&quot;StatusCode&quot;</code><code class=\"java plain\">:</code><code class=\"java value\">2</code><code class=\"java plain\">,</code></div>\n\n<div class=\"line number26 index25 alt1\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java string\">&quot;NextAvailabilityDate&quot;</code><code class=\"java plain\">:</code><code class=\"java keyword\">null</code><code class=\"java plain\">,</code></div>\n\n<div class=\"line number27 index26 alt2\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java string\">&quot;Quantity&quot;</code><code class=\"java plain\">:{</code></div>\n\n<div class=\"line number28 index27 alt1\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java string\">&quot;DistributionCenters&quot;</code><code class=\"java plain\">:</code><code class=\"java value\">6</code><code class=\"java plain\">,</code></div>\n\n<div class=\"line number29 index28 alt2\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java string\">&quot;Stores&quot;</code><code class=\"java plain\">:</code><code class=\"java value\">4</code></div>\n\n<div class=\"line number30 index29 alt1\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java plain\">},</code></div>\n\n<div class=\"line number31 index30 alt2\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java string\">&quot;TotalQuantity&quot;</code><code class=\"java plain\">:</code><code class=\"java value\">10</code><code class=\"java plain\">,</code></div>\n\n<div class=\"line number32 index31 alt1\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java string\">&quot;SubstitutionType&quot;</code><code class=\"java plain\">:</code><code class=\"java string\">&quot;OnBackorder&quot;</code></div>\n\n<div class=\"line number33 index32 alt2\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java plain\">}</code></div>\n\n<div class=\"line number34 index33 alt1\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java plain\">]</code></div>\n\n<div class=\"line number35 index34 alt2\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"java plain\">}</code></div>\n\n<div class=\"line number36 index35 alt1\"><code class=\"java plain\">}</code></div>\n</div>\n</div></div></p>\r\n\r\n<ul>\r\n</ul>\r\n\r\n<h5><a name=\"what-is-not-supported-with-substitution\" id=\"what-is-not-supported-with-substitution\"></a>What is not supported with substitution?</h5>\r\n\r\n<ul>\r\n\t<li>Lines with Delivery Method = &quot;Email&quot; can not use substitution as promising does not occur for these lines</li>\r\n\t<li>Substitution is not supported for Reapportionment</li>\r\n\t<li>Substitutions for quantity ratios greater than 1:1 and kit substitutions (i.e. Item A is substituted with Item B + C + D) are not supported&nbsp;</li>\r\n\t<li>Chaining in substitution is not supported (i.e if there is A&rarr;B Immediate&nbsp; and B&rarr;C Immediate, if the order is for Item A and there is no inventory for Item B,&nbsp;then the order will not get allocated with Item C)</li>\r\n\t<li>Complete Single Source is not supported&nbsp;when substitution is used within a fulfillment optimization strategy when Order Lines are grouped with same fulfillment group Id.</li>\r\n\t<li>The ATC UI will not show the availability picture of the substitute item(s), when the availability for the original (ordered) item is searched.</li>\r\n</ul>\r\n\r\n<h3><a name=\"how-to-39-s\" id=\"how-to-39-s\"></a>How To&#39;s?</h3>\r\n\r\n<h4><a name=\"how-to-set-up-substitution-rule\" id=\"how-to-set-up-substitution-rule\"></a><a id=\"How to set up Substitution rule\" name=\"How to set up Substitution rule\"></a>How to Set up Substitution Rule</h4>\r\n\r\n<p>Refer to the below section on how to set up substitution rule for different substitution types</p>\r\n\r\n<p><div class=\"toggle_outerdiv\"><p class=\"toggle_div\"><a href=\"#tg-7\" class=\"toggle-content\"><span class=\"toggle-title\">How to set up Substitution rules</span></a></p><div id=\"tg-7\"><p>Substitution rules must be added to map the original item to the appropriate substitute item(s). Substitution rules may be added manually on the <a href=\"https://omni.helpdocsonline.com/order-promising-configuration$substitution\">Substitution Rules UI </a>or may be imported via the API. Within a substitution rule, the following can be defined.</p>\n\n<ul>\n\t<li>Original Item</li>\n\t<li>Substituted Item(s) and its sequence</li>\n\t<li>Substitution Type (Immediate, On Back Order, supersession)</li>\n\t<li>Rank</li>\n\t<li>Effective and Expiry&nbsp;date range</li>\n\t<li>Rule Condition (Optional) **</li>\n</ul>\n\n<p class=\"info\">Note: For immediate substitution rules, only one item may be configured. For On Backorder substitution rules, many substitute items may be configured in sequence (sequence must be unique). Substitution ratios greater than 1:1 and substituting multiple different items for a single item are not supported.</p>\n\n<p>** Optionally, retailers may configure a condition using the Substitution Rule Conditions UI. A single condition may be re-used multiple times for many substitution rules. For example, if a retailer would like to set up conditional rules to substitute items whenever the destination country is Canada, a single substitution condition may be added for &quot;Destination Country = Canada&quot; and all of the applicable substitution rules may reference this same condition. If the condition is edited at a later time, there is no need to modify the substitution rules themselves since they all use the same condition.&nbsp;</p>\n\n<div class=\"tip\"><strong>Note</strong>: Substitution conditions may not be renamed once they are created (they must be deleted and re-created if a name change is required). However, the condition itself is editable.</div>\n\n<div class=\"tip\"><strong>Note</strong>:&nbsp;For Supersession Substitution, you can configure up to 10 items under the substitute items and the sequence of these supersession items does not matter.&nbsp;The limit of 10 substitute items also applies to the Substitution Type &ldquo;OnBackorder.</div>\n\n<p><strong>Sample Substitution Rule Set up</strong></p>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 900px;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\" style=\"text-align: center; width: 172px;\">Set up</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center; width: 292px;\">API</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center; width: 395px;\">Sample</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"width: 169px;\">Substitution Rule Condition</td>\n\t\t\t<td style=\"width: 290px;\">\n\t\t\t<p>&nbsp;{{url}}/item/api/item/substitutionRuleCondition/save</p>\n\t\t\t</td>\n\t\t\t<td style=\"width: 393px;\">\n\t\t\t<div class=\"tip\">Attributes exposed in the Substitution Request and Destination State and Country can be added as part of rule condition (refer to sample attributes below)</div>\n\n\t\t\t<div class=\"computer_code\">{<br />\n\t\t\t&nbsp; &quot;RuleConditionId&quot;: &quot;SubstitutionAllRuleConditions&quot;,<br />\n\t\t\t&nbsp; &quot;RuleCondition&quot;: &quot;substitutionRequestDetail.isConfirmed = true or substitutionRequestDetail.isForceAllocate = true or substitutionRequestDetail.address.country = \\&quot;US\\&quot; or substitutionRequestDetail.address.state = \\&quot;Georgia\\&quot; or substitutionRequestDetail.batchNumber = \\&quot;101\\&quot; or substitutionRequestDetail.carrierCode = \\&quot;FDXG\\&quot; or substitutionRequestDetail.consolidationLocationId = \\&quot;ecomorg:AtlantaDC\\&quot; or substitutionRequestDetail.countryOfOrigin = \\&quot;IE\\&quot; or substitutionRequestDetail.deliveryMethodId = \\&quot;PickUpAtStore\\&quot; or substitutionRequestDetail.inventoryAttribute1 = \\&quot;1\\&quot; or substitutionRequestDetail.inventoryAttribute2 = \\&quot;2\\&quot; or substitutionRequestDetail.inventoryAttribute3 = \\&quot;3\\&quot; or substitutionRequestDetail.inventoryAttribute4 = \\&quot;4\\&quot; or substitutionRequestDetail.inventoryAttribute5 = \\&quot;5\\&quot; or substitutionRequestDetail.inventorySegmentId in [\\&quot;ECommerce\\&quot;,\\&quot;Retail\\&quot;] or substitutionRequestDetail.inventoryTypeId = \\&quot;Received\\&quot; or substitutionRequestDetail.productStatusId = \\&quot;Confirmed\\&quot; or substitutionRequestDetail.serviceLevelCode = \\&quot;FEDEX_2_DAY\\&quot; or substitutionRequestDetail.shipFromLocationId = \\&quot;ecomorg:AtlantaDC\\&quot; or substitutionRequestDetail.shippingMethodId = \\&quot;Same_Day\\&quot; or substitutionRequestDetail.shipToLocationId = \\&quot;ecomorg:NewYorkDC\\&quot;&quot;<br />\n\t\t\t}</div>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"width: 169px;\">Substitution Rule - Immediate</td>\n\t\t\t<td style=\"width: 290px;\">{{url}}/item/api/item/substitutionRule/save</td>\n\t\t\t<td style=\"width: 393px;\">\n\t\t\t<div class=\"computer_code\">{<br />\n\t\t\t&nbsp; &quot;ItemId&quot;: &quot;TheTwoTowers&quot;,<br />\n\t\t\t&nbsp; &quot;RuleId&quot;: &quot;Substitute-Immediate-TheTwoTowers&quot;,<br />\n\t\t\t&nbsp; &quot;SubstitutionType&quot;: {<br />\n\t\t\t&nbsp; &nbsp; &quot;SubstitutionTypeId&quot;: &quot;Immediate&quot;<br />\n\t\t\t&nbsp; },<br />\n\t\t\t&nbsp; &quot;Rank&quot;: 2,<br />\n\t\t\t&nbsp; &quot;ExpiryDate&quot;: &quot;2019-10-31T20:49:00.204&quot;,<br />\n\t\t\t&nbsp; &quot;EffectiveDate&quot;: &quot;2018-10-05T20:49:00.204&quot;,<br />\n\t\t\t&nbsp; &quot;SubstituteItems&quot;: [<br />\n\t\t\t&nbsp; &nbsp; {<br />\n\t\t\t&nbsp; &nbsp; &nbsp; &quot;ItemId&quot;: &quot;TheTwoTowers-21-b&quot;,<br />\n\t\t\t&nbsp; &nbsp; &nbsp; &quot;Sequence&quot;: 1<br />\n\t\t\t&nbsp; &nbsp; }<br />\n\t\t\t&nbsp; ]<br />\n\t\t\t}</div>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"width: 169px;\">Substitution Rule - On Back Order</td>\n\t\t\t<td style=\"width: 290px;\">{{url}}/item/api/item/substitutionRule/save</td>\n\t\t\t<td style=\"width: 393px;\">\n\t\t\t<div class=\"computer_code\">{<br />\n\t\t\t&nbsp; &quot;ItemId&quot;: &quot;ItemC&quot;,<br />\n\t\t\t&nbsp; &quot;RuleId&quot;: &quot;Substitute-OnBackorder-ItemC&quot;,<br />\n\t\t\t&nbsp; &quot;SubstitutionType&quot;: {<br />\n\t\t\t&nbsp; &nbsp; &quot;SubstitutionTypeId&quot;: &quot;OnBackorder&quot;<br />\n\t\t\t&nbsp; },<br />\n\t\t\t&nbsp; &quot;Rank&quot;: 1,<br />\n\t\t\t&nbsp; &quot;ExpiryDate&quot;: &quot;2019-10-06T20:49:00.204&quot;,<br />\n\t\t\t&nbsp; &quot;EffectiveDate&quot;: &quot;2018-10-05T20:49:00.204&quot;,<br />\n\t\t\t&nbsp; &quot;SubstituteItems&quot;: [<br />\n\t\t\t&nbsp; &nbsp; {<br />\n\t\t\t&nbsp; &nbsp; &nbsp; &quot;ItemId&quot;: &quot;ItemD&quot;,<br />\n\t\t\t&nbsp; &nbsp; &nbsp; &quot;Sequence&quot;: 1<br />\n\t\t\t&nbsp; &nbsp; }<br />\n\t\t\t&nbsp; ]<br />\n\t\t\t}</div>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"width: 169px;\">Substitution Rule - On Back Order (with multiple Items)</td>\n\t\t\t<td style=\"width: 290px;\">{{url}}/item/api/item/substitutionRule/save</td>\n\t\t\t<td style=\"width: 393px;\">\n\t\t\t<div class=\"computer_code\">{<br />\n\t\t\t&nbsp; &quot;ItemId&quot;: &quot;ItemD&quot;,<br />\n\t\t\t&nbsp; &quot;RuleId&quot;: &quot;Substitute-OnBackorder-ItemD &quot;,<br />\n\t\t\t&nbsp; &quot;SubstitutionType&quot;: {<br />\n\t\t\t&nbsp; &nbsp; &quot;SubstitutionTypeId&quot;: &quot;OnBackorder&quot;<br />\n\t\t\t&nbsp; },<br />\n\t\t\t&nbsp; &quot;ExpiryDate&quot;: &quot;2019-10-06T20:49:00.204&quot;,<br />\n\t\t\t&nbsp; &quot;EffectiveDate&quot;: &quot;2018-10-05T20:49:00.204&quot;,<br />\n\t\t\t&nbsp; &quot;Rank&quot;: 1,<br />\n\t\t\t&nbsp; &quot;SubstituteItems&quot;: [<br />\n\t\t\t&nbsp; &nbsp; {<br />\n\t\t\t&nbsp; &nbsp; &nbsp; &quot;ItemId&quot;: &quot;ItemE&quot;,<br />\n\t\t\t&nbsp; &nbsp; &nbsp; &quot;Sequence&quot;: 1<br />\n\t\t\t&nbsp; &nbsp; },<br />\n\t\t\t&nbsp; &nbsp; {<br />\n\t\t\t&nbsp; &nbsp; &nbsp; &quot;ItemId&quot;: &quot;ItemF&quot;,<br />\n\t\t\t&nbsp; &nbsp; &nbsp; &quot;Sequence&quot;: 2<br />\n\t\t\t&nbsp; &nbsp; },<br />\n\t\t\t&nbsp; &nbsp; {<br />\n\t\t\t&nbsp; &nbsp; &nbsp; &quot;ItemId&quot;: &quot;ItemG&quot;,<br />\n\t\t\t&nbsp; &nbsp; &nbsp; &quot;Sequence&quot;: 3<br />\n\t\t\t&nbsp; &nbsp; }<br />\n\t\t\t&nbsp; ]<br />\n\t\t\t}</div>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"width: 169px;\">Substitution Rule - With Rule Condition</td>\n\t\t\t<td style=\"width: 290px;\">{{url}}/item/api/item/substitutionRule/save</td>\n\t\t\t<td style=\"width: 393px;\">\n\t\t\t<div class=\"computer_code\">{<br />\n\t\t\t&nbsp; &quot;Description&quot;: &quot;ItemRulewithCondition&quot;,<br />\n\t\t\t&nbsp; &quot;EffectiveDate&quot;: &quot;2017-08-09T00:00:00&quot;,<br />\n\t\t\t&nbsp; &quot;ExpiryDate&quot;: &quot;2019-08-09T00:00:00&quot;,<br />\n\t\t\t&nbsp; &quot;ItemId&quot;: &quot;HarryPorter-New&quot;,<br />\n\t\t\t&nbsp; &quot;Rank&quot;: 1,<br />\n\t\t\t&nbsp; &quot;RuleId&quot;: &quot;RuleWithCondition&quot;,<br />\n\t\t\t&nbsp; &quot;RuleName&quot;: &quot;RuleWithCondition&quot;,<br />\n\t\t\t&nbsp; &quot;SubstituteItems&quot;: [<br />\n\t\t\t&nbsp; &nbsp; {<br />\n\t\t\t&nbsp; &nbsp; &nbsp; &quot;ItemId&quot;: &quot;HarryPorter-Old&quot;,<br />\n\t\t\t&nbsp; &nbsp; &nbsp; &quot;Sequence&quot;: 1<br />\n\t\t\t&nbsp; &nbsp; }<br />\n\t\t\t&nbsp; ],<br />\n\t\t\t&nbsp; &quot;SubstitutionType&quot;: {<br />\n\t\t\t&nbsp; &nbsp; &quot;SubstitutionTypeId&quot;: &quot;Immediate&quot;<br />\n\t\t\t&nbsp; },<br />\n\t\t\t&nbsp; &quot;SubstitutionRuleCondition&quot;: {<br />\n\t\t\t&nbsp; &nbsp; &quot;RuleConditionId&quot;: &quot;RuleWithConditionCountryisUS&quot;,<br />\n\t\t\t&nbsp; &nbsp; &quot;RuleCondition&quot;: &quot;substitutionRequestDetail.isConfirmed = true or substitutionRequestDetail.isForceAllocate = true or substitutionRequestDetail.address.country = \\&quot;US\\&quot;&quot;<br />\n\t\t\t&nbsp; }<br />\n\t\t\t}</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>&nbsp;</p>\n\n<div class=\"tip\"><strong>Note</strong>:&nbsp;SubstitutionRuleCondition does not support order types.</div>\n</div></div></p>\r\n\r\n<h3><a name=\"implementation-flavors\" id=\"implementation-flavors\"></a>Implementation Flavors</h3>\r\n\r\n<h4><a name=\"how-to-invoke-custom-substitution-rules-from-external-system\" id=\"how-to-invoke-custom-substitution-rules-from-external-system\"></a>How to Invoke Custom Substitution Rules from External System</h4>\r\n\r\n<p>User Exit &quot;Promising::Substitution::UserExit::GetSubstituteItems&quot; is exposed to customize the logic of substitution. Sometimes a&nbsp;retailer might set-up substitution rules outside the OMS. In such a case, this user exist can be invoked, which would fetch the substitute items from the externally set-up substitution rules&nbsp;and proceed for allocation</p>\r\n\r\n<h4><a name=\"how-to-add-extended-attributes-to-the-rule-condition\" id=\"how-to-add-extended-attributes-to-the-rule-condition\"></a><a id=\"How to add Extended attributes to the Rule condition\" name=\"How to add Extended attributes to the Rule condition\"></a>How to Add Extended Attributes to the Rule Condition</h4>\r\n\r\n<p>Currently, substitution rule condition takes the attributes defined in the Substitution request. However, the extended attributes can be added to the Substitution rule condition by following the below steps</p>\r\n\r\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width:800px;\">\r\n\t<thead>\r\n\t\t<tr>\r\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Steps</th>\r\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Details</th>\r\n\t\t</tr>\r\n\t</thead>\r\n\t<tbody>\r\n\t\t<tr>\r\n\t\t\t<td>Add entry to Available Entity</td>\r\n\t\t\t<td>{{url}}/inventory/api/rules/availableEntity/save</td>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<td>Add entry to Available Attributes Entity</td>\r\n\t\t\t<td>{{url}}/inventory/api/rules/availableAttribute/save</td>\r\n\t\t</tr>\r\n\t</tbody>\r\n</table>\r\n\r\n<h4>&nbsp;</h4>\r\n\r\n<h4><a name=\"how-to-set-up-seasonal-substitution\" id=\"how-to-set-up-seasonal-substitution\"></a>How to Set up Seasonal Substitution</h4>\r\n\r\n<p><strong>Use case: </strong>Business substitutes Coke can with Coke Christmas during Christmas sale. But in case the Inventory is not available for Coke Christmas cans, then business would want to ship the original coke cans.</p>\r\n\r\n<p><strong>Business Flow:</strong></p>\r\n\r\n<ul>\r\n\t<li>As part of Promising, Immediate rule (if available) is evaluated for the Original Item. If any unfulfilled units exist for the Substituted Item then system evaluates OnBackorder rule for the Substituted Item.</li>\r\n\t<li>If &ldquo;On Backorder rule&rdquo; is available then system performs promising for the Substituted Item(s) available as part of On Backorder rule.</li>\r\n\t<li>If &ldquo;On Backorder rule&rdquo; is not available or Inventory for Substituted Item&nbsp;is not available&nbsp;as part of On Backorder rule&nbsp;then unfulfilled units are back ordered.</li>\r\n</ul>\r\n\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img height=\"219\" src=\"https://dzf8vqv24eqhg.cloudfront.net/userfiles/4665/7671/ckfinder/images/image(524).png?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9kemY4dnF2MjRlcWhnLmNsb3VkZnJvbnQubmV0L3VzZXJmaWxlcy80NjY1Lzc2NzEvY2tmaW5kZXIvaW1hZ2VzL2ltYWdlKDUyNCkucG5nIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzU0NzUxNjY0fX19XX0_&Signature=Hc0auHICIH4NGOFDL7OcDTdgklHFUHoY~dc4C90CWf1eWVuUKdPBJ4yX9xnpGJ1wYKZjHPM34bgtZnHHartb7jQpWvLy6FL9uAQv4wRPfs4XjtSW0a2KxgIXP7E2PZBgKsDuWBCXarjWxzxfgjzWR29kkBdbSezq-e0P4Swng1hqITgnkPIf1KHr~JbSFXle6LvHCZKgTc7cpEkonqCBxAk99Q3bCFWzCHSHXgpfIGawdjHuY~tt3y5MNNMWfPPyTN~4~aEKfQCf5pQLyVkFo0mr6JGxRX715CuMiMoPz~yIVyi2QI8Ohk5lw1L2vL2dnHmzhkczBskL6nd0uj0RMA__&Key-Pair-Id=K2TK3EG287XSFC\" width=\"328\" /></p>\r\n\r\n<p>Refer to the below section on how to achieve this</p>\r\n\r\n<p><div class=\"toggle_outerdiv\"><p class=\"toggle_div\"><a href=\"#tg-8\" class=\"toggle-content\"><span class=\"toggle-title\">Substitution - Example</span></a></p><div id=\"tg-8\"><ul>\n\t<li><strong>Substitution Rule</strong></li>\n</ul>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 900px;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Substitution Rule</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Rank</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Substitution Type</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Original Items</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Substituted Item(s)</th>\n\t\t\t<th scope=\"col\" style=\"text-align: center;\">Rule condition</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>Rule 1</td>\n\t\t\t<td>1</td>\n\t\t\t<td>Immediate</td>\n\t\t\t<td>Coke</td>\n\t\t\t<td>Coke Christmas</td>\n\t\t\t<td>na</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>Rule 2</td>\n\t\t\t<td>2</td>\n\t\t\t<td>OnBackorder</td>\n\t\t\t<td>Coke Christmas</td>\n\t\t\t<td>Code</td>\n\t\t\t<td>na</td>\n\t\t</tr>\n\t</thead>\n</table>\n\n<ul>\n\t<li><strong>Availability Picture</strong></li>\n</ul>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width: 600px;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th scope=\"col\">Item</th>\n\t\t\t<th scope=\"col\">Location</th>\n\t\t\t<th scope=\"col\">Available Quantity</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td>Coke</td>\n\t\t\t<td>DC 1</td>\n\t\t\t<td>100</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>Coke Christmas</td>\n\t\t\t<td>DC 1</td>\n\t\t\t<td>100</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<ul>\n\t<li>Order is placed for 150 units (Item - Coke)</li>\n\t<li><strong>Allocation Results:</strong>\n\t<ul>\n\t\t<li>Since there is an immediate substitution, Coke is replaced with Coke Christmas. Available quantity is 100 for Coke Christmas. So Allocated quantity is 100 (DC 1) for Item - &quot;Coke Christmas&quot;.</li>\n\t\t<li>There is an unfulfilled quantity of 50 units. Since there is an On Back Order rule for Coke Christmas, It is evaluated and the remaining 50 units are fulfilled from DC1 for Item - &quot;Coke&quot;.&nbsp;</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p>&nbsp;</p>\n\n<p>Substitution Response for Item A-PreOrder: Rule 1 is given preference as it is Immediate substitution type with better rank.</p>\n\n<div class=\"computer_code\">{<br />\n&nbsp; &quot;SubstitutionResponseDetail&quot;: [<br />\n&nbsp;&nbsp;&nbsp; {<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;RequestId&quot;: &quot;01&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;SubstituteItems&quot;: [<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ItemId&quot;: &quot;Item B&quot;,<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Sequence&quot;:<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ],<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;SubstitutionType&quot;: &quot;Immediate&quot;<br />\n&nbsp;&nbsp;&nbsp; }<br />\n&nbsp; ]<br />\n}</div>\n</div></div></p>\r\n\r\n<h3><a name=\"related-article-s\" id=\"related-article-s\"></a>Related Article(s)</h3>\r\n\r\n<div class=\"info\"><ul class=\"related-articles\"><li><a href=\"/promising-rest-apis-and-user-exits\" hqid=\"2684158\">REST APIs and User Exits</a></li><li><a href=\"/forceallocate\" hqid=\"2641921\">Force Allocate</a></li><li><a href=\"/how-optimization-works-2\" hqid=\"2646833\">How Optimization Works</a></li><li><a href=\"/advance-shipping-restrictions\" hqid=\"3529483\">Advanced Shipping Restrictions</a></li><li><a href=\"/howpromisingworks\" hqid=\"2641920\">How Promising Works</a></li><li><a href=\"/procure-to-sell\" hqid=\"3629659\">Procure To Sell</a></li><li><a href=\"/promising-overview\" hqid=\"2641919\">Overview</a></li><li><a href=\"/forecast-reservation\" hqid=\"3575064\">Forecast Reservation</a></li><li><a href=\"/customer_engagement_configurations\" hqid=\"2429187\">Customer Engagement Configurations</a></li><li><a href=\"/promising-troubleshooting\" hqid=\"2652008\">Troubleshooting</a></li></ul></div>\r\n\r\n\t  </div>\r\n </div>\r\n <div id=\"ui-page-fb-wrap\"></div>\r\n <div class=\"hiq-footer-wrap\">\r\n    \r\n                \r\n  </div>\r\n\r\n\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n",
  "content_length": 68509,
  "scraped_at": "2025-08-09T21:56:04.802806",
  "content_clean": "Home ››Manhattan Active® Omni››Order Management››Process & Configuration Guides››Order Promising ››Substitution During Allocation Substitution During Allocation Previous I Next OverviewProcess FlowForm Substitution RequestEvaluate Substitution RuleFormat Promising RequestPromising ProcessAllocation and ReleaseOrder Selling - SubstitutionOutbound(s) - Publish Substitution DetailsInventory Outbound(s) - Publish Substitution DetailsWhat is not supported with substitution?How To's?How to Set up Substitution RuleImplementation FlavorsHow to Invoke Custom Substitution Rules from External SystemHow to Add Extended Attributes to the Rule ConditionHow to Set up Seasonal SubstitutionRelated Article(s) Overview Driven by business needs, retailers may want to replace an ordered item with a substitute during allocation. There may be a need to immediately substitute an Item or make a substitution when there is not enough inventory for the ordered item(s) which determine the Substitution Types - \"Immediate\" and \"OnBackorder\". Retailers can also substitute different items for the same Original Item based on certain rule conditions, like Destination Country, state, and so on. Substitution Types: Substitution Type Description Example Use Case Immediate The Ordered Item is immediately replaced by the Substituted Item A → B (When Order is placed for A, replace it by B) Pre Order for Books - Retailers may start selling a book before they actually know the real SKU for the book (since it hasn’t been released yet). They will take orders for a “dummy SKU”. Once they know the real SKU, they add an “Immediate” substitution rule for “Dummy”  and re-allocate the pre-order lines before releasing to the DC. OnBackOrder When the available quantity of the ordered Item is less than the ordered quantity, then the substituted Item is used to make up the difference between the ordered and the available quantity. C→D (When C is out of stock , then replace with D) Book Rental - A customer might have ordered for an old book for renting, but if the retailer finds that the old book is not available, then the old book will be replaced with a new one. Conditional (based on certain attributes) The substitution is made based on certain Order/ Order Line attributes (For example, different items may be shipped based on the destination country). A conditional substitution rule can be set for both Immediate as well as On Backorder substitutions. Refer How to set up Substitution rule for more details A → When country of shipment = US , no substitute → When country of shipment= Canada, sub by B → When country of shipment = India, sub by C Based on Shipping Location - Because of the regulatory rules/other business factors, when an Order is made for Item A, then the retailers have to do the following: When shipping location is US - Ship Item A (no substitute) When shipping location is CA - Ship Item B (against Ordered Item) When shipping location is IN - Ship Item C (against Ordered Item) Process Flow Substitution - Process flow Form Substitution Request Substitution rule evaluation can be controlled for a Fulfillment Optimization Configuration by the Enable Substitution Rule attribute. Only when this attribute is enabled, the system performs substitution subject to availability of active and applicable substitution rule. Otherwise, the system ignores the substitution rules even if it is present. The substitution rules which are set for an Item are also cached in inventory. If \"Enable Substitution Request\" is true, then a substitution request is created which has the Item id(s) and the order/ order line attributes. Based on the substitution request, substitution rule evaluation takes place in inventory (API - /api/inventory/substitution/getSubstituteItems), and a response is sent back to promising. The response has the details of Substitute Item, Substitution Type, and the sequence of the substitute items. An User Exit (Promising::Substitution::UserExit::GetSubstituteItems) is exposed here to fetch substitution rules from external system. Refer to the section below for a sample substitution request and response Substitution Request - Sample{ \"SubstitutionRequestDetail\": [ { \"Address\": { \"Address1\": \"string\", \"Address2\": \"string\", \"Address3\": \"string\", \"City\": \"string\", \"Country\": \"string\", \"County\": \"string\", \"Email\": \"string\", \"FirstName\": \"string\", \"LastName\": \"string\", \"Latitude\": \"string\", \"Longitude\": \"string\", \"Phone\": \"string\", \"PostalCode\": \"string\", \"State\": \"string\" }, \"BatchNumber\": \"string\", \"CarrierCode\": \"string\", \"ConsolidationLocationId\": \"string\", \"CountryOfOrigin\": \"string\", \"DeliveryMethodId\": \"string\", \"DemandType\": \"string\", \"Extended\": {}, \"InventoryAttribute1\": \"string\", \"InventoryAttribute2\": \"string\", \"InventoryAttribute3\": \"string\", \"InventoryAttribute4\": \"string\", \"InventoryAttribute5\": \"string\", \"InventorySegmentId\": \"string\", \"InventoryTypeId\": \"string\", \"IsConfirmed\": false, \"IsForceAllocate\": false, \"ItemId\": \"string\", \"ProductStatusId\": \"string\", \"RequestId\": \"string\", \"RequestedDeliveryDate\": \"2020-10-28T00:57:55.931Z\", \"ServiceLevelCode\": \"string\", \"ShipFromLocationId\": \"string\", \"ShipToLocationId\": \"string\", \"ShippingMethodId\": \"string\", \"StrategyType\": \"string\", \"SubstitutionRequestDetailId\": \"string\" } ], \"SubstitutionRequestId\": \"string\", \"SubstitutionType\": \"string\" } Substitution Response - Sample { \"SubstitutionResponseDetail\": [ { \"RequestId\": \"string\", \"SubstituteItems\": [ { \"ItemId\": \"string\", \"Sequence\": 0 } ], \"SubstitutionType\": \"string\" } ] } Note: Substitution and Reapportionment cannot be enabled at the same time for a Fulfillment Optimization Configuration. Evaluate Substitution Rule Multiple substitution rule(s) with different substitution type can be defined for an Item. Refer How to set up Substitution rule for different Substitution Types. When both \"Immediate\" and \"OnBackorder\" substitution rules are active for the same item, then, irrespective of the rank of the rules, the \"Immediate\" substitution rule is selected. When more than one valid substitution rule is available for the same item and substitution type with different ranks, then the rule with the higher rank (numerically lesser value) is selected for evaluation. When more than one valid substitution rule is available for the same item and substitution type with the same rank, then the rule which was updated last is selected for evaluation. When the \"Immediate\" rule is set up for an original Item and \"On Back order\" rule for substitute item [ A→B (Immediate) and B→C (On Back order) ], if an Order is placed for Item A and the inventory for Item B is not adequate to fulfill the order, then allocation happens from Item C for the remaining quantity. Note that, if the inventory for Item C is not adequate and the Order is backordered (or partially backordered), then if there is a rise in the inventory for Item C, then the Order (for parent Item A) does not get re-allocated. Orders are re-allocated upon rise in inventory for Item A or Item B only. Evaluate Substitution Rule - ExamplesExample 1 - Two immediate rules available Substitution Rule Rank Substitution Type Original Items Substituted Item(s) Rule condition Rule 1 1 Immediate Item A-PreOrder Item B na Rule 2 2 Immediate Item A-PreOrder Item A na Substitution Response for Item A-PreOrder: Rule 1 is given preference as it is the Immediate substitution type with better rank. { \"SubstitutionResponseDetail\": [ { \"RequestId\": \"01\", \"SubstituteItems\": [ { \"ItemId\": \"Item B\", \"Sequence\": } ], \"SubstitutionType\": \"Immediate\" } ] } Example 2 - Two substitution rules available with different substitution types Substitution Rule Rank Substitution Type Original Items Substituted Item(s) Rule condition Rule 1 1 Immediate Item A-PreOrder Item A na Rule 2 2 OnBackorder Item A-PreOrder Item B (sequence 1), Item C (Sequence 2) na Substitution Response for Item A-PreOrder: Rule 1 is given preference as it is Immediate { \"SubstitutionResponseDetail\": [ { \"RequestId\": \"01\", \"SubstituteItems\": [ { \"ItemId\": \"Item A\", \"Sequence\": } ], \"SubstitutionType\": \"Immediate\" } ] } Example 3 - \"OnBackOrder\" is ranked higher than the Immediate Rule. Substitution Rule Rank Substitution Type Original Items Substituted Item(s) Rule condition Rule 1 2 Immediate Item A-PreOrder Item A na Rule 2 1 OnBackorder Item A-PreOrder Item B (sequence 1), Item C (Sequence 2) na Substitution Response for Item A-PreOrder: Immediate rule (Rule 1) is given preference over OnBackOrder (Rule 2) even though the rank is lesser. { \"SubstitutionResponseDetail\": [ { \"RequestId\": \"01\", \"SubstituteItems\": [ { \"ItemId\": \"Item A\", \"Sequence\": } ], \"SubstitutionType\": \"Immediate\" } ] } Example 4 - OnBackOrder rule with multiple Substituted Item(s) Substitution Rule Rank Substitution Type Original Items Substituted Item(s) Rule condition Rule 1 2 OnBackorder Item A-PreOrder Item B (sequence 1), Item C (Sequence 2) na Substitution Response for Item A-PreOrder: { \"SubstitutionResponseDetail\": [ { \"RequestId\": \"01\", \"SubstituteItems\": [ { \"ItemId\": \"Item B\", \"Sequence\": \"1\" }, { \"ItemId\": \"Item C\", \"Sequence\": \"2\" } ], \"SubstitutionType\": \"OnBackorder\" } ] } Format Promising Request If the Substitution Type is \"Immediate\", the original Item is replaced with the substituted Item in the promising request. If the Substitution Type is \"On Back Order\" then the substituted Item is appended to the promising request. Promising tries allocation for the original Item. On back order - Promising tries allocation for the substituted Item(s) based on the \"On Back Order\" rule. Promising Process As part of promising, an immediate rule (if available) is evaluated for the Original Item. If there are any unfulfilled units for the Substituted Item, then the system evaluates the On Backorder rule for the Substituted Item. If the “OnBackorder\" rule is available, then the system performs promising for the Substituted Item(s) available as part of OnBackorder rule in the same sequence mentioned in the Substitution rule. If the “OnBackorder rule” is not available or Inventory for Substituted Item is not available as part of On Backorder rule, then the unfulfilled units are back ordered. Refer to the below section on the different types of substitution and its impact on Promising Substitution Types - Impact on AllocationSubstitution allows retailers to configure rules when an alternate item can be used to fulfill an order.  Substitution rules can be configured to immediately substitute the ordered item with an alternate item or substitute the ordered item only when the original item is out of stock.  Additionally, retailers may add a condition which must be satisfied in order for the substitution to be applied. For example, when the order is shipped to Canada or the order line is a rental, then apply substitution. Substitutions are enabled for 1:1 quantity ratios and 1:1 items. There are three types of substitution: Immediate Substitution - With immediate substitution, the inventory of the originally ordered item is not considered and the configured items are substituted as long as it has inventory. If the substitute item does not have inventory, backordered item record is created using the originally ordered item. For immediate substitution rules, only a single substitute item may be configured. A sequence of substitute items cannot be configured for immediate substitution rules. This type of substitution is useful when the actual Item ID is different or has changed from the time the original order was placed. Example Substitution Rule Configuration: Ordered Item (parent) Substitution Type Substitute Item(s) Item A Preorder Immediate Item A Inventory Availability: Item Available Inventory Item A Preorder 99999 Item A 6 An order is placed for 10 units of Item A preorder. Allocation Result is: Item Quantity Status Item A 6 Allocated Item A Preorder 4 Backordered OnBackorder Substitution -  With OnBackorder substitution, the substitute item will only be allocated if the original item is out of stock. If inventory does not exist for either the original item or the substitute item, then a backordered item record is created for the originally ordered item. For On Backorder substitution rules, retailers may configure a sequence of substitute items to replace the ordered item. OnBackorder substitution is useful when retailers have an equivalent item which they would like to continue selling if the original item becomes unavailable. Example Substitution Rule Configuration: Ordered Item (parent) Substitution Type Substitute Item(s) Item A Used Condition OnBackorder 1- Item A Like New Condition 2- Item A New Condition Inventory Availability: Item Available Inventory Item A Used Condition 3 Item A Like New Condition 4 Item A New Condition 2 An order is placed for 10 units of Item A Used Condition. Allocation Result is: Item Quantity Status Item A Used Condition 3 Allocated Item A Like New Condition 4 Allocated Item A New Condition 2 Allocated Item A Used Condition 1 Backordered Conditional Substitution -  Conditions may be added to substitution rules to perform substitution only when certain conditions are met. If there are multiple substitution rules for a single item, then each rule is evaluated in the order of rank. Each condition is evaluated before moving to the next substitution rule and if a condition is met, then that substitution rule is used for promising. This type of substitution is useful when retailers need to control when substitution happens or does not happen based on attributes from the order or promising request. Example Substitution Rule Configuration: Ordered Item (parent) Rank Substitution Type Condition Substitute Item(s) Item A 1 Immediate Destination Country = US Item A - US version Item A 2 Immediate Destination Country = CA Item A - Canada version Inventory Availability: Item Available Inventory Item A 100 Item A  - US version 6 Item A - Canada version 4 An order is placed for 10 units of Item A. Destination Country is US. Allocation Result is: Item Quantity Status Item A - US version 6 Allocated Item A 4 Backordered An order is placed for 10 units of Item A. Destination Country is UK. Allocation Result is: Item Quantity Status Item A 10 Allocated Immediate and OnBackorder substitution together - Substitution rules may be combined together only in one scenario. A single Immediate substitution rule may be combined with a single OnBackorder substitution rule for the same item to fulfill the originally ordered item only if the immediate substitute item is unavailable. This is most useful for seasonal products for which retailers are trying to exhaust inventory for a particular seasonal item before resuming sale of the standard item. Example Substitution Rule Configuration: Ordered Item (parent) Substitution Type Substitute Item(s) Coca Cola Immediate Coca Cola Christmas Coca Cola Christmas On Backorder Coca Cola Inventory Availability: Item Available Inventory Coca Cola 100 Coca Cola Christmas 2 An order is placed for 10 units of Coca Cola. Allocation Result is: Item Allocated Quantity Coca Cola Christmas 2 Coca Cola 8 When the \"Force Allocate\" attribute is enabled, items are allocated based on the type of substitution If Substitution Type is Immediate, then the Substituted Item is allocated If Substitution Type is OnBackOrder, then Original Item is allocated If a substituted item has been \"pre-reserved\" against an Original item, post which there is a change to the substitution rule, when the Order (which has pre-reservation) is placed, then reservation does not happen against the pre-reserved item. The substitution rule gets re-evaluated and allocation is processed against the new substitution rule. Allocation and Release If an order line is allocated against substitution item(s) then the Original and Substituted Item(s) are persisted and sent in the Release outbound to the Fulfillment system. If all unit(s) are not allocated post evaluating substitution rules, then the Original Item is persisted in the Back Order Line Item. Upon inventory rise for the Original or the Substituted Item(s), these units are tried for promising again. Order Selling - Substitution Price, Tax and Invoice are based on the Original Item. The substituted Item has no impact on the dollar value. Return of substituted items is not supported. When a substituted item is returned at the time of item verification, it gets flagged that the returned item is different from the ordered item. A workaround is to cancel the return with variance and create a new return order with \"Receipt Expected\" as \"No\" so that the invoice gets settled. Outbound(s) - Publish Substitution Details Substitution Information (Substitution Type, Substitution Item) is sent in the following Outbounds Release Outbound Sales Posting Get Order Publish Order/Order Line. Note: The Item attributes sent in the outbound are pertaining to the Original Ordered Item and not the Substituted Item. In case, the item attributes are required for the substituted Item then a separate custom call should be done. Inventory Outbound(s) - Publish Substitution Details When the “Include Substitutions” is enabled in the ATC view, the substitution details are included as part of the availability picture for the parent item. Refer to Publish Availability with Substitution for more details. Following details are included as part of Substitution details (sample below). Attributes Details TotalIncludingSubstituteItem Immediate Substitution: Available quantity of the substituted Item. The original item quantity is not included as it is immediately substituted. Note: This does not include original item quantity On Back Order Substitution: Sum of the Original and all substituted Item(s) available quantity. SUM(\"Original Item Available Quantity\" + \"All Substitute Item Available Quantity\"). SubstituteItemsAvailable This is set to true if there are any Substitution Item(s) available as part of the availability calls. Otherwise, it is set to false. SubstitutionDetails Contains the Substitution Item and its availability details (Status and Quantity) Availability with Substitution details\"TotalIncludingSubstituteItems\":10, \"SubstituteItemsAvailable\":true \"SubstitutionDetails\":{ \"TotalQuantityOfSubstituteItems\":10, \"SubstituteItems\":[ { \"ItemId\":\"ItemB\", \"Status\":\"AVAILABLE\", \"StatusCode\":2, \"NextAvailabilityDate\":null, \"Quantity\":{ \"DistributionCenters\":6, \"Stores\":4 }, \"TotalQuantity\":10, \"SubstitutionType\":\"OnBackorder\" } ] } } What is not supported with substitution? Lines with Delivery Method = \"Email\" can not use substitution as promising does not occur for these lines Substitution is not supported for Reapportionment Substitutions for quantity ratios greater than 1:1 and kit substitutions (i.e. Item A is substituted with Item B + C + D) are not supported Chaining in substitution is not supported (i.e if there is A→B Immediate  and B→C Immediate, if the order is for Item A and there is no inventory for Item B, then the order will not get allocated with Item C) Complete Single Source is not supported when substitution is used within a fulfillment optimization strategy when Order Lines are grouped with same fulfillment group Id. The ATC UI will not show the availability picture of the substitute item(s), when the availability for the original (ordered) item is searched. How To's? How to Set up Substitution Rule Refer to the below section on how to set up substitution rule for different substitution types How to set up Substitution rulesSubstitution rules must be added to map the original item to the appropriate substitute item(s). Substitution rules may be added manually on the Substitution Rules UI or may be imported via the API. Within a substitution rule, the following can be defined. Original Item Substituted Item(s) and its sequence Substitution Type (Immediate, On Back Order, supersession) Rank Effective and Expiry date range Rule Condition (Optional) ** Note: For immediate substitution rules, only one item may be configured. For On Backorder substitution rules, many substitute items may be configured in sequence (sequence must be unique). Substitution ratios greater than 1:1 and substituting multiple different items for a single item are not supported. ** Optionally, retailers may configure a condition using the Substitution Rule Conditions UI. A single condition may be re-used multiple times for many substitution rules. For example, if a retailer would like to set up conditional rules to substitute items whenever the destination country is Canada, a single substitution condition may be added for \"Destination Country = Canada\" and all of the applicable substitution rules may reference this same condition. If the condition is edited at a later time, there is no need to modify the substitution rules themselves since they all use the same condition. Note: Substitution conditions may not be renamed once they are created (they must be deleted and re-created if a name change is required). However, the condition itself is editable. Note: For Supersession Substitution, you can configure up to 10 items under the substitute items and the sequence of these supersession items does not matter. The limit of 10 substitute items also applies to the Substitution Type “OnBackorder. Sample Substitution Rule Set up Set up API Sample Substitution Rule Condition {{url}}/item/api/item/substitutionRuleCondition/save Attributes exposed in the Substitution Request and Destination State and Country can be added as part of rule condition (refer to sample attributes below) { \"RuleConditionId\": \"SubstitutionAllRuleConditions\", \"RuleCondition\": \"substitutionRequestDetail.isConfirmed = true or substitutionRequestDetail.isForceAllocate = true or substitutionRequestDetail.address.country = \\\"US\\\" or substitutionRequestDetail.address.state = \\\"Georgia\\\" or substitutionRequestDetail.batchNumber = \\\"101\\\" or substitutionRequestDetail.carrierCode = \\\"FDXG\\\" or substitutionRequestDetail.consolidationLocationId = \\\"ecomorg:AtlantaDC\\\" or substitutionRequestDetail.countryOfOrigin = \\\"IE\\\" or substitutionRequestDetail.deliveryMethodId = \\\"PickUpAtStore\\\" or substitutionRequestDetail.inventoryAttribute1 = \\\"1\\\" or substitutionRequestDetail.inventoryAttribute2 = \\\"2\\\" or substitutionRequestDetail.inventoryAttribute3 = \\\"3\\\" or substitutionRequestDetail.inventoryAttribute4 = \\\"4\\\" or substitutionRequestDetail.inventoryAttribute5 = \\\"5\\\" or substitutionRequestDetail.inventorySegmentId in [\\\"ECommerce\\\",\\\"Retail\\\"] or substitutionRequestDetail.inventoryTypeId = \\\"Received\\\" or substitutionRequestDetail.productStatusId = \\\"Confirmed\\\" or substitutionRequestDetail.serviceLevelCode = \\\"FEDEX_2_DAY\\\" or substitutionRequestDetail.shipFromLocationId = \\\"ecomorg:AtlantaDC\\\" or substitutionRequestDetail.shippingMethodId = \\\"Same_Day\\\" or substitutionRequestDetail.shipToLocationId = \\\"ecomorg:NewYorkDC\\\"\" } Substitution Rule - Immediate {{url}}/item/api/item/substitutionRule/save { \"ItemId\": \"TheTwoTowers\", \"RuleId\": \"Substitute-Immediate-TheTwoTowers\", \"SubstitutionType\": { \"SubstitutionTypeId\": \"Immediate\" }, \"Rank\": 2, \"ExpiryDate\": \"2019-10-31T20:49:00.204\", \"EffectiveDate\": \"2018-10-05T20:49:00.204\", \"SubstituteItems\": [ { \"ItemId\": \"TheTwoTowers-21-b\", \"Sequence\": 1 } ] } Substitution Rule - On Back Order {{url}}/item/api/item/substitutionRule/save { \"ItemId\": \"ItemC\", \"RuleId\": \"Substitute-OnBackorder-ItemC\", \"SubstitutionType\": { \"SubstitutionTypeId\": \"OnBackorder\" }, \"Rank\": 1, \"ExpiryDate\": \"2019-10-06T20:49:00.204\", \"EffectiveDate\": \"2018-10-05T20:49:00.204\", \"SubstituteItems\": [ { \"ItemId\": \"ItemD\", \"Sequence\": 1 } ] } Substitution Rule - On Back Order (with multiple Items) {{url}}/item/api/item/substitutionRule/save { \"ItemId\": \"ItemD\", \"RuleId\": \"Substitute-OnBackorder-ItemD \", \"SubstitutionType\": { \"SubstitutionTypeId\": \"OnBackorder\" }, \"ExpiryDate\": \"2019-10-06T20:49:00.204\", \"EffectiveDate\": \"2018-10-05T20:49:00.204\", \"Rank\": 1, \"SubstituteItems\": [ { \"ItemId\": \"ItemE\", \"Sequence\": 1 }, { \"ItemId\": \"ItemF\", \"Sequence\": 2 }, { \"ItemId\": \"ItemG\", \"Sequence\": 3 } ] } Substitution Rule - With Rule Condition {{url}}/item/api/item/substitutionRule/save { \"Description\": \"ItemRulewithCondition\", \"EffectiveDate\": \"2017-08-09T00:00:00\", \"ExpiryDate\": \"2019-08-09T00:00:00\", \"ItemId\": \"HarryPorter-New\", \"Rank\": 1, \"RuleId\": \"RuleWithCondition\", \"RuleName\": \"RuleWithCondition\", \"SubstituteItems\": [ { \"ItemId\": \"HarryPorter-Old\", \"Sequence\": 1 } ], \"SubstitutionType\": { \"SubstitutionTypeId\": \"Immediate\" }, \"SubstitutionRuleCondition\": { \"RuleConditionId\": \"RuleWithConditionCountryisUS\", \"RuleCondition\": \"substitutionRequestDetail.isConfirmed = true or substitutionRequestDetail.isForceAllocate = true or substitutionRequestDetail.address.country = \\\"US\\\"\" } } Note: SubstitutionRuleCondition does not support order types. Implementation Flavors How to Invoke Custom Substitution Rules from External System User Exit \"Promising::Substitution::UserExit::GetSubstituteItems\" is exposed to customize the logic of substitution. Sometimes a retailer might set-up substitution rules outside the OMS. In such a case, this user exist can be invoked, which would fetch the substitute items from the externally set-up substitution rules and proceed for allocation How to Add Extended Attributes to the Rule Condition Currently, substitution rule condition takes the attributes defined in the Substitution request. However, the extended attributes can be added to the Substitution rule condition by following the below steps Steps Details Add entry to Available Entity {{url}}/inventory/api/rules/availableEntity/save Add entry to Available Attributes Entity {{url}}/inventory/api/rules/availableAttribute/save How to Set up Seasonal Substitution Use case: Business substitutes Coke can with Coke Christmas during Christmas sale. But in case the Inventory is not available for Coke Christmas cans, then business would want to ship the original coke cans. Business Flow: As part of Promising, Immediate rule (if available) is evaluated for the Original Item. If any unfulfilled units exist for the Substituted Item then system evaluates OnBackorder rule for the Substituted Item. If “On Backorder rule” is available then system performs promising for the Substituted Item(s) available as part of On Backorder rule. If “On Backorder rule” is not available or Inventory for Substituted Item is not available as part of On Backorder rule then unfulfilled units are back ordered. Refer to the below section on how to achieve this Substitution - Example Substitution Rule Substitution Rule Rank Substitution Type Original Items Substituted Item(s) Rule condition Rule 1 1 Immediate Coke Coke Christmas na Rule 2 2 OnBackorder Coke Christmas Code na Availability Picture Item Location Available Quantity Coke DC 1 100 Coke Christmas DC 1 100 Order is placed for 150 units (Item - Coke) Allocation Results: Since there is an immediate substitution, Coke is replaced with Coke Christmas. Available quantity is 100 for Coke Christmas. So Allocated quantity is 100 (DC 1) for Item - \"Coke Christmas\". There is an unfulfilled quantity of 50 units. Since there is an On Back Order rule for Coke Christmas, It is evaluated and the remaining 50 units are fulfilled from DC1 for Item - \"Coke\". Substitution Response for Item A-PreOrder: Rule 1 is given preference as it is Immediate substitution type with better rank. { \"SubstitutionResponseDetail\": [ { \"RequestId\": \"01\", \"SubstituteItems\": [ { \"ItemId\": \"Item B\", \"Sequence\": } ], \"SubstitutionType\": \"Immediate\" } ] } Related Article(s) REST APIs and User ExitsForce AllocateHow Optimization WorksAdvanced Shipping RestrictionsHow Promising WorksProcure To SellOverviewForecast ReservationCustomer Engagement ConfigurationsTroubleshooting"
}