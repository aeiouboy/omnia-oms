# How Returns Work

**Permalink:** how-does-return-work
**Path:** Manhattan Active® Omni/Order Management/Process & Configuration Guides/Returns & Exchanges/How Returns Work
**Content Length:** 137,793 characters
**Scraped:** 2025-08-09T21:59:07.713030

---

Home ››Manhattan Active® Omni››Order Management››Process & Configuration Guides››Returns & Exchanges ››How Returns Work How Returns Work Previous | Next OverviewProcess FlowReturn Order CreationCalculating Returnable QuantityVerifying Items are Returnable/ExchangeableReasons for Item Ineligibility for Return or ExchangeOverriding the Reason Displayed in Self-Service or Customer Service UIReturn Age PolicyOption1: Specifying the number of days in the Days for Eligible ReturnOption2: GenAI to define return age rulesReturn CenterOrder to Return MappingReturn State TransitionReturns with Receipt Not ExpectedManual Receipt Not ExpectedReceipt Not Expected based on Dollar Value ThresholdReturn Order Line PricingReturn ChargesReturn FeesOrder level rerturn feeReturn line-level return feeItem level return feeOverriding Return FeesReturn Shipping & HandlingRefunding Original Shipping and HandlingEligible Days For RefundRefunding Other ChargesReturn CreditReturn UpdatesCarrier Scan EventReturn Receipt and VerificationReturn ReceiptsReturn VerificationReturn order level verificationReturn order line level verificationAutomated ReturnsReturn ASN GenerationReturn Line CancellationsReturn Order CancellationsCanceling Aged & Abandoned ReturnsProcess ReturnConfigurationReturn Order Type ConfigurationReturnable Quantity Calculation & ConfigurationAuto Verification Receipt Not Expected ApprovalReturn Age Policy Return Match Return Shipping and Handling Return Reason Codes Item Conditions Return Fees Return Routing Optimization Implementation FlavorsDecide the Return Location based on the Return/Original Order attributesRestocking fee based on time Copy extended attributes from Parent order to Return order Create/Import a return order that is returned and refundedCapture the gift recipient's email before processing a refund for an automated returnPopulate extended attributes for automated returnsCreating custom statusesEvaluating Return from addressModify Return Fee charges post computationThird-party integration for return confirmationHow to Capture the Return Date in Sales Posting MessagesRelated Articles Overview A return order can be created by opting to return an item(s).  Based on the selection of return and the type of the return, the respective order lines are created. In the below sections we will try to understand the process flow and a detailed explanation of the main processes involved in completing a return as well as the configurations/setup that are required to process a return successfully. Process Flow Return Order Creation A return order will be created with return lines based on the items that are expected to be returned. Return order lines can be identified using a few key line-level attributes. Return lines are identified using the isReturn attribute, which is set to true for a return order. The parent order and order line(s) are stamped on the return order line so that the return line can be priced based on the parent order and the parent order returnable quantity can be decremented. Calculating Returnable Quantity During return creation, order capture systems need to know how many units are eligible for return. For this purpose, the Returnable Quantity is exposed on the order line. Returnable quantity is not saved in the database; it is calculated in run-time and included as part of the order response. Returnable quantity is calculated only for sale lines and is not affected by the value of is Returnable attribute. Returnable quantity is calculated even if a line has the Returnable value set to false, so that a user can override the returnable flag if required. Returnable quantity is calculated as the sum of quantity greater than the minimum status defined as shipped (7000) and less than the maximum status defined as delivered (7500). The minimum and maximum status can be defined in the Order configuration under the "Returns and exchanges section". However, a custom status can be added to include a status (less than 7500.999) other than the statuses available in the seed data. Refer here to understand how the returnable quantity is calculated and configured. This configuration does not allow retailers to create new returns if some of the pending return items are never received on the previous return orders. However, the retailers will be able to create new returns for a customer order with already existing return orders in pending status, from different order channels like DSS or Contact Center or External Return or External POS system (using Order save APIs) by selecting one of the below pending return cancel strategies in order config, Pending Items Pending Order If option "Pending Order" or "Pending Items" is selected, then all the “Pending Return” return orders(where return order max status is = 11000.00) quantities are added to the “ReturnableQty” in the get order response so that a new return order can be initiated. If "Pending Order" is selected, then all the pending return lines and non-released exchange lines are cancelled. If "Pending Items" is selected, then all the matching pending return lines and non-released exchange lines are cancelled. Example, consider a customer order with 2 lines with 1 quantity each. The following explains how the Pending Items and Pending Order strategy works. To Cancel Pending Items At time T0, create RO1 for both the lines of the customer order. At time T1, create RO2 only for the first line of the customer order. The system will cancel only the corresponding line, that is, the 1st line of RO1. To Cancel Pending Order At time T0, create RO1 for both the lines of the customer order. At time T1, create RO2 only for the first line of the customer order. The system will cancel the entire RO1. If the exchange line is released, then only return lines will be cancelled and the exchange order will result in a payment status “Await Payment Info.” If all the order lines are cancelled, then the order is cancelled. The order and the order line cancel reason and cancel comments are updated accordingly. Note: The existing return items can be cancelled only if the following conditions are met: The order configuration of the parent order should have the "Pending Items" option selected in the Allow Return By Cancelling drop-down. The return order should have Receipt Expected set to "yes". The return order should be confirmed. There are no Return Invoices already created for the line/item. Verifying Items are Returnable/Exchangeable The item that is being returned must be eligible for a return, which is based on the attribute 'isReturnable' = true/false.  It can be used by return capture systems such as the call center UI, POS UI, or any third party return capture system. If IsReturanble = false, the contact center users cannot initiate the return order but could optionally override this and return the item. When the order is created through an API, this validation does not happen. Reasons for Item Ineligibility for Return or Exchange An order line item may not be eligible for return or exchange due to various reasons. For example, the item may be marked as non-returnable or non-exchangeable in the item master, or it may not have been shipped yet. The reason for ineligibility will be stored in the parent order line and will be used by the self-service UI to inform the end customer why the item is not eligible for return or exchange. This reason will be populated in the field 'InEligibleReturnReason' on the order line. By default, this field is not included in the GetOrder response, a template change is required to make this information visible. Below are reasons populated on the order line based the various use cases, Usecase Reason Return window has passed This item is outside of the eligible return window. Item is not fulfilled Item is not yet shipped. Orderline is cancelled Item is cancelled. No more returnable quantities on the orderline A return has already been initiated for this item. Item is marked as not returnable or exchangeable. Item is not eligible for return or exchange. Item is marked as not returnable or can be exchangeable. Item is eligible for return, but not for exchange. Item is marked as not returnable or can be exchangeable. Item is not eligible for return, but an exchange can be initiated. Note: The reason will be localized based on the orderLocale and populated on the order line. Overriding the Reason Displayed in Self-Service or Customer Service UI Retailers can override the reason populated on the order based on their business use cases by using command router extensibility - intercepting the GetOrder API call and redirecting to custom code. The custom code can implement specific logic to find the detailed reason for item ineligibility and override the value of the 'InEligibleReturnReason' attribute. Refer here for more info. Note: The custom code will be responsible for localization. Return Age Policy Retailers can configure the return eligibility period for items within the Order Configuration settings in two ways: Option 1, by specifying the number of days in the Days for Eligible Return column, or Option 2, by using GenAI to define return age rules in plain language. Additionally, they can choose whether the return eligibility period should be calculated from the shipment date or the delivery date. For lines with the delivery method 'Store Sale', the return age is calculated from the Order line creation date; for all the other delivery methods, the age is based on either the "ShippedDate" or the "DeliveredDate" option selected. If the retailer selects the "ShippedDate" option, the count of days starts from the latest fulfillment date, which is when the item was shipped from the warehouse. If the retailer selects the "DeliveredDate" option, the count of days begins from the latest delivered date, which is when the item was received by the customer. For example, If the Return Age Policy has been configured for 90 days from the Shipped Date and Store Sales has been created on the 1st of October, it will be eligible to return until 30th December. If Ship To Home has been created on the 1st of October and was shipped on 6th of October, it will be eligible to return until 6th of January. If the Return Age Policy has been configured for 90 days from the Delivered Date and Store Sales has been created on the 1st of October, it will be eligible to return until 30th December. If Ship To Home has been created on the 1st of October, and is shipped on 6th of October, and delivered on 7th of October, it will be eligible to return until 7th of January. If there are multiple delivered dates for a given order line, then the latest delivered date will be honored. If there is no delivered date available, then the return age policy will honor the shipped date. Option1: Specifying the number of days in the Days for Eligible Return The system will not accept returns that exceed the return age policy, which is defined in the Days for Eligible Return column on the Order Configuration UI (in the Returns & Exchanges section), unless the user has permission to override the return age policy. Configure the Return Age in the Returns & Exchanges section of the Order Configuration UI. Option2: GenAI to define return age rules Retailers can define the return window based on the order or order line attributes by configuring return age rules on the order configuration UI (in the Returns & Exchanges section). These rules can be written in plain language and retailers can also validate the rules using the Validate button on the UI before saving them to the system. If the return age rule(s) is configured, the return window configured in the 'Days for Eligible Return' will not be used for validating return age. So, the default number of days should be mentioned in the return age rule. Refer to examples below to configure the return age rules. Multiple return age rules can be added in the new line by mentioning the priority as mentioned in the examples below. Example1: If the order is created between September 15th 2024, and October 15th 2024, the return window is 90 days; otherwise, it’s 180 days. Example2: If the product class is Tops, the return age will be 30 days, otherwise, it’s 180 days. Example3: If the product class is Tops, the return age will be 30 days. If the order line total is greater than $500, the return age will be 60 days. If both conditions are met, the product class takes priority. Otherwise, the return age will be 180 days. Once a user enters the return age rules and clicks the 'Save' button, the system will internally use GenAI to validate the entered rules based on the response template (GenAIReturnAgeTemplate) and populate the MVEL expression in the order configuration (ReturnAgeValidatedExpression). When an order line or quantity is fulfilled, the system will use the MVEL expression to determine the return age (number days eligible for return) and populate it on the order line (ReturnEligibilityDays). Note: Ensure that all referenced attributes in the return age rules exist in the response template (GenAIReturnAgeTemplate). If an attribute (order/orderline or extended) is missing, update the response template accordingly. If an invalid MVEL expression is stored in the order configuration, the system will not process ship event messages. In such cases, the MVEL expression must be corrected, and the failed ship event messages should be reprocessed to ensure proper handling. In the case of partial quantity fulfillment, the return age will be populated only when the first quantity is fulfilled. The return window will be calculated based on the configured return age rules only for order lines shipped after the rules are set. For order lines shipped before the return age rules were configured, the return window defined in 'Days for Eligible Return' will be used to validate return eligibility." Configure the Return Age in the Returns & Exchanges section of the Order Configuration UI. Sample Response Template "Messages": null, "UpdatedTimestamp": "2024-11-28T11:36:47", "CreatedBy": "seeddata-importer", "CreatedTimestamp": "2024-11-25T05:55:24", "BaseEntity": "Order", "Process": "/fwcore/responseTemplate/save", "OrgId": null, "UpdatedBy": "systemadmin@system.com", "TemplateJson": { "OrderId": null, "CustomerId": null, "CustomerFirstName": null, "CustomerType": null, "CreatedTimestamp": null, "SellingLocationId": null, "OrderLine": { "ItemId": null, "Extended": { "*": null }, "OrderLineSubTotal": null, "OrderLineTotal": null, "IsGift": null, "OrderLineId": null, "Quantity": null, "ShipToAddress": { "AddressName": null, "AvsReason": null, "Address": { "Email": null, "FirstName": null, "State": null, "Phone": null, "Address2": null, "Address3": null, "Country": null, "PostalCode": null, "LastName": null, "Address1": null, "City": null, "County": null }, "IsAddressVerified": null, "AddressId": null }, "ShipToLocationId": null, "IsReturn": null, "IsCancelled": null, "ItemStyle": null, "ProductClass": null }, "IsCancelled": null, "IsConfirmed": null, "OrderType": null, "DocType": null, "TotalTaxes": null, "TotalCharges": null, "TotalDiscounts": null, "OrderTotal": null, "Extended": { "*": null }, "OrderSubTotal": null }, "ContextId": "adf719ce-7bac-44b4-98b3-90d5fe4f36cb", "PK": "7325141239935881131", "TemplateId": "GenAIReturnAgeTemplate", "Unique_Identifier": "7325141239935881131" } Return Order type Order types are used for order processing. During return order creation, for automated return and exchanges, the system populates the return order type. Refer to the How to section below to understand how to configure return order type. For return orders that are externally imported, it is required to specify the return order type. Return Type For each return line, the return type attribute is populated to indicate whether the item is being returned for a pure refund, as part of an even exchange, or as part of an uneven exchange. Each time a return line is created or updated, this attribute is automatically populated with either Refund, Even Exchange, or Uneven Exchange. This attribute can be used in the return fee configuration and for reporting. The return type is populated based on the below logic: If the 'is Return' attribute is false, then ReturnType is null If the 'is Return' attribute is true and no sale lines exist on the order, then ReturnType = "Refund" If the 'is Return' attribute is true and sale lines exist, and an even Exchange line exists with the same parent order Id and parentOrderLineId as the return line, then ReturnType = "Even Exchange" If the 'is Return' attribute is true and sale lines exist, and no even exchange line exists with the same parent order Id and parentOrderLineId as the return line, then ReturnType = "Uneven Exchange" Click here for example on Return types ReturnOrderId RO Line Id IsReturn IsEvenExchange Parent Order Id Parent Order Line Id ReturnType 1 1 TRUE FALSE 123456 1 Refund 2 1 TRUE FALSE 789012 1 Even Exchange 2 FALSE TRUE 789012 1 null 3 1 TRUE FALSE 456789 1 Uneven Exchange 2 FALSE FALSE null null null 4 1 TRUE FALSE 288989 1 Even Exchange 2 FALSE TRUE 288989 1 null 3 FALSE FALSE null null null Note: The return types are system-defined and dynamically obtained based on the order lifecycle. CSR selected return types are not retained. Example 1, when a return order is created with return type as a refund and if the payment that was made on the original purchase order is a gift card, a gift card refund is processed. However, when a gift card refund is processed, the return type is changed from Refund to Uneven Exchange since the new gift card on which the refund is being made is a sale line that gets added to the order and has to go through the fulfillment process and follow the same pipeline logic of an exchange order to get allocated and released. Example 2, I am creating a return (same style exchange) order for a single line order having 2 quantity from Contact Center - Create Return. Now, if I click on "select change" item and change the color or size of that same item, and select. In that case, the even exchange is being converted to an uneven exchange. Even exchange got converted to uneven exchange because the CSR changed the color of the item and because of this, the Return Type was converted to Uneven Exchange which is the expected behavior as per current design. Whenever CSR changes Color/Size - or any other attribute selected in Call Center Config - Item Options - of the Item, the Item ID will be different. Return Center Active Omni provides the flexibility to determine an optimized return center using reverse Adaptive Network Fulfillment (ANF). Retailers can configure incoming orders to go through the reverse ANF process to choose the most optimal return location based on cost, if the incoming order does not have a pre-determined return facility. For orders that come in with a pre-determined return facility, Active® Omni will honor it. Refer here on how to configure Return Routing Optimization in Order Management. If Return Routing Optimization is not configured, then for orders that come in with a pre-determined return facility (Default Return Center configured in Call Center or DSS or external return order), Active® Omni will honor it, else the original Ship from location of the parent line will be used as a Return Center. High Level Flow Determine Return Center Order to Return Mapping When a return line is created, the data below is fetched from the parent order line and saved on the return, if the data is null on the return during creation. If the data is not null, then the imported data is saved. If an order has multiple return lines originating from different original orders, then the order-level data is randomly copied from one parent order if it is null on import. Attributes to copy to return order, if null Notes Order Attributes CustomerId CustomerFirstName CustomerLastName CustomerPhone CustomerEmail CustomerTypeId These attributes are copied only if CustomerId and CustomerFirstName are null on the return order. If CustomerId and CustomerFirstName are null, then all of these attributes are replaced with the value from the original order. Otherwise, none of these values are copied. CurrencyCode IsTaxExempt TaxExemptId TaxExemptReason These attributes are copied only if all three are null on the return order. ChargeDetails Prorated for the return quantity. Copied from original order if isAlreadyCharged = false. Negate the sign. TaxDetails Prorated for the return quantity. Copied from original order if isAlreadyTaxed = false. Negate the sign. Order Line Attributes UnitPrice Copied from original order if isAlreadyPriced = false. Negate the sign. OriginalUnitPrice Negate the sign. IsPriceOverridden IsReturnable If this attribute is set to 'False' - by default, users are restricted from creating returns. However, this can be overridden by giving appropriate permissions to the users on the DS UI. External systems should look at this field and take appropriate decision on the behavior. IsGift PaymentGroupId ItemDescription ItemStyle ItemBrand ItemSize ItemColorDescription ItemSeason ProductClass If any attribute in this list is null on the return order, then all attributes are copied from the original order. IsTaxIncluded ShipFromAddress Populate with order line ship to address. If null, then pull the preferred address from customer. ChargeDetails Prorated for the return quantity. Copied from original order if isAlreadyCharged = false. Negate the sign. TaxDetails Prorated for the return quantity. Copied from original order if isAlreadyTaxed = false. Negate the sign. Return State Transition The default pipeline for order lines with the delivery method, Ship to Return Center, is shown below. When a return line is created, all line quantities are in the "Pending Return" status. When a return line is created, the parent order line quantity detail moves from "Fulfilled" to "Returned". This ensures that the returnable quantity calculation on the parent line has updated return quantities. Upon return order confirmation, return line status can differ based on the line attributes. If a return line has Receipt Expected as false, then one of two flows can occur. If auto-approve is enabled, then the line quantity moves to "Returned". If auto-approve is disabled, then the line quantity moves to "Pending Approval", and then the quantity moves from "Pending Approval" to "Returned" when a user manually approves the line. If a return line has Receipt Expected as true, then the quantity remains in the "Pending Return" status upon confirmation. When a receipt event occurs, then the quantity moves from "Pending Return" to "Received" status. When a return verification event occurs, any received quantity moves from "Received" status to "Returned" status. "Canceled" status is tracked outside the state transition. Return orders or lines can be canceled based on the order configuration. Upon cancellation, the line quantity details move to "Canceled" status. Ship To Return Center pipeline with Carrier Scanned status: Returns with Receipt Not Expected Retailers may prefer that certain items, sometimes called 'field destroys', are not returned to them when certain conditions exist, such as the item is damaged or the item's value does not warrant the return shipping and handling fees required to process it. The system provides a method for not expecting receipts based on dollar value, as well as a manual override method. Manual Receipt Not Expected Based on SOP, the agent can choose the Receipt Not Expected checkbox for an item during the return process. This indicates that the item does not require a return shipping label, and that a refund or return credit can be issued to the customer once the return is approved. This option is helpful if the item is broken glass or a hazardous return. Receipt Not Expected based on Dollar Value Threshold When a return is under a certain dollar value, allowing the customer to keep the item instead of returning it can save money and increase inbound efficiency. For example, if shipping and handling costs are approximately $10, the retailer may configure the system so that items under $10 are not returned. The system includes a dollar value threshold per selling channel. When the return item's dollar value is less than the threshold, the item is not expected to be returned. Retailers can set the threshold at either the order or order line level. Order level thresholds are helpful if the customer may be returning multiple items, such as retail. In that case, the threshold is compared to the sum of the return lines subtotal for that order. The order line level threshold is helpful for retailers with large, bulky inventory with significant shipping costs. In that case, the threshold is compared to each return line subtotal for that order. It is possible for a specific line to be set as receipt not expected when other lines are above the threshold and are set as receipt expected. Threshold values are configured in the Returns & Exchanges section of the Order Configuration UI. Returns where receipt is not expected require approval for the customer to be refunded their money. See the section below 'Receipt Not Expected Approval'. Return Order Line Pricing Return order lines are priced using the original order line price, taxes, charges, and discounts. For example, if the original order line for 1 unit has a price of $220 per unit, $10 S&H, and $10 tax for a total of $240, then when a return is created against this order line, the return line unit price is set to -$220, S&H is -$10, and tax is -$10. This ensures that the customer is refunded or credited the full $240. If a return is created against a multi-unit order line, then charges, taxes, and discounts are prorated for the return quantity. For example, if an original order line for 2 units has a price of $110 per unit, $10 S&H, and $10 tax for a total of $240, then when a 1-unit return is created against this order line, the return line unit price is set to -$110, S&H is -$5, and tax is -$5. If a return line is created without the original order & line reference, i.e. without parent order ID & line ID, then current sales item price & taxes will be applied to it. For example, if an item's unit price is $100 and tax is $8, and a return line is created with 1 unit of this item without the original order and line reference, then the unit price is set to -$100 and tax is -$8. If a return line is priced by an external system, then the isAlreadyPriced, isAlreadyTaxed, and isAlreadyCharged attributes in the order interface can be used. If isAlreadyPriced is true for a return line, then the unit price on the order import is saved, and the unit price is not copied from the parent order line. If isAlreadyTaxed or isAlreadyCharged is true for a return line, then taxes or charges are not copied from the parent order line, but rather, the imported taxes or charges are saved. Return Charges Return charges such as restocking or S&H can be imported or calculated upon order creation. Return S&H is calculated using the Shipping & Handling component, while all other return fees are calculated using a rules-based fee configuration in the Order component. Return charges can be applied to the order header or lines and are identified by isReturnCharge = true. If a header charge is applied and the isReturnCharge attribute is set as true, then that charge is prorated across only return lines. When return charges are included in the invoice tax request, they are sent to the tax engine with the attribute tax included = true. This is because no quotation tax call is made for return orders, which means all return charges are assumed to be inclusive of taxes. Refer to the 'How to' section below to understand configurations for the Return Charges. Return Fees Return fees can be used to charge the customer for return services such as restocking. Fees can also be used to deduct from the customer's return credit based on return policy, for example, if the customer is returning a damaged item. Return fees can be applied at the order level and/or return line level based on return fee configuration. Return fees can be re-evaluated based on order updates. Refer to the Order Orchestration guide for details. Order level rerturn fee Order level return fees can be applied based on the order type, selling channel, and customer type. Each fee can be applied as a flat fee or a percentage fee. For example, an order has return lines which have a subtotal of -$100. If a flat $3 fee is configured for this order type, then a $3 return fee charge is created at the order level. If a 5% fee is configured for this order type, then a $5 return fee charge is created at the order level. The percentage-based return fees use the line subtotal or order subtotal, which means that discounts are not considered. For instance, if a return line has a unit price of $100 and a $10 discount, then a 10% return fee on the line would be calculated as $10 (as opposed to $9, if the discounts were taken into account). Return line-level return fee Return line-level fees can be applied based on the item condition, return reason, and return type. Each fee can be applied as a flat fee, a per quantity fee, or a percentage fee. For example, a 2-unit return line has a unit price of -$50, for a line subtotal of -$100. If a $5 flat fee is applied, then a $5 return fee charge is created at the line level, and the line total is -$95. If a $5 per quantity fee is applied, then a $10 return fee charge is created at the line level, and the line total is -$90. If a 5% fee is applied, then a $5 return fee charge is created at the line level, and the line total is -$95. Item level return fee Item-level fees, such as restocking fees and overweight fees, enable retailers to configure return charges based on the unique characteristics of each item. This flexibility allows for a more precise approach to returns, ensuring that different items incur return costs reflective of their attributes and handling requirements. For example, high-value items or those with special packaging may require additional labor or logistics to process a return, making a restocking fee necessary to cover these costs. Similarly, larger or heavier items often come with higher return shipping expenses, and an overweight fee helps offset the additional costs associated with handling and transportation. Each fee can be applied as a flat fee, a per-quantity fee, or a percentage fee. For example, consider a return order with three return lines, each containing two units (each unit priced at -$50), resulting in a subtotal of -$100 per line. Line1 contains an item with a configured flat restocking fee of $5, a $5 return fee charge is created at the line level, and the line total is -$95. Line2 contains an item with a configured per-quantity overweight fee of $5, then a $10 return fee charge is created at the line level, and the line total is -$90. Line3 contains an item with a configured 5% restocking fee, then a $5 return fee charge is created at the line level, and the line total is -$95. If both the line-level return fee and item-level return fee are configured, the item-level fee takes precedence and is applied to the order line. If no item-level return fee is configured for an order line item, the line-level return fee is applied. For example, consider a return order with two lines: Line 1: Contains Item A, which has a restocking fee of $5 (flat fee) configured. Line 2: Contains Item B, for which no item-level return fee is configured, but a $10 line-level return fee is applicable. In this case, a $5 return fee is applied at the line level for line 1, and a $10 return fee is applied at the line level for line 2. Multiple item level return fees can be configured for an item. Retailers can also add their own return fees according to their business needs. Out of the box, restocking fees and overweight fees are included. Note: This functionality includes seed data for the return fee. To include this seed data, copy prc::itemPriceConfig from the base profile to your profile. If you prefer not to copy the profile, you can import the seed data using Postman with the API and payload provided below. API: {{url}}/pricepromo/api/pricepromo/returnFeeName/import Payload: { "ProfileId": "base", "data": [ { "FeeName": "RestockingFee", "Description": "A fee applied when returned items are restocked. This covers handling, repackaging costs", "ShortDescription": "Restocking Fee" }, { "FeeName": "OverweightItemFee", "Description": "A fee charged for processing the return of overweight items, covering additional handling costs", "ShortDescription": "Overweight Item Fee" } ] } Return fees and return S&H charges are inclusive of tax, meaning that they are sent in the return invoice tax request with isTaxIncluded = true, and the tax engine back-calculates tax from the charge total. Refer to the 'How to' section below to understand configurations for the return Fees. Overriding Return Fees Return fees and Return SnH can be overridden at any point during the return cycle. If the return order is not yet invoiced, the fee amount is adjusted on the order total. If the return order is invoiced, a return adjustment invoice is created to complete the refund process. Return Shipping & Handling Return Shipping and Handling (S&H) charges are calculated using the Shipping & Handling component. S&H charges can be calculated based on volumetric weight, order value, or shipping method. S&H rules are set up for returns in the same way that they are for sale lines, but a single S&H rule can only be eligible for either returns or sale lines. See the Shipping & Handling guide for details. Refer to the 'How to' section below to understand configurations for Return Shipping and Handling Refunding Original Shipping and Handling Configuration exists to determine whether S&H charges should be refunded during returns. If this configuration is enabled, then S&H charges (and taxes/discounts against S&H) are not refundable. If this configuration is disabled, then S&H charges and taxes/discounts on S&H are refundable. This configuration controls whether charges of type 'Shipping' are refunded and does not affect other charge types such as VAS, etc. This configuration also affects whether discounts against S&H charges are carried over to return orders. For example, an order has 2 ship to address items, each of $100, S&H charge of $10, and S&H tax of $2. $5 S&H and $1 tax gets prorated to each line. Once item 1 has been fulfilled, the customer decides to return it. If "Do not refund S&H charge" is enabled, then only $100 will be refunded. However, if this configuration is disabled, then $106 will be refunded. Configure the "Do not refund Shipping & Handling charge" in the Returns & Exchanges section of the Order Configuration UI. Eligible Days For Refund Even though the retailer has configured S&H charges not to be refunded by configuring "Do not refund Shipping & Handling charge", there may be a requirement to refund the original S&H charges due to statutory compliance if the entire customer order (all the items and all the quantities) are returned within a specified number of days after the original order was fulfilled or delivered. The retailers can configure the "Eligible Days For Refund" for this requirement in the charge type configuration for a particular order configuration as mentioned below. "ChargeTypeConfig": [ {"ChargeType": { "ChargeTypeId": "Shipping" }, "ChargeOnFirstInvoice": false, "IsNotRefundable": true, "EligibleDaysForRefund": 30 } ] Use the below-mentioned API for configuring the charge type config for an order configuration API: POST {{url}}/order/api/order/orderConfig/save { "OrderConfigId": "EcommConfig", "ChargeTypeConfig": [ { "ChargeType": { "ChargeTypeId": "Shipping" }, "ChargeOnFirstInvoice": false, "IsNotRefundable": true, "EligibleDaysForRefund": 30 } ] } The system considers the creation date of the Return Order for evaluating the eligible number of days for refund. If customers return the order through multiple return orders, the last return order will be considered by the system for refunding the S&H charges, if all the items/order lines and all the quantities from the original customer order are returned within eligible days for refund configured for "ChargeTypeId": "Shipping". The entire refund is included in the first return invoice generated for the return order, which meets the criteria mentioned above. Notes: -This configuration will not work if "IsNotRefundable": false. -The charge refund behavior is controlled by the return order's Order Configuration, not the parent's Any variation noticed and processed for the return order after it is created does not have any impact on the refund behaviour for this configuration. Refunding Other Charges The below charge types can be configured for refund using order config API. Defining the configuration from Order Configuration UI is not supported, use Order Config API to update if a specific charge type is refundable or not. Value Added Services Handling Hazmat Surcharge Miscellaneous 1 to Miscellaneous 6 Note: Miscellaneous 1 to 6, Hazmat and Handling charge types configured as non-refundable are not honoured. The charges will always be refunded, implement custom logic to exclude this charge type refund by using UE Order:Order:UserExit:EligibleChargesForRefund. Currently, S&H and other charges can be refunded by order type but not using any other logic. For example, it's not possible to refund S&H charges based on return reason in scenarios where a retailer may want to refund S&H for a return caused by the retailer (e.g. damaged item) and not refund S&H if the return is not the retailer's fault (e.g. customer changed their mind). Such custom logic needs to be implemented using UE Order:Order:UserExit:EligibleChargesForRefund. It's not possible for CSRs to override this configuration within a return order. For instance, if the configuration dictates that original S&H is not refunded, but a CSR wants to refund it on a case-by-case basis, they cannot do this on the return order. A workaround is to override the S&H on the parent order, which will generate a refund. Another possible workaround is to configure S&H to always be refunded along with a return fee, with an amount equal to the average original S&H cost, which can be optionally overridden on the return order. Return Credit Return credit is the mechanism to transfer funds from the parent order to the return order. Return credit is managed by the Payment component and can be used to issue a refund, if the value of return items exceeds the value of exchange items, or as credit towards exchange items. For ship to return center order lines, return credit is borrowed from the parent order when a return order is created. When a return invoice is created, then the return credit is fully transferred from the parent order to the return order in the form of settlement transactions. Once settlements exist on the return order, then those settlements can be used to issue a refund or as payment towards exchange items. When a settlement is transferred to a return order, a return credit payment transaction is created on the parent order to ensure that the amount is deducted from the available funds. When an update to a return order occurs, the Order component communicates with the Payment component to ensure that return credit is moved accordingly. If the return order total decreases, in the case of a line cancellation, quantity decrease or post-void, then return credit is moved from the return order back to the parent order. If the return order total increases, in case quantity increases for example, then additional return credit is borrowed from the parent order and moved to the return order. See Return Credit in the Payment Process Guide for more details. Return credit includes only the price, charges, taxes, and discounts being carried over from the parent order. Return shipping charges or fees applied on the return order are not included in the return credit, as they are deducted from the total refund. For example, if a customer returns a $100 item, then a $100 return credit is copied from the parent order. If $5 is charged for return shipping, then the return credit remains $100, but the total refund comes to $95 (return credit less return charges). A return order cannot be confirmed if the return order total is more than the available funds on the parent order. For instance, if a return of $3 is created and the return shipping fees are $5, then the return order total is -$2, so this return cannot be confirmed. If tax rounding issues cause a return to be created for $99.99 for a parent order that's only worth $99.98, then this should not be resolved by adding/overriding return fees to bring the return total to $99.98. Instead, work with the product team to resolve such issues. If insufficient return funds are available for the return, then the standalone or aged return payment type is displayed as the expected refund type. For instance, if a return is created in a contact center against an order for which a credit card settlement failed, a CSR may see that the return will be refunded to the gift card, as there is no valid settlement. The CSR will not be permitted to confirm the return. Note: The system is designed to refund shipping fees only when an order is fully returned. In cases where some order lines are returned and others are cancelled, the order is not considered "fully returned," and therefore, shipping fees are not refunded. For example, if one line is fulfilled and returned while another is cancelled, the system treats this as a partial return rather than a full return. Return Updates Before an order is confirmed, return lines can be added, or updated with new quantities, return reason, item condition, ship from address, etc. A line with the isReturn attribute = true cannot be updated with isReturn = false; instead, the return line should be deleted, and a sale line should be added. After an order is confirmed, the following updates are permitted on return lines receipts and verifications, return line cancellation, resending return labels to the customer, processing a return, applying or resolving holds, applying or removing return fees, and adding or updating notes. Carrier Scan Event When return labels are carrier scanned, the return order event type "CarrierScanned" is used to move all the quantities of all the return lines in the return order with isReceiptExpected = true to Carrier Scanned (14000.000) status. This event type needs only the return order Id and parent order Id with "CarrierScanned" to be processed. "CarrierScanned" event cannot be processed if the return order includes any return line with isReceiptExpected = false or if the parent order does not have a payment method belonging to Payment Type configured for - Eligible For Chargeback = true or the MaxReturnStatus of the return order is greater than Awaiting return (11000.000). Return Receipt and Verification When a return order is received at a distribution center, the DC captures information including the items, quantities, and conditions of the items received. This information is relayed to the Order component, so that return credit can be issued to the customer based on the received items. These Receipt and Verification events are communicated via the Return Event interface. Return Receipts A Receipt event occurs each time an item is received at the return center. The item, quantity, and item condition attributes are captured during receiving and sent to the Order component to be used in return variance analysis and refund calculation. One receipt event is required for each unique combination of item, condition, and return order line. When a receipt event is processed, the following updates occur: A return detail entity is created to capture the item, quantity, and condition of the receipt. If the receipt was captured as a gift recipient return, then this data is saved on the return detail and will be used during the refund process. The received quantity moves from "Pending Return" to "Received" status. A receipt event can occur against a return order line, if a return order was created before the customer shipped the items. This is the case when a customer calls the call center to create a return, or a customer creates a return order in an online self-service returns portal. In this flow, the return Order Id and return Order Line Id are required on the receipt event interface. Note: Return Receipts are not allowed when the Return Verification Policy in Order Configuration is configured as Return Line. Return Verification Return Verification can be processed in two different modes. Refer to Return and Exchange Configurations for details Return order level verification: With the Return Order option, return order verification can be performed once for a return order line and one single return invoice will be generated once all the return lines are successfully verified. Return order line level verification: With the Return Line option, multiple return order line verifications are allowed up until full quantities. The system will trigger generation of return invoice for every return order line that has been completely verified. It may result in multiple return invoices generated for a single return order. Note: Retailers can choose only one Return Verification Policy, either Return Order or Return Line. If one policy is configured, sending return order event for the other verification policy is not supported. For example, if a retailer has configured a return verification policy as Return Order, sending a "LineVerification" return order event is restricted. Note: A return order event with EventTypeId=LineVerification does not generate a return order, whereas a return order event with EventTypeId=Verification does create a new return order. Return order level verification A verification event occurs when the return center indicates that receiving is complete. After a receipt event has been generated for all items, a verification event is generated. The verification message is used to trigger return variance analysis in the Order component. When a verification event is processed, the following updates occur: Return detail entities will be updated, if the verified quantity differs from the received quantity. Return detail entities can be created, if no receipt events were received. The verified quantity moves from "Received" to "Returned" status. To indicate that packages were lost by the carrier and no items were received for the return order, zero (0) quantity verification can be interfaced. This has significant bearing if a return invoice was generated on carrier scanned status and the system has to be informed that the items expected to be received were not at all received, which will trigger generation of charge back invoice by assuming that the return invoice generated and refunded for all the quantities of all the return lines with isReceiptExpected = true has to be reversed back. When a zero (0) quantity verification is sent, Manhattan Active® Order Management will update the order line quantity to zero and the line moves to canceled status. Return order line level verification A "LineVerification" event occurs as and when the return center verifies the return items - either partial quantity or full quantity. The "LineVerification" event can be generated multiple times for the same return line. The verification message is used to trigger return variance analysis in the Order component. When a "LineVerification" event is processed, the following updates occur: Return detail entities will be created, if the verified quantity differs from the return order line quantity. The verified quantity moves from "Received" to "Returned" status. Note: The LineVerification ReturnOrderEvent will not trigger the creation of a return order (blind order). Return order event "CarrierScanned" is not supported for return order line level verification. To indicate that packages were lost by the carrier and no items were received for the return order line, zero (0) quantity line verification can be interfaced. When a zero (0) quantity line verification is sent, the 0 quantity is treated as quantity variance and the order line is put on hold. Refer here to resolve the variances. Receipt & Verification Examples Return Order level verification: Click here for Receipt & Verification Examples # Original Order & Return Order Receipt Event(s) Verification Event(s) 1 A customer's original shipment exists with OrderId = 01 and: OrderLineId = 1, ItemId = itemA, Quantity = 2, Status = Shipped. A return order exists with OrderId = 02 and: OrderLineId = 2, ItemId = itemA, Quantity = 1, Status = Pending Return, ParentOrderLineId = 1, ParentOrderId = 01. On the parent order 01, 1 unit is moved from Fulfilled to Returned status, and the returnable quantity is updated to 1. When a receipt occurs against ParentOrderId = 01 for 1 unit of item A in Fair condition, then a return detail is created with: Return Detail: ItemId = item A, Quantity = 1, ItemCondition = Fair 1 unit on return line moves from Pending Return to Received When a verification event occurs against ParentOrderId = 01 for 1 unit of item A in Fair condition, then 1 unit on the return line moves from Received to Returned. 2 A customer's original shipment exists with OrderId = 01 and: OrderLineId = 1, ItemId = itemA, Quantity = 2, Status = Shipped OrderLineId = 2, ItemId = itemB, Quantity = 2, Status = Shipped. A return order exists with OrderId = 02 and: OrderLineId = 3, ItemId = itemA, Quantity = 1, Status = Pending Return, ParentOrderLineId = 1, ParentOrderId = 01. OrderLineId = 4, ItemId = itemB, Quantity = 2, Status = Pending Return, ParentOrderLineId = 2, ParentOrderId = 01. On the parent order 01, 3 units are moved from Fulfilled to Pending Return status, and the returnable quantity is updated from 4 to 1. When a receipt occurs against returnOrderLineId = 3 for 1 unit of itemA in Fair condition, then a return detail is created with: Return Detail: ItemId = itemA, Quantity = 1, ItemCondition = Fair 1 unit on returnOrderLineId = 3 moves from Pending Return to Received When a second receipt occurs against returnOrderLineId = 4 for 1 unit of itemB in Fair condition, then a return detail is created with: Return Detail: ItemId = itemB, Quantity = 1, ItemCondition = Fair 1 unit on returnOrderLineId = 4 moves from Pending Return to Received When a verification event occurs with: ReturnOrderLineId = 3, 1 unit of itemA in Fair condition ReturnOrderLineId = 4, 2 units of itemB in Fair condition Then the following updates occur: 1 unit on returnOrderLineId = 3 moves from Received to Verified. The existing return detail on returnOrderLineId = 4 is updated to have quantity = 2. 1 unit on returnOrderLineId = 4 moves from Received to Verified. 1 unit on returnOrderLineId = 4 moves from Pending Return to Verified. Return Order line level verification: LineVerificationSample # Original Order & Return Order Receipt Event(s) Verification Event(s) LineVerification Event(s) 1 A customer's original shipment exists with OrderId = 01 and: OrderLineId = 1, ItemId = itemA, Quantity = 2, Status = Shipped. OrderLineId = 2, ItemId = itemB, Quantity = 3, Status = Shipped. A return order exists with OrderId = 02 and: OrderLineId = R-1, ItemId = itemA, Quantity = 1, Status = Pending Return, ParentOrderLineId = 1, ParentOrderId = 01. OrderLineId = R-2, ItemId = itemB, Quantity = 2, Status = Pending Return, ParentOrderLineId = 2, ParentOrderId = 01. On the parent order 01: OrderLineId = 1: 1 unit is moved from Fulfilled to Returned status, and the returnable quantity is updated to 1. OrderLineId = 2: 2 unit is moved from Fulfilled to Returned status, and the returnable quantity is updated to 1. Not Applicable Not Applicable When the first LineVerification event occurs against OrderId = 02 OrderLineId = R-1 ItemId = itemA, Quantity = 1 Fair condition, then 1 unit on the return line moves from Pending Return to Returned and a Return Invoice will be generated. When a second LineVerification event occurs against OrderId = 02 OrderLineId = R-2 ItemId = itemB, Quantity = 1 Fair condition, then 1 unit on the return line moves from Pending Return to Returned and the return line will be on Variance Hold for Quantity variance. Return Invoice will not be generated When the third LineVerification event occurs against OrderId = 02 OrderLineId = R-2 ItemId = itemB, Quantity = 1 Fair condition, then 1 unit on the return line moves from Pending Return to Returned and the variance hold will be removed automatically, and a Return Invoice will be generated. Sample APIs  for Receipt and verification (/order/api/order/returnOrderEvent/receive) Click here to view sample receipt API{ "ExternalMessageId": "54321", "ReturnOrderEvent": [{ "ExternalMessageId": "54321", "EventTypeId": "Reciept", "ReturnOrderLineId": "1", "ReturnOrderId": "CC10272", "ParentOrderId": "CC10271", "ItemId": "Tops-12238-White-L", "Quantity": "1", "UOM": "U", "ReceivedItemCondition": { "ItemConditionId":"New" }, "IsGiftReturn": false, "ReturnDate": "2016-05-30T00:00:00", "ReturnType": { "ReturnTypeId": "Refund" } }  ] } Return order event - Verification{ "ExternalMessageId": "121220899601611856", "ReturnOrderEvent": [{ "ExternalMessageId": "121220869961105186", "EventTypeId": "Verification", "ReturnOrderLineId": "1", "ReturnOrderId": "CC000-35256350958891351223737", "ParentOrderId": "CC10249", "ItemId": "Tops-19691-Blue-L", "Quantity": "1", "UOM": "U", "ReceivedItemCondition": { "ItemConditionId":"New" }, "Extended": {}, "IsGiftReturn": false, "ReturnDate": "2016-05-30T00:00:00", "ReturnType": { "ReturnTypeId": "Refund" } }  ] } LineVerification{ "ExternalMessageId": "121220899601611856", "ReturnOrderEvent": [{ "ExternalMessageId": "121220869961105186", "EventTypeId": "LineVerification", "ReturnOrderLineId": "1", "ReturnOrderId": "CC000-35256350958891351223737", "ParentOrderId": "CC10249", "ItemId": "Tops-19691-Blue-L", "Quantity": "1", "UOM": "U", "ReceivedItemCondition": { "ItemConditionId":"New" }, "Extended": {}, "IsGiftReturn": false, "ReturnDate": "2016-05-30T00:00:00", "ReturnType": { "ReturnTypeId": "Refund" } }  ] } Note: To map additional attributes from the return receipt and verification messages to save on the order, the Extended section of the return event interface can be used to map extended fields to extended attributes that have been added on the Return Detail entity. Automated Returns If the customer does not alert the seller of the return shipment, but instead uses a retailer-provided shipping label to ship return items, then the return order is created after the items are verified. In these scenarios, the receipt and verification events occur against the parent order, and the Order component searches the parent order to match the received item with the parent order lines. In this flow, the parent order Id is required on the return event interface. This flow is called an "automated return". When a receipt event occurs in the automated flow, no updates are made, and no return order is created. When a verification event occurs, a return order is created with return lines and return details based on the verification event data. The following updates occur on verification: A return order line is created. Against the order line, a return detail is created for each unique receipt event to capture the details of what was actually received. The return detail quantity may be greater than the return order line quantity, if not all received quantity was eligible for return. Data is copied from the parent order and line to the return order and line using this data mapping. In addition, the following attributes are populated on the return order line: OrderId = Unique value determined using configured orderId generation logic OrderLineId = Next-up integer beginning with 1 for the first line created, then 2, 3, etc. Quantity = Maximum(return order event quantity, eligible return quantity on parent order line) ItemId = ItemId from parent order line and receipt event, assuming that they match If itemId on the verification does not match any parent order lines, an "unexpected item" return line is created on the return order. (refer to variances page to understand how to resolve item variances) UOM = UOM from parent order line IsReturn = true DeliveryMethod = ShipToReturnCenter ParentOrderId = OrderId of parent order ParentOrderLineId = OrderLineId of parent order line If no "returnType" is provided in the return event interface, then a return line is created with returnType = "Refund", and the customer is issued a refund for the return item(s). If "returnType" is specified as "Even Exchange" in the return event interface, then a return line is created with returnType = "Even Exchange", and an even exchange line is created in addition to the return line. The even exchange line is created with the same parentOrderLineId as the return line. The even exchange line is priced based on the exchange configuration. See the Exchange Pricing section on the Exchanges page for details. Note: If the Return Verification Policy is Return Line, then MA Order Management System does not support Automated Returns creation. Click here for Automated Receipt Examples # Original Order Receipt Event(s) Verification Event(s) 1 A customer's original shipment exists with OrderId = 01, OrderLineId = 1, ItemId = itemA, Quantity = 2, Status = Shipped. When a receipt occurs against parentOrderId = 01 for 1 unit of itemA, then no updates occur When a verification event occurs against parentOrderId = 01 for 1 unit of item A in Fair condition, then a return order is created with: ReturnOrderLineId = 1, ItemId = itemA, Quantity = 1, Status = Returned, ParentOrderLineId = L1 Return Detail: ItemId = itemA, Quantity = 1, ItemCondition = Fair On the parent order 01, 1 unit is moved from Fulfilled to Returned status, and the returnable quantity is updated to 1. 2 A customer's original shipment exists with OrderId = 01, OrderLineId = L1, ItemId = itemA, Quantity = 2, Status = Shipped. When a receipt occurs against parentOrderId = 01 for 3 units of item A, then no updates occur. When a verification event occurs against parentOrderId = 01 for 3 units of item A in Fair condition, then a return order is created with: ReturnOrderLineId = 1, ItemId = itemA, Quantity = 2, Status = Returned, ParentOrderLineId = L1 Return Detail: ItemId = itemA, Quantity = 3, ItemCondition = Fair On the parent order 01, 2 units are moved from Fulfilled to Returned status, and the returnable quantity is updated to 0. 3 A customer's original shipment exists with OrderId = 01, OrderLineId = L1, ItemId = itemA, Quantity = 2, Status = Shipped, OrderLineId = L2, ItemId = itemB, Quantity = 2, Status = Shipped. When a receipt occurs against parentOrderId = 01 for 2 units of item A and 1 unit of item B, then no updates occur. When a verification event occurs against parentOrderId = 01 for 2 units of item A in Fair condition and 1 unit of item B in Fair condition, then a return order is created with: ReturnOrderLineId = 1, ItemId = itemA, Quantity = 2, Status = Returned, ParentOrderLineId = L1 Return Detail: ItemId = itemA, Quantity = 2, ItemCondition = Fair ReturnOrderLineId = 1, ItemId = itemB, Quantity = 1, Status = Returned, ParentOrderLineId = L2 Return Detail: ItemId = itemB, Quantity = 1, ItemCondition = Fair On the parent order 01, 2 units are moved from Fulfilled to Returned status for L1, and 1 unit is moved from Fulfilled to Returned status for L2. 4 A customer's original shipment exists with OrderId = 01, OrderLineId = L1, ItemId = itemA, Quantity = 2, Status = Shipped. When a receipt occurs against parentOrderId = 01 for 1 unit of item with returnType = Even Exchange in Fair condition, then no updates occur. When a receipt occurs against parentOrderId = 01 for 1 unit of item A with returnType = Even Exchange,  in Fair condition, then a return order is created with: ReturnOrderLineId = 1, ItemId = itemA, Quantity = 1, Status = Returned, ParentOrderLineId = L1 Return Detail: ItemId = itemA, Quantity = 1, ItemCondition = Fair EvenExchangeOrderLineId = 2, ItemId = itemA, Quantity = 1, ParentOrderLineId = L1 On the parent order 01, 1 unit is moved from Fulfilled to Returned status for L1, and the returnable quantity is updated to 1. Automated Return order event - Receipt (Sample API){ "ExternalMessageId": "121220899601611856", "ReturnOrderEvent": [{ "ExternalMessageId": "121220869961105186", "EventTypeId": "Receipt", "ParentOrderId": "CC10249", "ItemId": "Tops-19691-Blue-L", "Quantity": "1", "UOM": "U", "ReceivedItemCondition": { "ItemConditionId":"New" }, "IsGiftReturn": false, "ReturnDate": "2016-05-30T00:00:00", "ReturnType": { "ReturnTypeId": "Refund" } }  ] } Automated Return order event - Verification (Sample API){ "ExternalMessageId": "121220", "ReturnOrderEvent": [{ "ExternalMessageId": "121220", "EventTypeId": "Verification", "ParentOrderId": "CC10249", "ItemId": "Tops-19691-Blue-L", "Quantity": "1", "UOM": "U", "ReceivedItemCondition": { "ItemConditionId":"New" }, "IsGiftReturn": false, "ReturnDate": "2016-05-30T00:00:00", "ReturnType": { "ReturnTypeId": "Refund" } }  ] } The return order event "CarrierScanned" is not supported for automated returns. Return ASN Generation In the call center or self-service return flows, an ASN can be sent from the Order component to the WMS receiving center by translating the publish order message in the integration layer. In automated return flows, an ASN can be created by the WMS system if the return package shows up and no ASN exists. Another option for automated return flows is to subscribe to the carrier feed, which generates a message with the return tracking number or order Id upon scanning a return package. The carrier feed is generated when a return package is picked up by the carrier and is confirmed to be in route to the return center. This flow can be used by retailers who provide return shipping labels in their outbound customer shipments. When the carrier scan occurs, an external system can call the Order component to search for an order by the return tracking number. The Get Order By Return Tracking Number API takes an input return tracking number and searches across orders to find a fulfillment detail that was shipped with the corresponding return tracking number. When a fulfillment detail is identified, the web service responds with a copy of the entire order. An external system or the integration layer can translate the order into a return ASN and route it to the return center. For example, if a customer orders an item online but wishes to return the item, then the customer uses the label provided in the package to ship the return item back to the retailer. When the customer drops the package off with the carrier, the carrier scans the return shipping label and generates a message which gets routed to the Order component to search for orders by the return tracking number. When the order is found, an external system translates the order into an ASN for the return center to receive against. No ASN object is stored in the Order component; ASNs are stored in the execution system (WMS system) and are translated into return events so that the Order component can subscribe to return updates. Return Line Cancellations Return line cancellations are permitted until any quantity on the line is in "Returned" status, which is based on the order modification configuration. When a return line is canceled, the following updates occur: The return line quantity moves to "Canceled" status The parent line quantity moves from "Returned" back to "Fulfilled", increasing the returnableQuantity Any header charges, taxes, and discounts associated with the line are canceled or prorated against remaining return lines Return credit is moved from the return order back to the parent order Any even exchange lines with a matching parentOrderLineId are canceled, provided they are in less than "Released" status (or the status configured in the order configuration) An updated return ASN can be generated from publish order message to alert the return receiving center that the return order has been canceled Return Order Cancellations Return order cancellations are permitted based on order modification configurations. When a return order is canceled, the return order status is moved to 'canceled' status. Post return order cancellation, the updates are similar to the process mentioned above in the return line cancellations. When a customer order is tracked for delivered status, on canceling the return order, out of the base flow, the customer order moves to fulfilled status. Upon cancellation, to change the customer order to move to a status other than the fulfilled status (Status-7000), the drop status should be changed in the pipeline. This can be done by: 1. Find the pipeline used - pipelineid in order line 2. In DropStatusDetermination change the drop status to required status 3. Save the pipeline using system permission. { "FromStatus": "8000", "ComponentId": "Order", "ServiceId": "cancelReturn", "IntendedDropStatus": "7000", "Sequence": 1, "ConditionText": null, "DropStatus": "7000" }, Note: There can be only one Drop status defined at a time. Once the drop status is configured on cancellation of the return order, the customer order will always drop to this defined status only, irrespective of the status the original customer order was in before canceling the return order. For example, if the drop status is set to Fulfilled (7000) as shown in the above example and a customer order that is in delivered or fulfilled status has a return order created and canceled, the customer order will always move to Fulfilled status only and not go back to delivered status, since the pipeline has the drop status as Fulfilled (7000). Similarly, if the pipeline is modified to have the drop status as delivered (7500), then the customer order will always move to delivered status when the return order is canceled. Canceling Aged & Abandoned Returns Abandoned and aged returns can exist for multiple reasons: a customer abandoning a return in self-service before confirming it, CSRs creating a return but not confirming it, or technical issues in return label generation. These unconfirmed return orders can be canceled in two ways: By a CSR, if the cancellations are urgent or a customer is on the phone By a scheduled agent (Custom), which picks up unconfirmed return orders older than X days and cancels them: How to configure cancellation job for unconfirmed returnsThis is an example of what the agent to cancel aged, unconfirmed returns might look like. The query and frequency (cronSchedule) can be tailored to the business need. Please note that this agent is not provided out of the box, and the extension handler and cancelation method need to be created as a custom process. POST /order/api/batch/agent { "name": "CancelPendingReturnScheduler", "cronSchedule": "0 0/15 0 ? * * *", "query": "(MinReturnStatusId = 11000 AND IsConfirmed = false AND UpdatedTimestamp <= currentTime(-24h))", "handlerName": "CancelOrderExtensionHandler", "entity": "Order", "queryType": "Rest", "queryLimit": 250, "MessageTypeMode": "DEDICATED_MESSAGE_TYPE", "MessageType": "cancelOrder-AgentJob" } Currently, no base job is available to cancel return orders automatically. However, it is possible to create a return order cancellations scheduler with a custom effort. Both the job and the query will need to be created and tailored to the project needs. Modification rules on order configuration for return lines will also need to be reviewed with enhanced cancelation capabilities. Process Return Processing a return order forces all return order quantities to move to "Returned" status. The purpose of this is to expedite a refund or an exchange shipment, in scenarios where some quantity is not yet in "Returned" status. For example, if a valued customer's return line is in "Pending Return" status, but insists that it was shipped back 2 weeks ago, then customer care can process the return to appease the customer. When all return quantities move to "Returned" status, a return invoice is created and exchange line holds are removed, if any. The Process Return Order API can be used to initiate this action. Configuration Return Order Type Configuration The order type of return orders is populated as follows, for each channel:: For automated returns/exchanges, which are first created upon receiving an ASN verification message from the return center/DC, the order type is populated based on configuration in the Order Parameters UI > Default Return Order Type. Returns/exchanges created in the contact center use the Call Center Configuration > Default Order Type. Returns/exchanges in Digital Self-Service use the order type defined in Self-Service Configuration > Return Order Type. Returns/exchanges imported from third party order capture systems (e.g. home-grown or third-party self-service applications) need order type populated on import. Returnable Quantity Calculation & Configuration The order line ReturnableQuantity, which is used to determine if any quantity is eligible for return, is calculated as the sum of quantity greater than or equal to the minimum status defined as shipped and less than or equal to the maximum status defined as delivered. Configure the Minimum Status Eligible for Return and the Maximum Status Eligible for Return in the Returns & Exchanges section of the Order Configuration UI. The default configuration is as follows: If the delivered status is not tracked and the maximum status is set as fulfilled, the order execution pipeline is as follows: If custom statuses are added to the order execution pipeline, then the configuration can be modified. Click here for Example with Custom Status in Return Configuration Auto Verification If the Return Invoice configuration is configured for generating a return invoice on Carrier Scanned status, there may be a scenario wherein a return invoice is created for a return order and the refund processed on the carrier scanned status. But it may so happen that the return lines are never verified because of various reasons, like packages lost by the carrier in transit etc. In such cases, the return order will be in limbo without reaching its terminal status. In such cases, the retailer may configure - DaysForAutoVerification - so that the system automatically creates return order verification for all the return lines with isReceiptExpected = true and all the quantities of the return line in the carrier scanned status (14000) and process it automatically after the configured number of days have elapsed from the date of creation of return invoice on carrier scanned status. Note: Use the below API to configure auto verification. Currently, UI is not available for this configuration. {{url}}/order/api/order/orderConfig/save { "ReturnConfig": { "DaysForAutoVerification": 180 }, "Description": "Order configuration for Ecom Orders", "OrderConfigId": "EcommConfig" } Currently, charge back is not supported by the system for auto verification. The current behavior only supports accepting the refund and closing the return order lines by automatically verifying the return line quantities without any intervention from the return center. Stocks are not updated when the system verifies the return lines automatically. This process is irreversible once done. Receipt Not Expected Approval For each return line where the receipt is not expected, the line needs to be resolved by either manual or automatic approval. The Auto Approve Receipt Not Expected setting indicates whether manual or automatic approval is used for return order lines when the customer is not shipping back the item. Configure this parameter in the Returns & Exchanges section of the Order Configuration UI. Manual approval requires a customer care representative to use the call center returns module to 'Approve' each return lie. When a return line is created with receipt not expected and auto-approval is disabled, then the return line quantity moves to Pending Approval status. When a user approves the return line, the return line quantity moves to Returned status, and invoicing is initiated. Automatic approval requires no manual intervention. When a return line is created with receipt not expected and auto-approval is enabled, then the return line quantity moves to Returned status and the invoicing is initiated. Return can be initiated from the UI or using an API. Refer to the Rest API's and user exit page to find the API that can be used to approve a return line when the receipt of a returned item is not expected and the setting to auto-approve is disabled. When a return line is created with isReceiptExpected = false, the line quantity moves to Pending Approval status. After a user approves the line, the quantity moves to Returned Status. Return Age Policy The system will not accept returns that exceed the return age policy, which is defined in the Days for Eligible Return column on the Order Configuration UI (in the Returns & Exchanges section), unless the user has permission to override the return age policy. For lines with the delivery method 'Store Sale', the age is calculated from the order line creation date; for all the other delivery methods, the age is based on the fulfillment or delivered date of the last unit. For example, If the Return Age Policy has been configured for 90 days from the Shipped Date and Store Sales has been created on the 1st of October, it will be eligible to return until 30th December. If Ship To Home has been created on the 1st of October and was shipped on 6th of October, it will be eligible to return until 6th of January. If the Return Age Policy has been configured for 90 days from the Delivered Date and Store Sales has been created on the 1st of October, it will be eligible to return until 30th December. If Ship To Home has been created on the 1st of October, is shipped on 6th of October, and delivered on 7th of October, it will be eligible to return until 7th of January. If there are multiple delivered dates for a given order line, then the latest delivered date will be honored. If there is no delivered date available, then the return age policy will honor the shipped date. Configure the Days for Eligible Return in the Returns & Exchanges section of the Order Configuration UI. Return Match The Return Match Service enables POS or any third-party return capture system to query the Order component for returnable items and quantities based on input items and orders. For example, POS uses this API in the "seamless" returns flow, where a user can scan any combination of receipts (order ID) and items(Item ID) to initiate returns. When the Return Match Service is used to match items to orders and an item is found on multiple orders(or order lines), then the tiebreaker criteria can be configured based on price and/or age. Configure the "Match returns items to Order" in the Returns & Exchanges section of the Order Configuration UI for price or age or both.  The price criteria can be set to the highest or lowest to match the items to the order line having the highest selling price or lowest selling price. Age Criteria can be set to the oldest or newest to match the items with the oldest order or newest order. When both are used, the criteria on price is used and if that results in a tie, age is used to find the right order line. Return Match by Price Rank Price Rank can be configured if a retailer wants to use a particular rank when multiple order lines are involved for the same item returned. This is more common during promotional sales where multiple units of the item are sold at different prices. Return Shipping and Handling Return S&H is calculated using the Shipping & Handling Component. Refer to the Shipping and Handling Charges guide for details on the return S&H configuration. Return Reason Codes The following types of reason codes need to be configured to enable return cancellations, approvals, and processing of return orders. The reasons configured for these reason types are available in the drop-down list that is displayed to the user when a cancellation, approval, or process return occurs. Configure reason codes in the Reason Codes UI for the following reason types Return Reason Return Approval Cancel Return Process Return Item Conditions Item conditions are used to physically describe the condition in which the customer says they are returning the item. Item conditions can optionally be used to apply return charges, for example, when the item is damaged. When a call center return is received at the DC, the received item condition can be compared to the expected item condition and used to flag a variance on the return. Configure item conditions in the Item Conditions UI. Return Fees Return fees charges, such as restocking or S&H, can be imported or calculated upon order creation. Return S&H is calculated using the Shipping & Handling Component, while all other return fees are calculated using a rule-based fee configuration in the Order Component. Return fees can be applied to the order header or order lines and are identified when the isReturnCharge attribute is true. If a header charge is applied and isReturnCharge = true, then that charge is prorated across return lines only. When return fees are included in the invoice tax request, they are sent to the tax engine with taxIncluded = true. This is because no quotation tax call is made for return orders, which means all return charges are assumed to be inclusive of tax. For order level return fees, select a fee type to indicate whether the fee is flat or percentage-based. Configure return fees in the Order Return Fee section of the Order Configuration UI. If fee type is flat, then a charge detail is saved against the Order with charge total = fee amount If fee type is percentage, then a charge detail is saved against the order with charge total = percentage amount * Sum of return lines subtotal For return line-level fees, select a fee type to indicate whether the fee is flat, per quantity, or percentage-based. Configure return fees in the Line Return Fee section of the Order Configuration UI. If fee type is flat, then a charge detail is saved against the return line with charge total = fee amount If fee type is per quantity, then a charge detail is saved against the return line with charge total = fee amount * order line quantity If fee type is percentage, then a charge detail is saved against the return line with charge total = percentage amount * order line subtotal If an order or line is eligible for multiple return fee templates, then the template for which the maximum number of filter attributes matches will be applied. If the same number of filter attributes match, then one fee is applied based on the following sequence of priority: Order Level: order type, selling channel, customer type. If a fee uses order type in the filter, then it gets the highest priority, while a fee that uses only customer type has the least priority. See below example to see how orders are matched with return fee configuration in case or multiple condition matching. Line Level: return reason, item condition, return type. If a fee uses return reason in the filter, then it gets the highest priority, while a fee that uses only return type has the least priority. Example of priority scenarios for order level return fees. Orders and return fee configuration will be matched with the below priority: orderType && sellingChannel && customerType -> the order will first match with a return fee configuration that matches the 3 order properties. orderType && sellingChannel -> If rule 1 cannot be matched, the order will match with a return fee configuration that matches order type and selling channel. orderType && customerType -> If rule 2 cannot be matched, the order will match with a return fee configuration that matches order type and customer type. sellingChannel && customerType -> If rule 3 cannot be matched, the order will match with a return fee configuration that matches selling channel and customer type. orderType -> If rule 4 cannot be matched, the order will match with a return fee configuration that matches the order type. sellingChannel -> If rule 5 cannot be matched, the order will match with a return fee configuration that matches the selling channel customerType -> If rule 6 cannot be matched, the order will match with a return fee configuration that matches the customerType For item-level return fees, select a fee type to indicate whether the fee is flat, per quantity, or percentage-based. Configure return fees in the Return Fee section of the Item Price UI If fee type is flat, then a charge detail is saved against the return line with charge total = fee amount If fee type is per quantity, then a charge detail is saved against the return line with charge total = fee amount * order line quantity If fee type is percentage, then a charge detail is saved against the return line with charge total = percentage amount * order line subtotal To customize the logic to apply return fees at order-level, use the below UE Order:Order:UserExit:CalculateOrderReturnFee To customize the logic to apply return fees at order-line level, use the below UE Order:Order:UserExit:CalculateOrderLineReturnFee Note: It is not recommended to populate the line level fees in Header level User exit and vice versa. The reason being, if line level return fees are added in 'Order:Order:UserExit:CalculateOrderReturnFee' custom implementation, then the base will remove those line level fees when calculating the Order Return Fee the next time if it does not find matching return fees configured in the Order configuration UI. This does not apply to Return fees that were created with IsOverridden=true. Return Routing Optimization Enable "Return Routing Optimization" configuration in order parameters. Also, refer here to configure the reverse adaptive network to determine the optimal return center. Implementation Flavors Decide the Return Location based on the Return/Original Order attributes Requirement: How to select a single return location for a return order based on a series of custom rules. Implementation: Use the QuantityDetail::QuantityStatus::Increase Mod Type set to 11000 Status so that the input payload is the Return Order to achieve this requirement. Restocking fee based on time Requirement: How to add a restocking fee for items returned for a particular number of days after receipt. Implementation:   You can use Order:UserExit:CalculateOrderLineReturnFee UE for this requirement. Copy extended attributes from Parent order to Return order Requirement: How to copy extended attributes from parent order to return order? Implementation: You can use the Order:Order:UserExit:PopulateAttributesInReturnLine UE to achieve this requirement. Create/Import a return order that is returned and refunded Requirement: How to create a return order that is already returned and refunded? In case of in-store return and refund. Implementation: You need to send ParentOrderPaymentMethod details to create a return credit on payment order and refund transaction on the return order Order: Payment.PaymentMethod: "ParentOrderPaymentMethod": [ { "ParentOrderId": "string", "ParentPaymentGroupId": "string", "ParentPaymentMethodId": "string", "Amount": "amount" } Capture the gift recipient's email before processing a refund for an automated return Requirement: How can a CSR capture the gift recipient's email address before the GC refund gets processed? Business Scenario: 1. The gift giver buys items for gift recipients (ship to home). Populates own email address on order. 2. The gift recipient returns the item to the warehouse as a blind return, IsGiftReturn=true. 3. MAO receives return verification, the refund is initiated to a new gift card. 4. The GC line should be put on hold so that a CSR can capture the gift recipient's email address before the GC refund gets processed. Implementation: 1. Parent order exists 2. Return verification event received with isGiftReturn = true 3. RO created with return item 4. Return invoice created and refund processed to new gift card > GC refund line added to the RO as line #2 i) As part of GC line addition, after the system forms the GC line, but before it’s persisted, you should hook into Order:Order:UserExit:PreCreateGiftCardLine ii)The UE input is the GC refund line - your custom logic adds a hold to this line and responds to the UE iii)The GC line is saved on the order on hold 5.CSR filters for these lines and adds gift recipient email, and then unholds the GC refund line 6.GC refund line gets released and fulfilled/refunded 7. Be sure to configure/test your release filter to ensure lines on hold won’t get released. Populate extended attributes for automated returns Requirement: For automated returns, if the DC is capturing extra data from the return packing slip (e.g. email to send a new gift card) that needs to be saved on the return line. How do I populate these extended attributes on the order when the return is created? Implementation: You can use the 'add return line' mod type to implement a mod type user exit, then add the custom logic in there. Creating custom statuses Requirement :  Track if the carrier scan was done Implementation : Consider using an extended attribute at the order line level to track if the carrier scan is completed or not and then a custom logic can be driven to process further by defining a custom mod type for this extended attribute. Evaluating Return from address Requirement : Determine if the address from where return is being placed is a military address. Implementation : "ReturnOrderLine::Add" and "ReturnOrderLine::ShipFromAddressId" modTypes can be utilized for this requirement Modify Return Fee charges post computation Requirement: Add a return reason code that charges a 10% restocking fee plus a $99.99 return delivery fee but not to exceed $250. Implementation: Use Order:Order:UserExit:PostCalculateReturnFee user exit and override the return fees. Third-party integration for return confirmation In the case of a third-party integration to confirm return orders in Manhattan Active® Omni, follow the below-mentioned steps: In the save order command router call, catch any exceptions from the third-party integration call and look for a specific error message. Based on third party response, decide whether to continue the flow if there are no errors or call save order again for return order with IsCancelled = true and set cancel reason if there are errors. If a third party rejects the return, check if auto-approve is enabled. If enabled, the return order should always have IsConfirmed = false. If the order is not eligible for confirmation, an error should be thrown with the message from user exit to prevent the return from being confirmed. The above steps will ensure the return order is canceled and update the quantity of the parent order accordingly, in case of any errors/reject. How to Capture the Return Date in Sales Posting Messages The ReturnDate field is typically used in automated return workflows, where a return order is triggered upon receiving a Return Verification Event to assess return eligibility. However, this attribute is not persistently stored. If the requirement is to include this date in the Sales Posting specifically in the message published for the return invoice, the recommended approach is as follows: Populate the return date in the extended section of the return order event, which should be mapped to a custom (extended) attribute under order.returnDetail. When the return invoice is generated and the corresponding Sales Posting message is published, this extended attribute will be included, effectively capturing the actual date the return was received. Related Articles ExchangesReturn Labels Return VarianceReturn Label Tracking Returns Shipped to Distribution CenterTroubleshooting Returns & ExchangesREST APIs and User ExitsReturns Overview