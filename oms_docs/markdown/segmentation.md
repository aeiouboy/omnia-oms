# Segmentation

**Permalink:** segmentation
**Path:** Manhattan Active® Omni/Order Management/Process & Configuration Guides/Enterprise Inventory/Inventory/Segmentation
**Content Length:** 60,372 characters
**Scraped:** 2025-08-09T21:54:00.485129

---

Home ››Manhattan Active® Omni››Order Management››Process & Configuration Guides››Enterprise Inventory››Inventory ››Segmentation Segmentation Previous | Next OverviewHow Segmentation Works?Segment Strategy - PercentageSegment Strategy - PriorityUse Authorized SegmentsIn Priority TemplateIn Percentage TemplateRe-segmentationProcess FlowExamples Segment TransferProcess FlowExamplesSegmentation on Future SupplyInventory Reduction on Ship/Short EventsConfigurationConfiguring SegmentationImplementation FlavorsRelated Articles Overview Inventory segmentation is the virtual division of inventory within the same facility based on logical groups. The logical group often signifies different business channels, or the different mediums in which a retailer can sell their product. For example, a retailer with retail stores and a Customer site may configure a retail segment and a Customer segment. Similarly, an online retailer may configure a Customer web store segment and Customer marketplace segment. This is done in order to ensure that each channel has sufficient inventory to satisfy demand. So, the inventory segment is a process to set aside a certain amount of inventory to cater the needs of different channels or groups. Segmentation serves the following business purposes Segmentation makes inventory planning and management easier. For example, the retailer/channel managers can adjust their inventory by transferring units between segments to better suit the inventory levels. Segmentation helps in understanding the market trends and allows retailers to react to it. The retailer may know the demand of an inventory by segments and based on the trend can adjust their target inventory levels and re-segment their inventory. Segmentation makes order promising more accurate. The segmented inventory helps in building an availability picture, which can be used to capture orders and provide realistic service levels to customers. Inventory managers know the inventory available by segment and can avoid over-promising in case the inventory falls short for a segment. Segmentation allows the retailers to manage the segmented inventory right from the inventory planning and procurement stage to stage when the inventory becomes on-hand. It allows the user to decide the affected segments in exception scenarios such as like over shipment, under-receipts, on-hand adjustment, etc. Note: Eligible Inventory for Segmentation: Typically, a location that serves multiple channels (such as a warehouse) can be segmented. Segmented inventory is maintained for a location if the location is configured to maintain inventory by segments. If configured, all inventories at the location are segmented. Only on-hand inventory can be segmented based on the below segment strategies. At this point, a segment can be assigned to a future supply when bridged in or assigned to a default segment How Segmentation Works? There are two types of Segment Strategy by which supply can be segmented. Percentage Priority Segment Strategy - Percentage Inventory gets divided in the same ratio based on the percentage allotted to that segment. For example, a retailer may configure 40% of inventory to retail stores and 60% to online sales. Assume inventory for Item A is 200 units in a facility. This inventory will be divided logically into 80 units for retail and 120 units for online. Refer to the section below for some examples. Segment Strategy Percentage ExampleScenario 1 : Consider a segment configuration(Customer = 50%, Retail = 30%, B2B = 20%). If the inventory is 200 units, then using the percentage strategy, inventory will be segmented as below: Segment Percentage Quantity Customer 50 100 Retail 30 60 B2B 20 40 Inventory Quantity (Negative) Scenario 2 : Consider a segment configuration (Customer = 50%, Retail = 30%, B2B = 20%). If the inventory is -10 units, then using the percentage strategy, inventory will be segmented as below: Segment Percentage Segmented Quantity Adjusted Inventory Customer 50 100 100-5=95 Retail 30 60 60-3=57 B2B 20 40 40-2 =38 Scenario 3 : Now, if there is no inventory in the customer segment and a negative adjustment of [-10] is performed, inventory will be segmented as below: Segment Percentage Segmented Quantity Adjusted inventory (new) Customer 50 0 0-5 = -5 ~ 0 (value cannot be negative) Retail 30 60 60 - 3 - 5*(30/(30+20)) = 54 B2B 20 40 40 -2 - 5*(20/(30+20)) = 36.3 ~ = 36 Clearly, the negative inventory of the customer segment will be reduced from the other two segments in their respective percentage ratios. Scenario 4 : If the segmented quantity is as shown below and a negative adjustment of [-20] is performed, it will first reduce the positive quantities across segments till it reaches zero and will apply a % rule for the remaining quantities as per the segmentation rule. Segment Percentage Segmented Quantity Adjusted inventory (new) Customer 50 4 0-5 = -5 ~ 0 Retail 30 4 0 - 3 = -3 ~ 0 B2B 20 2 0 -2 = -2 ~0 Note: Values>=0.5 will be rounded to ceiling value 1 and values<0.5 to floor value 0. Segment Strategy - Priority Retailers can assign priority to each segment. The quantities assigned to the segments are in the same sequence of the priority defined. Once the highest priority quantity is satisfied, the next priority segment is considered. Refer to the section below to understand how segmentation happens for positive adjustment. Segment Strategy - Priority (Positive adjustment)Inventory Quantity (Positive) - Consider the on-hand segment configuration listed below. Segment Priority Customer 1 Retail 2 Wholesale 3 The segmented inventory for Item 1 and Location 1 is as below. Supply # Segment Quantity INV 1 Customer 10 INV 2 Retail 10 INV 3 Wholesale 10 An inventory event (adjustment) is sent for 10 units. The system picks the highest priority segment (Customer) and the adjusted inventory is completely assigned to it. Supply # Segment Quantity INV 1 Customer 20 INV 2 Retail 10 INV 3 Wholesale 10 Inventory Quantity (Negative) - In the case of negative quantity, segmentation starts from the lowest priority. Once the lowest priority quantity is satisfied, the next priority segment is considered. Three parses are performed to segment any negative quantities. Parse 1 - The system considers the allocated quantity against a supply record and reduces the supply quantity until it reaches the allocated quantity. Supply quantity is not reduced below the allocated quantity. If all the segments are complete and there are unassigned quantities left, move to parse 2. Parse 2 - In the second parse, the system reduces the supply quantity until it becomes zero (but does not consider the allocated quantity). If all the segments are complete and there are unassigned quantities left, move to parse 3. Parse 3 - The system reduces the supply quantity (against the lowest priority) until all unassigned quantities are used. Segment Strategy - Priority (Negative adjustment)Consider the below on-hand segment configuration Segment Priority Customer 1 Retail 2 Wholesale 3 Segmented inventory for Item 1 and Location 1 is as below Supply # Segment Quantity Allocated Quantity INV 1 Customer 10 7 INV 2 Retail 10 4 INV 3 Wholesale 10 2 Inventory Event (Adjustment) is sent for -25 units. First Parse: System considers the allocated quantity against a supply record and reduce the supply quantity based on it. Supply # Segment Quantity Allocated Quantity Un-assigned Quantity INV 3 Wholesale 2 2 25-8 = 17 INV 2 Retail 4 4 17-6=11 INV 1 Customer 7 7 11-3=8 Second Parse: System should not consider the allocated quantity and just reduce the supply quantity till it becomes zero Supply # Segment Quantity Allocated Quantity Un-assigned Quantity INV 3 Wholesale 0 2 8-2 = 6 INV 2 Retail 0 4 6-4 = 2 INV 1 Customer 5 7 0 Third Parse: (System goes for third parse in case the adjustment is sent more than available quantity - Say 35 units) Supply # Segment Quantity Allocated Quantity Un-assigned Quantity INV 3 Wholesale -5 2 0 INV 2 Retail 0 4 N/A INV 1 Customer 0 7 N/A Use Authorized Segments In case certain item/location combinations are not permitted to be in every segment in a segmentation template, for example, a wholesale-only not authorized to be in the Ecommerce segment, the "Use Authorized Segments" flag in the segmentation configuration can be used for both priority-type and percentage-type segmentation templates. Authorized segments can be created in two ways: Manually configured in the Authorized Segments UI (itemLocationSegment entity) Automatically created whenever a future supply event is sent with SegmentId is populated PO Create/Update/Receipt ASN Create/Update/Verify/Receipt In Priority Template If the "Use Authorized Segments" flag is true in the Segmentation Configuration, all positive on-hand supply adjustments without a SegmentId will be added to the top priority segment (according to the template), which is also found in the list of authorized segments for that item/location. If no authorized segments match the list of segments in the segmentation template, then the highest priority segment is selected, regardless if it is authorized or not. In Percentage Template If the 'Use Authorized Segments' box is selected in the Segmentation Configuration, the percentage rule is only applicable to the common segments between authorized segments and segments present in the Rule on fair share basic. The non-authorised segment will not be considered anymore. If no authorized segments exist for an item/location combination, then inventory segmentation will happen based on rule-based segment. Scenario-1: (Inventory event + 100 EA), two authorized segments Segment Percentage Segmented Quantity Authorized Segment New Quantity Comments Customer 50 0 Y 0+ Round( {50/(50+30)}*100) = Round (62.5) = 63 The delta quantity will be shared between authorized segments only. Retails 30 60 Y 60+37= 97 Benefits of rounding will go to higher segment %. B2B 20 40 N 40 Non-Authorised segment will be untouched Scenario-2: (Inventory event, Drop 150 EA) Segment Percentage Segmented Quantity Authorized Segment New Quantity Comments Customer 40 40 Y =-6 Retails 30 100 Y = -4 B2B 30 40 N 40 Non-Authorised segment will be untouched Note: If any customer is maintaining authorized segments, there should not be any inventory available in the non-authorised segment. If at all any quantity is present in the non-authorised segment, it is recommended to transfer those quantities to the corresponding segments based on the business need. Re-segmentation Rebuild Segmentation (also known as re-segmentation) is a process to rebuild the segmented on-hand inventory based on defined segmentation rules. There are different use cases where the channel managers/inventory managers may choose to rebuild their segmented inventory: Segmentation is introduced in an implementation and the inventory needs to be segmented for the first time. This is also known as 'First time segmentation'. A new sales channel has been introduced, and the inventory needs to be re-segmented to allot quantities to this new segment. Inventory managers are not confident about the existing segmented inventory positions and want to rebuild a portion of the segmented inventory. Re-segmentation can be performed only for Strategy – Percentage from Segmentation Configuration UI or REST API. Re-segmentation doesn't apply to Strategy – Priority. Re-segmentation (Rebuild Segmentation) logic considers the following factor into account - Re-segmentation is performed only against on hand supply record(s). Future supplies (ASN and PO) are not considered. Re-segmentation doesn't rebuild the units that are already allocated. Reducing value method algorithm (Strategy – Percentage) is used to determine the quantity to be assigned to a segment. When a new segment is introduced, or segmentation is performed for the first time, then the Re-segmentation process creates a new supply record(s). If a supply record(s) already exists and quantity is affected because of re-segmentation, the supply quantity is updated. Process Flow Resegmentation Process Examples Resegmentation - Examples Segment Transfer Segment transfer is a process of transferring on-hand inventory units between segments. For example, a retailer may choose to transfer inventory between segments based on requirements by channel or brands. Segment Transfer can be initiated via Segment Transfer UI and Supply Event API (TransactionType = SegmentTransfer). Segment transfer logic considers the following factor into account Segment transfer is performed only against on-hand supply record(s). Future supplies (ASN and PO) are not considered. Segment transfer doesn’t consider the units that are already allocated. Segment transfer considers only the supply types that are configured to allow segment transfer. For example, Supply Type “On Hand Unavailable” can be configured to not allow segment transfer. Segment transfer can be initiated for multiple segments at a single shot. For example, segment transfer can be initiated to transfer 10 units from “Wholesale” segment to “Customer” segment and 20 units from “Wholesale” segment to “Retail” segment in a single shot. Segment Transfer considers Segment priority while performing the transfer. For example, if the priority of “Customer” segment is more than “Retail” segment, then segment transfer is performed for the customer segment, followed by the retail segment. Segment Transfer also considers supply type priority while performing the transfer. For example, if the priority of Supply Type “On Hand Available” is more than “On Hand Available Soon” bucket, then segment transfer uses the units available in “On Hand Available” bucket, followed by “On Hand Available Soon”. As part of the segment transfer process, existing supply record quantity gets updated or a new supply record gets created. Note: When transferring or moving between segments, the quantity decrement begins with the segment of lower priority first and is then added to the corresponding segment in the new supply type. Refer to the sections below to understand how segment transfer works with some examples. Process Flow Segment Transfer Process Examples Segment Transfer ExamplesConsider the following configuration and Segment Transfer request Segment configuration Segment Priority Customer 1 Retail 2 Wholesale 3 Supply Type configuration: In the below configurations, supply types “On Hand Unavailable” , “Damaged” and “In-Transit” doesn’t play a role in segment transfer Supply Type Priority Allow Segment Transfer On Hand Available 1 True On Hand Available Soon 2 True On Hand Unavailable False Allocatable 3 True Damaged False In-Transit False Example 1: Requested Transfer quantity is less than the Available quantity Example 2: Requested Transfer quantity is more than the Available quantity Example 3: Requested Transfer quantity is more than the Available quantity Segmentation on Future Supply If a segment Id is passed on a future supply and On Receipt, then the inventory is segmented based on the segment Id present on the inventory supply. If no segment Id is passed on the receipt or ASN, the inventory is segmented based on the segment Id present on the parent supply. For example, ASN passed without a segment Id will consider the segment Id present on the PO. For this to work, the inventory parameter "HonorFutureSegmentId" needs to be enabled through API. This will be enabled by default for new customers. If segments on future inventory supplies are not to be honored, then they can be disabled through the same API by setting it to false. Segments passed on PO/ASN will be honored over segment configurations present when the inventory parameter is enabled. If the inventory parameter is enabled and no segment is passed, then the On Hand supply will continue to segment inventory based on the existing configuration. Inventory Parameter Honor Future Segment IdPost {{url}}/inventory/api/inventory/inventoryParameters/save { "InventoryParametersId": "defaultInventoryParameters", "HonorFutureSegmentId": true } Note: Changing segment ID on PO/ASN is not recommended as this keeps the original supply open and duplicates the inventory since the changed supply will have its own record. Inventory Reduction on Ship/Short Events If an order is shipped from a segmented supply, the quantity is decreased from the selected segment. This functionality can be enabled by setting "HonorAllocationsOnShip" as true in Inventoryfeaturerollout by logging in as system admin. Sample API for inventory feature rollout Get Inventory Feature RolloutGet {{url}}/inventory/api/inventory/featureRollout { "InventoryRolloutId": "1", "EnablePublishReservationChange": true } Post Inventory Feature RolloutPost {{url}}/inventory/api/inventory/featureRollout/save { "Messages": null, "ProfileId": "systemAugmentable", "UpdatedTimestamp": "2022-11-07T05:11:28.142", "EnableHotSku": false, "CreatedBy": "seeddata-importer", "CreatedTimestamp": "2022-11-07T05:11:28.142", "EnablePublishReservationChange": false, "EnableContinuousAllocation": false, "Process": null, "EnableSyncTransferLite": false, "EnableRealTime": false, "UpdatedBy": "seeddata-importer", "HonorAllocationsOnShip": true, "ContextId": "9c8a2818-fa6a-4bec-b15b-e9077c4d41a0", "PK": "6677978881425118363", "FeatureRolloutId": "defaultFeatureRollout", "Unique_Identifier": "6677978881425118363__defaultFeatureRollout" } Configuration Configuring Segmentation Refer to the section below for more details on segmentation configuration. How to configure Segmentation Configuration Details Segments All supported segments in an implementation can be configured via Segments UI. Segment refers to the virtual division of the inventory within the same location based on logical groups. The logical group may signify the different channels. A segment's priority can also be defined against every segment. Also, a segment can be marked as default. Inventory will be assigned to a default segment if there are no matching segment configurations. Segment Configuration Segment configuration defines the strategy to segment the inventory. When a location maintains inventory by segments and on-hand inventory events (Adjustment, Movement or Sync) is processed, then the system looks for segment configuration to segment the quantity. Each segment configuration is given a rank, which represents the priority of the configuration. If a supply event attributes meet the rule condition of more than one template, then the template with the lowest numeric rank is selected. If a supply event attributes doesn't meet the rule condition, then the supply quantity is assigned to a default segment (configured in Segment UI). Segment configuration consists of the following elements: Rule Conditions: Segment configuration is selected based on the rule condition, which defines the eligibility criteria for supply. Only supply attributes can be used in the rule condition. For example, if a configuration had a rule condition with Location = "XYZ" then all supplies with location = "XYZ" would be eligible for that template. Segment strategy: Segmentation is defined based on the strategy. Strategy can be of type "Percentage" or "Priority". In Strategy Type - Percentage, a percentage is assigned against every applicable segment. The sum of all segments should be 100%. In Strategy Type - Priority, priority is assigned against every applicable segment. On Hand Transaction Type On Hand transaction type configuration helps to associate a segment configuration against an on-hand transaction type like adjustment, movement. This configuration is helpful when different transaction types have to use different segment configurations for the same location. Example) Transaction type "Adjustment" can use segment config 1 (strategy - percentage) and Transaction type "Movement" can use segment config 2 (strategy - priority). The segment rule condition is same for both configurations. When a supply event is processed, the highest ranked segment configuration associated with the transaction type is picked up for further processing (provided the supply event attributes match the rule condition). If there is no matching segment configuration, then the supply quantity is assigned to a default segment (configured in On Hand Transaction Type UI). Future Supply Segmentation on future supply events is possible by setting the inventory parameter "HonorFutureSegmentId" as true. With this configuration, if a segment Id is passed on a future supply and on Receipt, inventory is segmented based on the segment Id present on the inventory supply. If no segment Id is passed on the receipt or ASN, inventory is segmented based on the segment Id present on its parent reference. Inventory parameter, HonorFutureSegmentId can be configured only via API. Refer Segmentation on Future Supply for more details. Authorized Segment Authorized segments should be used in cases where the host system defines authorized segments at the PO/ASN level. If "Use Authorized Segments" is set to true in a Segmentation Template (of type priority), then the highest priority authorized segment will be selected for that item/location when supply events are received." Refer here for more details Implementation Flavors NA Related Articles Rest APIs & User ExitsPublishing InventoryHow to Configure Supply ProfilesReapportionment TroubleshootingInfinite InventoryHow Future Supply worksSupply SyncHow Supply WorksAudit & ArchiveOverview