# Emails 

**Permalink:** ce-email-interactions
**Path:** Manhattan Active® Omni/Customer Engagement/Process & Configuration Guides/Interactions/Emails 
**Content Length:** 65,296 characters
**Scraped:** 2025-08-09T22:00:57.384697

---

Home ››Manhattan Active® Omni››Customer Engagement››Process & Configuration Guides››Interactions ››Emails Emails EmailsOverviewManhattan Associates as Email Provider: SetupThird Party Email ProviderIncoming EmailsAutomatic Response to Incoming Emails Process FlowConfiguration for Automatic Response to Incoming EmailsIncoming Emails with AttachmentsOutgoing EmailsCompose Outgoing emailsOutgoing Email AttachmentsTesting: Sample Email Interaction JSON with AttachmentsEmail Case Linking Case TemplatesPre-Populate Dynamic Variables and Constants in Email Response TemplatesEvents and ExtensionsServicesTroubleshootingEmail Response TemplatesEmail Attachments Email Response Templates - Dynamic variablesImplementation Flavor(s)Overriding the 5 MB attachment size limit: Overview Within the Customer Engagement module, contact center agent can email back and forth with customers. Contact center agents can view incoming emails and attachments from customers, and they can also compose outgoing emails to customers with attachments and links. Emails are always linked to a case. Retailers may utilize Manhattan Associates as their CE email provider, minimizing the overhead and cost of employing a third party email provider. This service is available for customer engagement emails only; it is not available for transactional emails, such as order status updates and other emails not associated with a CE email address. Manhattan Associates as Email Provider: Setup Manhattan Associates utilizes an SMTP (Simple Mail Transfer Protocol) service to send, receive and manage emails for Customer Engagement. This ensures that email delivery is reliable and efficient; it also eliminates email costs associated with a third party email provider. There is a set up required to utilize Manhattan Associates as your email provider. Note: Before you begin, reach out to Manhattan Associates to obtain a subaccount and corresponding SMTP service API key for the customer stack. Third Party Email Provider Retailers currently utilizing a third party email provider may continue to seamlessly send and receive emails in CE using their provider. The third-party email provider/IT infrastructure is responsible for scanning all incoming emails to ensure they are safe and secure. Emails sent outbound from Customer Engagement should also be delivered to customers via integration with a third-party email provider. Manhattan Active® Omni publishes an outbound JSON with details including the subject, to-address, and partial body in HTML format, and the third-party provider is expected to add details such as HTML headers, footers, formatting, and marketing content, and deliver the email. Incoming Emails Contact center agents can receive emails from customers. These emails are saved in objects called "email interactions," which are always tied to a case. If a Case Id is specified in the email interaction, the email is linked to the existing case and a new case is not created. If Case Id is not specified, an open case is automatically created using the details in the email interaction. Note: If a third party email provider is utilized, emails should be sent to Customer Engagement via the Save Email API. Currently, there is no tool to demo inbound email integration from third-party email clients; inbound email testing and demos can be done via API. This step is not necessary if using Manhattan Associates as your email provider. Automatic Response to Incoming Emails Automatic responses for inbound emails allow retailers to provide instant confirmation of inbound support emails from their customers. This is a great way for retailers to instantly communicate with their customers that their inquiry is being processed and will receive a response from a contact center agent shortly. When an inbound email is imported to Manhattan Active® Omni, the below configuration will enable an Automatic Response to generate and let the customer know that their inbound support email has been received, and a respective case has been created. Process Flow Automatic Response to Incoming Emails - Process Flow Configuration for Automatic Response to Incoming Emails The below steps cover enabling this feature and configuration that can be done to meet automatic response requirements. These configurations include; profile purposes, case configuration to enable this automatic response behavior and updates that can be done to the email template if email component is being used to send email. 1.Copy the below profile purposes to the corresponding organization that is receiving the inbound support emails. Click here to see the copy profile API. cas::processDefintion eml::emailtemplate 2.  UI guide linked here to navigate to the Case Configuration UI. Users must have case configuration and master data facade grants provided here to configure automatic responses. Configuration will be sorted by sequence Id provided in ascending order, if any of the configurations have sequence Id equal to null, the null sequences will be placed at the end of the sequence. If there are multiple configurations within an organization, case origin is matched from the sorted sequence Id. Case details will then be published, and the email component will pick up the event to publish the outbound email template. Configurations can also be imported through case configuration API. Refer to case configuration API grants here. 3. Base will provide an Auto Response Template with a sample body in escaped JSON format. Retailers can configure their own email body in place of the email body provided by base. If a retailer would like to dynamically pull fields from the case entity into the email body they can do so by providing the dynamic values within the email body. Note: If retailer would like the email body to state specific case attributes like customer first name, last name, case Id and corresponding order number, all these details can be pulled from the created case. Fields can be dynamically pulled by providing ${(attributeName)!} around the attribute from the case entity. If the field is not required to publish the email then an exclamation point must be provided. The dynamically pulled fields that include an exclamation point will populate as a null string if that value is not available on the case, but if a value is required for the email to send, then no exclamation point is needed and email will not publish due to an error if that value is not present in the case entity, example ${attributeName}. To update email templates, the save email templates API here must be used. Incoming Emails with Attachments When a contact center agent clicks to open an attachment, the attachment is downloaded to their local system. They can open the file via their browser or from the downloaded files saved in the system. A third party email provider/IT infrastructure is responsible for ensuring the security and safety of incoming attachments before they are sent to Active Omni. Active Omni does not perform any virus scans, content validations, and other security processes. Once a file is downloaded to the user's local machine, their browser and system security/privacy settings should determine whether the downloaded file should be opened. Customer Engagement can receive email attachments in two ways: External URL (downloadable link) where the content is stored: A third party email provider should upload the attachment to a publicly-accessible file store and specify the endpoint  as a downloadable link in the incoming email as the 'Attachment URL.' Base 64-encoded content: Active Omni decodes the base 64-encoded content and stores it in a file store and updates the email interaction's 'Attachment Path' with this path on the cloud storage where the attachment is stored. While storing the attachment, the directory path to the cloud storage is always prefixed with the current date. If base 64-encoded content is sent, it is stored in the local file store by default. However, content can also be saved on an external object store such as Google Cloud Storage, Amazon S3, HTTP server, and so on which can be decided by the Underlying framework specifications. Note: There is no limit in object store on the total file storage that can be uploaded. Note: With respect to the storage location when the attachment is sent as content in base 64 format, ‘Storage’ here means the object store/local file store that is configured for the particular environment. The implementation is as such that it auto-scans the environment and picks the relevant object store type (i.e Google cloud storage when the application is hosted in GCP and S3 bucket when the application is hosted in AWS. The below diagram illustrates the flow when the customer sends an email with attachments and the retailer is using a third party email provider. When a contact center agent opens an email attachment in the Case Timeline UI or the Agent Inbox, the following logic is used to retrieve it. This logic applies when Manhattan Associates is the email provider or the retailer is using a third party email provider. If an incoming email has an attachment with both the external URL and the attachment path (base 64-encoded content) populated, then the system retrieves the file from the external URL. Validations for Incoming Email Attachments If any of the below validations for incoming email attachments fails, the email interaction and the attachment will be rejected. The validations are: The sum of the size of all attachments on an email must not be more than 5 MB. This 5MB restriction is on the base 64 file size and not the actual file size. Only the following attachment types are supported: PDF (.pdf), PNG (.png), JPEG (.jpeg), Text File (.txt) and Word Document (.doc, .docx) An incoming email interaction cannot have more than 20 attachments Attachment name cannot be null/empty Attachment content must be encoded in base 64 format, if included in the JSON If network issues occur or a file is corrupted, and an attachment cannot be uploaded, then the Save Email API throws an error: "Failed to upload file {0} in directory {1} to the object store." where {0} = file name, {1} = path in the object store for that file. Outgoing Emails Compose Outgoing emails contact center agents can send outbound emails using the compose email editor. This editor can be opened by accessing the Send Email Or Reply buttons on the case timeline. Refer to the Grants and Resources section below to find the respective permissions needed to work with the compose email editor. The compose email pop up also has an editor toolbar you can use to format your response with various options such as bold, Italicize, underline, and so on. This editor also supports adding inline images and adding hyperlinks in the email response body. To add hyperlinks, you have to highlight the text you want to convert to a link and click the hyperlink button on the toolbar, and then enter the URL you want the link to take you to. Outgoing Email Attachments While sending emails to customers, the contact center agent has an option to attach files in the outgoing emails. Clicking on the 'Attach files' button opens a pop-up to view files in the user's local drive, where they can select one file to attach. Selecting multiple files is not permitted. A user must click the attach button for every attachment. To view the 'Attach files' button, users need the grants defined below. When the user attaches a file, the attachment content is stored in the cloud storage and the 'Attachment Path' is populated in the email interaction. When the user clicks send, the email interaction is updated (see diagram below) and the outbound email interaction JSON can be published for an external system to deliver the email. When the contact center agent sends the email with attachments, the customer interaction component saves the attachment content in our cloud storage and updates the attachment path while saving the email interaction in the email component. Now, when an external system hits our email component to fetch this interaction, the email component will go back to this path and fetch the content from the cloud storage and send the attachment content along with the email to the external system. Removing Attachments To remove an attachment before sending an email, click the 'X' in the top-right corner of the attachment in the Attach Files section. On removal of the attachment, the delete API is called to delete the attachment and its corresponding content from the object-store/cloud storage. Note: As of now, there is no UI functionality available to delete the attachments from the interactions after it is sent. You can only remove the attachments using the delete API. Validations for Outbound Attachments Validations for outbound email attachments are: The sum of the size of all attachments on an email must not be more than 5 MB. Only the following attachment types are supported: PDF (.pdf), PNG (.png), JPEG (.jpeg), Text File (.txt) and Word Document (.doc, .docx) An incoming email interaction cannot have more than 20 attachments If an attachment does not satisfy one or more of the above validations, the user will see an appropriate error in the compose email pop-up and the attachment will not be allowed to upload. However, the text typed in the text area of the pop-up will be retained. Testing: Sample Email Interaction JSON with Attachments Sample Email Interaction JSON with Attachments { "EmailBody": "<div><p>Hello ,</p><p>I have processed your return of the single earring, and I have placed a separate web order for the replacement pair at 50% off. You should receive an email confirmation in a few moments. You will be able to track the exchange with a UPS tracking number when it is being shipped from our facility.</p><p>Please feel free to contact Customer Service at&nbsp;<u><a href='mailto:123-677-7111'>123-677-7111</a></u>&nbsp;or email&nbsp;<u><a href='mailto:service@sophias.com'>service@sophias.com</a></u>&nbsp;with any further questions or concerns!</p><p>Thank you for shopping with us,</p><div>", "EmailAttachment": [ { "FileName": "Earings.jpg", "AttachmentUrl": "https://unsplash.com/photos/GKbfUFna-9I/download?force=true", "MediaType": "image/jpg" }, { "FileName": "SampleText.txt", "AttachmentContent": "VGhpcyBpcyBhIHNhbXBsZSB0ZXh0IGZpbGUgZm9yIGRlbW8u", "MediaType": "application/txt" }, { "FileName": "SamplePDF.pdf", "AttachmentContent": "JVBERi0xLjMNCiXi48/TDQoNCjEgMCBvYmoNCjw8DQovVHlwZSAvQ2F0YWxvZw0KL091dGxpbmVzIDIgMCBSDQovUGFnZXMgMyAwIFINCj4+DQplbmRvYmoNCg0KMiAwIG9iag0KPDwNCi9UeXBlIC9PdXRsaW5lcw0KL0NvdW50IDANCj4+DQplbmRvYmoNCg0KMyAwIG9iag0KPDwNCi9UeXBlIC9QYWdlcw0KL0NvdW50IDINCi9LaWRzIFsgNCAwIFIgNiAwIFIgXSANCj4+DQplbmRvYmoNCg0KNCAwIG9iag0KPDwNCi9UeXBlIC9QYWdlDQovUGFyZW50IDMgMCBSDQovUmVzb3VyY2VzIDw8DQovRm9udCA8PA0KL0YxIDkgMCBSIA0KPj4NCi9Qcm9jU2V0IDggMCBSDQo+Pg0KL01lZGlhQm94IFswIDAgNjEyLjAwMDAgNzkyLjAwMDBdDQovQ29udGVudHMgNSAwIFINCj4+DQplbmRvYmoNCg0KNSAwIG9iag0KPDwgL0xlbmd0aCAxMDc0ID4+DQpzdHJlYW0NCjIgSg0KQlQNCjAgMCAwIHJnDQovRjEgMDAyNyBUZg0KNTcuMzc1MCA3MjIuMjgwMCBUZA0KKCBBIFNpbXBsZSBQREYgRmlsZSApIFRqDQpFVA0KQlQNCi9GMSAwMDEwIFRmDQo2OS4yNTAwIDY4OC42MDgwIFRkDQooIFRoaXMgaXMgYSBzbWFsbCBkZW1vbnN0cmF0aW9uIC5wZGYgZmlsZSAtICkgVGoNCkVUDQpCVA0KL0YxIDAwMTAgVGYNCjY5LjI1MDAgNjY0LjcwNDAgVGQNCigganVzdCBmb3IgdXNlIGluIHRoZSBWaXJ0dWFsIE1lY2hhbmljcyB0dXRvcmlhbHMuIE1vcmUgdGV4dC4gQW5kIG1vcmUgKSBUag0KRVQNCkJUDQovRjEgMDAxMCBUZg0KNjkuMjUwMCA2NTIuNzUyMCBUZA0KKCB0ZXh0LiBBbmQgbW9yZSB0ZXh0LiBBbmQgbW9yZSB0ZXh0LiBBbmQgbW9yZSB0ZXh0LiApIFRqDQpFVA0KQlQNCi9GMSAwMDEwIFRmDQo2OS4yNTAwIDYyOC44NDgwIFRkDQooIEFuZCBtb3JlIHRleHQuIEFuZCBtb3JlIHRleHQuIEFuZCBtb3JlIHRleHQuIEFuZCBtb3JlIHRleHQuIEFuZCBtb3JlICkgVGoNCkVUDQpCVA0KL0YxIDAwMTAgVGYNCjY5LjI1MDAgNjE2Ljg5NjAgVGQNCiggdGV4dC4gQW5kIG1vcmUgdGV4dC4gQm9yaW5nLCB6enp6ei4gQW5kIG1vcmUgdGV4dC4gQW5kIG1vcmUgdGV4dC4gQW5kICkgVGoNCkVUDQpCVA0KL0YxIDAwMTAgVGYNCjY5LjI1MDAgNjA0Ljk0NDAgVGQNCiggbW9yZSB0ZXh0LiBBbmQgbW9yZSB0ZXh0LiBBbmQgbW9yZSB0ZXh0LiBBbmQgbW9yZSB0ZXh0LiBBbmQgbW9yZSB0ZXh0LiApIFRqDQpFVA0KQlQNCi9GMSAwMDEwIFRmDQo2OS4yNTAwIDU5Mi45OTIwIFRkDQooIEFuZCBtb3JlIHRleHQuIEFuZCBtb3JlIHRleHQuICkgVGoNCkVUDQpCVA0KL0YxIDAwMTAgVGYNCjY5LjI1MDAgNTY5LjA4ODAgVGQNCiggQW5kIG1vcmUgdGV4dC4gQW5kIG1vcmUgdGV4dC4gQW5kIG1vcmUgdGV4dC4gQW5kIG1vcmUgdGV4dC4gQW5kIG1vcmUgKSBUag0KRVQNCkJUDQovRjEgMDAxMCBUZg0KNjkuMjUwMCA1NTcuMTM2MCBUZA0KKCB0ZXh0LiBBbmQgbW9yZSB0ZXh0LiBBbmQgbW9yZSB0ZXh0LiBFdmVuIG1vcmUuIENvbnRpbnVlZCBvbiBwYWdlIDIgLi4uKSBUag0KRVQNCmVuZHN0cmVhbQ0KZW5kb2JqDQoNCjYgMCBvYmoNCjw8DQovVHlwZSAvUGFnZQ0KL1BhcmVudCAzIDAgUg0KL1Jlc291cmNlcyA8PA0KL0ZvbnQgPDwNCi9GMSA5IDAgUiANCj4+DQovUHJvY1NldCA4IDAgUg0KPj4NCi9NZWRpYUJveCBbMCAwIDYxMi4wMDAwIDc5Mi4wMDAwXQ0KL0NvbnRlbnRzIDcgMCBSDQo+Pg0KZW5kb2JqDQoNCjcgMCBvYmoNCjw8IC9MZW5ndGggNjc2ID4+DQpzdHJlYW0NCjIgSg0KQlQNCjAgMCAwIHJnDQovRjEgMDAyNyBUZg0KNTcuMzc1MCA3MjIuMjgwMCBUZA0KKCBTaW1wbGUgUERGIEZpbGUgMiApIFRqDQpFVA0KQlQNCi9GMSAwMDEwIFRmDQo2OS4yNTAwIDY4OC42MDgwIFRkDQooIC4uLmNvbnRpbnVlZCBmcm9tIHBhZ2UgMS4gWWV0IG1vcmUgdGV4dC4gQW5kIG1vcmUgdGV4dC4gQW5kIG1vcmUgdGV4dC4gKSBUag0KRVQNCkJUDQovRjEgMDAxMCBUZg0KNjkuMjUwMCA2NzYuNjU2MCBUZA0KKCBBbmQgbW9yZSB0ZXh0LiBBbmQgbW9yZSB0ZXh0LiBBbmQgbW9yZSB0ZXh0LiBBbmQgbW9yZSB0ZXh0LiBBbmQgbW9yZSApIFRqDQpFVA0KQlQNCi9GMSAwMDEwIFRmDQo2OS4yNTAwIDY2NC43MDQwIFRkDQooIHRleHQuIE9oLCBob3cgYm9yaW5nIHR5cGluZyB0aGlzIHN0dWZmLiBCdXQgbm90IGFzIGJvcmluZyBhcyB3YXRjaGluZyApIFRqDQpFVA0KQlQNCi9GMSAwMDEwIFRmDQo2OS4yNTAwIDY1Mi43NTIwIFRkDQooIHBhaW50IGRyeS4gQW5kIG1vcmUgdGV4dC4gQW5kIG1vcmUgdGV4dC4gQW5kIG1vcmUgdGV4dC4gQW5kIG1vcmUgdGV4dC4gKSBUag0KRVQNCkJUDQovRjEgMDAxMCBUZg0KNjkuMjUwMCA2NDAuODAwMCBUZA0KKCBCb3JpbmcuICBNb3JlLCBhIGxpdHRsZSBtb3JlIHRleHQuIFRoZSBlbmQsIGFuZCBqdXN0IGFzIHdlbGwuICkgVGoNCkVUDQplbmRzdHJlYW0NCmVuZG9iag0KDQo4IDAgb2JqDQpbL1BERiAvVGV4dF0NCmVuZG9iag0KDQo5IDAgb2JqDQo8PA0KL1R5cGUgL0ZvbnQNCi9TdWJ0eXBlIC9UeXBlMQ0KL05hbWUgL0YxDQovQmFzZUZvbnQgL0hlbHZldGljYQ0KL0VuY29kaW5nIC9XaW5BbnNpRW5jb2RpbmcNCj4+DQplbmRvYmoNCg0KMTAgMCBvYmoNCjw8DQovQ3JlYXRvciAoUmF2ZSBcKGh0dHA6Ly93d3cubmV2cm9uYS5jb20vcmF2ZVwpKQ0KL1Byb2R1Y2VyIChOZXZyb25hIERlc2lnbnMpDQovQ3JlYXRpb25EYXRlIChEOjIwMDYwMzAxMDcyODI2KQ0KPj4NCmVuZG9iag0KDQp4cmVmDQowIDExDQowMDAwMDAwMDAwIDY1NTM1IGYNCjAwMDAwMDAwMTkgMDAwMDAgbg0KMDAwMDAwMDA5MyAwMDAwMCBuDQowMDAwMDAwMTQ3IDAwMDAwIG4NCjAwMDAwMDAyMjIgMDAwMDAgbg0KMDAwMDAwMDM5MCAwMDAwMCBuDQowMDAwMDAxNTIyIDAwMDAwIG4NCjAwMDAwMDE2OTAgMDAwMDAgbg0KMDAwMDAwMjQyMyAwMDAwMCBuDQowMDAwMDAyNDU2IDAwMDAwIG4NCjAwMDAwMDI1NzQgMDAwMDAgbg0KDQp0cmFpbGVyDQo8PA0KL1NpemUgMTENCi9Sb290IDEgMCBSDQovSW5mbyAxMCAwIFINCj4+DQoNCnN0YXJ0eHJlZg0KMjcxNA0KJSVFT0YNCg==", "MediaType": "application/pdf" } ] } The Media type is not used in email interactions, it is an optional attribute on this request. It will be stored in case the external email provider sends it. The Media type is not used in email interactions. It is an optional attribute on this request in case the external email provider is sending it,  we will store this detail. Email Case Linking Email interactions are linked to the case based on the incoming 'From Address'. The system picks up the 'from address' on the email interaction and looks for the attached customer. Once the customer is found, the system looks for the latest open or in-progress case for the customer and attaches the interaction to the case. If there are no latest open/in-progress cases found for the customer or the from address does not belong to an existing customer, a new case is created for the incoming email interaction. Note: The email save interaction API has the attribute 'CaseRequired'. When CaseRequired is marked as true, the system first checks if there is an open case for the customer. If yes, then the email interaction is attached to the latest open case. If there is no open case and the Case Required attribute is marked as true, then a new case is created for the customer. When case required is marked as false, no new case will be created and the interaction is never attached to any existing case either. Irrespective of whether there are any open cases for the customer or not The default value for this attribute is true. The "CaseRequired = false":  is mostly used for the resend emails feature in the contact center application. If the incoming email interaction has a case Id, it will be considered and the logic for the email case linking will be overridden. The email interaction will be attached to the case Id present in the request irrespective of the status of the case. In case a new email interaction is sent with closed case Id, the closed case will be reopened, and the interaction will be attached to it. If the case ID attribute is sent in the email save request, but the value for this attribute is blank or empty, then the interaction cannot be viewed on the UI. Note that if the interaction is new, it will not be seen in the case UI. However, if it was already attached to a different case, it will be disassociated from the case it was previously attached to. If the case ID attribute is sent in the email save request, and the value for it is that of an invalid CASE ID (i.e. random case ID or case Id not already available in the system), in this scenario, the case will be created but will not be available in the UI since the random case ID provided is not available in the system. It is assumed that the provided case Id is correct and valid while saving the interaction. If the case Id is not known, then CaseId attribute should be removed from the request on the email save interaction so that the case linking logic can take over. Case Templates Templates allow agents to paste pre-configured responses which can be sent to a customer by channel (Email, Chat, SMS, and Quick Response). Below are the channels that a template can be selected to be used in. Email When composing emails, agents can select from pre-configured email templates to pre-populate standard text in an outgoing email. Example email response templates could include return policy, shipment delays, store returns, or hazmat returns policy. An agent can select a template, which will paste text in the email body, and add or modify the text as needed. Chat Chat templates can only be viewed and used in the Agent inbox. The Agent will select 'Reply via Chat' from the drop-down above the text box. The 'Search Template' box will now display templates which are configured as a chat template. When selected, the text for that template will paste into the chat box to be sent by the agent. SMS When an Agent is chatting via SMS, they will have a 'Search Templates' drop-down just like the Chat and Email channels do. Quick Responses Quick response templates can only be viewed and used in the Agent Inbox. They are a template which displays in a row of clickable chips above the chat box. These allow for agents to configure some texts which they use very frequently and display them in a way in which they are easily accessed. Quick responses will only appear when 'Reply via Chat' and 'Reply via SMS' is the selected channel. They are not usable from the email channel. Configuring Case Templates To configure case templates, navigate to the Case Template page under Manage Customer Engagement Configuration. Currently, the terms "case template" and "email response template" are interchangeable. Refer to the Grants and Resources section below to find the respective permissions needed to work with response templates. Each template has seven primary attributes. The Is Email, Is Chat, Is SMS, and Is Quick Chat options in the configuration are multi-select and allow a single template to be enabled for as many or as few channels as desired. Template ID: Mandatory, unique identifier of the template. This value is seen in the template drop-down in the compose email page. This value cannot be edited once a template is created. To edit this value, delete this entry and add a new one. Interaction Response Body: Template body to be populated in the text area of the compose email pop up. Must be in a valid HTML format. Please refer to the examples below to see examples of body formatting. Is Email: When set to true, the template will appear in the template search drop-down for 'Reply vi Email' in the Agent Inbox and in the view case details send email UI. When set to false, the template will not appear in any of the email template drop-downs. Is Chat: When set to true, the template will appear in the template search drop-down in the Agent inbox 'Reply via Chat' in the Agent Inbox. When this is false, the template will not appear in the template search for chat channel. Is SMS: When enabled, the template will appear in the template search drop-down in the Agent inbox 'Reply via Chat' in the Agent Inbox. When this is false, the template will not appear in the template search for chat channel. Is Quick Response: When set to true, this template will appear as a clickable chip just above the 'Reply via Chat' and 'Reply via SMS' text boxes, and can be selected which pastes it into the chat body, to be sent to end customers. These chips only appear for the 'Reply via Chat' and 'Reply via SMS' text boxes. The chips do not appear for email or any other channel. UI Display Sequence: Sequence in which the templates are displayed in the template drop-down in the compose email pop up. If no sequence is defined for a template, the null value is saved as zero (0) and is listed at the top of the list in the drop-down. If more than 1 template has the same sequence number, they are to be sorted amongst themselves in alphabetical order. All email response templates can be viewed in the case details screen by clicking the SEND EMAIL or REPLY buttons which will open the compose email pop-up. They can also be viewed in the Agent Inbox when chatting via a one fo the available channels. The drop-down to select the template displays the first 50 templates in the configured sequence, and offers a type-ahead search to find relevant templates. Once the template is selected, click APPLY for the respective template body to be populated in the text area of the compose email/chat section. The drop-down shows a maximum of 50 templates. When there are more than 50 templates available, the 51st entry in the drop-down will say "More than 50 records found, use type-ahead search to refine your results" and the user can type in more relevant keywords to narrow down the search and find templates. Multiple templates can be added (one at a time) to the compose email editor. The contact center agent can pick and choose parts from different templates and edit them into one email response before sending out an email. When templates are selected, they will append one below the other in the same email response editor or will append to any text that was typed in the email editor before selecting the template. If editing a template and the compose email pop up is open on another browser tab, the compose email pop up will have to be closed and re-opened for the changes/edits to appear. Response templates can also be created via API. Case templates can be unique to each organization or shared across organizations, based on profile configuration. Email response templates have profile purpose "cas::caseConfig." Example Interaction Body HTMLsThis sample Interaction Body includes a placeholder for the receiver's name, bold text, hyperlink, and image: <div><p>Hi {{ customer name }} ,</p><p>Thank you for your note! Those born in <b>January</b> will be able to shop our exclusive discounts. Sign up <a href='https://www.google.com'>HERE</a>.</p><p>Happy Birthday!</p><p><img src='https://www.happybirthdaymsg.com/wp-content/uploads/2016/01/happy-birthday-image-10.jpg'></p></div> This sample Interaction along with a sequence ID can be used to create a template through the API. The email body includes a placeholder for the receiver's name and order number and multiple paragraphs or optional sections: { "TemplateId":"Replacement request", "InteractionResponseBody":"<p><br></p><p>Hi {{ customer name }},</p><p>&lt;&lt; REPLACEMENT REQUEST SUBMITTED &gt;&gt;</p><p>I'm sorry you did not receive  _____. I have submitted your request for a replacement. You should receive a confirmation email shortly.</p><p>&lt;&lt; REPLACEMENT ORDER MADE &gt;&gt;</p><p>I'm sorry you did not receive  _________. I created a replacement order for you, #_______ . You should receive a confirmation email shortly.</p><p>Let us know if you have questions.</p><p>Sincerely,</p>", "SequenceNumber": 1 } Pre-Populate Dynamic Variables and Constants in Email Response Templates Email Response templates are the pre-defined email text that are used by contact center agents while replying to emails. These templates can be populated with placeholders that will be autopopulated when the template is selected and applied. The placeholders can be of two types : Constant Messages: These are messages such as store timings, season greetings, and so on that can be pre-populated within email response templates. Constant messages can be created/edited using the Case Template Constant option under the manage Customer engagement configuration menu. Dynamic Variables: These are variables that are stored as part of the EvaluatePlaceholder template. The EvaluatePlaceholder template currently only supports attributes belonging to the Case entity. Below are the case entities that are currently supported. Case constant message names cannot have spaces. However, Underscore is supported. Currently, the system supports the creation of a maximum of 1000 constant messages. Post creation, it will take around 5-10 mins for the constant messages to start appearing in the email response template. ${Cases.CustomerFirstName},  ${Cases.CustomerLastName},  ${Cases.CustomerId},  ${Cases.CaseStatusId},  ${Cases.OrderNo}, ${Cases.CustomerPhone},  ${Cases.CustomerEmail},   ${Cases.CustomerAddress},  ${Cases.AssignedToId},  ${Cases.AssignedToFirstName},  ${Cases.AssignedToLastName}. Retailers that choose to display any other case attribute (base or extended) can add the specific attributes to the EvaluatePlaceholder template. To find out the list of other attributes that are available in the case entity, refer to the Cases entity under the data dictionary in the Proactive developer documentation. While using dynamic variables in the response templates, the template variable should start with "${“ and ends with "}" and the Object, attribute name should be followed by Title Case. For example: Hi ${Cases.CustomerFirstName} ${Cases.CustomerLastName} ${Cases.Extended.CaseLevel} Sample Email response template with dynamic variables and constant message: <div><p>Hi ${Cases.CustomerFirstName} ${Cases.CustomerLastName}, </p><p>Thank you for your note! Those born in <b>January</b> will be able to shop for our exclusive discounts. Sign up <a href='https://www.google.com'>HERE</a>.</p><p>Happy Birthday!</p><p><img src='https://www.happybirthdaymsg.com/wp-content/uploads/2016/01/happy-birthday-image-10.jpg'></p><p>${Constant.StoreTiming}!</p></div> Click here to see implementation flavours on how to add other base and extended case related attributes to the evaluate placeholder template While using dynamic variables or case constant messages, if any attribute value is not found or null, then none of the variables are replaced/pre-populated. So, it is always advised that new variables added should always be tested by the person creating the variable before making it available for contact center agents to use. This can be overcome using the null check while defining the email response template. There are 2 kinds of suggested null checks. Refer to a troubleshooting guide for examples. Do not populate values only for the placeholders that are null or incorrect. During template creation, save the dynamic variable in the following format: ${(object.attribute)!} Replace the null or incorrect variable with default text: During template creation, save the dynamic variable in the following format: ${(object.attribute)!"default text"} Events and Extensions To display additional fields in the compose email page, use the UI extensions provided to hide the base fields (customer first name, last name, and order number) or show any other attributes from the Case entity in its place. The newly added field extensions will appear next to each other in a row. If they exceed the row width, then they will wrap to the next line. Below are command routers that can be used for custom changes. Command Router Description manh.command-router.commands.getCaseTemplate.commandPath=/cases/caseTemplate/search This command router can be used to intercept the Search caseTemplate API (/api/cases/caseTemplate/search) in order to apply any custom logic before searching for the response templates on the UI. Services The APIs listed in the following table are referenced in this document. Refer to the API documentation for additional details on each service. Service Component Group Service Endpoint Save Email Interaction Customer Interaction Email Services POST /api/customerinteraction/email/save Save Case template Cases CaseTemplate POST /masterdatafacade/api/cases/caseTemplate/save Create email interaction CustomerInteraction Email Services POST /api/customerinteraction/email Delete EmailAttachment CustomerInteraction Email Attachment Services DELETE /api/customerinteraction/email/{emailInteractionId}/emailAttachment/{attachmentId}/attachment Delete Template Cases CaseTemplate DELETE /masterdatafacade/api/cases/caseTemplate/{templateId} Copy Case Profile Cases Case POST /com-manh-cp-cases/api/fwcore/profiles/copy Copy Email Profile Email Email POST /email/api/fwcore/profiles/copy Save Case Configuration Cases Case Configuration POST /com-manh-cp-cases/api/cases/caseConfig/save Save Email Template Email Email POST /email/api/email/emailTemplate Get list of case attributes available in  Evaluate Placeholder template Cases Response Template GET/cases/api/fwcore/responseTemplate/save Add additional case attributes to the Evaluate Placeholder template Cases Response Template POST/cases/api/fwcore/responseTemplate/save Troubleshooting Locate your issue in the below list and follow the troubleshooting steps. Email Response Templates Issue Troubleshooting Tip Order number, first name, and last name are empty in the case details section of the compose email pop-up The case on which the email interaction is available needs to have these details populated. If the case does not have the order number, first name, last name populated, these fields will be empty. The templates are not in the sequence expected Use the ‘Sequence Number’ attribute on the template entity to define the sequence. Note that sequence priority goes from null > 0 > 1 > 2 > 3...etc. I created a template without any sequence number, but as soon as I save the template I see sequence null Templates created without a sequence number will automatically be assigned a sequence null. Email Attachments Issue Troubleshooting Tip Can I store attachment content without the attachment file name? No, the Attachment file name with extensions is mandatory to store attachments. If the back end API has a request with the attachment content but no file name, the response will return an error "AttachmentName cannot be null or empty". If the back end API has a request with the attachment content and a file name, but an invalid file type extension or no file type extension like .pdf or .png the response will return an error "Invalid file type". The user modifies the file name after sending the attachment The interaction will be updated with the new file name. I remember seeing an attachment on interaction, but when I logged in today I only see the interaction without the attachment This means the interaction was updated in the backend and the attachment was deleted using the Delete EmailAttachment  API Can I change the path where the downloaded attachment is stored on my system? Incoming attachments will be stored in the path specified in the 'Download' section of the user's browser settings. Once the file download path is specified, alternatively, the browser setting may also have the option to Always Ask where to save each file before downloading or never ask where to store the file. The latter is chosen, the downloaded files will always be stored in the default path specified in the previous step. The attachment icon says it's a pdf file, but on downloading and opening the file I see that it's a word file. The icon on the individual attachment Image is displayed based on the file type extension on the attachment name only, so if a word file is stored with a .pdf extension, the individual attachment icon for that file will be shown as pdf, but clicking on the attachment will open the word file only. My file is taking too much time to load The file upload time is based on the file size. We have done performance testing and seen that it takes around 2-4 seconds to upload around 5 mbs of file. I have attached a wrong file, how do I delete it before sending my email. Click on the 'X' mark in the top-right corner of the attached file. Using the API, I am trying to attach a pdf file, but I see the file name with a png icon on the compose email pop-up Check the file on the attachment file you are trying to attach in the API request and response. Email Response Templates - Dynamic variables Issue Troubleshooting Tip How do I create a template with multiple variables and only populate the variables that are successfully retrieved and ignore the dynamic variables that are incorrect or null? In this example, the first name is defined properly whereas the last name (changes to lastname1 in example template) is defined incorrectly or null. Template creation format for customer first name and last name John Smith: <div><p>Hello ${Cases.CustomerFirstName} ${(Cases.CustomerLastName1)!},</p><p>Thanks for reaching out!</p><p> Output on email creation: Hello John , Thanks for reaching out! How do I create a template with multiple variables and only populate the variables that are successfully retrieved and replace the dynamic variables that are incorrect or null with some kind of replacement text? In this example, the first name is defined properly whereas the last name (changes to lastname1 in example template) is defined incorrectly or null. Template creation format for customer first name and last name John Smith: <div><p>Hello ${Cases.CustomerFirstName} ${(Cases.CustomerLastName1)!"default text"},</p><p>Thanks for reaching out!</p><p> Output on email creation: Hello, John default text, Thanks for reaching out! Implementation Flavor(s) Overriding the 5 MB attachment size limit: The 5 MB attachment size limitation is due to the third party messaging system used in Active Omni. To bypass this limitation, the upload and download APIs can be directly invoked. The steps to achieve this is as follows: Create an external integration component that can internally calls the upload or download API This external system that is triggering the email should create an upload API to call the email attachment upload API (i.e. POST {{url}} /customerinteraction/api/customerinteraction/email/save) The system downloading the email should create an API to call the download API (i.e GET {{url}} /customerinteraction/api/customerinteraction/email/{emailInteractionId}/emailAttachment/{attachmentId}/attachment) Note: The upload attachment API response will contain the following data which can be used to form the download URL: Attachment Id Interaction Id Object path of the attachment Using the above response the external system must create the URL (is this the Download URL? If so let’s be specific) with: Host information Download URL Attachment Id and interaction Id Set the maximum total size of all attachments to 25 MB in the KV store in the Customer Interaction component Key: customerinteraction.email.attachment.maxTotalSizeInMB Value = 25 Ensure the URL is accessible, it can be whitelisted or credentials can be provided. How to dynamically auto-populate any (base case attribute) in the email response template, for example, CASE ID Refer to the Cases entity under the data dictionary in the Proactive developer documentation to ensure that case ID is available in the case entity. Add CaseId to the existing EvaluatePlaceholder template API (POST/cases/api/fwcore/responseTemplate/save) toggle. (Login as system admin since this table is system augmentable table) Add Case Id to Evaluate Placeholder template [POST] {{url}}/cases/api/fwcore/responseTemplate/save { "TemplateId": "EvaluatePlaceholder", "BaseEntity": "Cases", "TemplateJson": { "CustomerFirstName": null, "CustomerLastName": null, "CustomerId": null, "CaseStatusId": null, "OrderNo": null, "CustomerPhone": null, "CustomerEmail": null, "CustomerAddress": null, "AssignedToId": null, "AssignedToFirstName": null, "AssignedToLastName": null, "CaseId": null, } } Add ${Cases.CaseId} to the email response template that you need this value to be dynamically populated in. Example: <div><p>Hello ${Cases.CustomerFirstName} ${Cases.CustomerLastName},</p><p>Thanks for reaching out!Your case ID is ${Cases.CaseId}</p></div> How to pre-populate CaseSLA (extended case attribute) in the email response template Ensure that the extended attribute is configured as part of the case entity. Add the extended attribute to the existing EvaluatePlaceholder template API (POST/cases/api/fwcore/responseTemplate/save) toggle. (Login as system admin since this table is system augmentable table) Add ${Cases.Extended.CaseSLA} to the email response template that you need this value to be dynamically populated in. Example: <div><p>Hello ${Cases.CustomerFirstName} ${Cases.CustomerLastName},</p><p>Thanks for reaching out!Your case will be resolved before${Cases.Extended.CaseSLA}</p></div>