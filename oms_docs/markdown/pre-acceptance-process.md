# Pre-Acceptance Process

**Permalink:** pre-acceptance-process
**Content Length:** 22,808 characters
**Scraped:** 2025-08-09T22:36:09.217994

---

Home &rsaquo;&rsaquo;Manhattan Active® Omni&rsaquo;&rsaquo;Store&rsaquo;&rsaquo;Process & Configuration Guides&rsaquo;&rsaquo;Store Inventory & Fulfillment&rsaquo;&rsaquo;Store Order Fulfillment&rsaquo;&rsaquo;Pre-acceptance ››Pre-Acceptance Process Pre-acceptance Process Release to FulfillmentCondition-based Fulfillment Creation E-mailCancel Aged FulfillmentsServices Pre-acceptance refers to&nbsp;the period when&nbsp;a store fulfillment has&nbsp;been&nbsp;released&nbsp;to the store but&nbsp;not yet accepted.&nbsp;A store associate must accept the fulfillment for the fulfillment to be processed. The timing of fulfillment acceptance has a direct impact on delivery timelines and customer satisfaction. Acceptance is completed when the store associate requests to generate the picklist. Refer to&nbsp;Picking Process&nbsp;guide for additional information. Release to Fulfillment Release sent&nbsp;from Active Omni order management is consumed by the Active Omni Store.&nbsp; During this process fulfillment is updated with item information if the release does not contain them. Fulfillment is also tagged based on the configured rules. Refer to the Picking Configuration guide for details. Condition-based Fulfillment Creation E-mail Retailers have the ability to send an e-mail to store associates when a new fulfillment is created to notify them of the incoming work. This is initiated by a fulfillment creation event. Conditional logic gives the retailer control under what circumstances the e-mail should be sent.&nbsp;A sample e-mail template is provided which includes fulfillment, store and item information and can be customized, if desired. Through deep linking functionality, associates can navigate to the appropriate picking UI directly from the e-mail. This document describes the out of the box behavior for the following steps of the process, as well as what areas can be customized: Event generation - This step determines whether a create fulfillment event is created.&nbsp; Event payload - This controls the payload that is sent in the event for usage by the Email component. The Email component uses the information on the payload to determine whether to generate the e-mail or not, determine who to send the e-mail to and to populate the message body. Event queue - This defines the outbound queue on where the events are posted. E-mail template - Defines which e-mail template(s) the event can use.&nbsp;The Email template defines when to generate the e-mail, the recipient&nbsp;list and the message content. Out of the Box Behavior When enabled, the out of the box behavior for the create fulfillment event generation is to generate an e-mail for all ship to address orders and send to the&nbsp;shipping location contacts for the location. Details explained below. Event generation&nbsp; The "Enable fulfillment event generation based on condition" parameter controls whether new fulfillment events can be created (refer to the configuration guide.) If this configuration is disabled, none of the fulfillment event creation steps occur. If enabled, when a new fulfillment is created the&nbsp;CreateFulfillmentEvent&nbsp;extension handler is checked to determine if an event should be created for the&nbsp;fulfillment. This extension handler defines the condition (see EntryCondition below)&nbsp;of when to create a fulfillment event. Out of the box, this&nbsp;condition is set to null, meaning&nbsp;that an event is created for all new fulfillments. Out of the box base configuration is shown below. { &nbsp; "ExtensionHandlerId": "CreateFulfillmentEvent", &nbsp; "RegisteredExtensionPoints": [ &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; "ExtensionPointId": "CreateFulfillmentEvent", &nbsp; &nbsp; &nbsp; "EntryCondition": null &nbsp; &nbsp; } &nbsp; ], &nbsp; "OutBoundMessageType": { &nbsp; &nbsp; "MessageType": "CreateFulfillmentEventMSGType" &nbsp; } } Event payload&nbsp; When an event is created, the out of the box payload contains the entire Fulfillment, Location and Location Contact entities (Refer to Shipping Contact map in the payload). This&nbsp;includes&nbsp;the location contacts with contact type = "Shipping", which are used by the e-mail template to populate the recipient&nbsp;list. A sample out of the box event payload is attached here: &nbsp; Event queue The out of the box event queue (i.e., outbound message type) is shown below.&nbsp; { &nbsp; "MessageType": "CreateFulfillmentEventMSGType", &nbsp; "IsUserOverride": false, &nbsp; "Transactional": true, &nbsp; "PersistMessageToMsgStore": false, &nbsp; "OutBoundQueues": { &nbsp; &nbsp; "QueueName": "queue.CreateFulfillmentEvent" &nbsp; &nbsp;} } Email Component An out of the box email template exists&nbsp;for&nbsp;'Ship To Address' fulfillments. This e-mail template is defined with a condition to execute when the fulfillment's delivery method is set to 'Ship To Address.' The email is sent to the email addresses of the Shipping contact(s) configured for&nbsp;the fulfilling store, which correspond to the location contacts with contact type = "Shipping".&nbsp; Below is a sample email using the out of the box email template: &nbsp; The Email component has following out of the box configurations. E-mail Template: (Partial Sample) { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "TemplateId": "FulfillmentCreatedEmailTemplate", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "GroupName": "SOFEmailNotification", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "ConditionExpression": "Fulfillment.DeliveryMethodId contains \"ShipToAddress\"", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Name": "Sample Fulfillment Creation template", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Description": "Sample fulfillment creation confirmation template which demonstrates the fulfillment creation emails sent to the store. This template can be used for reference purposes only", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "FromEmail": "cpadmin@manh.com", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "ReplyTo": "cpadmin@manh.com", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "FromName": "Sophia's", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Subject": "New order ${Fulfillment.FulfillmentId} is created!", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "ReferenceField1": "${Fulfillment.FulfillmentId}", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "ReferenceField2": "${Fulfillment.CustomerEmail}", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "ReferenceField3": "${Fulfillment.DeliveryMethodId}", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "LogSuccess": true, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "LogFailure": true, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "ToAddress": [ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "ToEmail": "&lt;#list ShippingContact as contact&gt;${contact.Email}&lt;#sep&gt;,&lt;/#list&gt;", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "ToAddressType": { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "TypeId": "TO" &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ], &nbsp; Customization Retailers have the ability to&nbsp;modify the out of the box behavior as explained below. Event Generation Customization The EntryCondition defines when a fulfillment event should be created, and&nbsp;can be modified in the "CreateFulfillmentEvent"&nbsp;extension handler using a MVEL expression. For example, if the retailer wishes to generate an event for curbside pickup orders (fulfillments with deliveryMethodSubType = "Curbside") for low volume stores, the sample configuration is below. { &nbsp; "ExtensionHandlerId": "CreateFulfillmentEvent", &nbsp; "RegisteredExtensionPoints": [ &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; "ExtensionPointId": "CreateFulfillmentEvent", &nbsp; &nbsp; &nbsp; "EntryCondition": "Fulfillment.DeliveryMethodSubType == 'Curbside'&nbsp;&& Location.LocationSubType == 'LowVolumeStore'" &nbsp; &nbsp; } &nbsp; ], &nbsp; "OutBoundMessageType": { &nbsp; &nbsp; "MessageType": "CreateFulfillmentEventMSGType" &nbsp; } } Event Payload&nbsp;Customization External attributes in the fulfillment are&nbsp;contained in the out of the box event payload. If needed, the event payload can be customized&nbsp;to include&nbsp;additional custom data, when custom data is needed for the e-mail creation condition logic, e-mail message body content or the e-mail recipient list.&nbsp; The process&nbsp;to customize the event payload involves configuring an extension point, which points to extension code. Step 1 - Define Custom Service Definition Example:&nbsp; &nbsp; { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "ComponentId": "fulfillment", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "ServiceId": "custCreateFulfillmentEvent", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Url": "&lt;URL to Custom API implementation&gt;" &nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp; &nbsp; Step 2- Configure Extension Handler for Custom Service Definition ServiceId in the service definition in step1 must match with the Destination & DestinationId in the extension handler. Example: &nbsp; &nbsp;{ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "ExtensionHandlerId": "CreateFulfillmentEvent", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "ProfileId": "base", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "ExtensionhandlerRoute": [ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "ExtensionhandlerRouteId": "CreateFulfillmentEvent", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "DropToMessageType":"", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Source": "ON_EVENT", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "SourceId": "ON_EVENT", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Destination": "custCreateFulfillmentEvent", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "DestinationId": "custCreateFulfillmentEvent", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "IsSync": "true" &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ], &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; "OutBoundMessageType": { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "MessageType": "CreateFulfillmentEventMSGType" &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; }, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "RegisteredExtensionPoints": [ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "ExtensionPointId": "CreateFulfillmentEvent", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "EntryCondition": "Fulfillment.DeliveryMethodSubType == 'Curbside'&nbsp;&& Location.LocationSubType == 'LowVolumeStore'" &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ] &nbsp;&nbsp;&nbsp;&nbsp; } Event Queue&nbsp;Customization To use an&nbsp;external email system instead of Manhattan's email component, retailers can either use the same queue that is used for out of the box integration (queue.CreateFulfillmentEvent) with the Email component&nbsp;or a&nbsp;different queue.&nbsp;If the same out of the box&nbsp;queue is used, then&nbsp;the project team should not specify inbound message type for the custom profile so that&nbsp;it is never consumed by base email component. Email Component&nbsp;Customization Assumption: Customers email solution is used&nbsp;to “deliver” the mail. Email Template Customization Retailers&nbsp;can define multiple&nbsp;e-mail templates that can have different content for sending to different recipients. A condition that is defined in the form of&nbsp;MVEL&nbsp;expression&nbsp;in the “ConditionExpression” field of the email template determines which template to select. For more details about email template configuration, refer to "How to Modify & Test Email Templates" section of&nbsp;&nbsp;Transactional Emails&nbsp;guide. Email Recipient Customization If the retailer wishes&nbsp;to define the recipient list from a source other than shipping location contacts that are supported out of the box, follow these steps: 1. Define the custom data. One way to achieve this is to add a new location contact type (system augmentable entity) and populate the e-mail address for those new contacts. 2. Configure the payload extension to point to custom code&nbsp;(see Event Payload Customization section) in order to create a custom payload with the custom e-mail address list. 3. Modify the "ToEmail' attribute of the e-mail template to correspond to the custom data in the payload. { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "TemplateId": "FulfillmentCreatedEmailTemplate", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "GroupName": "SOFEmailNotification", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "ConditionExpression": "Fulfillment.DeliveryMethodId contains \"ShipToAddress\"", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Name": "Sample Fulfillment Creation template", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Description": "Sample fulfillment creation confirmation template which demonstrates the fulfillment creation emails sent to the store. This template can be used for reference purposes only", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "FromEmail": "cpadmin@manh.com", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "ReplyTo": "cpadmin@manh.com", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "FromName": "Sophia's", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Subject": "New order ${Fulfillment.FulfillmentId} is created!", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "ReferenceField1": "${Fulfillment.FulfillmentId}", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "ReferenceField2": "${Fulfillment.CustomerEmail}", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "ReferenceField3": "${Fulfillment.DeliveryMethodId}", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "LogSuccess": true, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "LogFailure": true, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "ToAddress": [ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "ToEmail": "&lt;#list ShippingContact as contact&gt;${contact.Email}&lt;#sep&gt;,&lt;/#list&gt;", &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "ToAddressType": { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "TypeId": "TO" &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ], Note - The ToEmail attribute is limited to 100 characters. If the length of this the list&nbsp;exceeds 100 characters, it must be handled through an extension. Cancel Aged Fulfillments If a&nbsp;store&nbsp;is unable to&nbsp;process a fulfillment&nbsp;in a timely manner, the fulfillment can be canceled manually or via job scheduler. Orders associated with canceled fulfillments&nbsp;can be reallocated or canceled based on the configuration. Refer to the Order Fulfillment Configuration&nbsp;guide for additional information.&nbsp; The Cancel Fulfillment service is used to manually cancel a fulfillment. Alternatively, aged&nbsp;fulfillments can be automatically canceled by a job scheduler. Refer to the&nbsp;Configuration guide for additional information. Services The&nbsp;APIs listed in the following table are referenced in this document. Refer to the API documentation for additional details on&nbsp;each service. Service Component Group Service Endpoint Cancel Fulfillment Fulfillment fulfillment-process-controller /fulfillment/api/fulfillment/fulfillment/cancel &nbsp; &nbsp;