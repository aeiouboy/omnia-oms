# POS Adyen Payment Plugin

**Permalink:** pos-adyen-plugin
**Path:** Manhattan Active® Omni/Store/Process & Configuration Guides/Point of Sale/POS Guides/POS Payment/POS Payment Plugin/POS Adyen Payment Plugin
**Content Length:** 161,466 characters
**Scraped:** 2025-08-09T22:02:08.068585

---

Home ››Manhattan Active® Omni››Store››Process & Configuration Guides››Point of Sale››POS Guides››POS Payment››POS Payment Plugin ››POS Adyen Payment Plugin POS Adyen Payment Plugin Configuration/Gateway settings and Use CasesSecurityEnabling Cloud vs LocalCloud (Server to Server) ImplementationLocal (POS Application Direct to Device) ImplementationSample Gateway configuration jsonOverall FlowCloudLocal Payment Transaction Command referenceResource IdsUser Exits Manhattan Active Omni provides the capability to integrate Adyen with point-of-sale systems (POS). Adyen is a payment processing platform which offers a variety of solutions for businesses to accept payments online, in-store, and through various channels. This page contains an overview of the POS specific configurations and processes used. Please refer to Adyen Payment Integration guide and the Adyen section of the general Payment Gateway Integration guide for more information. Configuration/Gateway settings and Use Cases To enable Adyen, set posGeneralConfig>commonConfig>paymentGateway = AdyenPayments Attributes of AdyenPayments gateway type - Use cases based on Adyen paymentGateway>paymentGatewayImplementation = "Cloud https" vs "Local https" IF Application/Device Status Configure as Local functional? Configure as Cloud functional? Comments Consistent Online Online Application Online Terminal Yes Yes If configured as CLOUD, consistently Cloud communication used for all trans types. If configured as LOCAL, Local will still selectively internally use Cloud communication. Pay and Carry will use strictly LOCAL but Omni transactions will use CLOUD communication. This is due to an Adyen restriction, by which LOCAL does not support multiple requests for same payment - as in SETTLE part of this payment and AUTHORIZE the rest - which is required for OMNI flows. Thus, plugin configure to use "local" gateway implementation internally switches to Cloud when appropriate without user intervention. Gateway templates for OMNI is required for cloud implementation. USE CASE If customer is confident that application and terminal are both online most of the time or network issues are very low, then preferred is Cloud implementation as its easy to maintain and very less dependencies on plugin. Separate application for online and offline, i.e. MAO-POS and MAO-POS OFFLINE apps Combinations assumed to be MAO POS app Online Application Online Terminal MAO-POS OFFLINE app Offline Application Offline Terminal Yes both offline/online Online only Settings support Cloud for online app and Local implementation for offline app. USE CASE If customer is going to use separate application for online and offline flow then below two implementation settings are required in paymentGateway>gatewayImplementation CustomerPresent True and Offline as false → Cloud CustomerPresent True and Offline as true → Local Hybrid mode Online Application Offline Terminal Yes No App communicates direct to terminal, which then commicates to gateway/Cloud. The advantage to this approach is, if terminal goes OFFLINE to Gateway, SAF operations are still possible and credit can be accepted. Implementation setting: 1. CustomerPresent True and Online as true → Local USE CASE If customer is going for hybrid solution where customer wants to support online application with terminal normally also online BUT ability to work with offline terminal . Security Adyen presents certificates in order to authenticate when merchants establish secure connections to Adyen's API endpoints. The integration connects to Adyen's services securely over HTTPS connection. Please follow the table below to understand how the root certificate is handled for each platform that is supported. Adyen Root Certificate By Platform Platform Base Provided Details ios Yes The base app is pre bundled with the required root certificates for Adyen. Every time a new build is generated from base, the latest certificate is bundled. Windows No Base does not provide the root certificate for Windows, but it is required by the service team to work with the customer and ensure that the certificate is added. Android No Base does not provide the root certificate for Android. Enabling Cloud vs Local Cloud (Server to Server) Implementation POS General config changes Enable "Communicate to gateway using configured protocol" (Set to true) GatewayId as AdyenPayments GatewayTransactionTimeout (Should match with Terminal timeout) GatewayTransStatusInterval (How frequently we want to do transaction status call) Create Adyen gateway configuration Payment gateway populated Gateway protocol as "Cloud Https" API Key is populated as Account Encrypted Attribute Populate Payment Gateway Template for AdyenPayments.  (See sample gateway json). Create Payment Terminal with Integration Type = Cloud and terminalId as the uniqueId of the terminal you want to connect to. We can select any of the below Payment Terminal Types as per the supported types. MX Verifone MX 915/925 Verifone e355 Adyen e285p Adyen M400 Assign the terminal to register Log into the app and save settings for terminal. It is mandatory that terminal timeout cannot be less than payment gateway timeout. Otherwise, payment transaction discrepancy between Manhattan and payment provider will cause payment to fail. Local (POS Application Direct to Device) Implementation For local implementation , we need to ensure that the adyen certificates are available in the register for successfully communicating to the adyen terminal. We recommend you to install the certificates through power shell scripts. POS General config changes Enable "Communicate to gateway using configured protocol" (Set to true) GatewayId as AdyenPayments GatewayTransactionTimeout (Should match with Terminal timeout. It is provided by gateway provider) GatewayTransStatusInterval (How frequently we want to do transaction status call) (Base Recommended value = 15 (In Seconds)) Create Adyen gateway configuration Payment gateway populated Gateway protocol as "Local Https" Account Encrypted Attribute is populated (See sample gateway json). Populate Payment Gateway Template for AdyenPayments.  (See sample gateway json). For gift card through "givex" we have to create card type as "givex" Create Payment Terminal with IP as the IP of the terminal, primary port as 8443 and terminalId as the uniqueId of the terminal you want to connect to. We can select any of the below Payment Terminal Types as per the supported types MX Verifone MX 915/925 Verifone e355 Adyen e285p Adyen M400 Assign the terminal to register Log into app and save settings for terminal. It is mandatory that terminal timeout cannot be less than payment gateway timeout. Otherwise, payment transaction discrepancy between Manhattan and payment provider will cause payment to fail. Populate Payment Gateway Template for Adyen Payments. Check the Attached sample gateway/save json below. Mandatory Attributes in gateway attributes for local setup is described below for AccountEncryptedAttribute. apiKey - This is mandatory for local connection. We need to get this information from Adyen Portal. Please follow the link to Adyen Documentation to get api key https://docs.adyen.com/development-resources/api-credentials/#generate-api-key encryptionKey, encryptionPassword and encryptionKeyVersion are mandatory for local connection. Please follow the page from Adyen Documentation https://docs.adyen.com/point-of-sale/design-your-integration/choose-your-architecture/local/. "encryptionKey" is "Key Identifier", "encryptionPassword" is "Key Passphrase" and "encryptionKeyVersion" is "Key Version" from the documentation. sendToProduction = False merchantAccount  is mandatory for local connection. Refer to the Adyen Portal. merchantStore - This field is only applicable for OMNI flow and if OMNI flow is supported, then populate this from the Adyen portal or click 9+O and check device information. externalPlatformName, externalPlatformIntegrator and merchantApplicationName, are kept as it is mentioned in the gateway json. giftCardServiceProvider - If gift card is supported then update the field with the provider name like givex, svs etc. All other attributes are kept as they are. Sample Gateway configuration json URL: POST {{url}}/payment/api/payment/gateway/save Body: To configure for LOCAL vs CLOUD,  Implementation GatewayProtocolId should be set to "Local Https" or "Cloud Https".  This sample uses "Cloud Https". POS Adyen 2{ "Account": [ { "AccountId": "pos_test_account", "Actions": { "AccountEncryptedAttribute": "RESET" }, "AccountEncryptedAttribute": [ { "Name": "apiKey", "Value": "" }, { "Name": "encryptionKey", "ValueDeprecated": "ManhattanAccount", "Value": "ManhattanAccount" }, { "Name": "encryptionPassword", "ValueDeprecated": "ManhattanAccount", "Value": "ManhattanAccount" }, { "Name": "encryptionKeyVersion", "ValueDeprecated": "1", "Value": "1" }, { "Name": "merchantAccount", "ValueDeprecated": "ManhattanAssociates739_OM_POS_Integration_TEST", "Value": "ManhattanAssociates739_OM_POS_Integration_TEST" }, { "Name": "merchantStore", "ValueDeprecated": "Manhattan_Store", "Value": "Manhattan_Store" }, { "Name": "externalPlatformName", "ValueDeprecated": "Manhattan Active Omni", "Value": "Manhattan Active Omni" }, { "Name": "externalPlatformIntegrator", "ValueDeprecated": "Manhattan Active Omni", "Value": "Manhattan Active Omni" }, { "Name": "merchantApplicationName", "ValueDeprecated": "Manhattan Active Omni", "Value": "Manhattan Active Omni" }, { "Name": "giftCardServiceProvider", "ValueDeprecated": "svs", "Value": "svs" } ], "AccountAttribute": [ { "Name": "targetAPIVersion", "Value": "v70" }, { "Name": "sendToProduction", "Value": "false" }, { "Name": "autoCloseTransactionTypes", "Value": "Refund,Void" }, { "Name": "createSettlementWhenVoidingRefund", "Value": "false" } ], "LocationId": null } ], "GatewayId": "AdyenPayments", "Actions": { "PaymentGatewayTemplate": "RESET", "Account": "RESET", "GatewayImplementation": "RESET" }, "PaymentGatewayTemplate": [ { "GatewayPaymentURLTemplate": "https://terminal-api-test.adyen.com/sync", "TransactionType": "Settlement", "GatewayResponseTemplate": "{\r\n  \"OrderId\": \"{{OrderId}}\",\r\n  {{#PaymentResponseText}}\r\n  \"PaymentResponseText\": \"{{PaymentResponseText}}\",\r\n  {{/PaymentResponseText}}\r\n  {{#RecurringDetailReference}}\r\n  \"RecurringDetailReference\": \"{{RecurringDetailReference}}\",\r\n  {{/RecurringDetailReference}}\r\n  {{#PaymentResponseCode}}\r\n  \"PaymentResponseCode\": \"{{PaymentResponseCode}}\",\r\n  {{/PaymentResponseCode}}\r\n  {{#PaymentResponseStatus}}\r\n  \"PaymentResponseStatus\": \"{{PaymentResponseStatus}}\",\r\n  {{/PaymentResponseStatus}}\r\n  \"PaymentMethod\": [\r\n    {\r\n      {{#SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.Currency}}\r\n      \"CurrencyCode\": \"{{SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.Currency}}\",\r\n      {{/SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.Currency}}\r\n      {{^SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.Currency}}\r\n      \"CurrencyCode\": \"{{CurrencyCode}}\",\r\n      {{/SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.Currency}}\r\n      {{#SaleToPOIResponse.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.MaskedPan}}\r\n      \"AccountNumber\": \"{{SaleToPOIResponse.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.MaskedPan}}\",\r\n      {{/SaleToPOIResponse.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.MaskedPan}}\r\n      {{#SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.cardHolderName}}\r\n      \"NameOnCard\": \"{{SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.cardHolderName}}\",\r\n      {{/SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.cardHolderName}}\r\n      {{#SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.expiryMonth}}\r\n      \"CardExpiryMonth\": \"{{SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.expiryMonth}}\",\r\n      {{/SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.expiryMonth}}\r\n      {{#SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.expiryYear}}\r\n      \"CardExpiryYear\": \"{{SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.expiryYear}}\",\r\n      {{/SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.expiryYear}}\r\n      \"CustomerPaySignature\": null,\r\n      {{#SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n      \"Amount\": {{SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}},\r\n      {{/SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n      {{^SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n      \"Amount\": 0,\r\n      {{/SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n      {{#SaleToPOIResponse.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.EntryMode}}\r\n      \"EntryTypeId\": \"{{.}}\",\r\n      {{/SaleToPOIResponse.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.EntryMode}}\r\n      {{#SaleToPOIResponse.PaymentResponse.PaymentResult.CapturedSignature}}\r\n      \"CustomerPaySignature\": \"{{{SaleToPOIResponse.PaymentResponse.PaymentResult.CapturedSignature}}}\",\r\n      {{/SaleToPOIResponse.PaymentResponse.PaymentResult.CapturedSignature}}\r\n      \"GatewayId\": \"{{GatewayId}}\",\r\n      \"LocationId\": \"{{LocationId}}\",\r\n      \"PaymentTransaction\": [\r\n        {\r\n          \"PaymentTransactionId\": \"{{UniqueId}}\",\r\n          \"RequestedAmount\": {{RequestedAmount}},\r\n          {{#Troutd}}\r\n          \"RequestId\": \"{{Troutd}}\",\r\n          \"NetworkTransactionId\": \"{{Troutd}}\",\r\n          {{/Troutd}}\r\n          {{#Ctroutd}}\r\n          \"RequestToken\": \"{{Ctroutd}}\",\r\n          {{/Ctroutd}}\r\n          {{#SaleToPOIResponse.PaymentResponse.SaleData.SaleTransactionID.TimeStamp}}\r\n          \"RequestedDate\": \"{{SaleToPOIResponse.PaymentResponse.SaleData.SaleTransactionID.TimeStamp}}\",\r\n          \"TransactionDate\": \"{{SaleToPOIResponse.PaymentResponse.SaleData.SaleTransactionID.TimeStamp}}\",\r\n          {{/SaleToPOIResponse.PaymentResponse.SaleData.SaleTransactionID.TimeStamp}}\r\n          {{^SaleToPOIResponse.PaymentResponse.SaleData.SaleTransactionID.TimeStamp}}\r\n          \"RequestedDate\": \"{{TransactionDateTime}}\",\r\n          \"TransactionDate\": \"{{TransactionDateTime}}\",\r\n          {{/SaleToPOIResponse.PaymentResponse.SaleData.SaleTransactionID.TimeStamp}}\r\n          {{#SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n          \"ProcessedAmount\": {{SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}},\r\n          {{/SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n           {{^SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n          \"ProcessedAmount\": 0,\r\n          {{/SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n          {{#SaleToPOIResponse.PaymentResponse.POIData.POIReconciliationID}}\r\n          \"ReconciliationId\": \"{{SaleToPOIResponse.PaymentResponse.POIData.POIReconciliationID}}\",\r\n          {{/SaleToPOIResponse.PaymentResponse.POIData.POIReconciliationID}}\r\n          \"OrderId\": \"{{OrderId}}\",\r\n          {{#SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.currentBalanceValue}}\r\n          \"RemainingBalance\": {{SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.currentBalanceValue}},\r\n          {{/SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.currentBalanceValue}}\r\n          \"TransactionType\": {\r\n            \"PaymentTransactionTypeId\": \"{{Command}}\"\r\n          },\r\n          \"Status\": {\r\n            \"PaymentTransactionStatusId\": \"Closed\"\r\n          },\r\n          {{#SaleToPOIResponse.PaymentResponse.Response.Result}}\r\n          \"PaymentResponseStatus\": {\r\n            \"PaymentResponseStatusId\": \"{{SaleToPOIResponse.PaymentResponse.Response.Result}}\"\r\n          },\r\n          {{/SaleToPOIResponse.PaymentResponse.Response.Result}}\r\n          {{^SaleToPOIResponse.PaymentResponse.Response.Result}}\r\n          \"PaymentResponseStatus\": {\r\n            \"PaymentResponseStatusId\": \"{{PaymentResponseStatus}}\"\r\n          },\r\n          {{/SaleToPOIResponse.PaymentResponse.Response.Result}}\r\n          \"TransmissionStatus\": {\r\n            \"PaymentTransmissionStatusId\": \"Closed\"\r\n          }\r\n        }\r\n      ],\r\n      {{#SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.fundingSource}}\r\n      \"PaymentType\": {\r\n        \"PaymentTypeId\": \"{{SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.fundingSource}}\"\r\n      },\r\n      {{/SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.fundingSource}}\r\n      {{^SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.fundingSource}}\r\n      \"PaymentType\": {\r\n        \"PaymentTypeId\": \"{{PaymentType}}\"\r\n      },\r\n      {{/SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.fundingSource}}\r\n      {{#SaleToPOIResponse.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.PaymentBrand}}\r\n      \"CardType\": {\r\n        \"CardTypeId\": \"{{SaleToPOIResponse.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.PaymentBrand}}\"\r\n      },\r\n      \"CardTypeId\": \"{{SaleToPOIResponse.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.PaymentBrand}}\"\r\n      {{/SaleToPOIResponse.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.PaymentBrand}}\r\n      {{^SaleToPOIResponse.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.PaymentBrand}}\r\n      \"CardTypeId\": null\r\n      {{/SaleToPOIResponse.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.PaymentBrand}}\r\n    }\r\n  ]\r\n}", "GatewayRequestTemplate": "{\r\n  \"SaleToPOIRequest\": {\r\n    \"MessageHeader\": {\r\n      \"ProtocolVersion\": \"3.0\",\r\n      \"MessageClass\": \"Service\",\r\n      \"MessageCategory\": \"Payment\",\r\n      \"MessageType\": \"Request\",\r\n      \"SaleID\": \"{{UniqueId}}\",\r\n      \"ServiceID\": \"{{ServiceId}}\",\r\n      \"POIID\": \"{{TerminalId}}\"\r\n    },\r\n    \"PaymentRequest\": {\r\n      \"SaleData\": {\r\n        {{#SaleToAcquirerData}}\r\n         \"SaleToAcquirerData\":\"{{SaleToAcquirerData}}\",\r\n         {{/SaleToAcquirerData}}\r\n         {{^SaleToAcquirerData}}\r\n         \"SaleToAcquirerData\":\"recurringProcessingModel=CardOnFile&shopperReference={{StoreId}}&externalPlatform.name={{gatewayApplicationInfo.externalPlatformName}}&externalPlatform.integrator={{gatewayApplicationInfo.externalPlatformIntegrator}}&merchantApplication.name={{gatewayApplicationInfo.merchantApplicationName}}\",\r\n                 \"TokenRequestedType\":\"Customer\",\r\n         {{/SaleToAcquirerData}}\r\n        \"SaleTransactionID\": {\r\n          \"TransactionID\": \"{{UniqueId}}\",\r\n          \"TimeStamp\": \"{{TransactionDateTime}}\"\r\n        }\r\n      },\r\n      \"PaymentTransaction\": {\r\n        \"AmountsReq\": {\r\n          \"Currency\": \"{{CurrencyCode}}\",\r\n          \"RequestedAmount\": {{Amount}}\r\n        }\r\n      },\r\n      \"PaymentData\": {\r\n        {{#Prepaid}}\r\n        \"PaymentInstrumentData\": {\r\n                    \"PaymentInstrumentType\": \"StoredValue\",\r\n                    \"StoredValueAccountID\": {\r\n                        \"StoredValueAccountType\": \"GiftCard\",\r\n                        \"StoredValueProvider\": \"givex\",\r\n                        \"IdentificationType\": \"PAN\",\r\n                        {{#AccountNumber}}\r\n                        \"EntryMode\": [\r\n                          \"Scanned\"\r\n                        ],\r\n                        \"StoredValueID\": \"{{AccountNumber}}\"\r\n                         {{/AccountNumber}}\r\n                         {{^AccountNumber}}\r\n                         \"EntryMode\": [\r\n                          \"MagStripe\"\r\n                        ],\r\n                        \"StoredValueID\": \"\"\r\n                         {{/AccountNumber}}\r\n                    }\r\n                },\r\n        {{/Prepaid}}\r\n        \"PaymentType\": \"{{Command}}\"\r\n      }\r\n      \r\n    }\r\n  }\r\n}" }, { "ProfileId": "tm-demo-us", "GatewayPaymentURLTemplate": "https://terminal-api-test.adyen.com/sync", "TransactionType": "TransactionStatus", "GatewayResponseTemplate": "{\r\n  \"OrderId\": \"{{OrderId}}\",\r\n  {{#PaymentResponseText}}\r\n  \"PaymentResponseText\": \"{{PaymentResponseText}}\",\r\n  {{/PaymentResponseText}}\r\n  {{#PaymentResponseCode}}\r\n  \"PaymentResponseCode\": \"{{PaymentResponseCode}}\",\r\n  {{/PaymentResponseCode}}\r\n  {{#PaymentResponseStatus}}\r\n  \"PaymentResponseStatus\": \"{{PaymentResponseStatus}}\",\r\n  {{/PaymentResponseStatus}}\r\n  {{#RecurringDetailReference}}\r\n  \"RecurringDetailReference\": \"{{RecurringDetailReference}}\",\r\n  {{/RecurringDetailReference}}\r\n  \"PaymentMethod\": [\r\n    {\r\n      {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.AmountsResp.Currency}}\r\n      \"CurrencyCode\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.AmountsResp.Currency}}\",\r\n      {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.AmountsResp.Currency}}\r\n      {{^SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.AmountsResp.Currency}}\r\n      \"CurrencyCode\": \"{{CurrencyCode}}\",\r\n      {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.AmountsResp.Currency}}\r\n      {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.MaskedPan}}\r\n      \"AccountNumber\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.MaskedPan}}\",\r\n      {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.MaskedPan}}\r\n      {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.Response.AdditionalResponse.additionalData.backendGiftcardPAN}}\r\n      \"AccountNumber\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.Response.AdditionalResponse.additionalData.backendGiftcardPAN}}\",\r\n      {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.Response.AdditionalResponse.additionalData.backendGiftcardPAN}}\r\n      {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.cardHolderName}}\r\n      \"NameOnCard\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.cardHolderName}}\",\r\n      {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.cardHolderName}}\r\n      {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.expiryMonth}}\r\n      \"CardExpiryMonth\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.expiryMonth}}\",\r\n      {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.expiryMonth}}\r\n      {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.expiryYear}}\r\n      \"CardExpiryYear\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.expiryYear}}\",\r\n      {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.expiryYear}}\r\n      \"CustomerPaySignature\": null,\r\n      {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n      \"Amount\": {{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}},\r\n      {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n      {{^SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n      {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.StoredValueResult}}\r\n      \"Amount\": {{ItemAmount}},\r\n      {{#StoredValueAccountStatus.StoredValueAccountID.EntryMode}}\r\n      \"EntryTypeId\": \"{{.}}\",\r\n      {{/StoredValueAccountStatus.StoredValueAccountID.EntryMode}}\r\n      {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.StoredValueResult}}\r\n      {{^SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.StoredValueResult}}\r\n      \"Amount\": 0,\r\n      {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.StoredValueResult}}\r\n      {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n      {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.EntryMode}}\r\n      \"EntryTypeId\": \"{{.}}\",\r\n      {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.EntryMode}}\r\n      {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.CapturedSignature}}\r\n      \"CustomerPaySignature\": \"{{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.CapturedSignature}}}\",\r\n      {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.CapturedSignature}}\r\n      \"GatewayId\": \"{{GatewayId}}\",\r\n      \"LocationId\": \"{{LocationId}}\",\r\n      \"PaymentTransaction\": [\r\n        {\r\n          \"PaymentTransactionId\": \"{{UniqueId}}\",\r\n          \"RequestedAmount\": {{RequestedAmount}},\r\n          {{#Troutd}}\r\n          \"RequestId\": \"{{Troutd}}\",\r\n          \"NetworkTransactionId\": \"{{Troutd}}\",\r\n          {{/Troutd}}\r\n          {{#Ctroutd}}\r\n          \"RequestToken\": \"{{Ctroutd}}\",\r\n          {{/Ctroutd}}\r\n          {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.SaleData.SaleTransactionID.TimeStamp}}\r\n          \"RequestedDate\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.SaleData.SaleTransactionID.TimeStamp}}\",\r\n          \"TransactionDate\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.SaleData.SaleTransactionID.TimeStamp}}\",\r\n          {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.SaleData.SaleTransactionID.TimeStamp}}\r\n          {{^SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.SaleData.SaleTransactionID.TimeStamp}}\r\n          \"RequestedDate\": \"{{TransactionDateTime}}\",\r\n          \"TransactionDate\": \"{{TransactionDateTime}}\",\r\n          {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.SaleData.SaleTransactionID.TimeStamp}}\r\n          {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n          \"ProcessedAmount\": {{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}},\r\n          {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n          {{^SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n          {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.StoredValueResult}}\r\n          \"ProcessedAmount\": {{ItemAmount}},\r\n          {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.StoredValueResult}}\r\n          {{^SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.StoredValueResult}}\r\n          \"ProcessedAmount\": 0,\r\n          {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.StoredValueResult}}\r\n          {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n          {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.POIData.POIReconciliationID}}\r\n          \"ReconciliationId\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.POIData.POIReconciliationID}}\",\r\n          {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.POIData.POIReconciliationID}}\r\n          {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.POIData.POIReconciliationID}}\r\n          \"ReconciliationId\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.POIData.POIReconciliationID}}\",\r\n          {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.POIData.POIReconciliationID}}\r\n          \"OrderId\": \"{{OrderId}}\",\r\n          {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.currentBalanceValue}}\r\n          \"RemainingBalance\": {{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.currentBalanceValue}},\r\n          {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.currentBalanceValue}}\r\n          {{^SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.currentBalanceValue}}\r\n          {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.StoredValueResult}}\r\n          \"RemainingBalance\": {{StoredValueAccountStatus.CurrentBalance}},\r\n          {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.StoredValueResult}}\r\n          {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.currentBalanceValue}}\r\n          \r\n          \"TransactionType\": {\r\n            \"PaymentTransactionTypeId\": \"{{OriginalCommand}}\"\r\n          },\r\n          \"Status\": {\r\n            \"PaymentTransactionStatusId\": \"Closed\"\r\n          },\r\n          {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.Result}}\r\n          \"PaymentResponseStatus\": {\r\n            \"PaymentResponseStatusId\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.Result}}\"\r\n          },\r\n          {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.Result}}\r\n          {{^SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.Result}}\r\n          {{#SaleToPOIResponse.TransactionStatusResponse.Response.Result}}\r\n          \"PaymentResponseStatus\": {\r\n            \"PaymentResponseStatusId\": \"{{SaleToPOIResponse.TransactionStatusResponse.Response.Result}}\"\r\n          },\r\n          {{/SaleToPOIResponse.TransactionStatusResponse.Response.Result}}\r\n          {{^SaleToPOIResponse.TransactionStatusResponse.Response.Result}}\r\n          \"PaymentResponseStatus\": {\r\n            \"PaymentResponseStatusId\": \"Failure\"\r\n          },\r\n          {{/SaleToPOIResponse.TransactionStatusResponse.Response.Result}}\r\n          {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.Result}}\r\n          \"TransmissionStatus\": {\r\n            \"PaymentTransmissionStatusId\": \"Closed\"\r\n          }\r\n        }\r\n      ],\r\n      {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.fundingSource}}\r\n      \"PaymentType\": {\r\n        \"PaymentTypeId\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.fundingSource}}\"\r\n      },\r\n      {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.fundingSource}}\r\n      {{^SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.fundingSource}}\r\n      \"PaymentType\": {\r\n        \"PaymentTypeId\": \"{{PaymentType}}\"\r\n      },\r\n      {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.fundingSource}}\r\n      {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.PaymentBrand}}\r\n      \"CardType\": {\r\n        \"CardTypeId\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.PaymentBrand}}\"\r\n      },\r\n      \"CardTypeId\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.PaymentBrand}}\"\r\n      {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.PaymentBrand}}\r\n      {{^SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.PaymentBrand}}\r\n      {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.Response.AdditionalResponse.additionalData.cardType}}\r\n       \"CardType\": {\r\n        \"CardTypeId\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.Response.AdditionalResponse.additionalData.cardType}}\"\r\n      },\r\n      \"CardTypeId\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.Response.AdditionalResponse.additionalData.cardType}}\"\r\n      {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.Response.AdditionalResponse.additionalData.cardType}}\r\n      {{^SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.Response.AdditionalResponse.additionalData.cardType}}\r\n      \"CardTypeId\": null\r\n      {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.Response.AdditionalResponse.additionalData.cardType}}\r\n      {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.PaymentBrand}}\r\n    }\r\n  ]\r\n}", "GatewayRequestTemplate": "{\r\n  \"SaleToPOIRequest\": {\r\n    \"MessageHeader\": {\r\n      \"ProtocolVersion\": \"3.0\",\r\n      \"MessageClass\": \"Service\",\r\n      \"MessageCategory\": \"TransactionStatus\",\r\n      \"MessageType\": \"Request\",\r\n      \"SaleID\": \"{{ServiceId}}\",\r\n      \"ServiceID\": \"{{ServiceId}}\",\r\n      \"POIID\": \"{{TerminalId}}\"\r\n    },\r\n    \"TransactionStatusRequest\": {\r\n      \"MessageReference\": {\r\n        \"SaleID\": \"{{UniqueId}}\",\r\n        {{#MessageCategory}}\r\n        \"MessageCategory\": \"{{MessageCategory}}\"\r\n        {{/MessageCategory}}\r\n        {{^MessageCategory}}\r\n        \"MessageCategory\": \"Payment\"\r\n        {{/MessageCategory}}\r\n      }\r\n    }\r\n  }\r\n}" }, { "GatewayPaymentURLTemplate": "https://terminal-api-test.adyen.com/sync", "TransactionType": "UnReferenced_Refund", "GatewayResponseTemplate": "{\r\n  \"OrderId\": \"{{OrderId}}\",\r\n  {{#PaymentResponseText}}\r\n  \"PaymentResponseText\": \"{{PaymentResponseText}}\",\r\n  {{/PaymentResponseText}}\r\n  {{#PaymentResponseCode}}\r\n  \"PaymentResponseCode\": \"{{PaymentResponseCode}}\",\r\n  {{/PaymentResponseCode}}\r\n  {{#PaymentResponseStatus}}\r\n  \"PaymentResponseStatus\": \"{{PaymentResponseStatus}}\",\r\n  {{/PaymentResponseStatus}}\r\n  \"PaymentMethod\": [\r\n    {\r\n      {{#SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.Currency}}\r\n      \"CurrencyCode\": \"{{SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.Currency}}\",\r\n      {{/SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.Currency}}\r\n      {{^SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.Currency}}\r\n      \"CurrencyCode\": \"{{CurrencyCode}}\",\r\n      {{/SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.Currency}}\r\n      {{#SaleToPOIResponse.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.MaskedPan}}\r\n      \"AccountNumber\": \"{{SaleToPOIResponse.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.MaskedPan}}\",\r\n      {{/SaleToPOIResponse.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.MaskedPan}}\r\n      {{#SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.cardHolderName}}\r\n      \"NameOnCard\": \"{{SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.cardHolderName}}\",\r\n      {{/SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.cardHolderName}}\r\n      {{#SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.expiryMonth}}\r\n      \"CardExpiryMonth\": \"{{SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.expiryMonth}}\",\r\n      {{/SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.expiryMonth}}\r\n      {{#SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.expiryYear}}\r\n      \"CardExpiryYear\": \"{{SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.expiryYear}}\",\r\n      {{/SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.expiryYear}}\r\n      \"CustomerPaySignature\": null,\r\n      {{#SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n      \"Amount\": {{SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}},\r\n      {{/SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n      {{^SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n      \"Amount\": 0,\r\n      {{/SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n      {{#SaleToPOIResponse.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.EntryMode}}\r\n      \"EntryTypeId\": \"{{.}}\",\r\n      {{/SaleToPOIResponse.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.EntryMode}}\r\n      {{#SaleToPOIResponse.PaymentResponse.PaymentResult.CapturedSignature}}\r\n      \"CustomerPaySignature\": \"{{{SaleToPOIResponse.PaymentResponse.PaymentResult.CapturedSignature}}}\",\r\n      {{/SaleToPOIResponse.PaymentResponse.PaymentResult.CapturedSignature}}\r\n      \"GatewayId\": \"{{GatewayId}}\",\r\n      \"LocationId\": \"{{LocationId}}\",\r\n      \"PaymentTransaction\": [\r\n        {\r\n          \"PaymentTransactionId\": \"{{UniqueId}}\",\r\n          \"RequestedAmount\": {{RequestedAmount}},\r\n          {{#Ctroutd}}\r\n          \"RequestToken\": \"{{Ctroutd}}\",\r\n          {{/Ctroutd}}\r\n          {{#Troutd}}\r\n          \"RequestId\": \"{{Troutd}}\",\r\n          {{/Troutd}}\r\n          {{#SaleToPOIResponse.PaymentResponse.SaleData.SaleTransactionID.TimeStamp}}\r\n          \"RequestedDate\": \"{{SaleToPOIResponse.PaymentResponse.SaleData.SaleTransactionID.TimeStamp}}\",\r\n          \"TransactionDate\": \"{{SaleToPOIResponse.PaymentResponse.SaleData.SaleTransactionID.TimeStamp}}\",\r\n          {{/SaleToPOIResponse.PaymentResponse.SaleData.SaleTransactionID.TimeStamp}}\r\n          {{^SaleToPOIResponse.PaymentResponse.SaleData.SaleTransactionID.TimeStamp}}\r\n          \"RequestedDate\": \"{{TransactionDateTime}}\",\r\n          \"TransactionDate\": \"{{TransactionDateTime}}\",\r\n          {{/SaleToPOIResponse.PaymentResponse.SaleData.SaleTransactionID.TimeStamp}}\r\n          {{#SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n          \"ProcessedAmount\": {{SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}},\r\n          {{/SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n          {{^SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n          \"ProcessedAmount\": 0,\r\n          {{/SaleToPOIResponse.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n          {{#SaleToPOIResponse.PaymentResponse.POIData.POIReconciliationID}}\r\n          \"ReconciliationId\": \"{{SaleToPOIResponse.PaymentResponse.POIData.POIReconciliationID}}\",\r\n          {{/SaleToPOIResponse.PaymentResponse.POIData.POIReconciliationID}}\r\n          \"OrderId\": \"{{OrderId}}\",\r\n          \"TransactionType\": {\r\n            \"PaymentTransactionTypeId\": \"{{Command}}\"\r\n          },\r\n          \"Status\": {\r\n            \"PaymentTransactionStatusId\": \"Closed\"\r\n          },\r\n          {{#SaleToPOIResponse.PaymentResponse.Response.Result}}\r\n          \"PaymentResponseStatus\": {\r\n            \"PaymentResponseStatusId\": \"{{SaleToPOIResponse.PaymentResponse.Response.Result}}\"\r\n          },\r\n          {{/SaleToPOIResponse.PaymentResponse.Response.Result}}\r\n          {{^SaleToPOIResponse.PaymentResponse.Response.Result}}\r\n          \"PaymentResponseStatus\": {\r\n            \"PaymentResponseStatusId\": \"{{PaymentResponseStatus}}\"\r\n          },\r\n          {{/SaleToPOIResponse.PaymentResponse.Response.Result}}\r\n          \"TransmissionStatus\": {\r\n            \"PaymentTransmissionStatusId\": \"Closed\"\r\n          }\r\n        }\r\n      ],\r\n      {{#SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.fundingSource}}\r\n      \"PaymentType\": {\r\n        \"PaymentTypeId\": \"{{SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.fundingSource}}\"\r\n      },\r\n      {{/SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.fundingSource}}\r\n      {{^SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.fundingSource}}\r\n      \"PaymentType\": {\r\n        \"PaymentTypeId\": \"{{PaymentType}}\"\r\n      },\r\n      {{/SaleToPOIResponse.PaymentResponse.Response.AdditionalResponse.additionalData.fundingSource}}\r\n      {{#SaleToPOIResponse.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.PaymentBrand}}\r\n      \"CardType\": {\r\n        \"CardTypeId\": \"{{SaleToPOIResponse.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.PaymentBrand}}\"\r\n      },\r\n      \"CardTypeId\": \"{{SaleToPOIResponse.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.PaymentBrand}}\"\r\n      {{/SaleToPOIResponse.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.PaymentBrand}}\r\n      {{^SaleToPOIResponse.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.PaymentBrand}}\r\n      \"CardTypeId\": null\r\n      {{/SaleToPOIResponse.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.PaymentBrand}}\r\n    }\r\n  ]\r\n}", "GatewayRequestTemplate": "{\r\n  \"SaleToPOIRequest\": {\r\n    \"MessageHeader\": {\r\n      \"ProtocolVersion\": \"3.0\",\r\n      \"MessageClass\": \"Service\",\r\n      \"MessageCategory\": \"Payment\",\r\n      \"MessageType\": \"Request\",\r\n      \"SaleID\": \"{{UniqueId}}\",\r\n      \"ServiceID\": \"{{ServiceId}}\",\r\n      \"POIID\": \"{{TerminalId}}\"\r\n    },\r\n    \"PaymentRequest\": {\r\n      \"SaleData\": {\r\n        {{#SaleToAcquirerData}}\r\n         \"SaleToAcquirerData\":\"{{SaleToAcquirerData}}\",\r\n         {{/SaleToAcquirerData}}\r\n        \"SaleTransactionID\": {\r\n          \"TransactionID\": \"{{UniqueId}}\",\r\n          \"TimeStamp\": \"{{TransactionDateTime}}\"\r\n        }\r\n      },\r\n      \"PaymentTransaction\": {\r\n        \"AmountsReq\": {\r\n          \"Currency\": \"{{CurrencyCode}}\",\r\n          \"RequestedAmount\": {{Amount}}\r\n        }\r\n      },\r\n      \"PaymentData\": {\r\n        {{#AccountNumber}}\r\n        \"PaymentInstrumentData\": {\r\n                    \"PaymentInstrumentType\": \"StoredValue\",\r\n                    \"StoredValueAccountID\": {\r\n                        \"StoredValueAccountType\": \"GiftCard\",\r\n                        \"StoredValueProvider\": \"givex\",\r\n                        \"IdentificationType\": \"PAN\",\r\n                        \"EntryMode\": [\r\n                            \"Scanned\"\r\n                        ],\r\n                        \"StoredValueID\": \"{{AccountNumber}}\"\r\n                    }\r\n                },\r\n        {{/AccountNumber}}\r\n        \"PaymentType\": \"{{Command}}\"\r\n      }\r\n      \r\n    }\r\n  }\r\n}" }, { "GatewayPaymentURLTemplate": "https://terminal-api-test.adyen.com/sync", "TransactionType": "Void", "GatewayResponseTemplate": "{\r\n  \"OrderId\": \"{{OrderId}}\",\r\n  {{#PaymentResponseText}}\r\n  \"PaymentResponseText\": \"{{PaymentResponseText}}\",\r\n  {{/PaymentResponseText}}\r\n  {{#PaymentResponseCode}}\r\n  \"PaymentResponseCode\": \"{{PaymentResponseCode}}\",\r\n  {{/PaymentResponseCode}}\r\n  {{#PaymentResponseStatus}}\r\n  \"PaymentResponseStatus\": \"{{PaymentResponseStatus}}\",\r\n  {{/PaymentResponseStatus}}\r\n  \"PaymentMethod\": [\r\n    {\r\n      \"CurrencyCode\": \"{{CurrencyCode}}\",\r\n      \"GatewayId\": \"{{GatewayId}}\",\r\n      \"LocationId\": \"{{LocationId}}\",\r\n      \"PaymentTransaction\": [\r\n        {\r\n          \"PaymentTransactionId\": \"{{UniqueId}}\",\r\n          \"RequestedAmount\": {{RequestedAmount}},\r\n          {{#Troutd}}\r\n          \"RequestId\": \"{{Troutd}}\",\r\n          {{/Troutd}}\r\n          {{#Ctroutd}}\r\n          \"RequestToken\": \"{{Ctroutd}}\",\r\n          {{/Ctroutd}}\r\n          {{#RefCtroutd}}\r\n          \"FollowOnToken\": \"{{RefCtroutd}}\",\r\n          {{/RefCtroutd}}\r\n          {{#RefTroutd}}\r\n          \"FollowOnId\": \"{{RefTroutd}}\",\r\n          {{/RefTroutd}}\r\n          {{#SaleToPOIResponse.ReversalResponse.POIData.POITransactionID.TimeStamp}}\r\n          \"RequestedDate\": \"{{SaleToPOIResponse.ReversalResponse.POIData.POITransactionID.TimeStamp}}\",\r\n          \"TransactionDate\": \"{{SaleToPOIResponse.ReversalResponse.POIData.POITransactionID.TimeStamp}}\",\r\n          {{/SaleToPOIResponse.ReversalResponse.POIData.POITransactionID.TimeStamp}}\r\n          {{^SaleToPOIResponse.ReversalResponse.POIData.POITransactionID.TimeStamp}}\r\n          \"RequestedDate\": \"{{TransactionDateTime}}\",\r\n          \"TransactionDate\": \"{{TransactionDateTime}}\",\r\n          {{/SaleToPOIResponse.ReversalResponse.POIData.POITransactionID.TimeStamp}}\r\n          {{#SaleToPOIResponse.ReversalResponse.Response.AdditionalResponse.additionalData.posAuthAmountValue}}\r\n          \"ProcessedAmount\": {{RequestedAmount}},\r\n          {{/SaleToPOIResponse.ReversalResponse.Response.AdditionalResponse.additionalData.posAuthAmountValue}}\r\n          {{^SaleToPOIResponse.ReversalResponse.Response.AdditionalResponse.additionalData.posAuthAmountValue}}\r\n          \"ProcessedAmount\": 0,\r\n          {{/SaleToPOIResponse.ReversalResponse.Response.AdditionalResponse.additionalData.posAuthAmountValue}}\r\n          \"OrderId\": \"{{OrderId}}\",\r\n          \"TransactionType\": {\r\n            \"PaymentTransactionTypeId\": \"{{Command}}\"\r\n          },\r\n          \"Status\": {\r\n            \"PaymentTransactionStatusId\": \"Closed\"\r\n          },\r\n          {{#SaleToPOIResponse.ReversalResponse.Response.Result}}\r\n          \"PaymentResponseStatus\": {\r\n            \"PaymentResponseStatusId\": \"{{SaleToPOIResponse.ReversalResponse.Response.Result}}\"\r\n          },\r\n          {{/SaleToPOIResponse.ReversalResponse.Response.Result}}\r\n          {{^SaleToPOIResponse.ReversalResponse.Response.Result}}\r\n          \"PaymentResponseStatus\": {\r\n            \"PaymentResponseStatusId\": \"{{PaymentResponseStatus}}\"\r\n          },\r\n          {{/SaleToPOIResponse.ReversalResponse.Response.Result}}\r\n          \"TransmissionStatus\": {\r\n            \"PaymentTransmissionStatusId\": \"Closed\"\r\n          }\r\n        }\r\n      ],\r\n      \"PaymentType\": {\r\n        \"PaymentTypeId\": \"{{PaymentType}}\"\r\n      }\r\n    }\r\n  ]\r\n}", "GatewayRequestTemplate": "{\r\n  \"SaleToPOIRequest\": {\r\n    \"MessageHeader\": {\r\n      \"ProtocolVersion\": \"3.0\",\r\n      \"MessageClass\": \"Service\",\r\n      \"MessageCategory\": \"Reversal\",\r\n      \"MessageType\": \"Request\",\r\n      \"SaleID\": \"{{UniqueId}}\",\r\n      \"ServiceID\": \"{{ServiceId}}\",\r\n      \"POIID\": \"{{TerminalId}}\"\r\n    },\r\n    \"ReversalRequest\": {\r\n      \"OriginalPOITransaction\": {\r\n        \"POITransactionID\": {\r\n          \"TransactionID\": \"{{Ctroutd}}.{{Troutd}}\",\r\n          \"TimeStamp\": \"{{TransactionDateTime}}\"\r\n        }\r\n      },\r\n      \"ReversalReason\": \"MerchantCancel\"\r\n    }\r\n  }\r\n}" }, { "GatewayPaymentURLTemplate": "https://terminal-api-test.adyen.com/sync", "TransactionType": "Refund", "GatewayResponseTemplate": "{\r\n  \"OrderId\": \"{{OrderId}}\",\r\n  {{#PaymentResponseText}}\r\n  \"PaymentResponseText\": \"{{PaymentResponseText}}\",\r\n  {{/PaymentResponseText}}\r\n  {{#PaymentResponseCode}}\r\n  \"PaymentResponseCode\": \"{{PaymentResponseCode}}\",\r\n  {{/PaymentResponseCode}}\r\n  {{#PaymentResponseStatus}}\r\n  \"PaymentResponseStatus\": \"{{PaymentResponseStatus}}\",\r\n  {{/PaymentResponseStatus}}\r\n  \"PaymentMethod\": [\r\n    {\r\n      \"CurrencyCode\": \"{{CurrencyCode}}\",\r\n      \"GatewayId\": \"{{GatewayId}}\",\r\n      \"LocationId\": \"{{LocationId}}\",\r\n      \"PaymentTransaction\": [\r\n        {\r\n          \"PaymentTransactionId\": \"{{UniqueId}}\",\r\n          \"RequestedAmount\": {{RequestedAmount}},\r\n          {{#Troutd}}\r\n          \"RequestId\": \"{{Troutd}}\",\r\n          {{/Troutd}}\r\n          {{#Ctroutd}}\r\n          \"RequestToken\": \"{{Ctroutd}}\",\r\n          {{/Ctroutd}}\r\n          {{#RefCtroutd}}\r\n          \"FollowOnToken\": \"{{RefCtroutd}}\",\r\n          {{/RefCtroutd}}\r\n          {{#RefTroutd}}\r\n          \"FollowOnId\": \"{{RefTroutd}}\",\r\n          {{/RefTroutd}}\r\n          {{#SaleToPOIResponse.ReversalResponse.POIData.POITransactionID.TimeStamp}}\r\n          \"RequestedDate\": \"{{SaleToPOIResponse.ReversalResponse.POIData.POITransactionID.TimeStamp}}\",\r\n          \"TransactionDate\": \"{{SaleToPOIResponse.ReversalResponse.POIData.POITransactionID.TimeStamp}}\",\r\n          {{/SaleToPOIResponse.ReversalResponse.POIData.POITransactionID.TimeStamp}}\r\n          {{^SaleToPOIResponse.ReversalResponse.POIData.POITransactionID.TimeStamp}}\r\n          \"RequestedDate\": \"{{TransactionDateTime}}\",\r\n          \"TransactionDate\": \"{{TransactionDateTime}}\",\r\n          {{/SaleToPOIResponse.ReversalResponse.POIData.POITransactionID.TimeStamp}}\r\n          {{#SaleToPOIResponse.ReversalResponse.Response.AdditionalResponse.additionalData.posAuthAmountValue}}\r\n          \"ProcessedAmount\": {{RequestedAmount}},\r\n          {{/SaleToPOIResponse.ReversalResponse.Response.AdditionalResponse.additionalData.posAuthAmountValue}}\r\n          {{^SaleToPOIResponse.ReversalResponse.Response.AdditionalResponse.additionalData.posAuthAmountValue}}\r\n          \"ProcessedAmount\": 0,\r\n          {{/SaleToPOIResponse.ReversalResponse.Response.AdditionalResponse.additionalData.posAuthAmountValue}}\r\n          \"OrderId\": \"{{OrderId}}\",\r\n          \"TransactionType\": {\r\n            \"PaymentTransactionTypeId\": \"{{Command}}\"\r\n          },\r\n          \"Status\": {\r\n            \"PaymentTransactionStatusId\": \"Closed\"\r\n          },\r\n          {{#SaleToPOIResponse.ReversalResponse.Response.Result}}\r\n          \"PaymentResponseStatus\": {\r\n            \"PaymentResponseStatusId\": \"{{SaleToPOIResponse.ReversalResponse.Response.Result}}\"\r\n          },\r\n          {{/SaleToPOIResponse.ReversalResponse.Response.Result}}\r\n          {{^SaleToPOIResponse.ReversalResponse.Response.Result}}\r\n          \"PaymentResponseStatus\": {\r\n            \"PaymentResponseStatusId\": \"{{PaymentResponseStatus}}\"\r\n          },\r\n          {{/SaleToPOIResponse.ReversalResponse.Response.Result}}\r\n          \"TransmissionStatus\": {\r\n            \"PaymentTransmissionStatusId\": \"Closed\"\r\n          }\r\n        }\r\n      ],\r\n      \"PaymentType\": {\r\n        \"PaymentTypeId\": \"{{PaymentType}}\"\r\n      }\r\n    }\r\n  ]\r\n}", "GatewayRequestTemplate": "{\r\n  \"SaleToPOIRequest\": {\r\n    \"MessageHeader\": {\r\n      \"ProtocolVersion\": \"3.0\",\r\n      \"MessageClass\": \"Service\",\r\n      \"MessageCategory\": \"Reversal\",\r\n      \"MessageType\": \"Request\",\r\n      \"SaleID\": \"{{UniqueId}}\",\r\n      \"ServiceID\": \"{{ServiceId}}\",\r\n      \"POIID\": \"{{TerminalId}}\"\r\n    },\r\n    \"ReversalRequest\": {\r\n      \"OriginalPOITransaction\": {\r\n        \"POITransactionID\": {\r\n          \"TransactionID\": \"{{Ctroutd}}.{{Troutd}}\",\r\n          \"TimeStamp\": \"{{TransactionDateTime}}\"\r\n        }\r\n      },\r\n      \"ReversalReason\": \"MerchantCancel\"\r\n    }\r\n  }\r\n}" }, { "GatewayPaymentURLTemplate": "https://terminal-api-test.adyen.com/sync", "TransactionType": "PaymentReconciliation", "GatewayResponseTemplate": "{\r\n  {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.Result}}\r\n  \"Result\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.Result}}\",\r\n  {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.Result}}\r\n  {{^SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.Result}}\r\n  \"Result\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.Response.Result}}\",\r\n  {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.Result}}\r\n  {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.SaleData.SaleTransactionID.TimeStamp}}\r\n  \"TransactionDate\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.SaleData.SaleTransactionID.TimeStamp}}\",\r\n  {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.SaleData.SaleTransactionID.TimeStamp}}\r\n  {{^SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.SaleData.SaleTransactionID.TimeStamp}}\r\n  \"TransactionDate\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.POIData.POITransactionID.TimeStamp}}\",\r\n  {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.SaleData.SaleTransactionID.TimeStamp}}\r\n  {{#Ctroutd}}\r\n  \"ctroutd\": \"{{Ctroutd}}\",\r\n  {{/Ctroutd}}\r\n  {{#Troutd}}\r\n  \"troutd\": \"{{Troutd}}\",\r\n  {{/Troutd}}\r\n  {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.AmountsResp.Currency}}\r\n   \"CurrencyCode\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.AmountsResp.Currency}}\",\r\n   {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.AmountsResp.Currency}}\r\n   {{^SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.AmountsResp.Currency}}\r\n   {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.posAuthAmountCurrency}}\r\n   \"CurrencyCode\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.posAuthAmountCurrency}}\",\r\n   {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.posAuthAmountCurrency}}\r\n   {{^SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.posAuthAmountCurrency}}\r\n   \"CurrencyCode\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.Response.AdditionalResponse.additionalData.posAuthAmountCurrency}}\",\r\n   {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.StoredValueResult}}\r\n   \"transactionAmount\": \"{{ItemAmount}}\",\r\n   {{#StoredValueAccountStatus.StoredValueAccountID.EntryMode}}\r\n   \"CardEntryMode\": \"{{.}}\",\r\n   {{/StoredValueAccountStatus.StoredValueAccountID.EntryMode}}\r\n   \"paymentType\": \"{{StoredValueAccountStatus.StoredValueAccountType}}\",\r\n   {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.StoredValueResult}}\r\n   {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.posAuthAmountCurrency}}\r\n   {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.AmountsResp.Currency}}\r\n   {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.EntryMode}}\r\n  \"CardEntryMode\": \"{{.}}\",\r\n  {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.EntryMode}}\r\n  \"TermId\": \"{{SaleToPOIResponse.MessageHeader.POIID}}\",\r\n  \"UNIQUE_ID\": \"{{SaleToPOIResponse.TransactionStatusResponse.MessageReference.SaleID}}\",\r\n  {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.PaymentBrand}}\r\n  \"PAYMENT_MEDIA\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.PaymentBrand}}\",\r\n  {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.PaymentBrand}}\r\n  {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.Response.AdditionalResponse.additionalData.cardType}}\r\n  \"PAYMENT_MEDIA\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.Response.AdditionalResponse.additionalData.cardType}}\",\r\n  {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.Response.AdditionalResponse.additionalData.cardType}}\r\n  {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.MaskedPan}}\r\n  \"accountNumber\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.MaskedPan}}\",\r\n  {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.PaymentInstrumentData.CardData.MaskedPan}}\r\n  {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.Response.AdditionalResponse.additionalData.backendGiftcardPAN}}\r\n  \"accountNumber\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.Response.AdditionalResponse.additionalData.backendGiftcardPAN}}\",\r\n  {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.StoredValueResponse.Response.AdditionalResponse.additionalData.backendGiftcardPAN}}\r\n  {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.fundingSource}}\r\n  \"paymentType\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.fundingSource}}\",\r\n  {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.fundingSource}}\r\n  {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.PaymentType}}\r\n  \"command\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.PaymentType}}\",\r\n  {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.PaymentType}}\r\n  {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n  \"transactionAmount\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\",\r\n  {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.PaymentResult.AmountsResp.AuthorizedAmount}}\r\n  {{#SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.expiryMonth}}\r\n  \"expiryMonth\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.expiryMonth}}\",\r\n  \"expiryYear\": \"{{SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.expiryYear}}\"\r\n  {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.expiryMonth}}\r\n  {{^SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.expiryMonth}}\r\n  \"expiryMonth\": null,\r\n  \"expiryYear\": null\r\n  {{/SaleToPOIResponse.TransactionStatusResponse.RepeatedMessageResponse.RepeatedResponseMessageBody.PaymentResponse.Response.AdditionalResponse.additionalData.expiryMonth}}\r\n}", "GatewayRequestTemplate": "{\r\n  \"SaleToPOIRequest\": {\r\n    \"MessageHeader\": {\r\n      \"ProtocolVersion\": \"3.0\",\r\n      \"MessageClass\": \"Service\",\r\n      \"MessageCategory\": \"TransactionStatus\",\r\n      \"MessageType\": \"Request\",\r\n      \"SaleID\": \"{{ServiceId}}\",\r\n      \"ServiceID\": \"{{ServiceId}}\",\r\n      \"POIID\": \"{{TerminalId}}\"\r\n    },\r\n    \"TransactionStatusRequest\": {\r\n      \"MessageReference\": {\r\n        \"SaleID\": \"{{UniqueId}}\",\r\n        {{#MessageCategory}}\r\n        \"MessageCategory\": \"{{MessageCategory}}\"\r\n        {{/MessageCategory}}\r\n        {{^MessageCategory}}\r\n        \"MessageCategory\": \"Payment\"\r\n        {{/MessageCategory}}\r\n      }\r\n    }\r\n  }\r\n}" }, { "GatewayPaymentURLTemplate": "https://terminal-api-test.adyen.com/sync", "TransactionType": "Abort", "GatewayRequestTemplate": "{\r\n  \"SaleToPOIRequest\": {\r\n    \"MessageHeader\": {\r\n      \"ProtocolVersion\": \"3.0\",\r\n      \"MessageClass\": \"Service\",\r\n      \"MessageCategory\": \"Abort\",\r\n      \"MessageType\": \"Request\",\r\n      \"SaleID\": \"{{ServiceId}}\",\r\n      \"ServiceID\": \"{{ServiceId}}\",\r\n      \"POIID\": \"{{TerminalId}}\"\r\n    },\r\n    \"AbortRequest\": {\r\n      \"AbortReason\": \"MerchantAbort\",\r\n      \"MessageReference\": {\r\n        \"MessageCategory\": \"Payment\",\r\n        \"SaleID\": \"{{UniqueId}}\",\r\n        \"ServiceID\": \"{{OriginalServiceId}}\"\r\n      }\r\n    }\r\n  }\r\n}" }, { "GatewayPaymentURLTemplate": "https://terminal-api-test.adyen.com/sync", "TransactionType": "OrderData", "GatewayResponseTemplate": null, "GatewayRequestTemplate": "<?xml version=\"1.0\" encoding=\"UTF-8\"?><screen name=\"virtual_receipt03.xslt\"><receipt><lines><lineitem></lineitem>{{#OrderLines}}\r\n\t\t\t<lineitem><description>{{ItemDescription}}</description><count>{{Quantity}}</count><amount><currency> {{CurrencyCode}} </currency><value>{{ExtendedPrice}}</value></amount></lineitem>{{/OrderLines}}\r\n\t\t</lines><subtotal><description>Sub Total</description><amount><currency> {{CurrencyCode}} </currency><value>{{OrderSubTotal}}</value></amount></subtotal><tax><taxtotal><description>Tax</description><amount><currency> {{CurrencyCode}} </currency><value>{{TotalTaxes}}</value></amount></taxtotal></tax><total><description>Item Total</description><amount><currency> {{CurrencyCode}} </currency><value>{{OrderTotal}}</value></amount></total></receipt></screen>" }, { "GatewayPaymentURLTemplate": "https://terminal-api-test.adyen.com/sync", "TransactionType": "OrderDisplay", "GatewayResponseTemplate": null, "GatewayRequestTemplate": "{\r\n    \"SaleToPOIRequest\": {\r\n        \"MessageHeader\": {\r\n            \"ServiceID\": \"{{ServiceId}}\",\r\n            \"ProtocolVersion\": \"3.0\",\r\n            \"MessageClass\": \"Device\",\r\n            \"POIID\": \"{{TerminalId}}\",\r\n            \"MessageType\": \"Request\",\r\n            \"SaleID\": \"{{ServiceId}}\",\r\n            \"MessageCategory\": \"Display\"\r\n        },\r\n        \"DisplayRequest\": {\r\n            \"DisplayOutput\": [\r\n                {\r\n                    \"Device\": \"CustomerDisplay\",\r\n                    \"InfoQualify\": \"Display\",\r\n                    \"OutputContent\": {\r\n                        \"OutputFormat\": \"XHTML\",\r\n                        \"OutputXHTML\": \"{{{OrderOutputXHTML}}}\"\r\n                    }\r\n                }\r\n            ]\r\n        }\r\n    }\r\n}" }, { "GatewayPaymentURLTemplate": "https://terminal-api-test.adyen.com/sync", "TransactionType": "SessionFinish", "GatewayResponseTemplate": null, "GatewayRequestTemplate": "{\r\n  \"SaleToPOIRequest\": {\r\n    \"MessageHeader\": {\r\n      \"ProtocolVersion\": \"3.0\",\r\n      \"MessageClass\": \"Device\",\r\n      \"MessageCategory\": \"Display\",\r\n      \"MessageType\": \"Request\",\r\n      \"ServiceID\": \"{{ServiceId}}\",\r\n      \"SaleID\": \"{{ServiceId}}\",\r\n      \"POIID\": \"{{TerminalId}}\"\r\n    },\r\n    \"DisplayRequest\": {\r\n      \"DisplayOutput\": [\r\n        {\r\n          \"Device\": \"CustomerDisplay\",\r\n          \"InfoQualify\": \"Display\",\r\n          \"OutputContent\": {\r\n            \"OutputFormat\": \"MessageRef\",\r\n            \"PredefinedContent\": {\r\n              \"ReferenceID\": \"Idle\"\r\n            }\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}" }, { "GatewayPaymentURLTemplate": "https://terminal-api-test.adyen.com/sync", "TransactionType": "BALANCE CHECK", "GatewayResponseTemplate": "{\r\n  \"OrderId\": \"{{OrderId}}\",\r\n  {{#PaymentResponseText}}\r\n  \"PaymentResponseText\": \"{{PaymentResponseText}}\",\r\n  {{/PaymentResponseText}}\r\n  {{#PaymentResponseCode}}\r\n  \"PaymentResponseCode\": \"{{PaymentResponseCode}}\",\r\n  {{/PaymentResponseCode}}\r\n  {{#PaymentResponseStatus}}\r\n  \"PaymentResponseStatus\": \"{{PaymentResponseStatus}}\",\r\n  {{/PaymentResponseStatus}}\r\n  \"PaymentMethod\": [\r\n    {\r\n      {{#SaleToPOIResponse.BalanceInquiryResponse.PaymentAccountStatus.Currency}}\r\n      \"CurrencyCode\": \"{{SaleToPOIResponse.BalanceInquiryResponse.PaymentAccountStatus.Currency}}\",\r\n      {{/SaleToPOIResponse.BalanceInquiryResponse.PaymentAccountStatus.Currency}}\r\n      {{^SaleToPOIResponse.BalanceInquiryResponse.PaymentAccountStatus.Currency}}\r\n      \"CurrencyCode\": \"{{CurrencyCode}}\",\r\n      {{/SaleToPOIResponse.BalanceInquiryResponse.PaymentAccountStatus.Currency}}\r\n      {{#SaleToPOIResponse.BalanceInquiryResponse.Response.AdditionalResponse.additionalData.backendGiftcardPAN}}\r\n      \"AccountNumber\": \"{{SaleToPOIResponse.BalanceInquiryResponse.Response.AdditionalResponse.additionalData.backendGiftcardPAN}}\",\r\n      {{/SaleToPOIResponse.BalanceInquiryResponse.Response.AdditionalResponse.additionalData.backendGiftcardPAN}}\r\n      {{^SaleToPOIResponse.BalanceInquiryResponse.Response.AdditionalResponse.additionalData.backendGiftcardPAN}}\r\n      \"AccountNumber\": \"{{AccountNumber}}\",\r\n      {{/SaleToPOIResponse.BalanceInquiryResponse.Response.AdditionalResponse.additionalData.backendGiftcardPAN}}\r\n      {{#SaleToPOIResponse.BalanceInquiryResponse.PaymentAccountStatus.PaymentInstrumentData.StoredValueAccountID.EntryMode}}\r\n      \"EntryTypeId\": \"{{.}}\",\r\n      {{/SaleToPOIResponse.BalanceInquiryResponse.PaymentAccountStatus.PaymentInstrumentData.StoredValueAccountID.EntryMode}}\r\n      \"GatewayId\": \"{{GatewayId}}\",\r\n      \"LocationId\": \"{{LocationId}}\",\r\n      \"PaymentTransaction\": [\r\n        {\r\n          \"PaymentTransactionId\": \"{{UniqueId}}\",\r\n          {{#Troutd}}\r\n          \"RequestId\": \"{{Troutd}}\",\r\n          {{/Troutd}}\r\n          {{#Ctroutd}}\r\n          \"RequestToken\": \"{{Ctroutd}}\",\r\n          {{/Ctroutd}}\r\n          \"RequestedAmount\": 0,\r\n          {{#SaleToPOIResponse.BalanceInquiryResponse.PaymentAccountStatus.PaymentAcquirerData.AcquirerTransactionID.TimeStamp}}\r\n          \"RequestedDate\": \"{{SaleToPOIResponse.BalanceInquiryResponse.PaymentAccountStatus.PaymentAcquirerData.AcquirerTransactionID.TimeStamp}}\",\r\n          {{/SaleToPOIResponse.BalanceInquiryResponse.PaymentAccountStatus.PaymentAcquirerData.AcquirerTransactionID.TimeStamp}}\r\n          {{^SaleToPOIResponse.PaymentResponse.SaleData.SaleTransactionID.TimeStamp}}\r\n          \"RequestedDate\": \"{{TransactionDateTime}}\",\r\n          {{/SaleToPOIResponse.PaymentResponse.SaleData.SaleTransactionID.TimeStamp}}\r\n          {{#SaleToPOIResponse.BalanceInquiryResponse.PaymentAccountStatus.PaymentAcquirerData.AcquirerTransactionID.TimeStamp}}\r\n          \"TransactionDate\": \"{{SaleToPOIResponse.BalanceInquiryResponse.PaymentAccountStatus.PaymentAcquirerData.AcquirerTransactionID.TimeStamp}}\",\r\n          {{/SaleToPOIResponse.BalanceInquiryResponse.PaymentAccountStatus.PaymentAcquirerData.AcquirerTransactionID.TimeStamp}}\r\n          {{^SaleToPOIResponse.BalanceInquiryResponse.PaymentAccountStatus.PaymentAcquirerData.AcquirerTransactionID.TimeStamp}}\r\n          \"TransactionDate\": \"{{TransactionDateTime}}\",\r\n          {{/SaleToPOIResponse.BalanceInquiryResponse.PaymentAccountStatus.PaymentAcquirerData.AcquirerTransactionID.TimeStamp}}\r\n          \"OrderId\": \"{{OrderId}}\",\r\n          {{#SaleToPOIResponse.BalanceInquiryResponse.PaymentAccountStatus.CurrentBalance}}\r\n          \"RemainingBalance\": {{SaleToPOIResponse.BalanceInquiryResponse.PaymentAccountStatus.CurrentBalance}},\r\n          {{/SaleToPOIResponse.BalanceInquiryResponse.PaymentAccountStatus.CurrentBalance}}\r\n          \"TransactionType\": {\r\n            \"PaymentTransactionTypeId\": \"{{Command}}\"\r\n          },\r\n          \"Status\": {\r\n            \"PaymentTransactionStatusId\": \"Closed\"\r\n          },\r\n          {{#SaleToPOIResponse.BalanceInquiryResponse.Response.Result}}\r\n          \"PaymentResponseStatus\": {\r\n            \"PaymentResponseStatusId\": \"{{SaleToPOIResponse.BalanceInquiryResponse.Response.Result}}\"\r\n          },\r\n          {{/SaleToPOIResponse.BalanceInquiryResponse.Response.Result}}\r\n          {{^SaleToPOIResponse.BalanceInquiryResponse.Response.Result}}\r\n          \"PaymentResponseStatus\": {\r\n            \"PaymentResponseStatusId\": \"{{PaymentResponseStatus}}\"\r\n          },\r\n          {{/SaleToPOIResponse.BalanceInquiryResponse.Response.Result}}\r\n          \"TransmissionStatus\": {\r\n            \"PaymentTransmissionStatusId\": \"Closed\"\r\n          }\r\n        }\r\n      ],\r\n      \"PaymentType\": {\r\n        \"PaymentTypeId\": \"{{PaymentType}}\"\r\n      }\r\n    }\r\n  ]\r\n}", "GatewayRequestTemplate": "{\r\n  \"SaleToPOIRequest\": {\r\n    \"MessageHeader\": {\r\n      \"ProtocolVersion\": \"3.0\",\r\n      \"MessageClass\": \"Service\",\r\n      \"MessageCategory\": \"BalanceInquiry\",\r\n      \"MessageType\": \"Request\",\r\n      \"ServiceID\": \"{{ServiceId}}\",\r\n      \"SaleID\": \"{{UniqueId}}\",\r\n      \"POIID\": \"{{TerminalId}}\"\r\n    },\r\n    \"BalanceInquiryRequest\": {\r\n      \"PaymentAccountReq\": {\r\n        \"PaymentInstrumentData\": {\r\n          \"PaymentInstrumentType\": \"StoredValue\",\r\n          \"StoredValueAccountID\": {\r\n            \"StoredValueAccountType\": \"GiftCard\",\r\n            \"StoredValueProvider\": \"givex\",\r\n            \"IdentificationType\": \"PAN\",\r\n            {{#AccountNumber}}\r\n            \"EntryMode\": [\r\n              \"Scanned\"\r\n            ],\r\n            \"StoredValueID\": \"{{AccountNumber}}\"\r\n             {{/AccountNumber}}\r\n             {{^AccountNumber}}\r\n             \"EntryMode\": [\r\n              \"MagStripe\"\r\n            ],\r\n            \"StoredValueID\": \"\"\r\n             {{/AccountNumber}}\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}" }, { "GatewayPaymentURLTemplate": "https://terminal-api-test.adyen.com/sync", "TransactionType": "Reload", "GatewayResponseTemplate": "{\r\n  \"OrderId\": \"{{OrderId}}\",\r\n  {{#PaymentResponseText}}\r\n  \"PaymentResponseText\": \"{{PaymentResponseText}}\",\r\n  {{/PaymentResponseText}}\r\n  {{#PaymentResponseCode}}\r\n  \"PaymentResponseCode\": \"{{PaymentResponseCode}}\",\r\n  {{/PaymentResponseCode}}\r\n  {{#PaymentResponseStatus}}\r\n  \"PaymentResponseStatus\": \"{{PaymentResponseStatus}}\",\r\n  {{/PaymentResponseStatus}}\r\n  \"PaymentMethod\": [\r\n    {\r\n      {{#SaleToPOIResponse.StoredValueResponse.StoredValueResult}}\r\n      \"CurrencyCode\": \"{{Currency}}\",\r\n      \"Amount\": {{ItemAmount}},\r\n      {{#StoredValueAccountStatus.StoredValueAccountID.EntryMode}}\r\n      \"EntryTypeId\": \"{{.}}\",\r\n       {{/StoredValueAccountStatus.StoredValueAccountID.EntryMode}}\r\n      {{/SaleToPOIResponse.StoredValueResponse.StoredValueResult}}\r\n      {{^SaleToPOIResponse.StoredValueResponse.StoredValueResult}}\r\n      \"CurrencyCode\": \"{{CurrencyCode}}\",\r\n      \"Amount\": 0,\r\n      {{/SaleToPOIResponse.StoredValueResponse.StoredValueResult}}\r\n      \"AccountNumber\": \"{{SaleToPOIResponse.StoredValueResponse.Response.AdditionalResponse.additionalData.backendGiftcardPAN}}\",\r\n      \"GatewayId\": \"{{GatewayId}}\",\r\n      \"LocationId\": \"{{LocationId}}\",\r\n      \"PaymentTransaction\": [\r\n        {\r\n          \"PaymentTransactionId\": \"{{UniqueId}}\",\r\n          \"RequestedAmount\": {{RequestedAmount}},\r\n          {{#Troutd}}\r\n          \"RequestId\": \"{{Troutd}}\",\r\n          {{/Troutd}}\r\n          {{#Ctroutd}}\r\n          \"RequestToken\": \"{{Ctroutd}}\",\r\n          {{/Ctroutd}}\r\n          {{#SaleToPOIResponse.StoredValueResponse.POIData.POITransactionID.TimeStamp}}\r\n          \"RequestedDate\": \"{{SaleToPOIResponse.StoredValueResponse.POIData.POITransactionID.TimeStamp}}\",\r\n          \"TransactionDate\": \"{{SaleToPOIResponse.StoredValueResponse.POIData.POITransactionID.TimeStamp}}\",\r\n          {{/SaleToPOIResponse.StoredValueResponse.POIData.POITransactionID.TimeStamp}}\r\n          {{^SaleToPOIResponse.StoredValueResponse.POIData.POITransactionID.TimeStamp}}\r\n          \"RequestedDate\": \"{{TransactionDateTime}}\",\r\n          \"TransactionDate\": \"{{TransactionDateTime}}\",\r\n          {{/SaleToPOIResponse.StoredValueResponse.POIData.POITransactionID.TimeStamp}}\r\n          {{#SaleToPOIResponse.StoredValueResponse.StoredValueResult}}\r\n          \"ProcessedAmount\": {{ItemAmount}},\r\n          \"RemainingBalance\": {{StoredValueAccountStatus.CurrentBalance}},\r\n          {{/SaleToPOIResponse.StoredValueResponse.StoredValueResult}}\r\n           {{^SaleToPOIResponse.StoredValueResponse.StoredValueResult}}\r\n          \"ProcessedAmount\": 0,\r\n          {{/SaleToPOIResponse.StoredValueResponse.StoredValueResult}}\r\n          \"OrderId\": \"{{OrderId}}\",\r\n          \"TransactionType\": {\r\n            \"PaymentTransactionTypeId\": \"{{Command}}\"\r\n          },\r\n          \"Status\": {\r\n            \"PaymentTransactionStatusId\": \"Closed\"\r\n          },\r\n          {{#SaleToPOIResponse.StoredValueResponse.Response.Result}}\r\n          \"PaymentResponseStatus\": {\r\n            \"PaymentResponseStatusId\": \"{{SaleToPOIResponse.StoredValueResponse.Response.Result}}\"\r\n          },\r\n          {{/SaleToPOIResponse.StoredValueResponse.Response.Result}}\r\n          {{^SaleToPOIResponse.StoredValueResponse.Response.Result}}\r\n          \"PaymentResponseStatus\": {\r\n            \"PaymentResponseStatusId\": \"{{PaymentResponseStatus}}\"\r\n          },\r\n          {{/SaleToPOIResponse.StoredValueResponse.Response.Result}}\r\n          \"TransmissionStatus\": {\r\n            \"PaymentTransmissionStatusId\": \"Closed\"\r\n          }\r\n        }\r\n      ],\r\n      \"PaymentType\": {\r\n        \"PaymentTypeId\": \"{{PaymentType}}\"\r\n      }\r\n    }\r\n  ]\r\n}", "GatewayRequestTemplate": "{\r\n  \"SaleToPOIRequest\": {\r\n    \"MessageHeader\": {\r\n      \"ProtocolVersion\": \"3.0\",\r\n      \"MessageClass\": \"Service\",\r\n      \"MessageCategory\": \"StoredValue\",\r\n      \"MessageType\": \"Request\",\r\n      \"ServiceID\": \"{{ServiceId}}\",\r\n      \"SaleID\": \"{{UniqueId}}\",\r\n      \"POIID\": \"{{TerminalId}}\"\r\n    },\r\n    \"StoredValueRequest\": {\r\n      \"SaleData\": {\r\n        \"SaleTransactionID\": {\r\n          \"TransactionID\": \"{{UniqueId}}\",\r\n          \"TimeStamp\": \"{{TransactionDateTime}}\"\r\n        }\r\n      },\r\n      \"StoredValueData\": [\r\n        {\r\n          \"StoredValueTransactionType\": \"{{Command}}\",\r\n          \"StoredValueAccountID\": {\r\n            \"StoredValueAccountType\": \"GiftCard\",\r\n            \"StoredValueProvider\": \"givex\",\r\n            \"IdentificationType\": \"PAN\",\r\n            {{#AccountNumber}}\r\n            \"EntryMode\": [\r\n              \"Scanned\"\r\n            ],\r\n            \"StoredValueID\": \"{{AccountNumber}}\"\r\n            {{/AccountNumber}}\r\n            {{^AccountNumber}}\r\n            \"EntryMode\": [\r\n              \"MagStripe\"\r\n            ],\r\n            \"StoredValueID\": \"\"\r\n            {{/AccountNumber}}\r\n          },\r\n          \"ItemAmount\": {{Amount}},\r\n          \"Currency\": \"{{CurrencyCode}}\"\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}" }, { "GatewayPaymentURLTemplate": "https://terminal-api-test.adyen.com/sync", "TransactionType": "Activate", "GatewayResponseTemplate": "{\r\n  \"OrderId\": \"{{OrderId}}\",\r\n  {{#PaymentResponseText}}\r\n  \"PaymentResponseText\": \"{{PaymentResponseText}}\",\r\n  {{/PaymentResponseText}}\r\n  {{#PaymentResponseCode}}\r\n  \"PaymentResponseCode\": \"{{PaymentResponseCode}}\",\r\n  {{/PaymentResponseCode}}\r\n  {{#PaymentResponseStatus}}\r\n  \"PaymentResponseStatus\": \"{{PaymentResponseStatus}}\",\r\n  {{/PaymentResponseStatus}}\r\n  \"PaymentMethod\": [\r\n    {\r\n      {{#SaleToPOIResponse.StoredValueResponse.StoredValueResult}}\r\n      \"CurrencyCode\": \"{{Currency}}\",\r\n      \"Amount\": {{ItemAmount}},\r\n      {{#StoredValueAccountStatus.StoredValueAccountID.EntryMode}}\r\n      \"EntryTypeId\": \"{{.}}\",\r\n      {{/StoredValueAccountStatus.StoredValueAccountID.EntryMode}}\r\n      {{/SaleToPOIResponse.StoredValueResponse.StoredValueResult}}\r\n      {{^SaleToPOIResponse.StoredValueResponse.StoredValueResult}}\r\n      \"CurrencyCode\": \"{{CurrencyCode}}\",\r\n      \"Amount\": 0,\r\n      {{/SaleToPOIResponse.StoredValueResponse.StoredValueResult}}\r\n      \"AccountNumber\": \"{{SaleToPOIResponse.StoredValueResponse.Response.AdditionalResponse.additionalData.backendGiftcardPAN}}\",\r\n      \"GatewayId\": \"{{GatewayId}}\",\r\n      \"LocationId\": \"{{LocationId}}\",\r\n      \"PaymentTransaction\": [\r\n        {\r\n          \"PaymentTransactionId\": \"{{UniqueId}}\",\r\n          \"RequestedAmount\": {{RequestedAmount}},\r\n          {{#Troutd}}\r\n          \"RequestId\": \"{{Troutd}}\",\r\n          {{/Troutd}}\r\n          {{#Ctroutd}}\r\n          \"RequestToken\": \"{{Ctroutd}}\",\r\n          {{/Ctroutd}}\r\n          {{#SaleToPOIResponse.StoredValueResponse.POIData.POITransactionID.TimeStamp}}\r\n          \"RequestedDate\": \"{{SaleToPOIResponse.StoredValueResponse.POIData.POITransactionID.TimeStamp}}\",\r\n          \"TransactionDate\": \"{{SaleToPOIResponse.StoredValueResponse.POIData.POITransactionID.TimeStamp}}\",\r\n          {{/SaleToPOIResponse.StoredValueResponse.POIData.POITransactionID.TimeStamp}}\r\n          {{^SaleToPOIResponse.StoredValueResponse.POIData.POITransactionID.TimeStamp}}\r\n          \"RequestedDate\": \"{{TransactionDateTime}}\",\r\n          \"TransactionDate\": \"{{TransactionDateTime}}\",\r\n          {{/SaleToPOIResponse.StoredValueResponse.POIData.POITransactionID.TimeStamp}}\r\n          {{#SaleToPOIResponse.StoredValueResponse.StoredValueResult}}\r\n          \"ProcessedAmount\": {{ItemAmount}},\r\n           \"RemainingBalance\": {{StoredValueAccountStatus.CurrentBalance}},\r\n          {{/SaleToPOIResponse.StoredValueResponse.StoredValueResult}}\r\n           {{^SaleToPOIResponse.StoredValueResponse.StoredValueResult}}\r\n          \"ProcessedAmount\": 0,\r\n          {{/SaleToPOIResponse.StoredValueResponse.StoredValueResult}}\r\n          \"OrderId\": \"{{OrderId}}\",\r\n          \"TransactionType\": {\r\n            \"PaymentTransactionTypeId\": \"{{Command}}\"\r\n          },\r\n          \"Status\": {\r\n            \"PaymentTransactionStatusId\": \"Closed\"\r\n          },\r\n          {{#SaleToPOIResponse.StoredValueResponse.Response.Result}}\r\n          \"PaymentResponseStatus\": {\r\n            \"PaymentResponseStatusId\": \"{{SaleToPOIResponse.StoredValueResponse.Response.Result}}\"\r\n          },\r\n          {{/SaleToPOIResponse.StoredValueResponse.Response.Result}}\r\n          {{^SaleToPOIResponse.StoredValueResponse.Response.Result}}\r\n          \"PaymentResponseStatus\": {\r\n            \"PaymentResponseStatusId\": \"{{PaymentResponseStatus}}\"\r\n          },\r\n          {{/SaleToPOIResponse.StoredValueResponse.Response.Result}}\r\n          \"TransmissionStatus\": {\r\n            \"PaymentTransmissionStatusId\": \"Closed\"\r\n          }\r\n        }\r\n      ],\r\n      \"PaymentType\": {\r\n        \"PaymentTypeId\": \"{{PaymentType}}\"\r\n      }\r\n    }\r\n  ]\r\n}", "GatewayRequestTemplate": "{\r\n  \"SaleToPOIRequest\": {\r\n    \"MessageHeader\": {\r\n      \"ProtocolVersion\": \"3.0\",\r\n      \"MessageClass\": \"Service\",\r\n      \"MessageCategory\": \"StoredValue\",\r\n      \"MessageType\": \"Request\",\r\n      \"ServiceID\": \"{{ServiceId}}\",\r\n      \"SaleID\": \"{{UniqueId}}\",\r\n      \"POIID\": \"{{TerminalId}}\"\r\n    },\r\n    \"StoredValueRequest\": {\r\n      \"SaleData\": {\r\n        \"SaleTransactionID\": {\r\n          \"TransactionID\": \"{{UniqueId}}\",\r\n          \"TimeStamp\": \"{{TransactionDateTime}}\"\r\n        }\r\n      },\r\n      \"StoredValueData\": [\r\n        {\r\n          \"StoredValueTransactionType\": \"{{Command}}\",\r\n          \"StoredValueAccountID\": {\r\n            \"StoredValueAccountType\": \"GiftCard\",\r\n            \"StoredValueProvider\": \"givex\",\r\n            \"IdentificationType\": \"PAN\",\r\n            {{#AccountNumber}}\r\n            \"EntryMode\": [\r\n              \"Scanned\"\r\n            ],\r\n            \"StoredValueID\": \"{{AccountNumber}}\"\r\n            {{/AccountNumber}}\r\n            {{^AccountNumber}}\r\n            \"EntryMode\": [\r\n              \"MagStripe\"\r\n            ],\r\n            \"StoredValueID\": \"\"\r\n            {{/AccountNumber}}\r\n          },\r\n          \"ItemAmount\": {{Amount}},\r\n          \"Currency\": \"{{CurrencyCode}}\"\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}" }, { "GatewayPaymentURLTemplate": "https://terminal-api-test.adyen.com/sync", "TransactionType": "CUST_QUESTION", "GatewayResponseTemplate": "{\r\n  \"OrderId\": \"{{OrderId}}\",\r\n   {{#PaymentResponseText}}\r\n  \"PaymentResponseText\": \"{{PaymentResponseText}}\",\r\n  {{/PaymentResponseText}}\r\n  {{#PaymentResponseCode}}\r\n  \"PaymentResponseCode\": \"{{PaymentResponseCode}}\",\r\n  {{/PaymentResponseCode}}\r\n  {{#PaymentResponseStatus}}\r\n  \"PaymentResponseStatus\": \"{{PaymentResponseStatus}}\",\r\n  {{/PaymentResponseStatus}}\r\n  \"PaymentMethod\": [\r\n    {\r\n      \"CurrencyCode\": \"{{CurrencyCode}}\",\r\n      \"Amount\": 0,\r\n      \"GatewayId\": \"{{GatewayId}}\",\r\n      \"LocationId\": \"{{LocationId}}\",\r\n      \"PaymentTransaction\": [\r\n        {\r\n          \"PaymentTransactionId\": \"{{UniqueId}}\",\r\n          \"RequestedAmount\": 0,\r\n          \"TransactionDate\": \"{{TransactionDateTime}}\",\r\n          \"ProcessedAmount\": 0,\r\n          \"OrderId\": \"{{OrderId}}\",\r\n          \"TransactionType\": {\r\n            \"PaymentTransactionTypeId\": \"{{Command}}\"\r\n          },\r\n          \"Status\": {\r\n            \"PaymentTransactionStatusId\": \"Closed\"\r\n          },\r\n          \"PaymentResponseStatus\": {\r\n            \"PaymentResponseStatusId\": \"{{PaymentResponseStatus}}\"\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}", "GatewayRequestTemplate": "{\r\n  \"SaleToPOIRequest\": {\r\n    \"MessageHeader\": {\r\n      \"ProtocolVersion\": \"3.0\",\r\n      \"MessageClass\": \"Device\",\r\n      \"MessageCategory\": \"Input\",\r\n      \"MessageType\": \"Request\",\r\n      \"ServiceID\": \"{{ServiceId}}\",\r\n      \"SaleID\": \"{{UniqueId}}\",\r\n      \"POIID\": \"{{TerminalId}}\"\r\n    },\r\n    \"InputRequest\": {\r\n      \"DisplayOutput\": {\r\n        \"Device\": \"CustomerDisplay\",\r\n        \"InfoQualify\": \"Display\",\r\n        \"OutputContent\": {\r\n          \"OutputFormat\": \"Text\",\r\n          \"PredefinedContent\": {\r\n            \"ReferenceID\": \"GetConfirmation\"\r\n          },\r\n          \"OutputText\": [\r\n            {\r\n              \"Text\": \"\"\r\n            },\r\n            {\r\n              \"Text\": \"{{DisplayBulkData}}\"\r\n            },\r\n            {\r\n              \"Text\": \"No\"\r\n            },\r\n            {\r\n              \"Text\": \"Yes\"\r\n            }\r\n          ]\r\n        }\r\n      },\r\n      \"InputData\": {\r\n        \"Device\": \"CustomerInput\",\r\n        \"InfoQualify\": \"Input\",\r\n        \"InputCommand\": \"GetConfirmation\",\r\n        \"MaxInputTime\": 9\r\n      }\r\n    }\r\n  }\r\n}" }, { "GatewayPaymentURLTemplate": "https://checkout-test.adyen.com/v68/payments", "TransactionType": "Omni_Authorization", "GatewayResponseTemplate": "{\r\n  \"OrderId\": \"{{OrderId}}\",\r\n  {{#PaymentResponseText}}\r\n  \"PaymentResponseText\": \"{{PaymentResponseText}}\",\r\n  {{/PaymentResponseText}}\r\n  {{#PaymentResponseCode}}\r\n  \"PaymentResponseCode\": \"{{PaymentResponseCode}}\",\r\n  {{/PaymentResponseCode}}\r\n  {{#PaymentResponseStatus}}\r\n  \"PaymentResponseStatus\": \"{{PaymentResponseStatus}}\",\r\n  {{/PaymentResponseStatus}}\r\n  \"PaymentMethod\": [\r\n    {\r\n      {{#CurrencyCode}}\r\n      \"CurrencyCode\": \"{{CurrencyCode}}\",\r\n      {{/CurrencyCode}}\r\n      \"GatewayId\": \"{{GatewayId}}\",\r\n      \"LocationId\": \"{{LocationId}}\",\r\n      {{#EnteredAmount}}\r\n  \"Amount\": {{EnteredAmount}},\r\n  {{/EnteredAmount}}\r\n  {{^EnteredAmount}}\r\n  \"Amount\": 0,\r\n  {{/EnteredAmount}}\r\n      \"PaymentTransaction\": [\r\n        {\r\n          \"PaymentTransactionId\": \"{{UniqueId}}\",\r\n          \"RequestedAmount\": {{RequestedAmount}},\r\n          {{#checkoutGatewayResponse.pspReference}}\r\n          \"RequestId\": \"{{checkoutGatewayResponse.pspReference}}\",\r\n          \"NetworkTransactionId\": \"{{checkoutGatewayResponse.pspReference}}\",\r\n          \"RequestToken\": \"{{checkoutGatewayResponse.pspReference}}\",\r\n           {{/checkoutGatewayResponse.pspReference}}\r\n          \"RequestedDate\": \"{{TransactionDateTime}}\",\r\n          \"TransactionDate\": \"{{TransactionDateTime}}\",\r\n          {{#checkoutGatewayResponse.amount.value}}\r\n          \"ProcessedAmount\": {{checkoutGatewayResponse.amount.value}},\r\n          {{/checkoutGatewayResponse.amount.value}}\r\n           {{^checkoutGatewayResponse.amount.value}}\r\n          \"ProcessedAmount\": 0,\r\n          {{/checkoutGatewayResponse.amount.value}}\r\n          \"OrderId\": \"{{OrderId}}\",\r\n          \"TransactionType\": {\r\n            \"PaymentTransactionTypeId\": \"{{Command}}\"\r\n          },\r\n          \"Status\": {\r\n            \"PaymentTransactionStatusId\": \"Closed\"\r\n          },\r\n          \"PaymentResponseStatus\": {\r\n            \"PaymentResponseStatusId\": \"{{PaymentResponseStatus}}\"\r\n          },\r\n          \"TransmissionStatus\": {\r\n            \"PaymentTransmissionStatusId\": \"Closed\"\r\n          }\r\n        }\r\n      ],\r\n      {{#checkoutGatewayResponse.additionalData.fundingSource}}\r\n      \"PaymentType\": {\r\n        \"PaymentTypeId\": \"{{checkoutGatewayResponse.additionalData.fundingSource}}\"\r\n      },\r\n      {{/checkoutGatewayResponse.additionalData.fundingSource}}\r\n      {{^checkoutGatewayResponse.additionalData.fundingSource}}\r\n      \"PaymentType\": {\r\n        \"PaymentTypeId\": \"{{PaymentType}}\"\r\n      },\r\n      {{/checkoutGatewayResponse.additionalData.fundingSource}}\r\n      {{#checkoutGatewayResponse.additionalData.paymentMethod}}\r\n      \"CardType\": {\r\n        \"CardTypeId\": \"{{checkoutGatewayResponse.additionalData.paymentMethod}}\"\r\n      },\r\n      \"CardTypeId\": \"{{checkoutGatewayResponse.additionalData.paymentMethod}}\"\r\n      {{/checkoutGatewayResponse.additionalData.paymentMethod}}\r\n      {{^checkoutGatewayResponse.additionalData.paymentMethod}}\r\n      \"CardTypeId\": null\r\n      {{/checkoutGatewayResponse.additionalData.paymentMethod}}\r\n    }\r\n  ]\r\n}", "GatewayRequestTemplate": "{\r\n    \"amount\": {\r\n        \"value\": {{Amount}},\r\n        \"currency\": \"{{CurrencyCode}}\"\r\n    },\r\n    \"applicationInfo\": {\r\n      {{#gatewayApplicationInfo.externalPlatformName}}\r\n        \"externalPlatform\": {\r\n            \"name\": \"{{gatewayApplicationInfo.externalPlatformName}}\",\r\n            \"integrator\": \"{{gatewayApplicationInfo.externalPlatformIntegrator}}\"\r\n        },\r\n      {{/gatewayApplicationInfo.externalPlatformName}}\r\n      {{#gatewayApplicationInfo.merchantApplicationName}}\r\n        \"merchantApplication\": {\r\n            \"name\": \"{{gatewayApplicationInfo.merchantApplicationName}}\"\r\n        }\r\n      {{/gatewayApplicationInfo.merchantApplicationName}}\r\n    },\r\n    \"paymentMethod\": {\r\n        \"type\": \"scheme\",\r\n        \"storedPaymentMethodId\": \"{{RecurringDetailReference}}\"\r\n    },\r\n    \"reference\": \"{{UniqueId}}\",\r\n    \"shopperInteraction\": \"ContAuth\",\r\n    \"merchantAccount\": \"{{MerchantAccount}}\",\r\n    \"shopperReference\": \"{{StoreId}}\",\r\n    \"recurringProcessingModel\": \"CardOnFile\",\r\n    \"additionalData\": {\r\n        \"manualCapture\": \"true\"\r\n    },\r\n    {{#MerchantStore}}\r\n    \"store\": \"{{MerchantStore}}\"\r\n    {{/MerchantStore}}\r\n    {{^MerchantStore}}\r\n    \"store\": \"POS_Store\"\r\n    {{/MerchantStore}}\r\n}" } ], "GatewayEncryptedAttribute": [], "GatewayImplementation": [ { "CustomerPresent": true, "GatewayProtocol": { "GatewayProtocolId": "Cloud Https" }, "IsOffline": false } ], "IsBase": true, "ProcessStuckTransaction": true } Overall Flow Cloud Local Payment Transaction Command reference Commands Use Case CAPTURE This command will be sent in case of payment of in-store items. This command will create "Settlement" Transactions AUTH This command will be sent in case of payment of in save the sale items like ship to address, pick up at store etc. This command will create "Authorization" Transactions Activate This command will be used to activate Giftcards and will create "Activate" transactions. ADD_VALUE This command will be used for reloading the gift card and will create "Reload" transactions. Deactivate This command will be used to deactivate Giftcards and will create "Deactivate" transactions. CREDIT This command will be used for refunds and will create "Refund" transactions. Abort This command will be used in case of timeout and will be used to cancel any in-progress transactions. As the flow is for timeout, it means MAO does not have any reference for sale transaction. Therefore, Abort will not create any new payment transaction. Void This command will be used for partial payment void and will create "Void" transactions in case of settlement and "Authorization Reversal" in case of voiding auth transactions. CUST_QUESTION This command will be used to ask questions at the terminal and will not create any transactions. The questions will trigger the next set of events, like in the case of OMNI transactions. Cust_Question will be asked like "$78.75 will be charged from your account, while $36.49 will be pre-authorized. The total transaction amount is $115.24. Do you want to continue?" Resource Ids SNo URL ResourceId 1 /storefacade/api/storefacade/posservice/gateway/payment/initiateTransaction api::storefacade::transaction::admin 2 /storefacade/api/storefacade/posservice/gateway/payment/transactionStatus api::storefacade::transaction::admin 3 /storefacade/api/storefacade/posservice/gateway/order/refresh api::storefacade::transaction::admin 4 /storefacade/api/storefacade/posservice/gateway/session api::storefacade::transaction::admin User Exits 1. pos::gateway:payment:initiate-transaction The purpose of this user exit is to communicate to gateway cloud APIs to initiate payment transactions. This API will be used in payment flows like sales, refund, voids etc. 2. pos::gateway:payment:transaction-status The purpose of this user exit is to communicate to gateway cloud APIs to check the status of the last transaction. 3. pos::gateway:userexit:order-refresh The purpose of this user exit is to communicate to gateway cloud APIs to initiate refreshing order details on terminal 4. pos::gateway:userexit:session-update The purpose of this user exit is to communicate to a gateway to start or finish the session on terminal Note: please refer to Proactive documentation for more information.