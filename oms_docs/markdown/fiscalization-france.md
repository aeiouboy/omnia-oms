# France

**Permalink:** fiscalization-france
**Path:** Manhattan Active® Omni/Store/Process & Configuration Guides/Point of Sale/POS Classic Guides/POS Classic Fiscalization and Globalization/France
**Content Length:** 75,833 characters
**Scraped:** 2025-08-09T22:03:28.941742

---

Home ››Manhattan Active® Omni››Store››Process & Configuration Guides››Point of Sale››POS Classic Guides››POS Classic Fiscalization and Globalization ››France France Overview of the featureFiscalization certification informationTerminologyRelated POS featuresFrance specific configurationsFrance Fiscal Versioning GuidanceGeneral Fiscal Versioning GuidanceFrance specific featuresTicket number generationGeneral Process involved in Electronic signaturePrivate and Public key managementElectronic SignatureElectronic signing of sale/ return transactionGrand transaction totalElectronic signing of re-printed receiptsElectronic signing of GTP and Closing ArchivesElectronic signing of JETReceiptsGrand Totals for period (GTP)RealAbsoluteGTP SchedulerScheduler detailsFiscal ArchiveFiscal Archive sample structureAccessing Closing Archive data using APIData integrity checkSystematic Data integrity check for tickets and invoicesOn Demand Data Integrity check on all fiscal recordsSteps to connect to the environment using postMan (For Auditing)Technical Journal and Audit Trial Events (JET)List of JET EventsAccessing JET eventsNot Supported in FranceServices Overview of the feature The French government requires strict adherence to a set of fiscal laws intended to limit VAT fraud and make transactional data at Point of Sale unchangeable. These requirements include aspects to make transactions inalterable, securely signed with an electronic signature, retained and accessible through periodic reports, and archived for at least seven years. Additionally, the mandates include specific data elements which must be captured, printed on customer receipts, stored within the transactional archive and electronic journal. This is applicable only to in-store sales. E-commerce orders or Save the sale orders captured within Point Of Sale do not fall under the purview of this requirement. Fiscalization certification information Manhattan Active® Omni POS has passed the audit according to the NF 525 certification guidelines and is issued a certificate of compliance with the following details. Certificate category: B Certificate number: 525/0500-1 Major version: 1 Minor version: 000 Terminology AFNOR = French Association of Standardization (Association Française de Normalisation) Receipt Invoice abbreviation. It is required to translate receipts into French. PU.ET = Unit price excluding tax Total ET, Price ET = Total excluding tax, price excluding tax Total TTC = Total including tax i.e. TTC stands for toutes taxes comprises ("all taxes included") B2B = Business to Business GTT = Grand transaction Total GTP = Grand Total Period JET = Technical Event Journal VAT = Value added Tax Related POS features Local tax France specific configurations Enablement when the primary address of the location is in France Business flags Order Configuration “Enable Fiscalization“ flag can be accessed under the Fiscalization section of the “Order Configuration” UI. This should be enabled for order type = “mPOSConfig“ POS Configurations Store currency Configure both the cart and the backoffice to work in the EUR currency code. Set up POS Store Configurations > Store Common Config > “Default Store Currency” = EUR Store Backoffice to be set up as EUR currency, i.e. BO Store Configurations > Store Base Currency = EUR Make sure that Store Currency (e.g. “EUR)” has all denominations setup if counting is by denominations, via Backoffice > “Store Currency” and Currency Denomination configurations. Store Locale: POS Store Configurations > Store Common Config > Default Store Locale= fr POS Tax Configuration POS Store Configurations > Store Common Config > “Primary Tax as Info” should be TRUE. Tax Engine = Local taxes Local tax rates should be defined for FR country and/or location. The “VAT Tax Code“ should be defined when defining local tax rates, Without this, receipts will always pick the VAT code on the fly but the data will not be persisted and will be blank in fiscal archive file. “Enable Persistent VAT Tax Codes“ should be enabled under “pos store configurations“ > “Receipt config” Vertex is supported but not certified from base. Receipt Config Receipts can be translated to French using Enhanced Receipts and procedures as detailed here:  https://manhattanassociates.atlassian.net/wiki/spaces/OMNIDOC/pages/1739164585. Text like (NF525) should be added to the receipt footer including the brackets to keep in compliance with the French certification guidelines. This can be added from the “Receipt Parameter” config UI. This should be added to the Receipt Category = “Sale Return” and “Fiscal Invoice“ GTP Job scheduler The scheduler is disabled by default. “fiscalGtpComputationScheduleJob“ scheduler in backoffice component should be enabled for French organizations. Use Job schedules UI from proActive or API to enable this job. Business Identifiers Business identifiers need to be configured with Backoffice Configuration > Fiscalization > Regulatory Fiscalization in Masterdataface component SIRET, NAF/NRE and VAT should be defined in business identifier configurations. All these can be configured at organization or at location level. SIRET = Business establishment code. This is retained by the retailer from the French government. NAF/NRE = Business activity code. This is retained by the retailer from the French government based on the business the retailer is doing. VAT = This is the retailer VAT code which will be used for all taxation. Invoice Details: Fiscal Invoice attributes should be configured from the API, details below Invoice entries LegalEntityName, LegalForm, LegalAddress, RCS, RegistrationDept, RegistryOfficeCity, SIREN, TotalCapital API details can be found here //Sample Request Payload// { "ProfileId": "bcf::fiscal", "Data": [ { "CountryId": "FR", "AttributeName": "LegalEntityName", "AttributeValue": "Fnac Direct", //This is a sample value, needs to be replaced "LocationId": null }, { "CountryId": "FR", "AttributeName": "LegalForm", "AttributeValue": "SAS", //This is a sample value, needs to be replaced "LocationId": null }, { "CountryId": "FR", "AttributeName": "LegalAddress", "AttributeValue": "9 rue des Bateaux-Lavoirs 942000 Ivy-sur-Seine FRANCE", //This is a sample value, needs to be replaced "LocationId": null }, { "CountryId": "FR", "AttributeName": "RCS", "AttributeValue": "RCS Paris", //This is a sample value, needs to be replaced "LocationId": null }, { "CountryId": "FR", "AttributeName": "RegistrationDept", "AttributeValue": "090", //This is a sample value, needs to be replaced "LocationId": null }, { "CountryId": "FR", "AttributeName": "RegistryOfficeCity", "AttributeValue": "Paris", //This is a sample value, needs to be replaced "LocationId": null }, { "CountryId": "FR", "AttributeName": "SIREN", "AttributeValue": "123456789", //This is a sample value, needs to be replaced "LocationId": null }, { "CountryId": "FR", "AttributeName": "TotalCapital", "AttributeValue": "1.245.678 EUR", //This is a sample value, needs to be replaced "LocationId": null } ] } Electronic Key using RSA2048 algorithm needs to be generated. Check the key section below for more details. Setting up private and public keys for the purpose of generating electronic signatures. Electronic signatures are generated with RSA2048 algorithm private key, Make sure Fiscal Keys are present and one private key is created and is Active. If the keys are not configured, Order cannot be confirmed. Create Fiscal keys: Use the below api to create a key, the response of this API will not have the privateKey exposed API: {{url}}/backoffice/api/backoffice/fiscalSignature HTTP method: POST Request body: {} //Request body can be blank with empty braces Please note that private key is not exposed in the body response. KV store properties Add KV Store properties to enable an Event Producer framework. This is required for JET functionality. manh.cp.eventproducer.event.detection=true manh.changemgmt.entityChangeNotificationEnabled=true Update the above properties in Organization, Backoffice, Devicemanagement and Posservice components either in KV store or through environment variables. Please note restart of components is required to get the properties in effect. France Fiscal Versioning Guidance Manhattan Active® Omni Point Of Sale app will be assigned a French Fiscal version of 1.000 when we receive our first certificate. If changes are performed on certified version. Depending on whether there are major or minor code changes, we will roll the version forward. Since our solution is built on a generic platform which is used across several products within Manhattan Associate, the regular code drop is adopted as well.  We will roll forward as below Major changes: 1.000 to 2.00202403, 2.00202406 etc Major changes: 2.00202403 to 3.00202406 Regular cadence:  2.00202403 to 2.00202406, 2.00202409 etc Minor changes: 2.00202403 to 2.01202403 Whenever we are audited and receive the certificate, we will lock in on that version. Major Version Minor Version France Fiscal Version Additional Details 1 000 1.000 Certification date 25-July-2022 Certification No: No 525/0500-1 1 000 1.000 Certification date 29-July-2023 No Certification issued 2 00 <Quartely code drop> For example, 2.00202403 or 2.00202406 etc General Fiscal Versioning Guidance The following guidelines will be used by Manhattan in deciding when to roll forward the minor/major version numbers. The following types of changes will require no change to Fiscal version: Tax, order, or payment component or POS app changes with no effect on timing VAT tax booking or amount of VAT tax Backoffice changes outside the Fiscal utilities (sequencing, chaining, signing, encrypting) Ticket/Invoice/Receipt printed document content changes which do not affect required fiscal elements The following types of changes are examples of those to be recorded as changes to the minor version (i.e. 2.00202403 to 2.01202403): Change to fiscal framework calculation strategy which does not change the output.  For example, development of a dedicated Fiscal component to perform same functions as Backoffice fiscal utilities in alternative manner. Change to UI fiscal flow which doesn't change compliance elements.  For example: UX Flow changes to prompt for receipt/ticket/invoice printing differently. Representation of VAT tax by line in addition to total transaction. Changes to the scheduler framework for GTP/GTT archive/storage operations, which does not change the actual generation, frequency, or posting of these records/files Any defect fixes on related areas within the quarterly code drop of 202403. The following will change to the major version: Tri-annual re-certification.  For example, the second certified version will advance from 2.00202403 to 3.00202703). Any change to fiscal logic which requires re-certification earlier than 3 years.  For example: Changes to the booking logic or amounts of VAT calculations. Significant changes to record signing/chaining logic. Predominant UI changes or new adoption of UI framework and UI screens. France specific features In order to be compliant with NF525 rules, Manhattan Active® Omni Point Of Sale has implemented the following features. It is required to complete transactions from the POS terminal when the store and the organization are located in France. The following types of transaction and events are signed. Generate Ticket and/or Invoice ID for Sale and return transaction Electronic Signature of Order Copy of receipts - Reprint receipts Calculation of Grand Transaction Total (GTT) and electronically signing it Calculation of Grand transaction period (GTP) and electronically signing it Generation of Fiscal Archive files Audit/Journal events Data integrity check Additionally, to remain complaint, users will have an ability to perform data integrity checks on all of the signed fiscal records to verify the integrity of fiscal records on any transaction and event from the past 7 years (including current year). Ticket number generation A ticket number is the unique identifier for an order which gets generated when the order is confirmed. Hence, an open order, though completely paid, does not have a ticket number if it is not confirmed. Ticket numbers are generated only for sales, return and exchange transactions. It is not applicable to Manager functions such as Pay In, Pay out, Store operations such as store close or a transactions that involve exchange of one tender type to another. Here is an example of a compliant ticket format which is not configurable. TikSSSSRRRNNNNNNNNN where in: Tik - fixed text, Tik for “ticket” SSSS - 4 digit location from location > locationId. Zero filled, right justified. Ex. for Store 512, this would be 0512 RRR - 3 digit register number. Zero filled, right justified. Ex. for Reg 10, this would be 010 NNNNNNNNN - sequential counter. Ex. 000000001, 000000002, etc. Example: Store 0512, Register 010: Tik0512010000000001, Tik0512010000000002, Tik0512010000000003, … Tik0512010000005670, Tik0512010000005671, etc. This would allow up to 999 million ticket numbers to be generated for a register at a given store. General Process involved in Electronic signature The general regulatory approach is to require programmatic security measures from the POS to prevent fraud, such as retailers failing to report transactions or retroactively changing data. The security measure includes chaining each transaction to the previous, via encrypted electronic signatures containing overlapping data from current/previous, as well as running perpetual totals. Here are the steps to extract the content of a transaction, sequence and securely chain the records per register and location using the mandated keys by NF525. The application systematically picks up a sequential number, for signing purposes, for a given store location, register and type of record. Select the data fields that are relevant from the record that is being signed. Add the previous signature for the same store, register and type of record. Calculate the hash value of the string. Calculate an asymmetric electronic signature for the resulting string by using secure keys. Convert this into base64url value and it will persist at fiscal record level. No UI to view this. Private and Public key management Every transaction from a POS terminal needs to be mandatorily sequenced and electronically signed. To generate electronic signatures, the French tax authority mandates that the electronic signature is generated with the RSA2048 private key algorithm. Hence, it is necessary that a Fiscal Key is generated and available all the time for POS to work as expected in France. It is mandatory to have an Active Private and Public key to successfully complete a checkout transaction using Manhattan Active® Omni Point of Sale API to create a private key. API: {url}/backoffice/api/backoffice/fiscalSignature HTTP method: POST Request body: {} //Request body can be blank with empty braces Response to the API, which is the private key itself, is not available to the user as it is the secured information. Electronic Signature An electronic signature is required to be produced at the time of finalizing records of the data. This is asymmetric and is created using private keys. The data used in signing is the original transaction data at the time of finalizing records as per the rules mentioned in NF525. The types of transactions electronically signed are: Sale transactions Return, Exchange transactions Reprint of receipts Technical event logs (JET ) or Audit events Transactions that are excluded from electronic signing Backoffice transactions such as Store Open/Close, Till Open/Close/Reconcile, Bank deposit etc. Non-sale transactions such as Pay In , Pay Out, Till Loan, Till Pick up, No Sale etc. An electronic signature is created and persisted in the database when the transaction is confirmed. Various fields get involved in the formation of the electronic signature. These fields vary based on the type of the transaction or process being signed. Electronic signing of sale/ return transaction Upon confirmation of instore orders, two types of sequence which are unique by store and register get generated. Ticket Invoice Ticket: This is a mandatory document which gets generated for all in-store sales and returns, regardless of the customer being activated or not; or the type of customer. Invoicing: This is an optional one which is generated upon customer request. An Invoice is a document similar to a receipt which may be requested to be printed ONLY for transactions with an Active Customer. Invoices cannot be generated for guest transactions. Ticket: Parameters considered for signing a sale/return transaction Tax rate Tax amount Order total (including tax) Date and Time of the transaction in YYYYMMDDHHMMSS format Register Number Sequential number of transactions for ticket Type of sale, return transaction Indication if this is the first signed transaction for the given register Previously signed value for the same register. If this is the first transaction, the value would be N. Invoice: Parameters considered for signing a sale/return transaction Tax rate Tax amount Order Total (including tax) Date and Time of the transaction in YYYYMMDDHHMMSS format Register Number Sequential number of transactions for invoice Document Type (facture means invoice) Customer Last Name or Business Name Customer or Business Zip code Customers or Customer’s Business VAT Identifier Indication if this is the first signed transaction for the given register Previously signed value for the same register. If this is the first transaction, the value would be N. Customer Configuration used for B2B (Business to Business) invoicing. If the customer is a B2B customer, then the customer’s Business Name and BusinessTaxId should be configured in the customer component. Business Address needs to be configured. If an address is added, a postal code will be used in the electronic signature. "businessName" = To capture the company/business name of the customer. Ideally this field can be used as identification along with businessTaxId during taxation. "businessTaxId" = If the customer is running a company/business and desires to carry out taxable transactions without having a permanent establishment, you will need to obtain an TaxId or intra-community VAT number in that region. Without this TaxId or number, you will not be able to exercise your taxable activity in some regions/countries Grand transaction total This is the running order total collected per register at a store. The parameters considered are below. Sequential number for the transaction, referenced as "ticket" Tax rate Tax amount Order Total (including tax) Cumulative perpetual Grand total/ Real value Cumulative perpetual Grand total/ Absolute value Date and Time of the transaction in YYYYMMDDHHMMSS format Previously signed value for the same register. If this is the first transaction, the value would be N. Electronic signing of re-printed receipts When any transaction with electronic signatures is reprinted, such events are recorded and signed. These are the parameters used to electronically sign a reprinted receipt. The original ticket number for which the reprint is performed. Sequence number of the signed receipt copy The type of transaction for the original sales transaction-- Sale/Return The number of times the receipt is reprinted i.e. reprint count. The date and time of the receipt copy event, in YYYYMMDDHHMMSS format. The register number of the original sales transaction. The sequential number of the original sales transaction for the register. Indication if this is the first signed transaction for the given register Previously signed value for the same register. If this is the first transaction, the value would be N. Electronic signing of GTP and Closing Archives From the Manhattan Active® Omni Point of Sale system, an automated job is done to run fiscal closing activities. This job produces GTP - Grand Transaction period and Closing Archive fiscal records and all events are registered on JET. GTP: Grand Total for the Period summarizes the total sales for the given period by tax rate; which can be a day, month or year. The parameters that are signed for a grand transaction period consist of the following: Total amount per tax rate of all orders for that Period Total amount of all orders for that Period (Including tax) Cumulative perpetual grand total real value (including tax). Date and time of this event, in YYYYMMDDHHMMSS format. Sequential number of GTP, Period Identifier Indication if this is the first signed transaction for the given register Previously signed value for the same register. If this is the first transaction, the value would be N. Fiscal Closing Archive: The parameters that is signed for a fiscal closing archive (Day, Month, Year) consist of the following: Total amount per tax rate of all orders for that Period Total amount of all orders for that Period (Including tax) Date and time of this event, in YYYYMMDDHHMMSS format. Store Id Fiscal closing archive - Operation Type (Daily Archive i.e. “Archives quotidiennes”, Monthly Archive i.e. “Archives mensuelles“, Annual Archive i.e. “Archives annuelles“) Indication if this is the first signed transaction for the given register Previously signed value for the same register. If this is the first transaction, the value would be N. Electronic signing of JET The parameters that are signed for an event Technical Journal event or Audit trail event consist of the following: A sequential number of the signed JET event Event Code Description of the event Date and time of this event, in YYYYMMDDHHMMSS format. Operator Id Register Number Indication if this is the first signed transaction for the given register Previously signed value for the same register. If this is the first transaction, the value would be N. Receipts Receipts for France include additional details to keep up with the French regulations. Also read receipt guide here. Link to enhanced receipt: or other document around Receipt customization, translation $action needed$ Sequence number of the sales transaction Re-print Receipt number: This indicates if the receipt is original or reprinted. 0 if it is original. Extraction from the Electronic signature : This ensures that the transaction is signed. It has the concatenation of 3rd, 7th, 13th and 19th value of the signature Certification Data: Certification Number issued by authorized body , Product Category: constant value of “B”. Software Version: version of the software that was certified as per the NF 525 certification requirements and that is used to produce receipts. NF 525: Law under which fiscal compliance requirements are prescribed. Grand Totals for period (GTP) Grand Totals for the period summarize sales totals per store and the fiscal period, i.e. per day. In addition, a month or an annual period summarizes sales totals per store and fiscal month or year respectively. The definition of a month or a year is by calendar. GTP for month and year are created on the last day of the month or year respectively. Grand Totals for a period are maintained as running totals per store. There cannot be more than one GTP for a given period, nor for overlapping periods. GTP is created by an automated job running at a configured time daily. When this job is executed, a grand total for that period is created. Users can view the total period from the fiscal archive file. Once a GTP is created, it cannot be modified. However, if a GTP is missed for a particular day/period, the next GTP day/period will consider the missed record from previous days/periods. Grand total for month: Grand total for month will summarize the total amount per tax rate collected for that store for that month across all the registers running in that store for that month. Grand total for Year: Grand total for year will summarize the total amount per tax rate collected for that store for that year across all the registers running in that store for that year. For the purpose of calculating GTT and GTP, gift card amounts are excluded, but such transactions are electronically signed. ∑(All sale and return items)-∑(Gift card) Real Perpetual Grand Total (Real) : similar to ‘net sales’ - the ongoing GTT (Real) is either INCREMENTED or DECREMENTED by the transaction total. Ex. The current GTT is 1000.00. If the transaction total is negative 10.00, the GTT (Real) GTT real for the current transaction is 990.00 Just like a ‘flash sales’ calculation, GTT (Real) can increase or decrease depending on the value (positive or negative) of the amount which is being added to it. Absolute Perpetual Grand Total (Absolute) : the ongoing GTT (Absolute) is always the absolute value of the transaction total. Ex. The current GTT is 1000.00. If the transaction total is negative 10.00, the GTT absolute for the current transaction is 1010.00 GTT (Absolute) always increases, regardless of the value (positive or negative) of the amount which is being added to it. GTP Scheduler In order to run the GTP, enable the scheduler job provided. It is recommended that the scheduled job is configured to be executed after the store closing hours. The scheduler service API loads all GTT for that store and submits it for generation. Follow the instructions below if a store close occurs after/before the current calendar date, configure the “SummarizedDay" parameter as described below. “-1” for the previous day's GTP computation. This would be the case if the scheduled service is triggered after midnight (ex. 2 AM) when the store opened on the previous calendar day. “0” for current day GTP computation. This would be the case if the scheduled service is triggered before midnight (ex. 11 PM) when the store opened on the same calendar day. Scheduler details Output of the “fiscalGtpComputationScheduleJob" is generation of Closing Archive file and the calculation of GTP. The default configuration is scheduled to be executed at 2:00 AM for the previous business day's transactions. Customers can update the CronExpression job to change the timing. Attribute Value Recommendation, if changes are required JobScheduleId fiscalGtpComputationScheduleJob JobTypeId fiscalGtpComputation CronExpression 0 00 02 * * ? * To set up as a nightly job at 2 AM, executing at a daily frequency. TimeZone Europe/Paris JobParameters { "InputKey":"LocationId", "InputValue":"*" }, { "InputKey":"SummarizedDay", "InputValue":"-1" } TriggerKey fiscalGtpComputationScheduleTrigger TriggerMissingExecutions LATEST IsDisabled TRUE Default = False, Change to TRUE to enable GTP as a mandatory step. Fiscal Archive The fiscal archive is a JSON file that contains all transactional, GTP and JET data for that closing period, along with transaction data. This file has the grand total period, transaction data, reprint transaction and audit trail events. This fiscal archive is generated for each store based on the period type, i.e. daily/monthly/yearly. This exported file includes closing archives and electronic signature details as well. The generated fiscal archive file is stored in a particular location systemically. Retailers can move these files locally to a retailer-maintained location to be retained for 6 + current years. More details follow. Fiscal Archive signing and file generation uses the same scheduler as GTP, which is JobScheduleId = fiscalGtpComputationScheduleJob There are 3 types of fiscal archive files that are generated. Daily Archive - In French “Archives quotidiennes” Monthly Archive - In French “Archives mensuelles“ Annual Archive - In French “Archives annuelles“ The fiscal archive file and electronic signature generated is always per store. Signature includes amount inclusive of VAT. For previous signature chaining, Daily Archive uses previous daily electronic signature for that store. The same logic applies for Monthly and Yearly Archives too. File names follow this pattern: Yearly File – Example -  fiscale_période{OrgId}Per{LocationId}YYYY.json Monthly File – Example -  fiscale_période{OrgId}Per{LocationId}YYYYMM.json Daily File –  Example -  fiscale_période{OrgId}Per{LocationId}YYYYMMDD.json Fiscal Archive sample structure Fiscal archive is created as a JSON file and has the following structure //Sample Structure of Fiscal Archive file <GrandTotalForPeriod></GrandTotalForPeriod> //The identification of the period of the archive and GTP details. <Orders></Orders>  //Collection of all sales and return transactions for that period <Reprint></Reprint> //Collection of reprinted receipts for that period. <EventTrail></EventTrail> //A collection of all signed Technical Journal events that were registered in that period included in the archive. <GenericEventTrail></GenericEventTrail> //Collection of all signed Audit events that were registered in that period included in the archive. Accessing Closing Archive data using API All archive files get persisted in Manhattan Associate’s Google cloud storage. Customers cannot access this location and are required to reach out to the Manhattan ops team with a ticket to fetch the closing archive data. Alternatively, retailers can use the API that gets the closing archive data in the form of zip. More details here. Sample Payload: Please check the service "Retrieve fiscal closing archive files on demand" proactive documentation "{{url}}/cfw/proactive/doc/api" under the backoffice component for sample requests Data integrity check Data integrity check is a process which determines if the original data that was used for electronic signature is altered. This is done by regenerating the electronic signature and comparing it with the original one. Systematic Data integrity check for tickets and invoices The data integrity check feature can be used on all fiscal records to validate integrity and to check if there are any changes to the original data which can potentially change the signature originally created.  Any modification to the transaction that contributes to constructing the electronic signature will be caught by integrity verification check. Systematic data integrity check can only be done on tickets and invoices. This is performed as part of store closing procedure automatically at the close of every business day. Steps involved in data integrity checking: Get the list of confirmed orders which are electronically signed and pending data integrity check for the given location and business date. Orders which have been verified through data integrity check at least once, are excluded from this process. Data Integrity verification steps For each order, the system gets the information relevant for data integrity check. Re-generates electronic signatures using the same keys for each ticket and invoice Compare an electronic signature with the original ticket and invoice. The integrity check is considered to be passed if the original and newly generated signature match, else it fails. Results of the integrity check are either passed/ failed and new signatures are persisted. In case of failure due to changes to the original data, JET event 90 is raised for each fiscal record. On Demand Data Integrity check on all fiscal records Data integrity check including tickets and invoices can also be performed on demand basis. This is applicable to all historical orders, including the ones created anytime in the past, across any location and which have gone through the data integrity check earlier. Orders created on different systems can not be tested for data integrity using Manhattan Active® Omni Point of Sale as the algorithm used to generate the initial electronic signature may not be the same in both systems. On Demand data integrity check is supported for all fiscal records, listed below. Ticket and Invoice Reprint Receipt Grand Total records Fiscal Archive JET An API is provided within software which can be executed using a postMan script to perform double checking of fiscal records/signatures. This will help the auditor to spot-check data integrity on any fiscal records of interest. During the auditing process, a system access is provided with an authorization token which can be used to access this API. Users can execute this onDemand API on postMan or any other tool to execute spot check. This API accepts a single fiscal record or a list to perform the data integrity check. (This will also include archived orders) Once the API is executed, It performs the data integrity validation. For each order, the system gets the information relevant for data integrity check. Re-generates electronic signatures using the same keys for each ticket and invoice Compare the electronic signature with the electronic signature generated for original ticket and invoice. The results of the integrity check are either passed/ failed and new signatures (re-executed electronic signatures) are persisted. In case of failure due to changes to the original data, JET event 90 is raised for each fiscal record. Steps to connect to the environment using postMan (For Auditing) Download https://www.postman.com/downloads/ or try the web version of the PostMan application. Get the access token On postman, use link to get the access token: {{authurl}}/oauth/token?grant_type=password&username={{userName}}&password={{password}} Replace {{userName}} with actual username Replace {{password}} with actual password Get the token from the above API response Use this access token to access on Demand data integrity check. On Demand API details All data integrity APIs details can be found here Sample Request: Please check the service "On Demand Data Integrity Check" proactive documentation "{{url}}/cfw/proactive/doc/api" under the backoffice component for sample requests Technical Journal and Audit Trial Events (JET) All applicable JET events managed by the software and as defined in [R19] will be captured. These JET events should not be modified or erased once they are recorded in the system and can be accessed by the user via existing authentication with access to the application or from the fiscal closing archive file. All JET events will be recorded and chained per store and register combination. List of JET Events JET events are captured in MAO solution under 2 buckets. This classification or differentiation of JET events is for easier management of JET events. This classification helps to organize events which are purgeable and which need to be kept until the archival period is met. Technical Journal Events : Events which are purgeable after creation of the annual fiscal archive file Audit Trail Events: Events which are not purgeable Below are the list of JET events captured, recorded and chained by MAO POS Solution: Event Code Event Code Title Event Code Title (Short Form) Event Code Title (Short Form) in French Purgeable Comments 20 Intermediate Fiscal archiving Intermediate Fiscal archiving Archivage fiscal de période Y Default Register This event will record the Daily and Monthly “fiscal archive” event. 40 Stopping the terminal, disconnecting, logging off Stopping the terminal Arrêt du terminal ou déconnexion ou fermeture de session Y This event will record the logouts from the register, which includes unexpected and forceful closures of the application or application crashes. 50 Period closing (Day/Month) Intermediate Period closing Clôture de période (Jour ou Mois) Y Default Register This event will record the Daily and Monthly “GTP” event. 80 Starting up the terminal, connecting, logging in Starting the terminal Démarrage du terminal ou connexion ou ouverture de session Y This event will record the login to the register. 130 User Authorization/Rights Management User Update Habilitation d’utilisateur ou Gestion des droits Y Generic event This event will only be recorded if the below user roles are given or have permission removed for the below grants and added into exclude grants condition. ui::posservice::*, ui::clienteling::*, ui::backoffice::*, ui::lookbook::*, ui::clienteling::*ui::geo::*, ui::customerengagement::*, ui::engagement::*, ui::customerinteraction::*, ui::customer::*, ui::devicemgmt::* 150 Printer unavailable Printer unavailable Imprimante indisponible Y This event will be recorded when any printer failure occurs from the register 170 Treatment of cash register closure and balance Till Reconcile mismatch Traitement de fond de caisse Y This event will be recorded during till reconcile operation when entered amount is not equal to expected amount. 255 Installation of a new minor version of the software Installation of minor version Installation d’une nouvelle version mineure du logiciel Y Default Register This event will be recorded whenever there is an update to the software installation program i.e minor version. 320 Abandonment of a commercial sale (transaction) not yet recorded Order Cancellation Abandon d’une opération de vente (transaction) commerciale non encore enregistrée Y This event will be recorded whenever there is transaction cancelation either manually or by EOD abandoned transaction cleanup. 323 Cancellation of an article line Line Cancellation Annulation d’une ligne d’article Y This event will be recorded whenever there is transaction line i.e. order line cancelation. 30 Fiscal year or fiscal period end archiving Annual Fiscal archiving Archivage fiscal annuel N Default Register This event will record the annual “fiscal archive” event. 60 Annual or Fiscal period end closing Annual Period closing Clôture annuelle ou d’exercice N Default Register This event will record the annual “GTP” event. 90 Detection of an integrity failure in secure data or in a fiscal tax archive Data Integrity Failure Détection d’un défaut d’intégrité dans les données sécurisées ou dans une archive fiscale N This event will record whenever there is a Data Integrity check that has failed on any transaction. 95 Detection of a break in the continuous sequence Break in continuous sequence Détection d'une rupture de la séquence continue N Record of the occurrence of a break in the ticket/Invoice sequential counter from one transaction to the next. 128 Change of taxable entity using the software SIRET update Changement d'assujetti utilisant le système d'encaissement N Generic event This event is recorded whenever businessIdentification attribute i.e. SIRET is added or updated. 250 Installation of a new major version of the software Installation of major version Installation d’une nouvelle version majeure du logiciel N Default Register This event will be recorded whenever there is an update to the software installation program i.e major version. 270 Evolution of compliance parameter Updates to compliance Evolution de paramètre de conformité aux règles N Generic event This event will be recorded whenever there are changes to the four key settings below - The business flag for French Fiscal order>orderConfig>enableFiscal. posStoreConfig>storeCommonConfig>primaryTaxAsInfo flag (Both 1, 2 above need to be (Y) enabled to be compliant.) posStoreConfig>storeCommonConfig>defaultStoreCurrency – must be EUR BackofficeConfig>storeConfig>storeBaseCurrency - must be EUR 400 Change of fiscal period duration Change of fiscal period duration Changement de la durée de l’exercice N Default Register Record any failure in generation of daily period closing or a scheduler job is changed. 410 Change of data regarding the identification of the taxable company or agent Taxable identity update Changement de données affectant l’identification de l’assujetti ou du mandataire N Generic event Default Register This event will be recorded whenever there are changes to the three key settings below - DB attribute = businessIdentificationAttributes.attributeValue where businessIdentificationType = BusinessEstablishmentCode OR BusinessActivityCode OR RetailerVATCode location.address location.locationName OR Organization.organizationName based on what si configured in the receipt header 450 Traceability of the change of the pair of keys used for the electronic signature Key update Traçabilité du changement du trousseau de clés utilisé pour signer N Generic event Record when public and private keys are changed. Default Register = When a JET event is created, a sample sequence will be “tm-demo-fr:80228-1028000Seq1” where the register is defaulted to 000. Generic event = When a JET event is created, a sample sequence will be “000000Seq1” where the register is defaulted to 000 and the store is defaulted to 000. Currently, JET events are not purged Accessing JET events JET events are posted in the Daily Fiscal Archive file. Another alternative is to use the below APIs to access JET events. Purgeable Events Non-Purgeable Events Not Supported in France Below are operations which are not supported by French fiscalization. POST VOID is not an allowed operation, setup roles to ensure no grants are provided for post void. BOPIS sell more is not a supported feature. POS offline transaction using an edge server is not a supported feature. Tax Exemption is not a supported feature. Services The APIs listed below are related to French fiscal sales at Manhattan Active® Point Of Sale and are referenced in this document. Refer to API documentation for additional details on each service. Service Component Group Service Endpoint Fiscal Software Detail Backoffice {{url}}/backoffice/api/backoffice/fiscalSoftwareDetail Get Order Order Order {{url}}/order/api/order/order/orderId/010427222001101000407?templateName=PosDefaultOrderWithPaymentTemplate Job Scheduler fw-batch GTP Scheduler {{url}}/backoffice/api/batch/jobSchedule Trigger Adhoc fw-batch GTP Scheduler {{url}}/backoffice/api/batch/jobSchedule/triggerAdhoc Fiscal Attributes Backoffice {{url}}/backoffice/api/backoffice/fiscalAttributes/import Private and Public Keys Backoffice Secure Keys {{url}}/backoffice/api/backoffice/fiscalSignature Retrieve Fiscal Closing Archive Files Backoffice Fiscal {{url}}/backoffice/api/backoffice/fiscal/retrieveFiscalClosingArchiveFiles Check Data Integrity Backoffice Ticket {{url}}/backoffice/api/backoffice/fiscal/ticket/checkDataIntegrity Check Data Integrity Backoffice Invoice {{url}}/backoffice/api/backoffice/fiscal/invoice/checkDataIntegrity Check Data Integrity Backoffice GTT {{url}}/backoffice/api/backoffice/fiscal/gtt/checkDataIntegrity Check Data Integrity Backoffice Reprint {{url}}/backoffice/api/backoffice/fiscal/reprint/checkDataIntegrity Check Data Integrity Backoffice GTP {{url}}/backoffice/api/backoffice/fiscal/gtp/checkDataIntegrity Check Data Integrity Backoffice Archive {{url}}/backoffice/api/backoffice/fiscal/archive/checkDataIntegrity Check Data Integrity Backoffice JET {{url}}/backoffice/api/backoffice/fiscal/jet/checkDataIntegrity Technical Journal Event Backoffice JET {{url}}/backoffice/api/backoffice/technicalJournalEvent Audit Trail Event Backoffice JET {{url}}/backoffice/api/backoffice/auditTrailEvent