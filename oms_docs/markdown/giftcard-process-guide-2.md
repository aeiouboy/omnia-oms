# Gift Card Cart Actions

**Permalink:** giftcard-process-guide-2
**Path:** Manhattan Active® Omni/Store/Process & Configuration Guides/Point of Sale/POS Guides/Gift Card Cart Actions
**Content Length:** 32,473 characters
**Scraped:** 2025-08-09T22:01:50.730748

---

Home ››Manhattan Active® Omni››Store››Process & Configuration Guides››Point of Sale››POS Guides ››Gift Card Cart Actions Gift Card Cart Actions Gift Card Cart ActionsScope of this DocumentGeneral ConfigurationConfiguring Gift Card ItemsGift card ActivationConfiguration possibilities for Gift Card ActivationWorkflow for a Gift card activation (Activate Gift Card in Cart = False):Gift Card Activation During RefundGift Card ReloadWorkflow for a Gift Card Reload (Activate Gift Card in Cart = False):Error HandlingRetry Failed Gift Card Activation/ReloadFailure to Activate/Reload - Retrying and Returning Failed Gift Card line itemsNonreturnable Gift Card itemsReturnable Gift Card itemsGift Card Failure exampleGift Card Balance EnquiryWorkflow for a Gift Card EnquiryStatic Table of Gift Card Activate/Reload AmountsServices Scope of this Document This documentation addresses Gift Card line item actions which are taken at the cart - selling or reloading a gift card, or performing a balance check.  For information on using Gift Cards as payment types, see Payment and Payment Types guides. Manhattan Active Omni Point of Sale provides its customers capability to purchase a gift card which can be pre-denominated, or reload to an existing gift card.  The customer can also perform a balance enquiry on an existing gift card as part of the existing sale. To perform these actions, itemID(s) must be configured as "gift card" actions, to be added to the cart and for which the customer will be charged.   The user will have to add a properly configured item to cart and then the OrderLine.isGiftCard will equal to True.  A Gift Card line item is in effect a pseudo-SKU. General Configuration For an item to be treated as a gift card, follow the Item set up configurations as stated below.  An item that is required for a Gift card "Activation" or  for a "Reload"  will have the following Verification and Checks to validate and fetch a particular item from the item master component, itemEntity.xml. The specific Item IDs shown in this document are for your reference only as these Item IDs are used by Manhattan for their internal testing.  Each retailer should define their own Item IDs as desired by them. Note: There must be at least two zero-priced Gift Card items to enable minimal Gift Card Sale or Reload functionality, one for NEW and one for RELOAD.  Additional items can be defined by the retailer's to either sell or reload pre-valued amounts: Configuring Gift Card Items From master data, item record (item>item) these are the settings that must be configured to set up a 'gift card' item. IsGiftcard = True sellingattributes>activationRequired = True or False, is this a new GC item or GC to be reloaded. If TRUE, the item represents value to be added to a new gift card (to be activated). If FALSE, the item represents value to be added to an existing gift card (reload). sellingattributes>valueEntryRequired = True or False, If this is TRUE then the user must provide the value of the Gift Card activate or reload item. Price is provided from a pre-seeded list of prices (ex. 10, 20, 50). The predefined value list is defined in item>giftCardAmount on the server. User will also have ability to type any desired dollar amount and update the Gift Card Value in the table. (For seed values, check below table) If this is FALSE, based on the item identified, the Server can make a call to Price promo and fetch the Gift Card item price, which is assumed to be pre-loaded like any other standard item price. Configuration possibilities for Gift Card items Attributes/Features Activation sample ItemId=900101 <Sample Test Id> Reload sample ItemId=900102 <Sample Test Id> Activation ItemId=900103 <Sample Test Id> Activation ItemId=900104 <Sample Test Id> isGiftCard Yes Yes Yes Yes ActivationRequired Yes No Yes No ValueEntryRequired Yes Yes No and item price record 100.00 exists No and item price record 50.00 exists The Value Entry Required is YES, then, this item is associated to 0.00 price.  User assigns price during transaction, by typing or selecting from predefined value list. The Value Entry Required is YES,  then, this item is associated to 0.00 price.  User assigns price during transaction, by typing or selecting from predefined value list. If the Value Entry is Required as equal to No. Then, this will be a New gift card associated to a predetermined price, i.e. 100.00 If the Value Entry is Required as equal to No. Then, this would be a Reload gift card item associated to a predetermined amount, i.e. 50.00 Gift card Activation Associates can trigger purchasing of gift card from the POS active store application. Gift card amounts can be pre-loaded or the associates can enter the amount manually based on the request from the customer. Gift card purchases are linked to an item which is configured as isGiftCard=True and isActivationRequired=True.  This item will be added to POS cart. Configuration possibilities for Gift Card Activation Application Configuration > Manage POS Configuration > POS General Configuration > Common Config > Activate Gift Card in Cart Activate Gift Card in Cart = False Gift card activation/reload will not occur until the balance due on the order = 0 Activate Gift Card in Cart = True. This setting is deprecated and is currently always treated as False.  Gift cards currently are always activated at the end of the transaction, after balance due = 0. Workflow for a Gift card activation (Activate Gift Card in Cart = False): User Selects Gift card > New Card  or the user can scan an gift card item Depending on the Value Entry Required flag, is True, a prompt is displayed to select the amount for the gift card to be activated. If False, the item comes with a default price populated by the server, this item will be added to cart like any other item CHECKOUT and navigate to the tender screen.   When all the payment is completed using the available payment options and balance = 0, a gift card prompt appears requesting the associate to swipe the gift card for activation UI will direct to collect the card number - through the screen or through the terminal - and request will be sent from terminal to the processor to activate the Gift card with the requested amount. Processor sends the response to activate the card including the available balance of this card POS Service maps this response to payment by creating a Payment Transaction Type as "Activate" and Payment Type as "Gift Card" using this Transaction ID. When the transaction is finalized receipts will indicate the Gift Card activation(s) in the GC activation section. Gift Card Activation During Refund Users can activate gift cards as part of the refund process. This functionality is supported for both automatic and override refunds. During this process, the user is presented with a gift card activation screen featuring Activate and Close buttons. If the user chooses to get a refund using a different payment method, they can simply click the Close button and select an alternative tender type. Gift Card Reload Associates can also perform adding more funds to the existing active gift card from the POS active store application. The reload amount can be suggested from the server with pre-defined denominations or the associate can enter the amount manually based on the customer's request. Gift card reloads are linked to an item which is configured as isGiftCard=TRUE and isActivationRequired=FALSE, This item will be added to the POS cart. Workflow for a Gift Card Reload (Activate Gift Card in Cart = False): User Selects Gift card > Reload  or the user can scan a Reload gift card item Depending on the Value Entry Required flag, is True, a prompt is displayed to select the amount for the gift card to be activated. If False, the item comes with a default price populated by the server, this item will be added to cart like any other item CHECKOUT and navigate to the tender screen.   When all the payment is completed using the available payment options and balance = 0, a gift card prompt appears requesting the associate to swipe the gift card for activation. UI will direct to collect the card number - through the screen or through the terminal - and request will be sent from terminal to the processor to reload the Gift card with the requested amount Processor sends the response by adding funds on the card and the new available balance of this card POS service maps this response to the payment by creating a Payment Transaction Type as "Reload" and the Payment Type as "Gift Card" using the Transaction Id When the transaction is finalized receipts will indicate the Gift Card activation(s) in the GC activation section. Error Handling The existing posGeneralConfig business flag "Allow Order Completion With GC Activation Failure" (T/F) flag is deprecated.  This setting is always treated as "true". Retry Failed Gift Card Activation/Reload At end of a transaction following full payment, POS attempts to Activate or Reload Gift Card lines.  Once user enters the data, either via pinned swipe or keyboard typing, if the card is declined by the Gift Card provider, user is prompted with the option to Retry or Continue. Number of retries allowed is configured under POS Store Config>>Store Common Config>>Number of Retries Upon Gift Activation or Reload, which is configured with an integer indicating the number of attempts to allow (ex. 0, 1, 2, 3, etc).  To enable the feature, configure a value > 0. User can re-attempt as many times as specified under the configuration, after which system either moves to the next Gift Card line or to the Receipt screen.  It is not mandatory to retry up to the maximum times allowed, user can skip the retry and continue to the next steps at any time. Two new additional attributes are introduced under PaymentMethodAttribute: "Name": "OrderLineId" : To persist the orderline for which the Gift Card Activation/Reload is performed.  This is used in Receipt to show only the final success or failed payment data. "Name": "IsGCActivationRetried": Indicates if the Declined Activation/Reload is Retried or not.  This is useful for the external systems such as Sales Audit, to know if the store associate Retried in case of failure or not. This whole process is applicable even in case of custom implementation where in the Gift Card is processed via the User Exit, in the backend. Failure to Activate/Reload - Retrying and Returning Failed Gift Card line items If a Gift Card item is successfully activated or reloaded, that line item is not returnable in the same way a typical merchandise item would be. Nonreturnable Gift Card items When the Gift Card line is successfully loaded with value, system marks the associated orderline.isReturnable=False.  During a validated return of this sale, this line item WILL NOT be displayed as available for return. Returnable Gift Card items Only if the Gift Card line is not Activated/Reloaded successfully, even following any retries, system marks the associated orderline.isReturnable=True.  During a validated return of this sale, this line item WILL be displayed as available for return. If a Gift Card Activation or Reload fails, users will see a pop-up with two options: Refund or Retry. Refund: Enables users to void the gift card transaction and proceed. This option will Automatically void the Gift Card item Since the previous balance was 0, there is now a refund due to the customer. A Process Refund screen will be displayed, with refund tender options as configured for a regular return. Once the user processes the refund, the balance again is 0.00 and user is navigated to receipt screen. Retry: Allows users to attempt the activation or reload again, either with the same or a different gift card. Once the number of retries is exhausted, the pop-up will display a Refund and OK options (no more Retries available). OK will take the user to the next action.(Activate/Reload more cards or navigate to receipt screen). If the user exhausts the retries as described and never opts to REFUND, they will be expected to return the failed GIFT CARD item(s) as part of a subsequent validated return. Note: Non-validated return of Gift Card is never allowed.  Since the isReturnable attribute is part of Orderline data, there must be an associated Order in order to read it. Gift Card Failure example 1. User sells 10.00 item and 100.00 Gift Card.  With tax the balance due is 110.89.  User tenders 20.00 Cash and 90.89 Credit. Result - Transaction Summary Subtotal                     110.00 Tax                                  0.89 Total                            110.89 Payment Cash                                20.00 Credit                              90.89 At this point, payment is complete and balance due is 0.00 2. User attempts to activate the 100.00 Gift Card several times without success.  User selects Refund. A typical Refund screen is shown with -100.00 as the Refund amount and refund payment types as configured in Payment Capture Configurations shown. User provides 100.00 refund for Cash. The final Transaction Summary as shown on the receipt will show: Transaction Summary Subtotal                       10.00  (no longer 110.00 due to returned failed Gift Card) Tax                                  0.89 Total                             10.89 Payment Cash                                20.00 Credit                              90.89 Cash                            -100.00 Note again, at this point, payment is complete and balance due is 0.00.  Note that all these actions happened in the same order, as opposed to creating a separate order to Return the failed gift card. Gift Card Balance Enquiry Customer can present the gift card to the store associates for checking the available balance. Associates can use this functionality as part of same existing sale transaction or a transaction of its own to make a call to the processor to get the balance for this particular gift card. The response will be present on the Payment component, and the customer is informed of the available balance either by print or e-mail. Workflow for a Gift Card Enquiry User Selects Gift Card C enquiry or the user can enter Gift Card number and click OK A new transaction is generated and saved. This on Order mark isConfirmed = True  (Or) If an existing transaction is present in the session, the same transaction is used for this enquiry UI will direct to MX, and MX will processor (Payware) to get the balance for this gift card Gateway provider sends the response with the available balance of this card POS service maps this response to the payment by creating a Payment Transaction Type as "Balance Check" and PaymentType as "Gift card" using this Transaction ID. Customers will receive receipts from the Gift Card activation section Note: If the balance enquiry is triggered when the cart is empty, always a new transaction number is created just for this functionality. Static Table of Gift Card Activate/Reload Amounts During Activate/Reload of a Gift Card from the menu, user can view the predefined amounts.  These amounts are taken from the static data defined in iGiftCard Amount table in the Item entity and the current initial seed data can be customized by the retailer. Services The following APIs are the key APIs related to Gift Card functions. Refer to the API documentation for additional details on each service. Service Component Service Service Endpoint Gift card activation posService Order Service Controller POST /api/posservice/order/addGiftItemToOrder Gift card activation posService Payment Service Controller POST /api/posservice/payment/issueGiftCard Gift card reload posService Order Service Controller POST /api/posservice/order/addGiftItemToOrder Gift card enquiry posService Payment Service Controller POST /api/posservice/payment/addGiftCardBalance gift card amount item Gift card amount service GET: /api/item/giftCardAmount