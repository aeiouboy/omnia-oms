# Shopify technical integration

**Permalink:** shopify-technical-integration
**Path:** Manhattan Active® Omni/Order Management/Process & Configuration Guides/Order Processing/Shopify Integration/Shopify Technical Integration
**Content Length:** 26,141 characters
**Scraped:** 2025-08-09T21:58:12.553580

---

Home ››Manhattan Active® Omni››Order Management››Process & Configuration Guides››Order Processing››Shopify Integration ››Shopify technical integration How to Integrate with Shopify I Next OverviewWebhook Integration API Calls IntegrationCalls to get more information (query)Calls to trigger a process (mutation)Shopify concept of "rate limit"ConfigurationRelated Articles Overview Manhattan Active® Omni and Shopify are integrated out of the box for the following functional flows: Availability alerts and Availability sync publishing Order creation on Shopify Settlement and refund creation in Manhattan Active® Omni. This includes settlements and refund creations for retailers using only Shopify's Shop Pay Commerce Component. These integrations are using a mix of webhooks and direct API calls to the GraphQL Shopify Admin API. See below for a high level integration diagram. Webhook Integration Shopify is publishing information via webhooks. When an order is created or when a new payment transaction/refund is created on Shopify, a webhook is published to a public GCP endpoint. From there, the message is routed to the correct component in Manhattan Active® Omni for further processing. The out-of-the-box integration uses the webhooks below: "Order Creation" - This webhook is triggered every time an order is created and confirmed on Shopify side. It is used to create an order on Manhattan Active® Omni after translation. "Transaction Creation" - This webhook is triggered every time there is a new authorization or settlement transaction created on Shopify side. New Authorizations are sent at the same time as the order is captured. Settlements are usually sent after Manhattan Active® Omni triggers the settlement via payment request if Shopify acts as a payment gateway. "Refund Create" - This webhook is triggered every time there is a refund processed by Shopify. Refund transactions are usually sent after Manhattan Active® Omni triggers the refund by payment request if Shopify acts as a payment gateway. API Calls Integration Manhattan Active® Omni integrates with Shopify GraphQL Admin API. This allows Manhattan Active® Omni to get additional information or trigger processes on Shopify side. Calls to get more information (query) The Admin Shopify API is called as a query in the scenarios below during the out-of-the-box integration: To get the Shopify Item ID during availability updates To get additional order information when a payment method is created as some information that exists on Manhattan Active® Omni Payments is present on Shopify orders (billing address, Shopify order name, and so on) Calls to trigger a process (mutation) The Admin Shopify API is called with the mutations below during the out-of-the-box integration: "inventorySetQuantities" - This mutation is used to update available quantities of each product. "orderCapture" - This mutation is used to trigger the settlement of an authorized transaction. "refundCreate"- This mutation is used to trigger the refund of an existing settlement transaction. Shopify concept of "rate limit" Shopify has a concept on their inbound APIs that is called "rate". The rate limit is a way for Shopify to limit the amount of inbound APIs to their system at the same time. It is a negotiated number on the Shopify side. It is important to know that the base integration assumes each project negotiates a rate limit to be able to handle volumes that are coming out of Manhattan Active® Omni. This is especially true around the time of availability sync, where a lot of simultaneous calls are made to Shopify to update available inventory. The value of the rate limit is not read by Manhattan Active® Omni nor is the inbound volume intentionally throttled based on Shopify inbound limits. If the rate limit is reached, retry mechanisms exist in the form of failed message reprocessing, but using failed messages should be the exception and not the norm. Configuration To connect their Manhattan Active® Omni organization to a Shopify store, each project needs to execute the below steps. These steps need to be executed with a Shopify admin user and a Manhattan Active® Order Management admin user. The below steps are valid for standard Shopify stores and Shop pay only implementations. Note: Each Shopify store can be linked to only one organization. Each organization can be linked to only one Shopify store. Prerequisites: Manhattan Active® Omni services - technical configuration Create the below KV store properties in Xint component: Key: awpf.pubsub.organization.lookup.enabled value: true Key:awpf.pubsub.organization.key.identifier value: X-Shopify-Shop-Domain Key: awpf.pubsub.organization.key.<store_name>.myshopify.com (replace <store_name> with the Shopify store name) value: the orgid of the organization the Shopify store is linked to Key: awpf.pubsub.input.headers.to.retransmit value: X-Shopify-API-Version,X-Shopify-Hmac-SHA256,X-Shopify-Order-Id,X-Shopify-Shop-Domain,X-Shopify-Test,X-Shopify-Topic,X-Shopify-Triggered-At,X-Shopify-Webhook-Id Create the below KV store properties in Xboundauth component: Key: XBoundBasicUsernameForShopifyService value: omnicomponent.1.0.0 Key: XBoundBasicPasswordForShopifyService value: {cipher}063fa40bddc232fb949081647fb52533e492ba643960b205deff00672b30b16ca90a0c12ce0c4c806626cd6728e2c667 Key: UsernameForShopifyService value: admin@shopify.com Key: PasswordForShopifyService value: PaSsWoRd@1 Key: GrantTypeForShopifyService value: password Create the below KV store properties in Xbound component (in all the below, use the value as is, it does not need to be changed with your own stack name): Key: custom.free.pass value: /shopifyProxy/**,/shopifyProxyStatusUpdate/**,/shopifyProxyUninstallApp/** Key: zuul.routes.shopifyAuthorization.path value: /shopifyAuthorization/** Key: zuul.routes.shopifyAuthorization.url value: https://mxrap1-auth.sce.manh.com/oauth/token Key: zuul.routes.shopifyProxy.path value: /shopifyProxy/** Key: zuul.routes.shopifyProxy.url value: https://mxrap1.sce.manh.com/marketplace/api/marketplace/shopifyOAuthConfig/search Key: zuul.routes.shopifyProxyUninstallApp.path value: /shopifyProxyUninstallApp/** Key: zuul.routes.shopifyProxyUninstallApp.url value: https://mxrap1.sce.manh.com/marketplace/api/ServiceDefinition/invoke/unlinkShopifyAppConfig Key: zuul.routes.shopifyProxyStatusUpdate.path value: /shopifyProxyStatusUpdate/** Key: zuul.routes.shopifyProxyStatusUpdate.url value: https://mxrap1.sce.manh.com/marketplace/api/ServiceDefinition/invoke/shopifyAppHistoryStatusUpdate Update Xboundauth service definition POST {{url}}/xboundauth/api/ServiceDefinition/serviceDefinition/save xboundauth service definition{ "ServiceStateTransition": [], "ServiceFormDataParams": [ { "ParameterValue": "application/x-www-form-urlencoded", "ParameterName": "Content-Type" }, { "ParameterValue": "{:GrantTypeForShopifyService}", "ParameterName": "grant_type" }, { "ParameterValue": "{:UsernameForShopifyService}", "ParameterName": "username" }, { "ParameterValue": "{:PasswordForShopifyService}", "ParameterName": "password" } ], "CreatedTimestamp": "2024-07-22T05:24:50.465", "ServiceAuthParams": [ { "ParameterValue": "{:XBoundBasicUsernameForShopifyService}", "ParameterName": "xbound-basic.username" }, { "ParameterValue": "{:XBoundBasicPasswordForShopifyService}", "ParameterName": "xbound-basic.password" } ], "ServiceDefinitonParams": [ { "ParameterValue": "false", "ParameterName": "ISEXTERNAL" }, { "ParameterValue": "HTTP", "ParameterName": "PROTOCOL" }, { "ParameterValue": "POST", "ParameterName": "HTTPMETHOD" } ], "Url": "com-manh-cp-xbound:8080/shopifyAuthorization", "ServiceId": "ShopifyProxyAuthService", "InputSchema": null, "BusinessMethod": null, "ManhattanOwnedExtension": true, "TransitionsState": false, "ComponentId": "Xboundauth" } Create the below inbound message types in the xint component POST {{url}}/xint/api/ServiceDefinition/inBoundMessageType/bulkImport xint inbound message types for Shopify integration { "Data": [ { "PreFetchCount": 50, "BrokerClusterName": "PUBSUB-DefaultBrokerConfig", "NoOfConsumer": 10, "RetryCount": 3, "MessageType": "ShopifyOrderWebhookMsgType", "MinNoOfConsumer": 1, "ScaleUpTimeWindow": 10, "MaxDesiredInstances": 6, "InBoundMsgToRetransmit": [ { "ToMessageType": "ShopifyOrderWebhookMsgType" } ] }, { "PreFetchCount": 50, "BrokerClusterName": "PUBSUB-DefaultBrokerConfig", "NoOfConsumer": 10, "RetryCount": 3, "MessageType": "ShopifyPaymentWebhookMsgType", "MinNoOfConsumer": 1, "ScaleUpTimeWindow": 10, "MaxDesiredInstances": 6, "InBoundMsgToRetransmit": [ { "ToMessageType": "ShopifyPaymentWebhookMsgType" } ] }, { "PreFetchCount": 50, "BrokerClusterName": "PUBSUB-DefaultBrokerConfig", "NoOfConsumer": 10, "RetryCount": 3, "MessageType": "ShopifyAppUninstallWebhookMsgType", "MinNoOfConsumer": 1, "ScaleUpTimeWindow": 10, "MaxDesiredInstances": 6, "InBoundMsgToRetransmit": [ { "ToMessageType": "ShopifyAppUninstallWebhookMsgType" } ] } ] } Create the outbound message types in xint POST {{url}}/xint/api/ServiceDefinition/outBoundMessageType/bulkImport xint outbound message types for Shopify integration { "Data": [ { "MessageType": "ShopifyOrderWebhookMsgType", "Transactional": true, "PersistMessageToMsgStore": false }, { "MessageType": "ShopifyPaymentWebhookMsgType", "Transactional": true, "PersistMessageToMsgStore": false }, { "MessageType": "ShopifyAppUninstallWebhookMsgType", "Transactional": true, "PersistMessageToMsgStore": false } ] } Restart the 3 components: Xint, Xboundauth and Xbound Work with OPS to grant Shopify access to publish webhooks in your pubSub topic See Shopify documentation here Sample ops ticket for Shopify webhooksGrant the shopify service account for Kafka publisher role Shopify service account address: delivery@shopify-pubsub-webhooks.iam.gserviceaccount.com For the following queues ShopifyOrderWebhookMsgType ShopifyPaymentWebhookMsgType ShopifyAppUninstallWebhookMsgType ShopifyInventoryLevelWebhookMsgType Step 1 - Shopify admin users should download the "Manhattan Active Omni" app from the Shopify app store The app is not listed in the Shopify App store, so a direct link is needed: https://apps.shopify.com/manhattan-active-omni Click on install and follow the installation steps. Once the installation is successful, get the store name and communicate it to a Manhattan Active Omni admin user. Step 2 - Manhattan Active® Omni admin user should set up the Shopify configuration Connect to Manhattan Active® Omni in the related org for the configuration. This should be the organization where the orders and payments are maintained. Open the Shopify configuration UI and follow the steps detailed when clicking on "Connect to a Shopify store". Once the connection is a success, select the flows to enable: If the Shopify store is a Shop pay only store, it is used for Shopify's Shop Pay Commerce Component implementation. In that case, order and availability are disabled by default. Order creation Payment management If using Shopify as a payment gateway, the payment gateway account is automatically created. Refer to Using Shopify as a payment gateway configuration for more information. Inventory availability. If that is selected, the Location ID and view names are needed. Note: Location ID and view name are only needed to sync inventory. Refer to Shopify inventory configuration for more information. APIVersion: "2024-07" (this is the only version that is currently supported) Save the Shopify config. You are now connected! To test the connection, create an order on the Shopify store and watch it appear in the Manhattan Active® Omni orders! Note: Communication is asynchronous. On this first connection it may take a few minutes for the order to appear. Related Articles Order Integration with ShopifyPayment Integration with ShopifyInventory Integration with ShopifyShop Pay Integration