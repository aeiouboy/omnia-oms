# POS Returns &amp;amp; Exchange Process

**Permalink:** pos-returns-and-exchange-process
**Path:** Manhattan Active® Omni/Store/Process & Configuration Guides/Point of Sale/POS Classic Guides/POS Order Selling/Returns & Exchange/Process
**Content Length:** 40,716 characters
**Scraped:** 2025-08-09T22:02:49.189707

---

Home ››Manhattan Active® Omni››Store››Process & Configuration Guides››Point of Sale››POS Classic Guides››POS Order Selling››Returns & Exchange ››POS Returns &amp; Exchange Process POS Returns and Exchange Process POS Returns and Exchange ProcessReturn ModeCustomer ID CaptureMatchingGeneral Item and orderLine isReturnable AttributesGift Card ReturnabilitySpecial Order Age Policy Matching Rules Auto-MatchingTie Breaker during MatchingPrice Rank in Price Tie-break LogicExchangeRefund Price Determination- Standalone returnsFlow VariationsTendering RefundsAlternate refund payment types for Override TenderAllow Cash Refund Above Till AmountAllow Return Order Completion The Return/Exchange function allows customers to return previously purchased items. Associates may create a Return sub-transaction within a cart at any time. A mixture of items from one or more original orders, and standalone items such as returned items without receipts, may be returned in the course of a transaction. A cart may contain only positive items (strictly purchase), only negative items (strictly return), or a mixture of positive/negative (exchange). In the event of a refund due to the customer (i.e., return or negative exchange transaction), POS automatically tracks original order payment methods and derives refund payment types appropriately, allowing for either automatic refund to appropriate payment types as well as manual selection within a list of allowed tender types. Refer to Order Management - Returns and Exchanges - Returns & Exchange Process guide for more information regarding Order return data handling. Return Mode Within a Cart the associate invokes Returns Mode at any time by either selecting the Function or scanning/typing an original OrderID. During Returns Mode return item,  original order and/or customer information is collected. When a sale order is added to return mode, the system cancels pending mPOS returns associated to this order; any refund processed is also reversed.  With this, users can create a validated return and refund do the original payment type again. Example: Store Associate scan a Sale order and selects an item to create a return.  Process Refund, but the Order confirmation failed due to systemic error and the POS application gets closed. When the same sales order is scanned again to re-process the return, the previously created return gets cancelled, the refunded amount is reversed and a new validated return can be created. Note: This behavior is only supported for Manhattan Active® Omni POS orders. The system will not cancel a pending non-mPOS return order associated with the original sale order. Note: If Blind Returns is not configured, during Returns Mode user may view the Order Details of any orders which have been entered (i.e., associated to any receipts which have been scanned). Rather than scanning an itemID, the user may also add item(s) to the Returns Mode by highlighting an order line from the detail view. This process will add the highlighted itemID to the Returns mode with quantity 1. User can change quantity based on the item being returned. Return reason code and Disposition selected are applicable to the quantity selected. After the return order is created, user cannot change the Quantity on the return line. Note: In case the Blind Return is enabled at the POS General Configuration, upon scanning an order, the items must be scanned/added as well to create a return order. If the associate selects an order from a customer's past purchases, then they must scan/add the items as well, else checkout will not be enabled. The purpose of Blind Return is to avoid any fraud done by associates. Note: Returns can also be initiated from the Global Order Search result list, or from a customer's Purchase History. Customer ID Capture The POS system can be configured to capture customer id information when a return/exchange is performed.  The options of Driver's License, State ID, Military ID or Passport are default options and can be changed by Professional Services via query.  The customer id can also be skipped if configured. Matching When the match API is called, the system matches the item(s) collected in Returns Mode to any original OrderID(s) collected. When an item is found in the data for an original order and is returnable, the item receives return pricing, tax information from its matched original order, and the original tender PaymentType is noted. If the item cannot be matched because it's not found on any of the orders collected, or its returnable quantity is not correct due to a previous return or other condition, the associate may choose to collect another OrderID, return the item as a 'standalone' or, remove the item from the transaction. General Item and orderLine isReturnable Attributes In addition to basic 'matching' of items to original orders (sales), the general returnability of an item at the store in a validated return against a given order is determined at the time of original order creation by flags in the Order Data for the original sale order>orderLine>IsReturnableAtStore and order>orderLine>IsReturnable.   When the order is captured, IsReturnableAtStore flag is set by master data item attribute for the orderline item item>IsReturnableAtStore and order>orderLine>IsReturnable flag is set by master data item attribute for the orderline item item>IsReturnableAtDC. If both master data flags are set to false, then in any order (sale) the item orderLine will be marked as non-returnable at the store for that order - i.e., order>orderLine>isReturnableAtStore and is order>orderLine>isReturnable will be False.   Otherwise, if one or both flags are true, the item orderLine will be marked as returnable for that order (IsReturnableAtStore and/or IsReturnable are set to true).. POS does NOT look at the item>IsReturnableAtStore or isReturnableAtDC flags from the item master at the time of the return; POS uses the return eligibility set at the time of order creation. For example, an item on an orderline is set as returnable (IsReturnableAtStore and/or IsReturnable are set to true) at time of sale.  After the order is created, both IsReturnableAtStore/DC flags are set to false in the item master for that same item.  In this situation, the item would be allowed to be returned to the store from that order.  The new values for IsReturnableAtStore/DC would affect the returnability of that item in future orders going forward. Vice versa - if the item at order creation was set to be non-returnable and after the order was created, the IsReturnableAtStore/DC flags are set to true in the item master, the item would NOT be allowed to be returned to the store from that particular order/receipt. This allows items to change status over time - new items can be returnable when first introduced, and as they transition to clearance items over time the item attributes can be changed to not returnable. Flag will only be validated upon click at checkout. Match and create return API will be called. This API will have all the intelligence to check if isReturnable Flag is true or false for this item and then throw related information back to the user. Note:  Because line item return behavior as described is dependent on an attribute in the original sale order, there is currently no way to enforce returnable/not returnable status on standalone return items which by definition are not validated against an earlier sale order. The validation is displayed in the form of Consolidated Error Screen after the scanned items have gone through the Return Match process and thus is not displayed up front while adding the order during the returns - since until the item(s)/Order(s) MATCH occurs, the exact status of each item is now known. Below are the information messages displayed after the validation. Error Reason Description Text displayed on consolidated errors form Item matched to order/line but order line is canceled. If Order Id & LineId is not null and IsMatch=true and provided Order Line is cancelled No valid order match found Item not matched to any orders/order lines If Item doesn't exist in one of the input orders. No valid order match found Quantity is not eligible to return If quantity is more than returnable quantity. No valid order match found Unable to find Item id within suggested Order Id. If Order Id is not null but line id is null and IsMatch=false and Item doesn't exit. No valid order match found ItemId does not match with suggested order Id and Line Id. If Order Id & LineId is not null and IsMatch=false and ItemId doesn't match with orderId and lineId combination. No valid order match found Item UOM does not match with suggested orderId and Line Id. If Order Id & LineId is not null and IsMatch=false and ItemId UOM doesn't match. No valid order match found Item Unit Price doesn't match with suggested orderId and LineId. If Order Id & LineId, Unit Price is not null and IsMatch=false and ItemId UOM doesn't match. No valid order match found Item is not eligible to return because it was purchased more than (configured age policy) days ago. If item is not allow to return due to return policy. Cannot return purchase older then <X> days Item matched to order/line but not returnable due to isReturnable flag 'False'. Able to find item in one of input Order and Item is not returnable because IsReturnable is set false in parent orders. Item not returnable from that order Gift Card Returnability Gift Card order lines that are flagged as orderline.isReturnable=True are eligible for returns.  User can initiate a return for such orderlines by choosing order line/lines from the Order in the Return mode.  Successful Activations/Reload is not typically marked as returnable as the value is added to the customer's Gift card, hence user cannot choose them for return purpose.   Such Gift Card line items will not be shown in Order Details when browsing an order in Return mode. This option is not relevant if Blind Returns option is configured via POS General Config > Common Config.  In this case, user cannot browse order details to select any specific line items (Gift Cards or regular items) to return in any event. Special Order Age Policy Matching Rules Retailer can set return match age at the Order Configuration for "Returns and Exchange". Orders are considered "not matched" if the matching sale is more than the configured "Days Eligible for Return". Retailers can override this matching criteria by means of a business flag in POS General Config "Allow Override on Return Age".  When this is True, a user whose role has new grant "overrideaccess::posservice::returnage" can approve matched return of an item to an original sale order when that sale exceeds the configured match age limit. In case the current user does not have the mentioned grant then another user with the grant can perform a manager override by entering userID/PIN to perform the action. Auto-Matching To enable AutoMatch behavior, posStoreConfig>storeCommonConfig>enableAutoSearchCustomerOrder should be set to TRUE. If an Active customer is present in the transaction, the store associate can bypass explicitly scanning receipts (orderId values) into the Return state.  Instead when the Match runs, the system will automatically try to match return items to customer past orders by automatically searching the purchase history of that customer, for that item.   As with regular Match, the system will identify the order that best matches for that return item, based on the return configuration. While searching the customer past purchases, system goes up to the number of days specified under POS store configurations>>Store common config>>Age Limit For Customer Order Search For Returns.  If not order is found within this history, user can choose to continue with non-validated return or void the item. If a user has presented both the order ID and activated the customer, user entered Order ID takes precedence over any 'automatches'.  Once the entered Orderid is used to match return items, if there are still unmatched items, orders from past purchases are used.  While matching the orders fetched from the past purchases, the tie breaker rules are applied too. There are certain constraints to the number orders to be fetched and time taken to get the orders. Following Order component properties are added for this purpose The number of orders to be looked up for is determined by customer.past.purchases.page.size.  3 is the default value. The timeout duration is governed by order.fetch.timeout.duration.in.secs.  3 seconds is the default value Note: Implementation team is recommended not to increase these values to a much higher number as it can impact the performance of the application. Tie Breaker during Matching If an item is found in more than one order (or orderlines), the system matches the item to a specific order/orderline based on the "Match return items to order by" configuration. System tries to break the tie first based on price policy. If price policy is set to "Highest", the order( or orderline) having the highest selling price is matched for the returned item. Selling price is calculated as  (OrderLineSubTotal - TotalDiscountOnItem)/ quantity. If the selling price again results in a tie between order (or orderlines) or price policy is not configured, then age policy is used to break the tie. If neither of them is configured, the oldest order (or orderline) is used to match the item to the order. For example: John buys Jeans with Buy 1 Get another 30% deal. When he returns one pair of the Jeans with the receipt, the system chooses the orderline based on the Price policy. Order Order Line Item Selling Price in dollars Price Policy Age policy Result 1 1 2 Jeans Jeans 25.00 (Full price) 17.50 (30% off) Highest Oldest Return match API will match the return to order line1 1 1 2 3 Jeans Jeans Tshirt 25.00 (Full price) 17.50 (30% off) 10.00 Lowest Oldest Return match API will match the return to order line2 1 1 2 3 Jeans Jeans Jeans 25.00 17.50(30% off) 17.50 (30% off) Lowest Oldest Tie exists between order line 2 and 3. Return match API will match the return to order line2 as it is the oldest between order line 2 and 3. 1 1 2 Jeans Jeans 25.00 25.00 None None Systems defaults to use the oldest line which is orderline1 Price Rank in Price Tie-break Logic Price rank allows the retailers to use configure Nth lowest or highest to match the item to the orderlines. This is more prevalent when there are deals for buying an item in multiple units at different price points. During the return, price rank allows the returned item to be matched against the order (or orderline) where the price of the item is ranked as N. This takes effect only when price criteria is configured to break the tie when the retailer wants to break the tie based on price, but doesn't want to favor the extremes (absolute highest or absolute lowest). Exchange The user may invoke Returns Mode from an empty Cart. After the Return collection, user may re-enter a purchase state by selecting Sell More. This will invoke the Matching and end the Returns Mode allowing entry of Sale items. Alternatively, user may invoke Returns Mode from a Cart containing one or more Sale items. Cart in which both positive (purchase) and negative (return) items are considered Exchanges and may be even, negative, or positive based on the net. Note: The exchange state and standalone returns are transaction types or conditions flowing organically from the use of the Returns/Exchange function and are not called by separate keys. POS does not support returns with even exchanges. All mixed cart i.e.  returns and sale in a return transaction are uneven exchange and new sale item are priced when added and not copied from original order. Refund Price Determination- Standalone returns For Non-validated stand alone return items, Manhattan Active Omni provides the ability to track the price history of an item at location or web. Retailer can choose to use this to price standalone returns. While accepting a return item as "Standalone", system picks the least price in last X number of days as specified. This feature is available only if price history is maintained. If price history is not maintained, or, if no price history record for that item exists, the current item Selling Price for that item/location is picked. Price History is enabled and configured via Application Configuration> Manage Selling Configuration > Selling > Price Configurations.  Price History will be maintained as item selling prices are changed when an integer value is provided in the Return Low Price Age field, where that value represents the duration in days for which to maintain the price history.  Price History is maintained similar to item price, on behalf of item and location. Note: The same behavior holds good when application is running on resilient cloud. Flow Variations The return flow may be configured to require reason codes, disposition codes, customer ID, and/or customer name/contact information if so desired. Tendering Refunds The Payment component has configurable rules governing refunds. At checkout state, POS calls the Expected Refund API which returns the tender type option(s) from payment based on these rules. Where possible, payment rules prefer to refund back to the original payment type - i.e., a credit to an original Visa.  Where this is not possible, as when the original tender may have been by Traveler's Check, a different default refund payment type is configured. POS will automatically process refunds against the original or default payment types. Maximum refund limit during returns: Each refund payment type configured has a maximum refund limit defined in payment capture config, The payment rules honor this limit in both return with and without receipt scenario and if any refund is above this limit, rules is move to use next eligible refund type.  If no eligible refund is configured then it will move to pick the remaining maxed refund amount to standalone return payment type configured in payment parameters. For example: During auto refund, current hard limits are checked i.e If for CC refund type is CC, GC and SC, then max refund limit is first checked for CC then for GC and SC. If refund limit exceed for all then standalone refund from payment parameter is used for remaining amount. Automatic/suggested refunds: If for CC refund type with hard limit/ maximum refund limit is configured as CC=10, GC=20 and SC=30. And if refund of 100 on original CC payment is tried then it loops through all eligible refund types for CC with hard limits, such as CC=10, GC=20 and SC=30 and standalone refund=40. In above example if standalone refund i.e. cash has hard limit of $15 then existing rules considers is as error scenario i.e. CC=10, GC=20 and SC=30 and Alternate refund=40 is suggested and on processing refund it throw error that 40 is more than 15 and moves to override refund screen. Alternatively, the associate may select to override the automatic refund recommendation from a list of permitted optional tenders, also provided by the Expected Refund API. Irrespective of return type i.e. either return with or without receipt the available override tender selection is based on the payment parameters standalone return payment type (single default option such as Gift Card) or multiple override refund tender types based on configuration as described in alternate refunds section below. Refund Threshold: User can also have choose to control refunds by payment type and user role via threshold configuration in posservice component. This works independent of above hard limit i.e maximum refund limit from payment capture config. This threshold should be configured by payment type and at each user role level, the threshold itself is defined as maximum allowed refund amount. If user is doing refund above the allowed threshold for that role, then manager override credentials from another user with the appropriate permissions is forced.  I.E., such refunds can be overridden by users with threshold more than the required refund amount. Refer to Manager Override & Routing process and configuration guide for additional information. How does refund threshold work with above hard limit/ maximum refund limit ? Example: If for CC, refund type with hard limit/ maximum refund limit is configured as CC=10, GC=20 and Store Credit (SC=30). Assume that, within the 'hard limit', refund threshold for SC = 25 is configured for storeAssociate role. If store associate logins in and tries a refund of 100 on original CC payment, payment rule will loop through all eligible refund types for CC with hard limits, and suggested refunds as CC=10, GC=20 and SC=30 and standalone refund=40. On processing refunds, error is thrown to user since SC of 30 is more than allowed threshold of 25. User can choose to use manager override pop-up by providing another user's credentials whose role is associated to threshold more than the required refund of 30 for SC, and process the refunds. Alternate refund payment types for Override Tender Associate can choose to override the automatic refund recommendation to a configured alternate tenders using the override tender option. The override tender screen will display refund type based on the configuration explained in config guide. For stand alone (not matched) returns, the alternate refund payment types will be available when the business flag "Show Alternate Refunds For Return" is turned on and multiple payment types are flagged via pay capture config>payment capture detail as "Allow Standalone Return" True. When business flag is off, regardless of payment capture detail "Allow Standalone" flag for individual payment types, only a single default refund override tender as configured in "Standalone Return Payment Type" in payment parameters is available. In either case (validated or standalone) the override tender functionality for refunds is controlled with special overrideaccess grants. Only users with this grant will be able to override the automatic refund recommendations. If associate does not have the access, then a user with the right grants can give the access with user and pin credentials. Allow Cash Refund Above Till Amount Associate can return cash to the customer during returns/exchanges regardless of the amount of cash the system has calculated in the till when Allow Cash Refund Above Till Amount business flag is on.  There will be no error message displayed to the user that the till does not have enough cash to cover the refund.  The system will allow the cash to be returned to the customer without forcing a pay in or loan of cash to the till before allowing the cash refund. When Allow Cash Refund Above Till Amount business flag is off, an error will be displayed to the user informing them there is not enough cash in the till and the cash refund will not proceed. This business flag will work only for fixed registers. Allow Return Order Completion POS currently has the below three variations of payment utilization methods for customers: Payment module used at the customer environment is the one that is integrated with the in-house Payment System. In this type of integration, the customer is navigated to the receipt screen only when the payment confirmation is received by the application, and there is no balance pending for the customer to receive. Payment module is integrated with the POS application, but the application does not wait for payment confirmation to process the order, as the call is done asynchronously. The customer can proceed with the “Complete Payment/Process Refund” flow, and the payment transactions are updated. There should not be any check on the pending balance from MAO system. The third type of variation is when the customer is using a third-party software for payment processing. In this flow, POS does not receive any payment confirmation, and thus, the customer is directed to the receipt screen directly. As there is no payment data created in MAO system, therefore no check is required on the pending balance during “Complete Payment/Process Refund” flow. Read the below for more details. During the return order creation, while processing the refund, the application behaves differently depending upon the variations highlighted above. In a scenario where the customer uses a third-party payment method, there is a chance that orders can go on hold due to reasons like non-creation of payment transaction and/or balance due is greater than zero. At this point, the user is stuck at the Order Summary screen and cannot proceed. To manage this scenario where POS does not have to conduct any validations, the business flag “Enable Override Refund Option Upon Failure” must be set to false so that the user is directly navigated to the receipt screen. During refund of transaction for 3rd variation. set PaymentTransactionStatusId as In Progress and PaymentResponseStatusId as success. This will help in UI moving forward to receipt screen. Later when payment response is received do a reset of PaymentTransaction entity, to delete and add new entry to record the actual status. "PaymentMethod": [ { "Actions": { "PaymentTransaction": "RESET" } ] Deleting and adding back needs to be done in two separate paymentHeader/save calls as it doesn't allow in one call Services The APIs listed below are related to Returns/Exchanges at POS and referenced in this document. Refer to API documentation for additional details on each service. Service Component Group Service Endpoint CreateOrUpdateOrder Service Posservice Order posservice/api/posservice/order/matchAndCreateUpdateReturnOrder AddTender Posservice Payment posservice/api/posservice/payment/getExpectedRefund CreateOrUpdateOrder Service Posservice Order posservice/api/posservice/order/updateReadyForTender Order Services Order Order order/api/order/returnItems/match ItemDatePrice Services Pricepromo Item Date Price pricepromo/api/pricepromo/itemDatePrice