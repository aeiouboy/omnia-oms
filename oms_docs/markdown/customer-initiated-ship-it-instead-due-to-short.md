# Customer-Initiated Ship it Instead due to Short

**Permalink:** customer-initiated-ship-it-instead-due-to-short
**Path:** Manhattan Active® Omni/Order Management/Process & Configuration Guides/Digital Self-Service/Ship it Instead/Customer-Initiated Ship it Instead due to Short
**Content Length:** 41,287 characters
**Scraped:** 2025-08-09T21:55:24.515440

---

Home ››Manhattan Active® Omni››Order Management››Process & Configuration Guides››Digital Self-Service››Ship it Instead ››Customer-Initiated Ship it Instead due to Short Customer-Initiated Ship it Instead due to Short Customer-Initiated Ship it Instead due to ShortOverviewEligibility for ConversionNotifying Customers of the Ship it Instead OptionCapturing the Shipping Address in Digital Self-ServiceOrder UpdatesConversion Confirmation Email/TextS&H Charge CalculationAutomatic Tax Write OffConfigurationShip It Instead S&H CalculationOrder ConfigurationEnabling Ship it Instead for ShortsShip it Instead EmailsShip it Instead Text MessagesCancellation SchedulersDigital Self-Service ConfigurationDigital Self Service Availability ViewFeature ScopeImplementation FlavorsCustomization for customer cancelation initiated by store associateCustomer triggered Ship It Instead events in Digital Self-Service are not moving fulfillment from Pickup to PackConvert Picked Lines to ShipToAddress when another line on the order is shorted and converted by the customerExclude ShipItInstead link from PickupReminders for Hazmat ItemsTroubleshootingUnable to view the mod type "track customer response" in order configuration Unable to view the "Change Delivery Method on Short" flag in Order config UIOrder line is eligible for conversion but no record is being created in the CustomerResponseTracker entityRelated Articles Overview With this feature, customers can have their BOPIS (buy online pick-up at a store) items shipped to them instead, if the item is unavailable at the store. Here's how it works: A customer places an order with a BOPIS  order line. The order is allocated and released to a store. While preparing the order, a store associate finds the item damaged/unavailable and shorts the item. On receiving a short message from the store, the order component determines if an order line is eligible for BOPIS for shipment conversion. If validation passes, the order line is moved to backordered status and an email/text is sent to the customer with a link to the Digital Self-Service Ship it Instead page. A customer clicks on the link, views the Digital Self-Service webpage, and enters their shipping address. Once conversion is successful, the customer receives a confirmation email/text. The order line is updated from BOPIS to ship to address and allocated, released and is shipped to the customer. Process Flow - Ship it instead for store shorts Eligibility for Conversion This section describes the criteria for shorted order lines to be eligible for conversion. The current delivery method of the order line shorted is "PickupAtStore" and "ShiptoStore" The entire quantity of the order line is shorted “Change Delivery Method on Short” should be enabled in the Order Configuration (this should be configured from backend and is not available in the UI) for this order type. The item/order line supports the "Ship to Address" delivery method (OrderLine.Can Ship To Address = true) 'Reallocate On Short' is set to false and 'Cancellation Initiated By' is NOT set to 'Customer' on the corresponding reason Id If an order line meets all the above criteria, a record is created in the CustomerResponseTracker entity with requestStatus as "Open" for the order line. Such order lines are restricted from being canceled and remain in Backordered status (1500). If any of the conditions above are not met, then when a BOPIS item is shorted, it is canceled as per the normal process. If ReallocateOnShort = true for the short reason code used by the store, the order line attempts reallocation and is not eligible for Ship it Instead. Retailers can configure specific reason codes for BOPIS - Short or BOPIS - Damage by setting ReallocateOnShort= false for the reason codes. Additionally, a separate reason code should be defined for ship to address with ReallocateOnShort= true for the lines to be reallocated when the order line is shorted by the store. Note: At any given time, the conversion is accumulative of all the items / order lines shorted from fulfillment and not yet converted but eligible to be converted for a given store - conversion is not for an individual short event, but for all the short events received from the same store. Notifying Customers of the Ship it Instead Option When an order line passes all the validations and is eligible for conversion, a record is created in CustomerResponseTracker with RequestStatus = "Open" for the order line. This triggers the modification type OrderLine::CustomerResponseTracker::TrackCustomerResponse which is used to send an email/text to the customer, asking if they want their BOPIS/ShipToStore order to be shipped. This email/text contains the link to the Digital Self-Service Ship it Instead page, where the customer can enter their shipping address and confirm the change of delivery method. Refer to the Transactional Email and Transactional Text guides for more details on emails and texts. If the customer converts their "Pick up At Store"/ "Ship to Store" items to be shipped, the RequestStatus is updated to "Closed". If the customer does not convert their BOPIS order lines to shipment within three days of receiving the email/text, a cancellation scheduler can be used to cancel the lines. This date is stamped as the CustomerResponseTracker.EndDateForUpdate and is calculated as the short date plus three days. Note: If an order has two line items with different release IDs and is picked by the same store, and both lines are shorted, then the customer will receive multiple 'Ship It Instead' emails. When the customer clicks the latest email, they will see all eligible line items based on the Order ID, Organization, Location, and IsShort=True. Capturing the Shipping Address in Digital Self-Service The Digital Self-Service flow is largely the same as Ship it Instead due to no-show. See here for details. Order Updates When a BOPIS order line is successfully converted to ship to address, the below updates are made: Delivery method is updated to "ShipToAddress" (orderLine.DeliveryMethodId = ShipToAddress) The prior delivery method is set to "PickUpAtStore" for PickupAtStore orders and "ShipToStore" for ship to store orders (orderLine.orderLineAdditional.priorDeliveryMethodId) Shipping address is populated (orderLine.addressId) The modification type OrderLine::UpdateBOPISToShipToAddress is triggered The order line is allocated, released, and fulfilled like any other ship to address order line. Conversion Confirmation Email/Text After conversion is confirmed, the customer is notified via email or text. See Transactional Emails and Transactional Texts for more details on the template. S&H Charge Calculation Retailers can enable shipping charge calculation and charge the end customers for customer initiated ship it instead conversions if "Calculate shipping charges when: Customer initiates for a no-show" is enabled on the Order Configuration UI. Once the customer selects the item and the address that is already saved in the system or chooses to enter a new address, the end customer will be redirected to the order summary page where he can review the additional charges he should pay for the conversion. If the customer agrees to pay the additional charges for shipping and adds a payment, and then confirms the conversion, the order will be converted to ship to address, and the conversion request is sent to the store configured as "Manhattan Active® Location" in the location. If the customer does not agree with paying the shipping charges and exits the self-service window, the order will not be converted and continues to be a BOPIS order. If a customer closes the self-service window after adding payment and without confirming the conversion or if the fraud check is enabled and the retailer chooses not to continue with conversion due to fraud validation results in failure or in-review, the order will not be converted and payment will be reverted to the customer after the 'X' amount of time (by default payment will be reverted after an hour). For example, if a customer adds a payment through the DSS UI but closes the window without confirming the conversion, the order is not converted to the ship to address, but the payment for shipping charges has already been collected. In this scenario, after a designated amount of time, payment will be automatically reverted to the customer. Additionally, if a retailer wishes to revert the payment before the designated time, a manual payment request can be made with the below payload. API: /payment/api/payment/paymentRequest/save { "PaymentRequestId": "CC100001", "OrderId": "CC10000", "ExecutionMode": "CalculateAndExecute", "CartOrder": { "CartOrderTotal": 0 } } Note: The 'X' duration for payment reversion can be configured in the KV store. Default is 1 hour (path: kv/config/com-manh-cp-payment/payment.postPaymentRequestDelayedMessageSeconds/edit) In the event that a customer initially used a non-prepaid card (Payment Method 1) to pay for a BOPIS order and later utilized a different non-prepaid card (Payment Method 2) to pay additional shipping charges, a payment reversal can be processed against either Payment Method 1 or Payment Method 2 in the scenario of a payment reversion. Info: The user exit Order:Order:UserExit:GetPermittedModTypes can be implemented to limit BOPIS to shipment conversions based on dollar amount (for example, order lines worth > $5 can be shipped) or based on any other custom criteria. With the user exit, the ship it instead modtype ("OrderLine::UpdateBOPISToShipToAddress") can be removed from the permitted modtype list to prevent end customers from receiving the ship it instead self-service link during the final pickup reminder. For further details about the user exit, refer to documentation in ProActive. Automatic Tax Write Off When Shipping & Handling Charge Calculation is Disabled When the shipping address is updated, taxes are recalculated and included in the order total. As a result, the payment status changes to "Awaiting Payment Info" (1000) due to the increased order total. If a retailer chooses to write off the additional taxes instead of reaching out to the customer to collect a payment, automatic tax write-off can be enabled. This allows the additional taxes to be written off, enabling the customer to complete the order without making an additional payment. Click here to enable automatic tax write-off. Write off API details Mode Preview = true Preview = false Manual Run the Write Off API in preview mode. This does not perform any updates to the order, but gives a preview of what adjustments will be made on the order when the API is run The manual mode will require a body in the PUT API for the user to specify how much to write off and the order actions PUT:- /api/order/internal/order/orderId/{orderId}/writeOff?mode=manual PUT:- /api/order/internal/order/orderId/{orderId}/writeOff?mode=manual&preview=true Persist the changes in the order Adds the specified write off charge with the specified reason Perform the specified order actions and all the updates that comes with adding a charge in an order PUT:- /api/order/internal/order/orderId/{orderId}/writeOff?mode=manual&preview=false Automatic Run the Write Off API in preview mode. This does not perform any updates to the order, but gives a preview of what adjustments will be made when the API is run PUT:- /api/order/internal/order/orderId/{orderId}/writeOff PUT:- /api/order/internal/order/orderId/{orderId}/writeOff?preview=true PUT:- /api/order/internal/order/orderId/{orderId}/writeOff?mode=automatic PUT:- /api/order/internal/order/orderId/{orderId}/writeOff?mode=automatic&preview=true After verifying that the adjustments work, run the Write Off API to add the charge of type "WriteOff" to the order so that order and payment are in sync Persist the changes in the order Adds the appropriate write off charge the order component will then do all the updates that comes with adding a charge in an order PUT:- /api/order/internal/order/orderId/{orderId}/writeOff?preview=false PUT:- /api/order/internal/order/orderId/{orderId}/writeOff?mode=automatic&preview=false When Shipping & Handling Charge Calculation is Enabled If shipping charge calculation is enabled for the Customer-Initiated Ship It Instead due to no-Show flow, recalculated taxes (including taxes on item price and SnH) will be included in the order total. In this case, the additional payment will be collected from the customer. The automatic tax write-off configuration will not apply when shipping & handling charge calculation is enabled. Configuration The following configurations need to be enabled to implement this feature: Product Configuration Link Digital Self-Service Configure the default shipping method in the Digital Self Service Configuration UI Google Autocomplete account details (optional) Digital Self Service Enable AVS (optional) Optional Digital Self Service Configurations are Available here Order Enable 'Change Delivery Method on Short' in the Order Configuration Map OrderLine.CanShipToAddress on imported orders Enable the 'Store out of Stock: Ship It Instead' email/text with the link to Ship it Instead (optional) Enable the 'Ship It Instead Confirmation' email/text (optional) Update existing backorder cancellation schedulers to prevent cancelling order lines awaiting customer inputs Add a cancellation scheduler to cancel lines customers did not convert after 3 days Configure 'Reallocate On Short' and 'Cancellation Initiated By' appropriately for each eligible short reason Available here Ship It Instead S&H Calculation The following configurations are required to calculate shipping and handling charges and tax on shipping and handling changes and capture the payment for the balance due applicable for conversion: Product Configuration Link Digital Self-Service Enable Pay by Link for Self Service Features Configure self-service payment gateway Id Enable - Permit SelfService Sales - for the Payment Type in Payment Capture Config Available here Order Enable "Calculate shipping charges when:: Customer initiates for a short" in the Order Configuration UI. Available here Note: The DSS configurations mentioned above are not restricted only to ship it instead flow and will impact all other DSS features. Order Configuration Enabling Ship it Instead for Shorts Set ChangeDeliveryMethodOnShort = true in the Order Config via API: /order/api/order/orderConfig/save Sample Request - Order Config{ "OrderConfigId": "{OrderConfigId}", "ChangeDeliveryMethodOnShort": true } Note: To enable ship it instead conversion for both pick-up at store and ship to store orders, select the 'Enable Ship it instead' configuration in the Order Configuration UI. If customers have already enabled this configuration for only pick-up at store conversion, then the 'Enable Ship it instead' configuration should be disabled and re-enabled to activate for ship to store conversions as well. This will enable Mod Type override configurations for the "ShipToStore" and "PickupAtStore" delivery methods. Ship it Instead Emails To enable Item Unavailable Email which includes the link to Ship it Instead, perform the following steps: Navigate to Order Configuration UI > Modification Rules > Order Line. For the Track Customer Response modification type, select the Publish Email option as "Store out of Stock: Ship It Instead". Sync the UpdateBOPISToShipToAddress mod type, if required. To enable Conversion Confirmation Email, perform the following steps: Navigate to Order Configuration UI > Modification Rules > Order Line. For the Ship BOPIS Instead modification type, select the Publish Email option as "Ship It Instead Confirmation". Sync the UpdateBOPISToShipToAddress mod type, if required. Ship it Instead Text Messages To enable Item Unavailable Text which includes the link to Ship it Instead, perform the following steps: Navigate to Order Configuration UI > Modification Rules > Order Line. For the Track Customer Response modification type, select the Publish Text option as "Store out of Stock: Ship It Instead" To enable Conversion Confirmation Text, perform the following steps: Navigate to Order Configuration UI > Modification Rules > Order Line. For the Ship BOPIS Instead modification type, select the Publish Text option as "Ship It Instead Confirmation" Cancellation Schedulers If a backorder cancellation agent is in use, the agent criteria should include cancellation of order lines which are in backordered status and are awaiting customer inputs for Ship it Instead. Sample query{ "Query":"CustomerResponseTracker.RequestStatus = 'Open' and CustomerResponseTracker.CustomerRequestType.CustomerRequestTypeId = 'StoreShortConversion'" } Note : This works only on order line entity. This cannot be queried on Order entity because of entity framework limitation. Order lines are canceled automatically when the short is initiated by the customer. However, for lines where the cancelation is NOT initiated by the customer, a cancel agent can optionally be configured for canceling aged order lines that are eligible for conversion but have not received any update from the customer. Sample query { "Query":"CustomerResponseTracker.RequestStatus = 'Open' and CustomerResponseTracker.CustomerRequestType.CustomerRequestTypeId = 'StoreShortConversion' and CustomerResponseTracker.EndDateForUpdate<CurrentDate" } Note : This works only on order line entity. This cannot be queried on Order entity because of entity framework limitation. Digital Self-Service Configuration For DSS configuration refer here. In addition to the mentioned default ship via and Google Autocomplete details, for store short scenario, the organization will need to have availability view within DSS configuration configured. Digital Self Service Availability View When the customer clicks the 'Ship it instead' link, they will be directed to enter their shipping address if the item(s) has inventory available for shipment. By default, the UI checks for inventory based on the DSS Availability View configured and the required configuration to process the order. Feature Scope The following features are not supported: Partial quantity conversion; only full order lines can be converted. BOPIS to shipment conversions via Contact Center Updating customer records with newly input addresses Enforcing shipping restrictions. This feature cannot be used with cross-org fulfillment (e.g. if the order's organization is A and the fulfillment's organization is B - details here: Cross-Organization Fulfillment Guide). Customer cancellation initiated by the store associate is not supported, refer implementation flavour to execute the customization. Implementation Flavors Customization for customer cancelation initiated by store associate There are situations where a store associate may need to cancel an order on behalf of a customer. In these cases, the retailer can implement the following steps to ensure that the system does not send a "Ship It Instead" email to the customer after the cancellation. Steps for Customization: Handling Order Status Changes: When an order status changes, such as moving from a "back-ordered" status to "cancelled," the system normally adjusts the quantity from 1 to 0. This increase in quantity (QuantityDetail::QuantityStatus::Increase), for status 1500 (back-ordered), ensures that the item is properly reflected in the system. By adjusting these quantities, the system recognizes the cancellation and prevents sending unnecessary notifications to the customer. Modifying Email Triggers: The email template associated with store-initiated cancellations (Template ID: StoreShortInitiation) needs to be adjusted. The condition currently checks if any item in the order is unavailable for pickup and determines if a "Ship It Instead" email should be sent. The customization should be configured so that when an item’s quantity drops to 0 (indicating cancellation), because when eachLine.Quantity > 0, the system does not trigger the email. This ensures that customers are not notified incorrectly when a store associate cancels an order on their behalf. Customer triggered Ship It Instead events in Digital Self-Service are not moving fulfillment from Pickup to Pack Refer and validate the configurations here. Convert Picked Lines to ShipToAddress when another line on the order is shorted and converted by the customer Add a custom service for modtype OrderLine::DeliveryMethod and update address for other picked lines. Exclude ShipItInstead link from PickupReminders for Hazmat Items For Hazmat items, OrderLine.canShipToAddress attribute should be set to False to prevent the inclusion of the "ShipItInstead" link in pickup reminders. If any order line in a fulfillment (release) has canShipToAddress = False, the system will automatically exclude the "ShipItInstead" link from pickup reminders, both in email and text notifications. This logic applies to the entire fulfillment; if any order line in the release has canShipToAddress = False, the "ShipItInstead" option will not be available for any items in that release, even for non-Hazmat items. In other words, the presence of a Hazmat item in a release prevents the "ShipItInstead" link from appearing in pickup reminders for all items in that fulfillment. Troubleshooting Unable to view the mod type "track customer response" in order configuration Sync order config using API : POST /order/api/order/orderConfig/sync Unable to view the "Change Delivery Method on Short" flag in Order config UI Flag is not available in the UI. Enable it using the order config save API: POST /order/api/order/orderConfig/save Order line is eligible for conversion but no record is being created in the CustomerResponseTracker entity Verify the reallocateOnShort flag value for the short reason code used. ReallocateOnShort should be set to false. Related Articles Store-initiated Ship it Instead Customer-Initiated Ship It Instead due to No-Show