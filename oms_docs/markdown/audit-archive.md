# Audit & Archive

**Permalink:** audit-archive
**Path:** Manhattan Active® Omni/Order Management/Process & Configuration Guides/Enterprise Inventory/Inventory/Audit & Archive
**Content Length:** 44,950 characters
**Scraped:** 2025-08-09T21:54:02.546312

---

Home ››Manhattan Active® Omni››Order Management››Process & Configuration Guides››Enterprise Inventory››Inventory ››Audit & Archive Audit & Archive Previous | Next How Supply Audit WorksHow Reservation Audit WorksArchive & PurgeConfigurationAudit ConfigurationImplementation FlavorsTroubleshootingNot able to retrieve the archived order from the order extended APIRelated Articles How Supply Audit Works Inventory Audit is a service designed to provide comprehensive visibility into the most critical entity attributes in Active® Omni. It allows user to see all the changes that take place within a supported entity. For instance, consider that the Inventory Audit is enabled for Supply Entity. Once enabled, any changes made to the existing supply record such as Quantity, ETA, received quantity for PO/ASN will be audited. A user can see the old and new value of these attributes in audit trails for every supply update. Audit can be enabled for Supply as well as Availability Status entity. Supply can be updated by multiple events by internal or external systems because of inventory activity or order fulfillment. External systems can be Host, WMS, POS or any store systems. For all such supply updates, audit will be saved, and inventory relay will be triggered. Below is the list of all such events. Feature Description Supply Event Supply Event supports a list of transaction types such as adjustment, movement, receipt, etc. All inventory actions/activity that takes place in the Host, WMS or any Store systems are mapped to one of these supported transaction types. For instance, consider that the "Cycle count" is mapped to Adjustment, and then "Returned in Store" is also mapped to Adjustment. In case, a retailer wants to audit the original activity such as "Cycle Count" that resulted in the change to the supply record, the "Inventory Transaction Type” and "Inventory Transaction Id" in Supply Event can be populated with such details. Inbound Sync When Inbound Sync or Supply Sync Event is used to update the supply then system populates "Inventory Transaction Type” as 'Inbound Sync' and "Inventory Transaction Id" as 'Transaction Number'. This is to differentiate the supply updates triggered because of sync from other Events. Order Events Supply can also be updated during order Fulfillment. For instance, whenever an order is shipped, system internally sends a supply update to inventory. Order updates such as "Ship","Short","Picked Up" are received from external system via order event which internally triggers supply reservation event to update supply. In order to capture detailed transaction information resulting in such inventory updates, "Inventory Transaction Type" & "Inventory Transaction Id" are populated by system. For "Ship" event, the corresponding values of 'Order Ship' & 'OrderId:ReleaseId' are saved. Similarly, system values are populated for orders which are fulfilled or returned from Point of Sale (POS). These updates are sent to order via order save event such as "POS Sale" and "POS Return" which internally triggers supply Event to update supply. Refer to the below section for the list of Inventory Transaction Type and Inventory Transaction Value (ID) for transactions initiated internally via Manhattan Store systems Supply Audit - Transaction details Functional Area Event Supply Update Inventory Transaction Type Inventory Transaction Value (mapped to Inventory Transaction ID in supply event) Order OrderEvent - Ship Decrease  OnHand Supply Order Ship OrderId:ReleaseId Order OrderEvent - Short Mark OnHand Supply as Error Order Short OrderId:ReleaseId Order OrderEvent - PickedUp (BOPIS Order) Decrease OnHand Supply Order Pickup OrderId:ReleaseId Store Inventory Management (SIM) Corporate Transfer Pullback/ Transfer Order - Ship Decrease OnHand Supply Order Ship OrderId:ReleaseId SIM Corporate Transfer During InTransit Create InTransit Ship Corporate Transfer OrderId:fulfillmentId:packageId SIM Receipt Received Increase OnHand Supply Receipt fulfillmentId:packageId SIM Receipt Receipt Verification Increase/Decrease OnHand Supply Receipt Verification fulfillmentId:packageId SIM Receipt Receipt Wrong Store Increase OnHand Supply Receipt Adjustment Wrong Store packageId SIM Receipt Receiving Missed Package Increase OnHand Supply Receipt Adjustment Missed Package fulfillmentId:packageId SIM Receipt Undo Receiving Decrease OnHand Supply Receipt Reversal fulfillmentId:packageId SIM Store Initiated Transfer Store Initiated Transfer Ships (Adjustments) Decrease OnHand Supply Ship fulfillmentId:packageId SIM  Store Initiated Transfer Store Initiated Transfer Ships Create InTransit Ship Store Transfer fulfillmentId:packageId SIM Receipt Received Increase OnHand Supply Receipt fulfillmentId:packageId SIM Cycle Count Cycle Count Completed (Item) Update OnHand Supply Cycle Count countRequestId SIM Manual Adjustments Adjust Inventory Update OnHand Supply Manual Adjustment adjustmentGroupId:adjustmentDetailId Point of Sale (POS) POS Sale Decrease OnHand Supply POS Sale OrderId Point of Sale (POS) POS ShipToAddress Order - Ship ( via OrderEvent -Ship) Decrease OnHand Supply Order Ship OrderId:ReleaseId Point of Sale (POS) POS ShipToAddress Order - Short ( via OrderEvent -Short) Mark OnHand Supply as Error Order Short OrderId:ReleaseId Point of Sale (POS) POS Return Increase OnHand Supply POS Return OrderId ( Return Order) Point of Sale (POS) Post Void Return Increase OnHand Supply POS Return OrderId For details on Store Inventory Management related transactions, refer to the respective guides mentioned here: Pullbacks & Transfers, Store-Initiated Transfers, Receiving, Adjust Store Inventory and Cycle Count . Configuration related to Store Inventory Transaction Types is available in Inventory Audit Configuration. Scenarios when Inventory Transaction Type and Inventory Transaction Id will not be used In case of supply update from UI such as Re-segmentation and Segment Transfer, these attributes will not have any value. For Ship To Store or Merge Shipment Scenarios, these attributes will not have any value for In Transit supply records. For ECom Order Return, Inventory is not updated by Order. The middle translation layer (MIF) for WMOS/WMIS sends order status update & inventory update separately. Hence, values of these attributes will remain blank. Note: System doesn't audit for Supply inserts, so any new supply creation is not audited. Also, relay attributes sent in Supply event are neither persisted in the Supply table or audited. How Reservation Audit Works Reservation audit keeps track of any changes in reservation request detail or reservation request match, such as, latest release dates, quantity, allocated quantity, release quantity, and so on. Below is the API to get Reservation Audit. This is a generic API. If audit details are needed for a specific time period, start and end dates can be provided in the request. Reservation Audit API{{url}}/inventory/api/audit/entity/reservationRequest?format=V2 { "Size": 50, "Page": 0, "RootEntityIds": [ { "RequestId": "207837162" } ] } Note: The Reservation Audit details will remain in the system for 45 days before they are purged. Archive & Purge Inventory purge feature used to remove records that are no longer useful within the OM system. For example, if there is a supply record with all quantity attributes equal to zero, and it hasn't been modified in any way in at least three months, supply records are purged to save disk space and improve performance. Criteria - Inventory not updated for last 90 days (No of days configurable) and having quantity is ZERO are picked up for purging. This Job runs once a day and deletes 50K records and it is configurable - [JobParameter "maxLimit" in JobSchedule] Configuration Audit Configuration Supply Audit - How to use it?Component property file entries need to be updated Add the root entity names to "audit.rootEntityName"="Supply, AvailabilityStatus" property. Add "audit.enabled" as "true". Please make sure audit has been enabled for your environments or the below request will not work. Service End Points Payload Field Descriptions Supported Values Supply: /api/audit/entity/supply?format=V2 AvailabilityStatus: /api/audit/entity/availabilitystatus?format=V2 *Note: A default value is used if the field is set to NULL or omitted from the request entirely. Also, no wild card search supported for the value. StartDate: Will return records with updates made on or after this date. Should follow format "2018-11-30T21:00:00" with the year, month, and day required. Default value is 96 hours prior to the current date-time. EndDate: Will return records with updates that occurred on or before this date. Should follow format "2018-14-30T21:00:00" with the year, month, and day required. Default value is the current date-time. UpdatedBy: Exclude: If "TRUE", will return only records with updates made by users that are not in "UserList", otherwise, will return records with updates made by users that are in "UserList". Default value is "FALSE" UpdatedByList: Will return records with updates made by users in this list. When not specified the updates from all users are retrieved. RootEntityIds: Values of the root entity business keys. Search by partial keys are allowed. Will return records with all updates made to the root entity and all child entities. ChangedBusinessKeys: Business keys of the changed entities and it could be root, child, or grandchild entities. This doesn't mean that the business keys itself have changed. Will only return records with updates made directly to the specific business keys listed here. ChangedParameters: Exclude: If "TRUE", will return only records with updates made to entity attributes that are not in ChangedParameters, otherwise, will return records with updates made to entity attributes that are in ChangedParameters. Default value is "FALSE" Parameters: A list of tuples specifying entity attributes and their pre and post update values. Will return records with updates made to the parameters and their respective values defined in this list. Default value is all entity attributes. ChangedParameter: Will return records with updates made to entity attributes with this name. OldValue: Will only return records that had this value before a given update AND the NewValue after the same update for the respective parameter. Default value is all possible values for the respective parameter. If you want to explicitly search for NULL, please pass "NULL" as the argument. NewValue: Will only return records that had this value after a given update AND the OldValue before the same update for the respective parameter. Default value is all possible values for the respective parameter. If you want to explicitly search for NULL, please pass "NULL" as the argument. SortParameters: A list of entity attributes and their associated sort priority SortParameter: Entity attribute name by which to sort. Default value is created date-time SortOrder: Ascending or descending sort order for coupled "SortParameter". Default value is "desc". Size: Will return this number of audit documents per request. Default value is 10. Page: Will return Which set of "Size" number of results to return. Default value is 0. RootEntityIds Supply: "itemId" "locationId" "hashId" AvailabilityStatus: "itemId" BuinessKeys Supply: "itemId" "locationId" "hashId" AvailabilityStatus: "itemId" Payload Sample request and response Supply Audit - Sample Request (Example 1)Example Request #1: View every supply that has had it's quantity changed within the last two days { "StartDate":"2019-01-29 01:37:21", "EndDate":"2019-01-30 22:37:21", "ChangedParameters":{ "Parameters":[ { "ChangedParameter":"Quantity" } ] } } Supply Audit - Sample Response (Example 1)Request: View every supply that has had it's quantity changed within the last two days Response: { "success": true, "header": null, "data": { "Messages": null, "Header": { "TotalCount": "1", "Page": 0, "Size": 1 }, "Data": [ { "Messages": null, "UpdatedBy": "dummyUser", "CreatedTimestamp": "2019-01-30T17:29:37.46", "RootEntity": "Supply", "RootEntityIds": { "HashId": "f97fb5ad88bf2561f07b932326a3e9e1", "LocationId": "Ann:LouisvilleDC", "ItemId": "car" }, "HeaderValues": { "SupplyTypeId": "On Hand Available", "LastTransactionType": "Adjustment" }, "OrgId": "dummyOrg", "TraceId": "142e256e19357aa1", "RootEntityId": "car:Ann:LouisvilleDC:f97fb5ad88bf2561f07b932326a3e9e1", "ContextId": "842861a6-113f-42c4-a6d1-f1013dd93ee1", "SpanId": "142e256e19357aa1", "Audit": [ { "EntityName": "Supply", "BusinessKey": [ { "Key": "ItemId", "Value": "car" }, { "Key": "LocationId", "Value": "Ann:LouisvilleDC" }, { "Key": "HashId", "Value": "f97fb5ad88bf2561f07b932326a3e9e1" } ], "ParentReferences": [], "ChangedParameters": [ { "ChangedParameter": "Quantity", "OldValue": "100.0", "NewValue": "112.0" } ], "Activity": "UPDATED", "Description": null, "SystemData": false }, { "EntityName": "Supply", "BusinessKey": [ { "Key": "ItemId", "Value": "car" }, { "Key": "LocationId", "Value": "Ann:LouisvilleDC" }, { "Key": "HashId", "Value": "f97fb5ad88bf2561f07b932326a3e9e1" } ], "ParentReferences": [], "ChangedParameters": [ { "ChangedParameter": "LastTxnDate", "OldValue": "2019-01-30T17:21:46.538", "NewValue": "2019-01-30T17:29:36.406" } ], "Activity": "UPDATED", "Description": null, "SystemData": false } ], "AuditPropertiesList": [] } ] }, "messageKey": null, "message": null, "errors": [], "exceptions": [], "messages": { "Message": [], "Size": 0 }, "rootCause": null, "requestUri": null, "statusCode": "OK" } Supply Audit - Sample Request (Example 2)Request #2: View every change for a specific item and location combination that has had to its quantity within the last two days { "StartDate":"2019-01-29 01:37:21", "EndDate":"2019-01-30 22:37:21", "RootEntityIds":[ { "ItemId":"Car" }, { "LocationId":"DC1" } ], "ChangedParameters":{ "Parameters":[ { "ChangedParameter":"Quantity" } ] } } Implementation Flavors NA Troubleshooting Not able to retrieve the archived order from the order extended API Check for order index and for entries in the order history table. If an order index is not available and no entries are found in the order history table, manually insert a record with all the required fields. Use the extended order API to get the order response. [GET]- url/order/api/order/extended/order/orderId/{orderId} Related Articles How Supply WorksHow Future Supply worksReapportionment OverviewSegmentationInfinite InventorySupply SyncRest APIs & User ExitsTroubleshootingHow to Configure Supply ProfilesPublishing Inventory