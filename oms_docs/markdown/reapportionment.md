# Reapportionment 

**Permalink:** reapportionment
**Path:** Manhattan Active® Omni/Order Management/Process & Configuration Guides/Enterprise Inventory/Inventory/Reapportionment 
**Content Length:** 30,057 characters
**Scraped:** 2025-08-09T21:53:58.603625

---

Home ››Manhattan Active® Omni››Order Management››Process & Configuration Guides››Enterprise Inventory››Inventory ››Reapportionment Reapportionment Previous | Next OverviewProcess FlowExamplesConfigurationReapportionment ConfigurationDC ranking ConfigurationImplementation FlavorsRelated Articles Overview When inventory is constrained, it is promised to customer orders which have the highest priority or are created first, while the lowest priority orders are left with no inventory. For many wholesale or replenishment orders, inventory should be more evenly distributed across stores or customers. Reapportionment is an allocation strategy which gives each order line a "fair share" of inventory. The diagram below illustrates how basic reapportionment works. Reapportionment can be used: For a set of orders defined by filter criteria in the Fulfillment Optimization UI When allocating against DCs When allocating against on hand inventory When inventory is segmented Reapportionment cannot be used: When allocating against an ATC view When allocating against future (PO or ASN) inventory When allocating against vendor or store locations When consolidation locations are configured With ANF optimization factors; only location proximity is considered In conjunction with the complete single source strategy Reapportionment must be run in a scheduled batch mode which runs sometime after order lines are created. Between the time an order line is created and when reapportionment runs, a retailer can decide to perform one of the following: Immediately reserve inventory when an order line is created, and then let reapportionment reshuffle inventory later. To accomplish this, configure the immediate allocation service in the pipeline. Do not reserve inventory when an order line is created. When reapportionment runs, attempt to allocate the order line. To accomplish this, configure the batch reapportionment service in the pipeline. Refer Reapportionment Configuration for details. Inventory is apportioned across orders using Hamilton's Method of Apportionment. Process Flow Step 1: On order line creation, create a reapportionment request entity for each line which is configured to use reapportionment. The reapportionment request is used to store a ranked list of DCs and segments that are eligible sources for the order line. Later, this entity will be used by reapportionment. Refer to the section below for more details. Reapportionment - Order Creation flow The ranked list of DCs is determined using the promising configuration source list, priority tiers, order line overrides, or the order line. Multiple DCs can be selected in the Fulfillment Optimization UI. If no priority tiers are configured, then the DCs are ranked based on geo-proximity from the order line ship to address. Priority tiers can optionally be used to manually rank the DCs and segments. If multiple DCs exist within a single priority tier, then geo-proximity is used to rank locations within the tier. If a ship From Location is specified on the order line, then only that location is saved in the reapportionment request. Refer DC ranking Configuration for details. The latest ship date and latest release date are calculated based on the same logic as non-reapportionment promising strategies. See details in the Scheduling Guide. Step 2: Later, the reapportionment scheduler runs to reapportion inventory evenly across order lines. To do this, inventory uses the reapportionment request entity to determine eligible sources for each line. Reapportionment retrieves supply records and temporarily zeroes out any reservations that exist for the selected order lines, so that the inventory can be reapportioned. Reapportionment distributes inventory evenly across order lines in multiple batches, beginning with the highest priority lines (order line effective rank). After apportioning inventory to all lines with the highest priority, inventory is apportioned to lines with the next highest priority until no inventory remains. After reapportionment is completed, inventory updates the reservation requests and order allocations. Order lines can be prioritized by defining a prioritization template. See details in the Prioritization Guide. Refer to the below section for Reapportionment flow with some examples. Reapportionment Flow The logic applied during reapportionment is based on Hamilton's Method of Apportionment. A sample of this logic is illustrated below. Note: If all order lines for a given item are fully allocated, then reapportionment is not run for the item. Reapportionment applies the following constraints: If the latest release date for a DC is in the past when reapportionment runs, then the DC is not eligible for the order line. If a segment is specified on the order line, then only inventory records with the same segment are eligible. Only supply records that are included in the configured demand type are eligible. Note: If the available quantity is zero(this means there are no open reservations against that item as well), then lines with this item will not go through reapportionment and remain in the same status. Examples Refer to the section below for some examples on Reapportionment Reapportionment - Examples The below example shows basic reapportionment of inventory at two DCs across three order lines having the same priority. The next example shows reapportionment of two different supply types at a single DC across three order lines having the same priority. The same result would occur if the two supply records had the same supply type with different inventory attributes. The next example shows reapportionment of inventory at one DC across four order lines having different priorities. First, the system reapportions inventory across all orders of the highest priority. Next, if available inventory remains, inventory is reapportioned across orders with the next highest priority, and so on. The next example shows reapportionment of inventory at two DCs across four order lines. Each order line has a different ranked list of DCs, based on their geographic distance from each DC. First, the system reapportions DC1 inventory across all lines which have DC1 ranked first. Next, inventory is reapportioned across order lines with DC2 ranked first. Finally, inventory is reapportioned to lines which have DC1 ranked second and finally to those with DC2 ranked second. Finally, the below example shows how reapportionment works when rounding is required. After rounding down, if available units remain, then the system gives the units to the order lines that have the highest decimal value. Configuration Reapportionment Configuration Refer to the section below to understand how to configure Reapportionment How to configure Reapportionment Attribute Details Fulfillment Optimization (Enable Reapportionment) To enable the reapportionment allocation strategy, select the Reapportion Inventory check box while creating or editing a strategy in the Fulfillment Optimization UI. Once reapportionment is enabled: Only Distribution Center (DC) sources can be selected; ATC sources are disabled, and vendor and store locations cannot be defined as sources. Priority Tiers can be configured as normal allocation, but force allocation cannot be used. The Optimize tab is displayed as read only, with Location Proximity selected. Reapportionment automatically sorts locations using geo-proximity, but other optimization factors cannot be used. A new Schedule tab is displayed and enables users to configure a schedule for the reapportionment batch job. Configuring DC Source Ranking When multiple DCs are configured, the system ranks the DCs for each order line based on geo-proximity from the order line shipping address. Optionally, DCs can also be ranked using priority tiers or line-level overrides. When multiple DCs are configured within a priority tier, then the DCs within the tier are ranked using geo-proximity. When line-level overrides are configured, only those DCs which are configured in the line-level override are eligible. If line-level overrides and priority tiers are configured, then the DCs which are in both the line-level override and the priority tier are eligible. Fulfillment Optimization (Scheduling Reapportionment) Reapportionment runs in a batch mode that needs to be scheduled. Use the Fulfillment Optimization UI to configure the reapportionment schedule. Select multiple days of the week, enter a time, and select Add to add entries to the table. Select Save on the bottom right to save the schedule, otherwise changes are lost. Multiple schedulers can be configured for different times of the same day, such as Monday at 8:00 AM and 8:00 PM. Schedulers should not overlap; Only one scheduler should be running at a time for each configuration. When using reapportionment, the batch release service should be used in the state transition pipeline, and a release scheduler should be configured. Otherwise, if immediate release is used, then allocations will get released immediately and may not wait for the reapportionment process to run. When reapportionment is used for batch allocation orders, there is no explicit need to configure batch allocation scheduler. When reapportionment scheduled job runs, system will reapportion available inventory and allocate all eligible orders. DC ranking Configuration Refer to the section below to understand how to configure DC ranking Reapportionment - Configure DC RankingExample 1: Multiple DCs selected, no priority tiers If the following configuration exists: Source List Priority Tiers Line-Level Overrides Atlanta DC Sacramento DC Columbus DC Orlando DC None None Then when three order lines are created, the DC ranking is saved in the reapportionment requests for each line as follows: Order line 1 shipping to Atlanta: Atlanta DC, Orlando DC, Columbus DC, Sacramento DC Order line 2 shipping to Sacramento: Sacramento DC, Columbus DC, Atlanta DC, Orlando DC Order line 3 shipping to Orlando: Orlando DC, Atlanta DC, Columbus DC, Sacramento DC Example 2: Multiple DCs selected with priority tiers configured If the following configuration exists: Source List Priority Tiers Line-Level Overrides Atlanta DC Sacramento DC Columbus DC Orlando DC Tier 1: Atlanta DC, Columbus DC Tier 2: Orlando DC None Then when three order lines are created, the DC ranking is saved in the reapportionment requests for each line as follows: Order line 1 shipping to Atlanta: Atlanta DC, Columbus DC, Orlando DC Order line 2 shipping to Columbus: Columbus DC, Atlanta DC, Orlando DC Order line 3 shipping to Orlando: Atlanta DC, Columbus DC, Orlando DC Example 3: Multiple DCs selected with line-level overrides configured If the following configuration exists: Source List Priority Tiers Line-Level Overrides Atlanta DC Sacramento DC Columbus DC Orlando DC Tier 1: Atlanta DC, Columbus DC Tier 2: Orlando DC Orlando DC Then when three order lines are created, the DC ranking is saved in the reapportionment requests for each line as follows: Order line 1 shipping to Atlanta: Orlando DC Order line 2 shipping to Orlando: Orlando DC Example 4: Multiple DCs selected with priority tiers and segments configured If the following configuration exists: Source List Priority Tiers Line-Level Overrides Atlanta DC Sacramento DC Columbus DC Orlando DC Tier 1: Atlanta DC - Segment A, Columbus DC - Segment A Tier 2: Orlando DC - Segment B, Atlanta DC - Segment B None Then when three order lines are created, the DC ranking is saved in the reapportionment requests for each line as follows: Order line 1 shipping to Atlanta: Atlanta DC - Segment A, Columbus DC - Segment A, Atlanta DC - Segment B, Orlando DC - Segment B Order line 2 shipping to Orlando: Atlanta DC - Segment A, Columbus DC - Segment A, Orlando DC - Segment B, Atlanta DC - Segment B Implementation Flavors NA Related Articles SegmentationAudit & ArchivePublishing InventoryHow Supply WorksSupply SyncRest APIs & User ExitsHow Future Supply worksInfinite InventoryHow to Configure Supply ProfilesTroubleshootingOverview