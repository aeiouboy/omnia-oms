# Text Messaging

**Permalink:** text_messaging
**Path:** Manhattan Active® Omni/Customer Engagement/Process & Configuration Guides/Interactions/Text Messaging
**Content Length:** 36,480 characters
**Scraped:** 2025-08-09T22:00:58.905574

---

Home ››Manhattan Active® Omni››Customer Engagement››Process & Configuration Guides››Interactions ››Text Messaging Text Messaging Process FlowTracking Conversations with CasesUI ElementsKeyboard ShortcutsScreen Resolution requirements:ConfigurationGrants for UsersAdd users to CSR Availability Firebase Configuration for Push NotificationsHours of OperationServicesTroubleshooting For consumers, text messaging has become an ideal method of communication to contact customer service due to its convenience and use in daily communication. Contact centers need a way to receive messages from customers, quickly access information related to the message (customer, transactions, interactions, metrics), respond to the customer, and log information from the conversation as a case. Additionally, CSRs need the ability to manage work by clearing complete or old conversations out of their active work queue. With Two Way Text Messaging in Customer Engagement, CSRs can have real-time text message conversations with customers. Note: the term Text Messaging refers to the following communication methods in the Agent Inbox: SMS, WhatsApp. Process Flow Inbound text message flow: Outbound text message Flow Tracking Conversations with Cases Text conversations between customers and CSRs are held together as part of a case. Each individual text message sent back and forth is created as an interaction with the case ID linked. For organizations using the Agent Inbox: When a CSR clicks "End Conversation" and fills out the details in the Interaction Wrap-up window, these details are saved to the case. If the agent sets the status to anything besides "Closed", the case will remain open, but the interaction's statis attribute will be set to Done. Note: If the system does not automatically attach a customer to the case, there is not a way to manually look up a customer and attach the customer to the case. UI Elements Element Behavior Conversation Badge This numeric indicator tells the CSR how many messages they have received from a customer since they last responded to them (the number). Reply panel Here I can view all the previous interactions I’ve had with the customer for the selected conversation above and can also send a new reply to the customer. Interaction Wrap Up When a CSR is finished with a conversation, they will log the interaction using the wrap up panel and click “Done”. After clicking done, the conversation moves from the “Active” to the “Done” tab in the top left section of the screen (Conversation list). The interactions will remain in the Done tab for a short period of time, in the event the agent wants to review the conversation. Keyboard Shortcuts To quickly send text messages without clicking the mouse, users can press "Shift + Enter" on Windows or "Shift + Return" on Mac to send an outbound text message. Pressing shift or return inserts a line break when drafting a text message. Screen Resolution requirements: For the best experience using the messaging feature of Customer Engagement, a screen width of 1920 pixels (i.e. 1920 x 1080) is recommended. This allows the messaging panel to be displayed side by side with customer service screens. The minimum required screen resolution is 1366 x 768. Below this resolution, users may see horizontal scroll bars on some screens. Configuration To get started with two-way text messaging, the following things need to be configured. Grants for Users Add grants/resources for all users that need two-way text messaging capability. The user must have the grants below for two-way text messaging: customerengagementfacade::conversations::admin Other CE Admin Grants: customerservice::* customerengagementfacade::* api::customerengagementfacade::* organization::* api::customerinteraction::transaction::admin api::cases::transaction::admin api::cases::config::* Add users to CSR Availability A user must be added to the CSR Availability entity in order for text conversations to be routed to them. POST /cases/api/cases/csrAvailability/save Authorization Headers Organization for User Request Body {"UserId": "admin@ecomorg.com"} Confirm the user has been added by performing GET call of API and validating "UserId" is in the response: /cases/api/cases/csrAvailability Firebase Configuration for Push Notifications Firebase configurations require properties to be added to the consul server for the following components: Customer Engagement Facade Customer Interaction Contact your services team to configure Firebase and push notifications for your environment. Note: Please configure the firebase properties and restart customerengagementfacade and customerinteraction components after KV config has been updated. On navigating to the message UI, the browser will ask for notification permission. Please click 'Allow' to receive push notifications. If the user does not see the "Allow" notifications option in the Message UI, open the browser settings and allow notifications from the URL in order to receive the text messages. Inbound & Outbound Message Type Configuration Ensure the Inbound and Outbound Message type exists: PushNotificationForTextMessageMSGType Inbound Message Type GET end point: /customerInteraction/api/customerInteraction/inBoundMessageType/messageType/InboundTextReceiveEventMSGType Outbound Message Type GET end point: /customerInteraction/api/customerInteraction/outBoundMessageType/MessageType/SendTextEventMSGType If the above message types are missing from configuration, invoke the below end point with the given request to create them. Inbound - /customerInteraction/api/customerInteraction/inBoundTextReceiveEventMSGType Request: { "ServiceId": "PushNotificationForTextMessage", "PreFetchCount": 50, "NoOfConsumer": 10, "RetryCount": 3, "MessageType": "PushNotificationForTextMessageMSGType", "MinNoOfConsumer": 1, "ScaleUpTimeWindow": 10, "MaxDesiredInstances": 6, "Idempotent": true, "LowVolume": false, "RetryDelay": "20,300,600", "ScaleDownTimeWindow": 20 } Outbound    /customerInteraction/api/customerInteraction/outBoundMessageType/MessageType/SendTextEventMSGType Request: { "MessageType": "firebasePickupOrderMsg", "Transactional": true } Ensure the ExtensionPoint is configured: { "ComponentId": "CustomerInteraction", "ExtensionPointId": "PushNotificationForTextMessage", "ExtPointToMessageType": { "ExtensionPointId": "PushNotificationForTextMessage", "MessageType": "SendTextEventMSGType" } } Twilio Configuration Twilio configuration enables text messages to be sent and received. This configuration requires properties to be added in consul for the following components: Text For more information about Twilio, see the guide here. Contact your services team to configure Twilio for your environment. Note: Once the Twilio account is created by the customer, it needs to be configured within the KV consul. Get the Account SID and Auth Token credentials from the Twilio account dashboard. Take the authorization token value and encrypt this value with the API: GET /core/encrypt?s=89a****************************f Note: Once the configuration of the consul properties is complete, restart the component-text. The above configuration confirms the outbound flow for text messages, Twilio must also have the proper Manhattan Active® Omni URL for inbound flow. Users must log in to the Twilio account and, for the specific phone number, configure the web-hook under "Messaging": URL Format: {{url}}/text/api/text/textmessage/onRecieve/orgId/{{orgid}}/channelId/{{channelId}} URL Example: https://omni-om-36.om.manh.cloud/text/api/text/textMessage/onReceive/orgId/ecomorg/channelId/Call Center Text Message Template Configuration When the CSR replies to the text message, the base seed data will send the “General” text message template already configured within the environment. Text message templates can be updated through the Text Message Template Configuration UI screens and also by using the below API. POST: /masterdatafacade/api/text/textMsgTemplate/save { "TemplateMsgId": "General", "Name": "General Text message", "Description": "General text message template used for all outbound communication with the customer", "MessagePrefix": "From Manhattan:", "MessageBody": null, "MessageSuffix": "Msg rates may apply. Reply STOP to unsubscribe.", "MessagePrefixInterval": "24", "MessageSuffixInterval": "24", "TextMessageType": { "TextMessageTypeId": "General" } } Please note the prefix and suffix have 50 character limitations. Note: Attachments to text messages are not supported for inbound or outbound texts. Hours of Operation An organization can set ‘Hours of Operation’ dictating the windows of time customer service agents are available. If the time is outside of the configured windows, a message within the chat window will appear on the load stating “Our team is currently unavailable as we're outside of working hours. Please try again later". The configuration is day of the week specific and interaction type specific. Meaning that a different availability configuration can be set for text messages than chat. Seed data has already configured 24hrs, 7 days a week availability for both chat and text message interaction types. Use the following API to configure hours of operation: Hours of OperationPOST {{url}}/customerinteraction/api/customerinteraction/hoursOfOperation/import { "ProfileId": "base", "data": [ { "InteractionType": "Chat", "DayOfWeek": "MONDAY", "TimeZoneId": "America/New_York", "OperationPeriod": [ { "OperationPeriodId": "1", "StartTime": "00:00", "EndTime": "23:59", "IsBreak": false } ] }, { "InteractionType": "Chat", "DayOfWeek": "TUESDAY", "TimeZoneId": "America/New_York", "OperationPeriod": [ { "OperationPeriodId": "1", "StartTime": "00:00", "EndTime": "23:59", "IsBreak": false } ] }, { "InteractionType": "Chat", "DayOfWeek": "WEDNESDAY", "TimeZoneId": "America/New_York", "OperationPeriod": [ { "OperationPeriodId": "1", "StartTime": "00:00", "EndTime": "23:59", "IsBreak": false } ] }, { "InteractionType": "Chat", "DayOfWeek": "THURSDAY", "TimeZoneId": "America/New_York", "OperationPeriod": [ { "OperationPeriodId": "1", "StartTime": "00:00", "EndTime": "23:59", "IsBreak": false } ] }, { "InteractionType": "Chat", "DayOfWeek": "FRIDAY", "TimeZoneId": "America/New_York", "OperationPeriod": [ { "OperationPeriodId": "1", "StartTime": "00:00", "EndTime": "23:59", "IsBreak": false } ] }, { "InteractionType": "Chat", "DayOfWeek": "SATURDAY", "TimeZoneId": "America/New_York", "OperationPeriod": [ { "OperationPeriodId": "1", "StartTime": "00:00", "EndTime": "23:59", "IsBreak": false } ] }, { "InteractionType": "Chat", "DayOfWeek": "SUNDAY", "TimeZoneId": "America/New_York", "OperationPeriod": [ { "OperationPeriodId": "1", "StartTime": "00:00", "EndTime": "23:59", "IsBreak": false } ] }, { "InteractionType": "TextMessage", "DayOfWeek": "MONDAY", "TimeZoneId": "America/New_York", "OperationPeriod": [ { "OperationPeriodId": "1", "StartTime": "00:00", "EndTime": "23:59", "IsBreak": false } ] }, { "InteractionType": "TextMessage", "DayOfWeek": "TUESDAY", "TimeZoneId": "America/New_York", "OperationPeriod": [ { "OperationPeriodId": "1", "StartTime": "00:00", "EndTime": "23:59", "IsBreak": false } ] }, { "InteractionType": "TextMessage", "DayOfWeek": "WEDNESDAY", "TimeZoneId": "America/New_York", "OperationPeriod": [ { "OperationPeriodId": "1", "StartTime": "00:00", "EndTime": "23:59", "IsBreak": false } ] }, { "InteractionType": "TextMessage", "DayOfWeek": "THURSDAY", "TimeZoneId": "America/New_York", "OperationPeriod": [ { "OperationPeriodId": "1", "StartTime": "00:00", "EndTime": "23:59", "IsBreak": false } ] }, { "InteractionType": "TextMessage", "DayOfWeek": "FRIDAY", "TimeZoneId": "America/New_York", "OperationPeriod": [ { "OperationPeriodId": "1", "StartTime": "00:00", "EndTime": "23:59", "IsBreak": false } ] }, { "InteractionType": "TextMessage", "DayOfWeek": "SATURDAY", "TimeZoneId": "America/New_York", "OperationPeriod": [ { "OperationPeriodId": "1", "StartTime": "00:00", "EndTime": "23:59", "IsBreak": false } ] }, { "InteractionType": "TextMessage", "DayOfWeek": "SUNDAY", "TimeZoneId": "America/New_York", "OperationPeriod": [ { "OperationPeriodId": "1", "StartTime": "00:00", "EndTime": "23:59", "IsBreak": false } ] } ] } If CSR agents are not available outside hours of operation, a case and interaction will be created but will not be assigned to the agent and once the next working hours begin, the interactions will be assigned to the available agents. If a registered customer has an existing open case, a new case will not be created. Instead, a new interaction will be created and linked to the existing case. The case will remain in the queue until the start of the next working day, as it is outside working hours. However, for unregistered customers, even if there is an existing open case, a brand-new case and interaction will be created. Note : During outside hours of operation, interactions will not be assigned to any agents, even if they are available. Below are sample messages configured for SMS Hours of Operation Interaction Config Component Label Message Name KVStore Path Outside hours of operation Chatbot and live chat enabled customerinteraction agentUnavailableDueToOutOfOfficeHoursChatbotEnabled Our team is currently unavailable as we're outside of working hours. Please try again later. Key / Values->localization->com-manh-cp-customerinteraction->labels->en Outside hours of operation Only live chat enabled customerinteraction agentUnavailableDueToOutOfOfficeHours Our team is currently unavailable as we're outside of working hours. Please try again later Key / Values->localization->com-manh-cp-customerinteraction->labels->en Inside hours of operation Chatbot and live chat enabled Chatbot disabled customerinteraction agentUnavailableMessage All of our agents are currently busy. Please wait and we'll connect you when someone becomes available. Key / Values->localization->com-manh-cp-customerinteraction->labels->en After changing the message in KVStore, the respective component should be restarted. For SMS, the following labels are configured for messages when agents are outside office hours based on whether the chatbot is enabled or disabled. “agentUnavailableDueToOutOfOfficeHours” “agentUnavailableDueToOutOfOfficeHoursChatbotEnabled” Below is the example to set outside hours of operation To configure the hours of operation, use the MUP UI by navigating to Menu > Hours of Operation, or use the APIs provided below. GET : {{url}}/customerinteraction/api/customerinteraction/hoursOfOperation POST : {{url}}/customerinteraction/api/customerinteraction/hoursOfOperation/save Update "IsBreak": false to "IsBreak": true and post the below body. { "Messages": null, "ProfileId": "AnnTaylorUS-Test", "InteractionType": "TextMessage", "DayOfWeek": "THURSDAY", "UpdatedTimestamp": "2024-08-09T22:56:00.99", "CreatedBy": "manh-copy-profile-user@system", "CreatedTimestamp": "2024-08-09T22:56:00.99", "Process": "fwEntityExportService", "OperationPeriod": [ { "ProfileId": "AnnTaylorUS-Test", "UpdatedTimestamp": "2024-10-24T13:12:09.037", "CreatedBy": "manh-copy-profile-user@system", "CreatedTimestamp": "2024-08-09T22:56:00.992", "EndTime": "23:59", "StartTime": "00:00", "ParentHoursOfOperation": { "PK": 7232441609907919073 }, "Process": "/hoursOfOperation/save", "IsBreak": false, "UpdatedBy": "venu@anntaylorus-test", "ContextId": "3e4a3040-77f6-469c-b8ca-d72b35f39479", "OperationPeriodId": "1", "PK": "7232441609927923291", "Unique_Identifier": "7232441609927923291__1" } ], "UpdatedBy": "manh-copy-profile-user@system", "TimeZoneId": "America/New_York", "ContextId": "c6da999d-1fa6-4e1a-a328-7d4f2191790a", "Summary": null, "PK": "7232441609907919073", "Unique_Identifier": "7232441609907919073__TextMessage__THURSDAY" } Services The following table lists the APIs that are referenced in this document. Refer to API documentation for additional details on each service. Service Component Service Endpoint Case Case cases/api/cases/csrAvailability/save Troubleshooting Issue Troubleshooting Tip Messages are not reaching the customer. Check in customer interaction, if textMessage interactions (isIncoming=false) are created or not: /customerinteraction/api/customerinteraction/textMessage Services: check if below consul properties is set for text component: text.server.base.url = https://testapplication.com/ text.config = [{ "organization": "testOrg", "user":"abc@testorg.com", "text.auth.key":"123456789", "text.auth.sid":"ABCD123456789" }] Services: Verify the consul property values are matching the twilio/org/user details. Check if “SendTextEvent” queue has consumers or not. Messages are not showing in the UI. Check in text component that textMessage are present or not by using the API: /text/api/text/textMessage?size=20&sort=CreatedTimestamp Services: Check if “inboundTextReceiveEvent” queue has consumers or not Check in customer interaction, if textMessage interactions (isIncoming = true) are created or not: /customerinteraction/api/customerinteraction/textMessage Services: check if below Consul properties are set for text component: text.server.base.url = https://testapplication.com/ text.config = [{ "organization": "testOrg", "user":"abc@testorg.com", "text.auth.key":"123456789", "text.auth.sid":"ABCD123456789" }] Services: verify the consul property values are matching the Twilio/org/user details. Manhattan Active® Omni user is unable to add CSR to CSRAvailability list. Receiving a 403 Error in Postman. 1. Confirm in "Provisioning Profiles" that cas::caseRouting is pointing to the correct organization 2. Confirm user's role has CE Admin grants, specifically to case API permissions api::customerinteraction::transaction::admin api::cases::transaction::admin api::cases::config::* SMS texts failing when the country prefix is included in the FromPhone. Provide the country code without '+' in the FromPhone as '+' is not supported in base.