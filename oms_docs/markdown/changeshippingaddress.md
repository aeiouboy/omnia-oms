# Change Shipping Address

**Permalink:** changeshippingaddress
**Path:** Manhattan Active® Omni/Order Management/Process & Configuration Guides/Order Processing/Order Fulfillment/Late Order Modifications/Change Shipping Address
**Content Length:** 343,101 characters
**Scraped:** 2025-08-09T21:57:47.736322

---

Home ››Manhattan Active® Omni››Order Management››Process & Configuration Guides››Order Processing››Order Fulfillment››Late Order Modifications ››Change Shipping Address Change Shipping Address OverviewFunctional FlowEligibility for Update AddressOrder Updates & ProcessingChange Shipping Address in Contact CenterEligibility for Update Address in Contact CenterAddress Update Flow for Order Line(s) in Contact CenterChange Shipping Address in Digital Self-ServiceChange Shipping Address in Store FulfillmentProcessing of Change Shipping Address RequestsChange Shipping Address integration with MAWM, External Store and External WMConfigurationOrder ConfigurationOrder and XBoundAuth Service Definition for MAWM IntegrationImplementation FlavorsFraud Verification for Address ChangeRequestCustom ImplementationResponseIllustrative ExamplesHow to initiate change shipping address request from external systems?How to restrict the change shipping address request on a same day delivery order?Feature ScopeUIs EntitiesServicesTroubleshootingWhy is update address request consisting of released order lines not eligible for change shipping address?Why is released Ship to address(STA) order line with merge leg not eligible for address update?Why is STA order line with shipped merge leg not eligible for address update?I have an order line that is post the release status but the check box across it is disabled? How do I edit the address?Why is the address of the released order line not updated after requesting for address update?Why is an exception thrown when change address is requested?Related Articles Overview With Manhattan Active® Omni change shipping address, customers can modify the address on ship to home items which have already been released to Active Store or Active WM or External Store or WM. For example, a customer places a ship to home order and the store has already picked the items and staged them for packing. If the customer wishes to modify the address, the customer can update the address on these items using Digital Self-Service (DSS) in conjunction with Store Inventory & Fulfillment (SIF). Currently, the update address is the only late order modification use case supported for ship to home items. Ship to address item address can be modified until the item packing begins. Here's how it works: A customer places a 'Ship To Home' order. The customer receives a confirmation email with a link to "Update Address". The items are released to a store for processing. The store may have started picking or picked the items. The customer opens the confirmation email, clicks the link and selects the item for address modification in Digital Self-Service or via E-Commerce, which leverages Active® Omni APIs. If the store associate has started packing, then the request is rejected. If not, then the address modification is processed in the store. The customer is notified with an immediate response from the fulfillment application. The customer receives an email confirming their action to update the address was successful or not. A store associate packs and ships the items. A shipment confirmation email is sent to the customer. This guide gives an overview of the change shipping address flow in Manhattan Active® Omni's Order Management, Digital Self-Service, Store Inventory & Fulfillment and Active WM applications. Manhattan's Order Management application currently integrates with Manhattan Active Omni's Store Inventory & Fulfillment and Manhattan Active Warehouse & Management. In some instances, third party store or warehouse management applications can be used as fulfillment systems. Shipping address update integration is supported with these applications through extension point. Functional Flow The diagram below illustrates how update address works. Eligibility for Update Address This section describes the criteria that items must meet to be eligible for update address on a released line. All the order lines in a particular release must meet all the criteria. If even one criterion is not met by any order lines in the release, none of the items in the release can be updated. Validation Configuration Comments If at least one quantity of an order line is not packed yet Modification Rule >> Order Line >> Update Address >> Restrict From Status >> Packed Modification Rule >> Order Line >> Update Fulfillment Group I'd >> Restrict From Status >> Packed If the order line qty is in packed status, then the order line is not eligible for update request. Line 1: 2 qty, 1 qty is packed and 1 qty is released. Line 2: 2 qty, 2 qty is packed. Update address is restricted if the order line / quantity is already invoiced. NA If flexible invoicing is configured to invoice the order line when an item is picked, the invoice tax is calculated for the original address on the order line. Now, if the user chooses to update the order line address due to line eligibility, it is required to communicate the updated address on an already invoiced line to the tax system. This communication of updated address on an already invoiced line to the tax system is currently not supported. Hence, if an order line /quantity is already invoiced, then update address is restricted even though the line is eligible based on order modification rules. Even if the order line is eligible for update address based on order modification rule, change address is restricted if an order line is split across multiple releases (same location or different locations) NA If the order line quantity is split across same or multiple location resulting in multiple releases, change of address will be restricted. Line 1: 2 qty, 1 qty is released to Store Atlanta and 1 qty is released to Atlanta DC. Line 2: 2 qty, 1 qty is released to Store Atlanta at time T0 and 1 more qty is released to Store Atlanta at time T1. All the order lines of a release must be part of the update request, changing only few order lines in the release or partial quantities of a line is not permitted. NA Including order lines belonging to a single release is mandatory. Line 1: Release 1 - Release Line 1 - Released Line 2: Release 1 - Release Line 2 - Released Both the lines should be part of the update address request. All the order lines of a release must be eligible for update request. If any one of the line is not eligible, then change shipping address is not permitted. NA Update address change request is not permitted if already one of the line of a release is already crossed eligible status for update. Line 1: Release 1 - Release Line 1 - Packed Line 2: Release 1 - Release Line 2 - Released All the order lines of a release must have same updated address. If any one of the line is updated with a different address, then change shipping address is not permitted. NA Update address change request is not permitted if the lines have different updated addresses. Line 1: Updated from Address A to B Line 2: Updated from Address A to C The following attributes for ship to address must be populated on all the order lines of the release (update address request) and cannot be null address.Email address.Address1 address.Country address.State address.City address.PostalCode address.Phone NA Updated address must not have any errors when evaluated for shipping restriction. If at least one of the line have any shipping restriction, then update address is not permitted. NA Update address is restricted when an allocation of type merge is released but the order line is >=Released and less than Packed. NA Update of an address on a merge line is not permitted when the merge leg is released and the order line is in >=Released and < Packed status. OL1 - AL1 - Merge - Released. Change of address is restricted. Update address is restricted when a country is changed. NA OL1 - Placed for country France is restricted if the address is changed to country Italy. Update address is restricted if any of the prior change address request for a given order is still open. NA OL1 - Release 1 - Requested for change of address, due to some technical exception, if this request remains in open, then any further request on the same line or on any of the other lines is not permitted. These open requests will go through re-attempt process and will be marked as success or failure depending on the fulfillment response. In case if it is open and the user tries re-attempts then such request is restricted. Update address is restricted if non-Active Store or WM is not systematically handled to process late order modification Extension point is not defined for external fulfillment systems to process late order modifications. Refer here for extension point definition in case external fulfillment is designed to handle late order modification. OL1 - Release 1 - Active Store OL2 - Release 2 - Non-Active DC CSR or end customer cannot request for OL2 address update in spite of all the above eligibility validation passes. Order Updates & Processing If the tax and shipping & handling (S&H) charges are recalculated, and the payment status moves to "Awaiting Payment Information" (1000) because of the increase in the order total, the additional tax and charges have to be written off manually using the ‘write off’ button on the Order Summary UI or CSRs should capture new payment for the excess amount for the order to be paid. If the retailer wants to write-off the additional tax calculated due to the shipping address being updated after the order is released, the retailer can configure the system to automatically write off the additional taxes calculated. The configuration "Auto Write-Off Additional Taxes" is available on order configuration. Please refer to enabling auto write off additional taxes for more details on the configuration and Tax calculation for post release shipping address update and write-off for further details. Note: By default, the "Auto Write-Off Additional Taxes" configuration will be disabled. Only the additional tax that was calculated due to the post release address update will be written off. However, if any additional charges like shipping and handling charges were charged, they will not be written off. Change Shipping Address in Contact Center The change shipping address of a post-released line can be done from the edit order screen. Contact center supports shipping address change for ship to home address line(s) even after they are released from the fulfillment system. Once the user selects a line for an address change on the edit order UI, a pop-up will appear if the item is released along with other items. This is because all the order lines of a release must be part of the address update request, changing address only for few order lines in the release or partial quantities of a line are not permitted. Proceeding with the pop-up allows the system to automatically select all the lines that belong to the same release as the initial line selected. Post this, the user can edit the address of the address line(s) similar to the way address lines are edited before they are released. If the selected line for an address change is released by itself without other items, then the pop-up will not be shown. Eligibility for Update Address in Contact Center Refer to the Eligibility for Update Address section for details on the criteria that have to be met for updating addresses on Ship To Address lines. If any of these conditions are not satisfied, the line will not be enabled for an address change on the contact center UI. Address Update Flow for Order Line(s) in Contact Center Change Shipping Address in Digital Self-Service Customers can directly update shipping address without the assistance of customer service using Digital Self-Service. See here for details. Change Shipping Address in Store Fulfillment Processing of Change Shipping Address Requests When the shipping address modification request is made by the order management system, the below process is followed. The forward and backward scheduling dates (Earliest Ship Date, Earliest Delivery Date, Latest Ship Date, Committed Delivery Date) are re-calculated, communicated to Fulfillment Systems and are persisted on Order on successful response from fulfillment system to determine whether the fulfillments are "at-risk". Fulfillment Id doesn't exist Modification not allowed. It's a permanent failure and cannot be retried later with the same data requested. Fulfillment is not in picking Shipping address is updated on the fulfillment if other validation passes Fulfillment is in picking Shipping address is updated on the fulfillment if other validation passes Fulfillment is picked Shipping address is updated on the fulfillment if other validation passes Fulfillment is picked up or canceled or in packing (at least one package is packed) or packed or shipped. Not allowed to change the shipping address. It's a permanent failure and cannot be retried later. Change Shipping Address integration with MAWM, External Store and External WM Extension point: Order:Release:User Exit:CallPostReleaseUpdates to send address update request to other Non Manhattan Active® Omni Store locations. The above user exit is invoked for post release line address update processing when the order line allocation source is non Manhattan Active® Omni Store location. The input to the above user exit is release update request and location details. Refer here to configure extension point. Sample Release Update{ "Messages": null, "ServiceLevelCode": "UPS_GROUND", "Email": "sujatha.manhattan@gmail.com", "MaxFulfillmentStatusId": "3000", "IsOnHold": false, "IsConfirmed": true, "OrderSubtotal": 39.99, "ModeId": null, "SellingLocationId": null, "CurrencyCode": "USD", "CustomerPhone": "(994) 558-6015", "CustomerFirstName": "Megada", "ReleaseTotal": 43.29, "ExtendedFields": {}, "TotalCharges": 0, "ExternalShipFromLocationId": null, "TaxExemptId": null, "AddressId": "949b15aacbdcfa24d2c77e4725023", "DocTypeId": "CustomerOrder", "CreatedBy": "admin@ecomorg.com", "OrderTotalDiscounts": 0, "Priority": null, "IsCancelled": false, "IsPublished": null, "HasNotes": false, "ReleaseId": "CC100021", "CustomerId": "MS2710", "City": "El Paso", "OrderId": "OM_001", "AVSReasonId": null, "CustomerType": "Default", "IsTaxExempt": false, "AddressName": null, "State": "TX", "DestinationAction": "Delivery", "Note": [], "IsAddressVerified": true, "Country": "US", "PaymentMethod": [], "OrderTotalTaxes": 3.3, "HasAlerts": null, "LastName": "Sujatha", "ReleaseExtendedFields": {}, "IsReadyForTender": false, "ConfirmedDate": "2022-11-08T09:54:01.918", "OverageAllowed": false, "DeliveryMethodSubType": null, "PickupExpiryDate": null, "CreateReleaseTimeStamp": "2022-11-09T12:50:50.874", "TaxExemptReasonId": null, "ShipFromLocationId": "ecomorg:T0983", "NoOfStoreSaleLines": 0, "PostalCode": "79901", "OrganizationId": "ecomorg", "DigitalGoodsEmail": null, "InvoiceId": null, "County": null, "IsPostVoided": null, "AlternateOrderId": null, "CustomerEmail": "sujatha.manhattan@gmail.com", "Phone": "(994) 558-6015", "OrderTypeId": "Ecom Order", "PaymentStatusId": "1000.000", "CustomerCommPref": [ { "InteractionType": "TextMessage", "OptInStatus": "OptIn", "CountryCode": "91", "PreferenceType": "All" } ], "SellingChannelId": "CallCenter", "MinFulfillmentStatusId": "3000", "ReleaseType": null, "CreateOrderTimeStamp": "2022-11-09T12:50:50.732", "ExternalOrganizationId": null, "ShipToLocationId": null, "EffectiveRank": "05", "DeliveryMethod": "ShipToAddress", "NoOfDeliveryLines": 1, "FirstName": "Megada", "ReleaseLine": [ { "CancelledQuantity": 0, "ServiceLevelCode": null, "LineTypeId": null, "OrderLineTotalCharges": 0, "FulfilledQuantity": 0, "IsReturnable": true, "IsTaxIncluded": false, "IsHazmat": false, "RefundPrice": null, "TaxOverrideValue": null, "MaxFulfillmentStatusId": "3000", "IsOnHold": false, "ItemWebURL": "", "ItemId": "Tops-12238-Blue-L", "ShippingMethodId": "Standard", "SellingLocationId": null, "IsGift": false, "ParentOrderLineId": null, "TotalCharges": 0, "ParentOrderId": null, "ItemStyle": "12238", "TaxExemptId": null, "Priority": null, "SmallImageURI": "http://res.cloudinary.com/com-manh-cp/image/upload/12238_poolsidebluebeachwalk_a1.jpg", "DeliveryMethodId": "ShipToAddress", "IsDiscountable": true, "IsCancelled": false, "TaxOverrideTypeId": null, "ItemBrand": "U.S. Polo", "IsPreOrder": false, "OrderLineTotalDiscounts": 0, "ParentOrderLineTypeId": null, "IsTaxExempt": null, "PromisedDeliveryDate": null, "IsPerishable": false, "LatestDeliveryDate": null, "Note": [], "StreetDate": null, "GiftCardValue": null, "HazmatCode": null, "IsPreSale": false, "AlternateOrderLineId": null, "IsGiftWithPurchase": null, "DoNotShipBeforeDate": null, "IsExchangeable": true, "LastPossibleDeliveryDate": "2022-11-12T09:54:01.836", "OrderLineTotal": 43.29, "ItemSeason": null, "PickupDetail": [], "ItemColorDescription": "Blue", "ItemBarCode": null, "ItemDescription": "The Duval printed linen cap sleeve top is a summer essential. Wear this with your favorite printed", "IsReturn": false, "IsTaxOverridden": false, "ReleaseLineTotal": 43.29, "CanShipToAddress": true, "OrderLineVASInstructions": [], "IsPriceOverrIdden": false, "AllocationInfo": { "InventorySegmentId": null, "AllocationId": "127283103403089802924", "SubstitutionTypeId": null, "EarliestDeliveryDate": "2022-11-08T09:49:00", "CountryOfOrigin": null, "EarliestShipDate": "2022-11-08T09:49:00", "SubstitutionRatio": null, "InventoryTypeId": null, "SupplyTypeId": null, "ASNDetailId": null, "ExtendedFields": {}, "CommittedDeliveryDate": null, "InventoryAttribute1": null, "PODetailId": null, "InventoryAttribute2": null, "InventoryAttribute3": null, "InventoryAttribute4": null, "InventoryAttribute5": null, "POId": null, "CommittedShipDate": null, "BatchNumber": null, "LatestShipDate": "2022-11-10T09:54:00", "ASNId": null, "GroupId": null, "ProductStatusId": null, "LatestReleaseDate": "2022-11-10T09:54:00" }, "ProductClass": "Tops", "MinFulfillmentStatusId": "3000", "ItemSize": "L", "AsnId": null, "PaymentGroupId": null, "ShipToLocationId": null, "EffectiveRank": "05", "ExtendedLineFields": {}, "LineShortCount": 0, "Mode": null, "ReleaseLineExtendedFields": {}, "Quantity": 1, "ShipViaId": null, "IsItemNotOnFile": false, "IsGiftCard": false, "IsPackAndHold": false, "ProcessInfo": { "IsSerialNumberRequired": null, "PickLocAssignmentType": null, "CubeMultipleQty": null, "LPNBreakAttribute": null, "OrganizationId": null, "ItemBreakAttribute": null, "SingleUnit": null, "UnitWeight": null, "ExtendedFields": null, "ParentOrderLine": null, "UnitVolume": null, "ExportInfoCode": null, "WaveProcessType": null, "ItemPrice": null, "CriticalDimension3": null, "PickTicketControlNumber": null, "CriticalDimension2": null, "PickUpReferenceNumber": null, "CriticalDimension1": null, "PriceTicketType": null, "Price": null, "BatchRequirementType": null, "DeliveryReferenceNumber": null, "PK": null, "VASProcessType": null }, "CancelReasonId": null, "ReleaseLineId": "1", "ParentItemId": null, "IsReturnableAtStore": true, "FulfillmentGroupId": "8dcd8bac4f8c52f532e8929baaf96c12", "UOM": "EA", "OrderLineSubtotal": 39.99, "UnitPrice": 39.99, "OrderLineId": "1", "TotalTaxes": 3.3, "OrderLineTotalTaxes": 3.3, "RequestedDeliveryDate": "2022-11-11T09:35:13.843", "CarrierCode": null, "OriginalUnitPrice": 39.99, "TotalDiscounts": 0 } ], "Address2": null, "ShipViaId": "UPSGR", "Address3": null, "Address1": "2300 Windy Ridge Pkwy SE", "ProcessInfo": { "InternalGoodsDescription": null, "AccountReceivableCode": null, "IsAutoCreateBlocked": null, "ShipLocationControl": null, "ScheduleDeliveryDate": null, "GlobalLocationNumber": null, "AdvertisingCode": null, "MovementOption": null, "ShipmentPlanningScheduleDay": null, "IsCartonMinWeight": null, "IsBackOrdered": null, "ExtendedFields": null, "WaveId": null, "RoutingAttributes": null, "PlanningOriginFacilityId": null, "IsAutoConsolidationBlocked": null, "DesignatedShipVia": null, "DeclaredValueCurrencyCode": null, "BillOfLadingBreakAttribute": null, "Priority": null, "ShipmmentPlanningScheduleDay": null, "AccountReceivableAccountNumber": null, "LPNCubingIndicator": null, "ParentOrder": null, "RouteType1": null, "RouteType2": null, "SecondryMaxicodeAddressNumber": null, "InternationalGoodsDescription": null, "AdvertisingDate": null, "OrganizationId": null, "RouteTo": null, "FedexDutyTaxAccountID": null, "FTSRNumber": null, "Language": null, "DsgStaticRouteId": null, "CashOnDeliveryFund": null, "PalletCubingIndicator": null, "DestinationShipThroughLocation": null, "DeclaredValue": null, "CustomerBrokerAccountNumber": null, "RouteWaveNumber": null, "FedexDutyTaxPaymentType": null, "ImporterDefinition": null, "MoveType": null, "FreightForwardAccountNumber": null, "IsWarehouseTransfer": null, "IsShipmentDocumentsOnly": null, "CustomerDepartment": null, "TransportationWaveOptionId": null, "PlanningDestinationFacilityId": null, "PK": null, "PrimaryMaxicodeAddressNumber": null, "DesignatedEquipmentId": null }, "CancelReasonId": null, "PostVoIdReasonId": null, "OrderLocale": null, "OrderTotalCharges": 0, "TotalTaxes": 3.3, "CustomerLastName": "Sujatha", "CapturedDate": "2022-11-08T09:35:13.782", "CarrierCode": "UPS", "AddressType": "CustomerShipToAddress", "OrderTotal": 43.29, "TotalDiscounts": 0 } Sample Location Request for UE Implementation{ "LocationId":"StoreAtlanta", "DisplayId":"StoreAtlanta", "ParentOrgId":"ecomorg", "ShipToAddress":true, "ShipToStore":true, "LocationName":"Atlanta Store1", "LocationType":{ "LocationTypeId":"Store" }, "LocationStatus":{ "LocationStatusId":"Operational" }, "LocationSubType":{ "LocationSubTypeId":"HighVolumeStore" }, "Address":{ "FirstName":"STR-001", "LastName":"Store", "Address1":"2300, windy ridge", "City":"Atlanta", "State":"GA", "PostalCode":"30336", "Country":"US", "Phone":"2815551212", "Email":"yammy@rooster.net" } } User Exit:Order:Release:User Exit:CallPostReleaseUpdates response to Order Mapping Https Status Release Update Response Order Post Release Tracker Status Comments 200 "Type": "INFO",  "Code": "200",  "Description": "Success" Completed The order line is updated with a new address. 200 "Type": "ERROR",  "Code": "300",  "Description": "Failure" Failure Address updates are forever rejected for this line. 500 NA Failure Technical error. Sample Release Update UE Response{ "success": true, "header": null, "data": null, "messageKey": null, "message": null, "errors": [], "exceptions": [], "messages": { "Message": [ { "Type": "WARNING", "Code": "250", "Description": "TemporarilyRejected", "ShortDescription": null, "ErrorCode": null, "ErrorField": null, "ResourceId": null, "QuickInfo": false, "BusinessKeys": { "ReleaseId": "CC100151", "ReleaseLineId": "1" } }, { "Type": "WARNING", "Code": "300", "Description": "Failure", "ShortDescription": null, "ErrorCode": null, "ErrorField": null, "ResourceId": null, "QuickInfo": false, "BusinessKeys": { "ReleaseId": "CC100151", "ReleaseLineId": "2" } } ], "Size": 2 }, "rootCause": null, "cloudComponentHostName": "C02WL3Q8G8WN", "cloudComponent": "com-manh-cp-fulfillment:10041", "requestUri": null, "statusCode": "OK" } Configuration Below is a checklist of all configuration and interface mapping changes required to enable late order cancelation. *Indicates that help is required by Manhattan services to complete this configuration. Otherwise, configuration can be done within the application or in external, customer-owned systems. Order Enable Order Modification Rules > Order Line > Update Address > Restrict from status to Packed in the Order Configuration UI. Organization/Location Enable "isManhattanActiveLocation" flag to true for "LocationSubType" Store or DC for a seamless integration with Manhattan Active® Omni Store & MAWM. Email Enable Order Confirmation emails if required by referring to the Transactional Emails guide. Enable Change Shipping Address confirmation emails if required by referring to the Transactional Emails guide. Update Ship It Instead confirmation emails to include Change Shipping Address link if required by referring to the Transactional Emails guide. Digital Self-Service Enable Address Verification in Self Service Configuration UI (optional) Enable Shipping Restriction Validation in Self Service Configuration (optional) Store Fulfillment Install the new mobile application*. Add resources to utilize the Late Order Cancellation API. This feature is available out of the box. No specific configuration is required for change shipping address in Store Fulfillment. Contact Center None XBoundAuth Service definition has to be configured for a seamless integration with MAWM. Order Configuration While using Order APIs for change shipping address feature, add the transient field "PostReleaseModificationStatus" in the response template used. This field will indicate if the request was "Completed" or "Failure" after processing the request. Use the below API to update the response template, {{url}}/order/api/fwcore/responseTemplate/save Post Release Modification Status{ "Messages": null, "UpdatedTimestamp": "2022-07-24T16:23:00", "CreatedBy": "seeddata-importer", "CreatedTimestamp": "2022-07-24T16:23:00", "BaseEntity": "Order", "Process": null, "OrgId": null, "UpdatedBy": "seeddata-importer", "TemplateJson": { "OrderId": null, "CurrencyCode": null, "PostReleaseModificationStatus": null, "OrganizationId": null, "ReturnLabelEmail": null, "ReturnTotalWithoutFees": null, "TotalReturnFees": null, "OrderTotal": null, "ItemSeason": null, "CustomerId": null, "CustomerEmail": null, "CustomerPhone": null, "CustomerFirstName": null, "CustomerLastName": null, "SellingLocationId": null, "OrderToken": null, "Release": { "ReleaseId": null, "PostReleaseModificationStatus": null, "ReleaseLine": { "ReleaseLineId": null, "OrderLineId": null } }, "ReturnConfig": { "daysForEligibleReturn": null }, "OrderLine": { "ItemId": null, "AlternateOrderLineId": null, "PostReleaseModificationStatus": null, "OrderLineId": null, "AddressId": null, "IsReturnable": null, "ParentOrderLineId": null, "IsReturn": null, "IsEvenExchange": null, "SmallImageURI": null, "ItemWebURL": null, "ItemDescription": null, "ItemShortDescription": null, "ItemSeason": null, "ItemSize": null, "ItemColorDescription": null, "ReturnLineTotalWithoutFees": null, "UnitPrice": null, "Quantity": null, "SellingLocationId": null, "ShippingMethodId": null, "ShipToLocationId": null, "DeliveryMethod": { "DeliveryMethodId": null }, "OrderLinePromisingInfo": { "ShipToLocationId": null }, "ShipToAddress": { "Address": null }, "ReturnType": { "ReturnTypeId": null }, "OrderLineAdditional": { "ReturnReason": null }, "ReturnableQuantity": null, "refundPrice": null, "FulfillmentDetail": { "FulfilmentDate": null } }, "OrderType": { "OrderTypeId": null }, "DocType": { "DocTypeId": null }, "SellingChannel": { "SellingChannelId": null }, "ReturnStatus": null, "ReturnLabel": { "ReturnLabelDocId": null }, "QrCode": null }, "ContextId": "9099bc36-bdfe-4e15-a4a2-7a46f425fb02", "TemplateId": "PostReleaseModificationStatus", "Unique_Identifier": "6586797798368325472" } Use the above template in the Order API request, {{url}}/order/api/order/order/save?templateName=PostReleaseModificationStatus Sample OrderSaveResponse when the request is Success and Failure Sample Order Save Response With Post Release Modification Status Failure{ "success": true, "header": null, "data": { "Messages": { "Message": [ { "Type": "INFO", "Code": "10255", "Description": "Failure", "ShortDescription": null, "ErrorCode": null, "ErrorField": null, "ResourceId": null, "QuickInfo": false, "BusinessKeys": null } ], "Size": 1 }, "PostReleaseModificationStatus": "Failure", "ItemSeason": null, "OrganizationId": null, "CurrencyCode": "USD", "SellingLocationId": null, "CustomerPhone": null, "QrCode": null, "TotalReturnFees": 0, "CustomerFirstName": "John", "OrderType": { "OrderTypeId": "Ecom Order" }, "OrderLine": [ { "ShipToAddress": { "AddressName": null, "AvsReason": null, "Address": { "Email": "OMartell@yahoo.com", "FirstName": "Zeeshan", "State": "GA", "Phone": "423-306-1973", "Address2": "New Lake View 06", "Address3": null, "Country": "US", "PostalCode": "30039", "LastName": "H", "Address1": "2300 Windy ridge Pkwy", "City": "Swanee", "County": null }, "IsAddressVerified": true, "AddressId": "7b87b062878b93eb328fc32c6aea734b" }, "PostReleaseModificationStatus": "Failure", "IsReturnable": true, "ItemSeason": null, "ItemWebURL": "", "ItemColorDescription": "Blue", "ItemId": "Tops-13153-Blue-L", "ItemDescription": "The Captain Popover is a new take on the beloved Skipper.", "IsReturn": false, "ShippingMethodId": "TwoDay", "SellingLocationId": null, "ParentOrderLineId": null, "refundPrice": null, "AddressId": "7b87b062878b93eb328fc32c6aea734b", "ItemSize": "L", "ReturnableQuantity": 0, "ShipToLocationId": null, "DeliveryMethod": { "DeliveryMethodId": "ShipToAddress" }, "SmallImageURI": "http://res.cloudinary.com/com-manh-cp/image/upload/13153_resortwhitepackyourtrunk_a1.jpg", "ReturnLineTotalWithoutFees": 0, "Quantity": 1, "ReturnType": null, "FulfillmentDetail": [], "UnitPrice": 10, "OrderLineId": "1", "OrderLineAdditional": null, "ItemShortDescription": "CAPTAIN PRINTED POPOVER", "IsEvenExchange": false, "AlternateOrderLineId": null, "OrderLinePromisingInfo": { "ShipToLocationId": null } }, { "ShipToAddress": { "AddressName": null, "AvsReason": null, "Address": { "Email": "OMartell@yahoo.com", "FirstName": "Zeeshan", "State": "GA", "Phone": "423-306-1973", "Address2": "Lakeside 06", "Address3": null, "Country": "US", "PostalCode": "94043", "LastName": "H", "Address1": "1295 Charlestone rd", "City": "Mountain View", "County": null }, "IsAddressVerified": true, "AddressId": "6361f61d594c43f6269f2eb739551d4" }, "PostReleaseModificationStatus": "Failure", "IsReturnable": true, "ItemSeason": null, "ItemWebURL": "", "ItemColorDescription": "Blue", "ItemId": "Tops-13153-Blue-L", "ItemDescription": "The Captain Popover is a new take on the beloved Skipper.", "IsReturn": false, "ShippingMethodId": "TwoDay", "SellingLocationId": null, "ParentOrderLineId": null, "refundPrice": null, "AddressId": "6361f61d594c43f6269f2eb739551d4", "ItemSize": "L", "ReturnableQuantity": 0, "ShipToLocationId": null, "DeliveryMethod": { "DeliveryMethodId": "ShipToAddress" }, "SmallImageURI": "http://res.cloudinary.com/com-manh-cp/image/upload/13153_resortwhitepackyourtrunk_a1.jpg", "ReturnLineTotalWithoutFees": 0, "Quantity": 1, "ReturnType": null, "FulfillmentDetail": [], "UnitPrice": 10, "OrderLineId": "2", "OrderLineAdditional": null, "ItemShortDescription": "CAPTAIN PRINTED POPOVER", "IsEvenExchange": false, "AlternateOrderLineId": null, "OrderLinePromisingInfo": { "ShipToLocationId": null } } ], "CustomerEmail": null, "SellingChannel": { "SellingChannelId": "Web" }, "Release": [ { "PostReleaseModificationStatus": "Failure", "ReleaseLine": [ { "OrderLineId": "2", "ReleaseLineId": "1" } ], "ReleaseId": "TEST_0061" }, { "PostReleaseModificationStatus": "Failure", "ReleaseLine": [ { "OrderLineId": "1", "ReleaseLineId": "1" } ], "ReleaseId": "TEST_0062" } ], "DocType": { "DocTypeId": "CustomerOrder" }, "ReturnTotalWithoutFees": 0, "OrderToken": "SSO8P8PBAwljhAkEyiKp0cad559f52705820e5d1d8bcabd7d87e", "ReturnLabelEmail": null, "CustomerId": null, "OrderId": "TEST_006", "Payment": null, "ReturnConfig": null, "CustomerLastName": "H", "ReturnStatus": null, "ReturnLabel": [], "OrderTotal": 33.51 }, "messageKey": null, "message": null, "errors": [], "exceptions": [], "messages": { "Message": [], "Size": 0 }, "rootCause": null, "cloudComponent": "com-manh-cp-order:order,docker,omni,cloud,side,om-side,tenant0:8080", "cloudComponentHostName": "6ec619d09039", "requestUri": null, "statusCode": "OK" } Sample Order Save Response With Post Release Modification Status Success{ "success": true, "header": null, "data": { "Messages": { "Message": [ { "Type": "INFO", "Code": "10254", "Description": "Completed", "ShortDescription": null, "ErrorCode": null, "ErrorField": null, "ResourceId": null, "QuickInfo": false, "BusinessKeys": null } ], "Size": 1 }, "PostReleaseModificationStatus": "Completed", "ItemSeason": null, "OrganizationId": null, "CurrencyCode": "USD", "SellingLocationId": null, "CustomerPhone": null, "QrCode": null, "TotalReturnFees": 0, "CustomerFirstName": "John", "OrderType": { "OrderTypeId": "Ecom Order" }, "OrderLine": [ { "ShipToAddress": { "AddressName": null, "AvsReason": null, "Address": { "Email": "OMartell@yahoo.com", "FirstName": "Zeeshan", "State": "GA", "Phone": "423-306-1973", "Address2": "New Lake View 12", "Address3": null, "Country": "US", "PostalCode": "30039", "LastName": "H", "Address1": "2300 Windy ridge Pkwy", "City": "Swanee", "County": null }, "IsAddressVerified": true, "AddressId": "4357ac784a5d349a9067ee7ebb926a86" }, "PostReleaseModificationStatus": "Completed", "IsReturnable": true, "ItemSeason": null, "ItemWebURL": "", "ItemColorDescription": "Blue", "ItemId": "Tops-13153-Blue-L", "ItemDescription": "The Captain Popover is a new take on the beloved Skipper.", "IsReturn": false, "ShippingMethodId": "TwoDay", "SellingLocationId": null, "ParentOrderLineId": null, "refundPrice": null, "AddressId": "4357ac784a5d349a9067ee7ebb926a86", "ItemSize": "L", "ReturnableQuantity": 0, "ShipToLocationId": null, "DeliveryMethod": { "DeliveryMethodId": "ShipToAddress" }, "SmallImageURI": "http://res.cloudinary.com/com-manh-cp/image/upload/13153_resortwhitepackyourtrunk_a1.jpg", "ReturnLineTotalWithoutFees": 0, "Quantity": 1, "ReturnType": null, "FulfillmentDetail": [], "UnitPrice": 10, "OrderLineId": "1", "OrderLineAdditional": null, "ItemShortDescription": "CAPTAIN PRINTED POPOVER", "IsEvenExchange": false, "AlternateOrderLineId": null, "OrderLinePromisingInfo": { "ShipToLocationId": null } }, { "ShipToAddress": { "AddressName": null, "AvsReason": null, "Address": { "Email": "OMartell@yahoo.com", "FirstName": "Zeeshan", "State": "GA", "Phone": "423-306-1973", "Address2": "Lakeside 10", "Address3": null, "Country": "US", "PostalCode": "94043", "LastName": "H", "Address1": "1295 Charlestone rd", "City": "Mountain View", "County": null }, "IsAddressVerified": true, "AddressId": "f464d1bfb69144d92aaac55a1cfa85" }, "PostReleaseModificationStatus": "Completed", "IsReturnable": true, "ItemSeason": null, "ItemWebURL": "", "ItemColorDescription": "Blue", "ItemId": "Tops-13153-Blue-L", "ItemDescription": "The Captain Popover is a new take on the beloved Skipper.", "IsReturn": false, "ShippingMethodId": "TwoDay", "SellingLocationId": null, "ParentOrderLineId": null, "refundPrice": null, "AddressId": "f464d1bfb69144d92aaac55a1cfa85", "ItemSize": "L", "ReturnableQuantity": 0, "ShipToLocationId": null, "DeliveryMethod": { "DeliveryMethodId": "ShipToAddress" }, "SmallImageURI": "http://res.cloudinary.com/com-manh-cp/image/upload/13153_resortwhitepackyourtrunk_a1.jpg", "ReturnLineTotalWithoutFees": 0, "Quantity": 1, "ReturnType": null, "FulfillmentDetail": [], "UnitPrice": 10, "OrderLineId": "2", "OrderLineAdditional": null, "ItemShortDescription": "CAPTAIN PRINTED POPOVER", "IsEvenExchange": false, "AlternateOrderLineId": null, "OrderLinePromisingInfo": { "ShipToLocationId": null } } ], "CustomerEmail": null, "SellingChannel": { "SellingChannelId": "Web" }, "Release": [ { "PostReleaseModificationStatus": "Completed", "ReleaseLine": [ { "OrderLineId": "1", "ReleaseLineId": "1" } ], "ReleaseId": "TEST_0141" }, { "PostReleaseModificationStatus": "Completed", "ReleaseLine": [ { "OrderLineId": "2", "ReleaseLineId": "1" } ], "ReleaseId": "TEST_0142" } ], "DocType": { "DocTypeId": "CustomerOrder" }, "ReturnTotalWithoutFees": 0, "OrderToken": "UjLpp5jNUTSVIgO0zadp0e832d0c721ad49ace78496a67994458", "ReturnLabelEmail": null, "CustomerId": null, "OrderId": "TEST_014", "Payment": null, "ReturnConfig": null, "CustomerLastName": "H", "ReturnStatus": null, "ReturnLabel": [], "OrderTotal": 33.51 }, "messageKey": null, "message": null, "errors": [], "exceptions": [], "messages": { "Message": [], "Size": 0 }, "rootCause": null, "cloudComponent": "com-manh-cp-order:order,docker,omni,cloud,side,om-side,tenant0:8080", "cloudComponentHostName": "3f1de12ce3ed", "requestUri": null, "statusCode": "OK" } Order and XBoundAuth Service Definition for MAWM Integration The Service Definition in order that has the xbound URL to route to the dcorder API for address update along with the oAuth Service Id should be persisted. We should use the below body for saving to the order Service Definition (using system admin credentials). {{url}}/order/api/ServiceDefinition/serviceDefinition/save Order Service Definition{ "ComponentId": "COMPONENT-ORDER", "Url": "com-manh-cp-xbound:8080/dcorder/api/ServiceDefinition/invoke/ReleaseUpdateService", "ServiceId": "MAWMPostReleaseUpdatesService", "ServiceDefinitonParams": [ { "ParameterName": "PROTOCOL", "ParameterValue": "HTTP" }, { "ParameterName": "HTTPMETHOD", "ParameterValue": "POST" }, { "ParameterName": "ISEXTERNAL", "ParameterValue": false } ], "ServiceAuthParams": [ { "ParameterName": "oAuth.serviceId", "ParameterValue": "{:MAWMAuthServiceId}" }, { "ParameterName": "location", "ParameterValue": "$.ExternalShipFromLocationId" }, { "ParameterName": "organization", "ParameterValue": "$.ExternalOrganizationId" } ] } MAWM post release updates service for different org namesThe MAWMPostReleaseUpdatesService functions only when Manhattan Active® Omni(MAO) and Manhattan Active® Warehouse Management (MAWM) share the same organization name. If the organization names do not match, use the request format outlined below to create the service. { "ComponentId": "COMPONENT-ORDER", "Url": "com-manh-cp-xbound:8080/dcorder/api/ServiceDefinition/invoke/ReleaseUpdateService", "ServiceId": "MAWMPostReleaseUpdatesService", "ServiceDefinitonParams": [ { "ParameterName": "PROTOCOL", "ParameterValue": "HTTP" }, { "ParameterName": "HTTPMETHOD", "ParameterValue": "POST" }, { "ParameterName": "ISEXTERNAL", "ParameterValue": false } ], "ServiceAuthParams": [ { "ParameterName": "oAuth.serviceId", "ParameterValue": "{:MAWMAuthServiceId}" }, { "ParameterName": "xbound-location", "ParameterValue": "$.ExternalShipFromLocationId" }, { "ParameterName": "xbound-organization", "ParameterValue": "$.ExternalOrganizationId" } ] } The Service Definition in xboundauth should also be saved. We should use the body below for saving the Service Definition to the xboundauth (using system credentials): {{url}}/xboundauth/api/ServiceDefinition/serviceDefinition/save XBoundAuthServiceDefintion{ "ComponentId": "Xboundauth", "Url": "com-manh-cp-xbound:8080/dcorderAuthorization/oauth/token", "ServiceId": "MAWMAuthService", "ServiceDefinitonParams": [ { "ParameterName": "ISEXTERNAL", "ParameterValue": false } ], "ServiceAuthParams": [ { "ParameterName": "xbound-basic.username", "ParameterValue": "{:XBoundBasicUsernameForMAWMService}" }, { "ParameterName": "xbound-basic.password", "ParameterValue": "{:XBoundBasicPasswordForMAWMService}" } ], "ServiceFormDataParams": [ { "ParameterName": "Content-Type", "ParameterValue": "application/x-www-form-urlencoded" }, { "ParameterName": "grant_type", "ParameterValue": "{:GrantTypeForMAWMService}" }, { "ParameterName": "username", "ParameterValue": "{:UsernameForMAWMService}" }, { "ParameterName": "password", "ParameterValue": "{:PasswordForMAWMService}" } ] } Note: Any value starting with “{:” in the above Service Definitions indicate they are picked up from consul properties. Next step points mention how to configure them. The "oAuth.serviceId" in the Service Definition of order is the xboundauth Service Id which is MAWMAuthService in the above body. And this value is picked up in the Service Definition of order from consul by the key: MAWMAuthServiceId. Thus, the following entry should be made in the consul of order: MAWMAuthServiceId=MAWMAuthService. If you use any other value as the xboundauth Service Definition Id, use that value as the consul property value. But keep the key name the same, i.e., MAWMAuthServiceId - since that key name is persisted in the order Service Definition whose value will be picked up from consul. The following entry should be made in the consul of xboundauth: GrantTypeForMAWMService=password PasswordForMAWMService=Password@1234 UsernameForMAWMService=inadmin XBoundBasicPasswordForMAWMService=b4s8rgTyg55XYNun XBoundBasicUsernameForMAWMService=omnicomponent.1.0.0 The values above correspond to the environments that were used for the MAO MAWM integration testing, like the passwords and the usernames. Use the correct values for those fields according to your environment and retain the same key names that you use in your xboundauth Service Definition. The following entry should be made in the consul of xbound: zuul.routes.dcorder.path=/dcorder/** zuul.routes.dcorder.url=https://qasc.cp.manh.cloud/dcorder zuul.routes.dcorderAuthorization.path=/dcorderAuthorization/** zuul.routes.dcorderAuthorization.url=https://qasc-auth.cp.manh.cloud custom.free.pass=/dcorder/**,/dcorderAuthorization/** The hostname values above are corresponding to the environments that were used for the MAO MAWM integration testing. Use the correct values for those fields according to your environment. The following entry should be made in the consul of zuulserver: zuul.routes.xbound.url=http://com-manh-cp-xbound:8080 Please do note that if the Release Location is an External Store or External WM, same configurations as above need to be done according to the environment, so that the Service Definition in order can be saved with the ServiceId name as “ExternalPostReleaseUpdatesService”. Note: The above Order and XBoundAuth Service Definitions are samples of MAWM integration. If there is a requirement to integrate with External WM or External Store, then create separate Order and XBoundAuth service definitions with specific custom URL and environment consul properties. The entry condition to invoke the respective service definition can be defined. For example, For MAWM, the entry condition is Location.IsManhattanActiveLocation==true && Location.LocationType.LocationTypeId=='DC'. For External WM, Location.IsManhattanActiveLocation==false && Location.LocationType.LocationTypeId=='DC'. For External Store, Location.IsManhattanActiveLocation==False && Location.LocationType.LocationTypeId=='Store'. Implementation Flavors Fraud Verification for Address Change As part of customer driven fulfilment, the retailer can allow the customer to make changes to the order after it has been released for fulfillment by configuring the required order mod types. Modifying the shipping address is one of the options provided as part of this feature, which can be driven by a CSR through order edit screen or can be driven by the customer using digital self service. However, while this feature enables the retailer to increase customer satisfaction and increase customer loyalty, fraudulent transactions are a big concern for retailers. Usually, most retailers have custom solutions in place to verify fraud even before an order is created in the system or before releasing the order for fulfillment, but do not have a way to do fraud checks for post release address updates driven by the customer. This section provides the retailer guidelines to implement custom extensions to perform fraud check for post release address updates and take appropriate actions depending on the fraud status and either accept the address update transaction or to reject it. To do a fraud verification for the post release address change update, implement the user exit - Order:Order:UserExit:EvaluatePostReleaseAddressUpdate. For further details about the user exit, refer to documentation in ProActive. The user exit can be implemented to call a third party fraud verification service provider, and on receiving the response, custom logic can be implemented to either continue with the current address update transaction and update order line ship to address with the new address and generate a release update accordingly or to terminate it without updating the new shipping address on the order line and prevent any release update message getting generated. The response to a fraud verification call is categorized into three specific categories: Accepted - Indicates that the current transaction can be accepted and is not a fraudulent transaction. Rejected -  Indicates that the current transaction can be rejected and is a fraudulent transaction. Review - Indicates that the current transaction can neither be accepted nor rejected and will take time to verify if it is a fraudulent transaction or not. Retailers can take further action on the current address update transaction for the three categories as explained below in the response section. These actions are only recommendatory and not a limited or exhaustive list of possible solutions. Request The request to the user exit is the save order payload with the address update being processed in the current transaction, which consists of the order lines for which the address is being updated, along with the change log for orderLine.shipToAddressId having the previous ship to address Id and the new ship to address Id. The orderLine.shipToAddressId will point to the new address Id to which the request is being processed in the current transaction. Note: If the user exit is implemented for Ship It Instead address validation, change log orderLine.shipToAddressId will not have the previous ship to address Id and the new ship to address Id. All the order lines with change log for ShipToAddress AddressId - OrderLine::AddressId are impacted due to the current address update transaction and belong to the same release. If order.Extended, order.OrderLine.Extended, order.Hold and order.OrderLine.Hold and order.OrderLine.IsCancelled is already populated at the time of processing the post release address update, it will be available in the request. EvaluatePostReleaseAddressUpdate-Request { "Messages": null, "ChangeLog": null, "OrderId": "CC10278", "Order": { "OrderLine": [ { "ShipToAddress": { "AddressName": null, "AvsReason": null, "Address": { "Email": "john.smith@manh-dev.com", "FirstName": "John", "State": "FL", "Phone": "(678) 597-7070", "Address2": null, "Address3": null, "Country": "US", "PostalCode": "32713-4806", "LastName": "Smith", "Address1": "138 Cedar Springs Cir", "City": "Debary", "County": null }, "IsAddressVerified": true, "AddressId": "c772ac9e7cca7c1760e3cc48c1f9b63" }, "OrderLineId": "1", "ChangeLog": { "ModTypes": { "OrderLine": [ "OrderLine::AddressId", "OrderLine::FulfillmentGroupId" ] }, "ChangeSet": [ { "Properties": [ { "New": "c772ac9e7cca7c1760e3cc48c1f9b63", "Old": "cd7317e6ca79445389ba2686d3c5f", "Property": "AddressId" } ], "ModType": "OrderLine::AddressId" }, { "Properties": [ { "New": "59e2a249301533d5ac6b22d540c1ad", "Old": "3afdbb1cebf589de618a5af4e41f896", "Property": "FulfillmentGroupId" } ], "ModType": "OrderLine::FulfillmentGroupId" } ] } }, { "ShipToAddress": { "AddressName": null, "AvsReason": null, "Address": { "Email": "john.smith@manh-dev.com", "FirstName": "John", "State": "FL", "Phone": "(678) 597-7070", "Address2": null, "Address3": null, "Country": "US", "PostalCode": "32713-4806", "LastName": "Smith", "Address1": "138 Cedar Springs Cir", "City": "Debary", "County": null }, "IsAddressVerified": true, "AddressId": "c772ac9e7cca7c1760e3cc48c1f9b63" }, "OrderLineId": "2", "ChangeLog": null } ] } } The request is a template driven by PostReleaseAddressUpdateRequestTemplate, and can be customized to add any other order or order line attributes if required for the custom logic to be implemented. (The PostReleaseAddressUpdateRequest template is used to request a post release address update.This can be customized to add any other order or order line attributes if required for the custom logic to be implemented. ) It is recommended to form one request per release and not have multiple releases in one post release address update, since the user exit can either accept the entire transaction or reject the entire transaction and does not support either accepting or rejecting a partial request. Custom Implementation Call third party fraud verification synchronously In some scenarios, there is a possibility of the fraud check call getting in to a loop in the custom logic implemented in the user exit. To avoid this before calling, a third party fraud verification API is required to verify if the call is required or not. Interpret the response from the third party fraud verification call as: Accepted Rejected Review Do not execute an explicit order save call in the custom logic implemented in the user exit, which may cause order lock issues. Response The response is a template driven by PostReleaseAddressUpdateResponseTemplate, which is an order save payload. PostReleaseAddressUpdateResponseTemplate { "BaseEntity": "Order", "TemplateId": "PostReleaseAddressUpdateResponseTemplate", "TemplateJson": { "OrderId": null, "Extended": { "*": null }, "PostReleaseUpdateActions": { "*": null }, "OrderHold": { "*": null }, "OrderLine": { "OrderLineId": null, "IsCancelled": null, "IsPullbackRelease": null, "Extended": { "*": null }, "OrderLineHold": { "*": null } } } } Given below are the attributes of the response that needs to be populated to perform various actions depending on the fraud verification response PostReleaseAddressUpdateResponse-AttributesGiven below is the list of important attributes that have to be included in the EvaluatePostReleaseAddressUpdate UE response Attribute Name Description Allowed values Notes 1 Order.PostReleaseUpdateActions.IsAddressAccepted Indicates the system whether to continue with the current address update transaction or not - terminate/roll back the transaction true OR false true: continue the current address update transaction false: terminate/roll back current address update transaction Default: true Mandatory to be populated 2 Order.PostReleaseUpdateActions.AddressRejectedErrorCode Error code with error message - included in the response by the system to the initiating application (CSR UI / DSS)  that can be used to display back the status of the transaction and any additional information. Custom Has to be created manually - not provided out of the box Not mandatory to populate Retailr can create the custom error code and respective localized description (error message) here - https://<kvstorehost>>//kv/localization/com-manh-cp-order/error-codes/en/localization.properties/edit 3 Order.Extended Extended attributes that can be used to store data from fraud verification response and any other data required for processing the address change required by custom logic like the old "addressId" etec. Custom Extended attributes have to be created. Not mandatory to populate If all the order lines of the order belong to a single release that is getting impacted due to the current address update transaction - update the fraud response data at the order level 4 Order.Hold.HoldTypeId Hold on the entire order Custom Has to be created manually - not provided out of the box Not mandatory to populate Hold has to exist in the system - please refer to - order-hold-and-unhold - for more details Populating Hold on order doesn't mean system will automatically put hold on the order or the release / fulfillment is put on hold. The hold can be used for not releasing a order line by including the hold criteria on release filter. The entire order will not get released if the hold is applied on order level 5 Order.Hold.StatusId Status of the hold populated on order Custom Has to be created manually - not provided out of the box Mandatory if Order.OrderLine.Hold.HoldTypeId is populated Hold status has to exist in the system - please refer to - order-hold-and-unhold - for more details Populating Hold on order doesn't mean the system will automatically put hold on the order or the release / fulfillment is put on hold. The hold can be used for not releasing a order line by including the hold criteria on release filter. 6 Order.OrderLine.Extended Extended attributes that can be used to store data from fraud verification response and any other data required for processing the address change required by custom logic like the old "addressId" etec. Custom Extended attributes have to be created. Not mandatory to populate If there are multiple releases for the order and order lines of the order belong to a multiple releases, and only few order lines are getting impacted due to the current address update transaction - update the fraud response data at the order line level 7 Order.OrderLine.Hold.HoldTypeId Hold on the order line Custom Has to be created manually - not provided out of the box Not mandatory to populate Hold has to exist in the system - please refer to - order-hold-and-unhold - for more details Populating Hold on order line doesn't mean system will automatically put hold on the order  line or the release / fulfillment is put on hold. The hold can be used for not releasing a order line by including the hold criteria on release filter. 8 Order.OrderLine.Hold.StatusId Status of the hold populated on order line Custom Has to be created manually - not provided out of the box Mandatory if Order.OrderLine.Hold.HoldTypeId is populated Hold status has to exist in the system - please refer to - order-hold-and-unhold - for more details Populating Hold on order line doesn't mean the system will automatically put hold on the order line or the release / fulfillment is put on hold. The hold can be used for not releasing a order line by including the hold criteria on release filter. 8 Order.OrderLine.IsCancelled Indicates the system to perform post order cancellation to cancel the existing release and then also cancel the order lines true OR false true: perform post order cancellation to cancel the existing release and then also cancel the order lines All the order lines belonging to the release impacted by the post release address change request should be populated with either true / false - otherwise order / order lines and release may end up withd data discripancy. System does not have any validations to validate this condtion out of the box and custom code should make sure to adheare to this validation. false: No action taken Default: false Mandatory Depends on the post release cancellation feature - which has to be enabled to use this - refer to lateordercancellation for more details It has to be populated for each order line individually; for all the order lines that belong to a single release that is getting impacted Do not remove this tag from the response template or the response payload - even if it is false Within a single release, if a combination of IsCancelled = true and IsPullbackRelease = true is populated - the release and the order lines will have data discrepancy. 10 Order.OrderLine.IsPullbackRelease Indicates the system to perform post order cancellation to cancel the existing release and then also revert back order line status to allocated true OR false true: perform post order cancellation to cancel the existing release and then revert order lines back to allocated status All the order lines belonging to the release impacted by the post release address change request should be populated with either true / false - otherwise order / order lines and release may end up withd data discripancy. System does not have any validations to validate this condtion out of the box and custom code should make sure to adheare to this validation. If both isCancelled and IsPullbackRelease flags are set to true - the IsCancelled flag will take precedence and the release will be cancelled and order lines will also be cancelled. false: No action taken Default: false Mandatory Depends on the post release cancellation feature - which has to be enabled to use this It has to be populated for each order line individually; for all the order lines that belong to a single release that is getting impacted Do not remove this tag from the response template or the response payload - even if it is false Within a single release, if a combination of IsCancelled = true and IsPullbackRelease = true is populated - the release and the order lines will have data discrepancy. On exiting the user exit, the system performs the following steps: If the post release address update transaction is to be continued, the process will be carried forward and the response sent back to the calling module (CSR UI / DSS UI). The out of the box address update successful message is displayed on the CSR or DSS UI. If the post release address update transaction is to be terminated, the process will be stopped and the transaction reverted back. A failure response is sent back to the calling module (CSR UI / DSS UI) with the error code and the error message associated with the error code populated in the response body. Order save will be executed with the response payload Order save will trigger other processes like post release cancellation or post release pull back depending on the response. If post release cancellation fails, order lines cannot be cancelled or restored back to the allocated status. Any order hold or order line hold will not automatically stop further release of the order lines and depends on the release filter configuration. The steps mentioned above are just indicative and do not represent the actual/technical sequence of processes executed. Note: For Ship It Instead address update, the below options are not supported Cancel the existing release as well as the order lines. Cancel the release, revert the order lines to allocated status and put a fraud hold on the order. If the fraud verification call results in either "Rejected" or "Under Review," it is recommended to reject the conversion transaction and continue with Pick Up at Store order. Note: To enable pull back release, change the applicable pipeline to include the below-mentioned Pickupservice and DropStatusDetermination in the pipeline. PullbackRelease-PipeLineDefine the following Pickup Service in the pipeline for which the pull back release process is to be enabled: "PickupService": [ { "FromStatus": "3000", "ComponentId": "Order", "ServiceId": "pullbackRelease" }, { "FromStatus": "3500", "ComponentId": "Order", "ServiceId": "pullbackRelease" }, { "FromStatus": "3600", "ComponentId": "Order", "ServiceId": "pullbackRelease" }, { "FromStatus": "3700", "ComponentId": "Order", "ServiceId": "pullbackRelease" } ] Define the following Drop Status Determination in the pipeline for which the pull back release process is to be enabled: "DropStatusDetermination": [ { "ConditionText": null, "Sequence": 1, "DropStatus": "2000", "ServiceId": "pullbackRelease", "FromStatus": "3000", "ComponentId": "Order", "IntendedDropStatus": "2000"            }, { "ConditionText": null, "Sequence": 1, "DropStatus": "2000", "ServiceId": "pullbackRelease", "FromStatus": "3500", "ComponentId": "Order", "IntendedDropStatus": "2000"ckRelease" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "2000", "ServiceId": "pullbackRelease", "FromStatus": "3600", "ComponentId": "Order", "IntendedDropStatus": "2000" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "2000", "ServiceId": "pullbackRelease", "FromStatus": "3700", "ComponentId": "Order", "IntendedDropStatus": "2000" } ] A sample response generated for failure of the post release address update is given below. PostReleaseAddressUpdateProcess-Response{ "success": true, "header": null, "data": { "Actions": {}, "PK": "6939952986504312406", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-06T10:14:58.65", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-08T09:16:05.51", "Messages": { "Message": [ { "Type": "INFO", "Code": "99999", "Description": "error.99999_en" } ], "Size": 1 }, "OrgId": "ecomorg", "OrderId": "CC10162", "CustomerId": "JS1001", "CustomerFirstName": "John", "CustomerLastName": "Smith", "CustomerPhone": "(678) 597-7070", "CustomerEmail": "john.smith@manh-dev.com", "CustomerTypeId": "", "AlternateOrderId": null, "SellingLocationId": null, "Priority": null, "IsOnHold": false, "IsConfirmed": true, "IsCapturedOffline": false, "IsCancelled": false, "CancelComments": null, "CapturedDate": "2023-09-06T10:14:58.65", "IsTaxExempt": false, "TaxExemptId": null, "TaxExemptComments": null, "CurrencyCode": "USD", "IsReadyForTender": false, "ConfirmedDate": "2023-09-06T10:15:45.538", "IsTaxOverridden": false, "TotalCharges": 0.00, "TotalDiscounts": 0.00, "TotalTaxes": 2.60, "TaxOverrideValue": null, "TaxOverridePercValue": null, "OrderSubTotal": 39.99, "OrderTotal": 42.59, "ConfirmedOrderTotal": 42.59, "IsPostVoided": false, "ParentReservationRequestId": null, "NextEventTime": "2023-09-06T15:15:01.825", "ArchiveDate": null, "StoreSaleCount": 0, "OrderLineCount": 1, "StoreReturnCount": 0, "ReturnLineCount": 0, "CancelLineCount": 0, "PackageCount": null, "ReturnLabelEmail": null, "BusinessDate": null, "IsArchiveInProgress": false, "IsUnArchiveInProgress": false, "MinReturnStatusId": null, "MaxReturnStatusId": null, "MinFulfillmentStatusId": "3000", "MaxFulfillmentStatusId": "3000", "SuspendedOrderId": null, "DoNotReleaseBefore": null, "ProcessReturnComments": null, "MerchSaleLineCount": 1, "MerchReturnLineCount": 0, "CancelledOrderSubTotal": null, "CancelledTotalDiscounts": null, "EventSubmitTime": "2038-01-18T23:59:00", "IsOrderCountable": true, "CountedDate": "2023-09-06T10:15:45.617", "CancelledOrderTotal": null, "CustomerAddress": null, "LoyaltyNumber": null, "CustomerSignature": null, "RunId": null, "OrderLocale": null, "OrderToken": "JvmMqcFrISyAbXW1nFKe0a22a4c63c19590ae64a5cd9b24e62ea", "OrderExtension1": null, "OrderExtension2": [], "OrderExtension3": [], "OrderExtension4": [], "OrderExtension5": [], "OrderCaptureConfig": { "Actions": {}, "PK": "6939952987504347091", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-06T10:14:58.75", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-06T10:15:08.305", "Messages": null, "OrgId": "ecomorg", "InvoiceTaxModeId": "Minimum", "ReturnInvoiceTaxMode": "ReturnOrderLedger", "TaxComparisonStrategy": "Jurisdiction", "TrackDelivery": false, "Extended": {} }, "OrderLine": [ { "Actions": {}, "PK": "6939952986564329187", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-06T10:14:58.656", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-08T09:16:05.515", "Messages": null, "OrgId": "ecomorg", "OrderLineId": "1", "AlternateOrderLineId": null, "ItemId": "Tops-12238-Blue-L", "Quantity": 1.0, "UnitPrice": 39.99, "MinFulfillmentStatusId": "3000", "MaxFulfillmentStatusId": "3000", "Priority": null, "IsItemNotOnFile": false, "IsReturnable": true, "IsReturnableAtStore": true, "IsExchangeable": true, "IsGift": false, "IsRefundGiftCard": false, "IsOnHold": false, "IsPreOrder": false, "IsPreSale": false, "StreetDate": null, "IsCancelled": false, "CancelComments": null, "ParentOrderLineId": null, "PaymentGroupId": null, "TotalTaxes": 2.60, "TotalCharges": 0.00, "TotalDiscounts": 0.00, "OrderLineSubTotal": 39.99, "OrderLineTotal": 42.59, "ItemStyle": "12238", "ItemBrand": "U.S. Polo", "ItemSize": "L", "ItemColorDescription": "Blue", "ItemSeason": null, "ItemDescription": "The Duval printed linen cap sleeve top is a summer essential. Wear this with your favorite printed", "ItemShortDescription": "DUVAL NOTCH NECKLINE LINEN TOP", "SmallImageURI": "http://res.cloudinary.com/com-manh-cp/image/upload/12238_poolsidebluebeachwalk_a1.jpg", "GiftCardValue": null, "RefundPrice": null, "OriginalUnitPrice": 39.99, "IsTaxIncluded": false, "IsTaxOverridden": false, "TaxOverrideValue": null, "TaxOverridePercValue": null, "IsPriceOverridden": false, "DoNotShipBeforeDate": null, "IsPackAndHold": false, "RequestedDeliveryDate": null, "PromisedDeliveryDate": null, "LatestDeliveryDate": null, "DeliveryMethodSubType": null, "CarrierCode": null, "ServiceLevelCode": null, "EffectiveRank": "05", "AddressId": "c772ac9e7cca7c1760e3cc48c1f9b63", "ShipFromAddressId": null, "ShipToLocationId": null, "FulfillmentGroupId": "59e2a249301533d5ac6b22d540c1ad", "ReleaseGroupId": null, "ShippingMethodId": "Standard", "IsPerishable": false, "IsReturn": false, "SellingLocationId": null, "ParentOrderId": null, "PhysicalOriginId": "ecomorg:T0983", "ItemTaxCode": null, "VolumetricWeight": null, "VolumetricWeightUOM": null, "ProductClass": "Tops", "IsEvenExchange": false, "IsReceiptExpected": true, "IsGiftCard": false, "IsNonMerchandise": false, "OrderId": "CC10162", "IsHazmat": false, "CancelledOrderLineSubTotal": null, "CancelledTotalDiscounts": null, "ItemDepartmentNumber": null, "ItemDeptNumber": null, "ItemDepartmentName": null, "ItemBarcode": null, "IsItemTaxExemptable": true, "IsActivationRequired": false, "ItemMaxDiscountPercentage": null, "ItemMaxDiscountAmount": null, "BusinessDate": null, "TransactionReferenceId": null, "TotalDiscountOnItem": 0.00, "ParentLineCreatedTimestamp": null, "PromisedShipDate": null, "HasComponents": false, "AllocationConfigId": "EcomOrdersConfig", "IsDiscountable": true, "IsPriceOverrideable": true, "ValueEntryRequired": false, "ItemWebURL": "", "NextEventTime": null, "LineShortCount": 0, "CancellationRequestStatus": null, "OrderLineExtension1": null, "OrderLineExtension2": [], "OrderLineExtension3": [], "OrderLineExtension4": [], "OrderLineExtension5": [], "OrderLineTaxDetail": [ { "Actions": {}, "PK": "6941645654876197228", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-08T09:16:05.487", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-08T09:16:05.487", "Messages": null, "OrgId": "ecomorg", "TaxDetailId": "Vertex1312677027", "TaxTypeId": "SELLER_USE", "TaxCode": null, "TaxableAmount": 39.99, "TaxAmount": 2.4, "TaxRate": 0.06, "Jurisdiction": "FLORIDA", "JurisdictionTypeId": "STATE", "TaxDate": "2023-09-08T00:00:00", "TaxEngineId": null, "HeaderTaxDetailId": null, "FulfillmentGroupId": "59e2a249301533d5ac6b22d540c1ad", "IsInformational": false, "IsInvoiceTax": false, "VatTaxCode": null, "TaxIdentifier1": "Sales and Use Tax", "TaxIdentifier2": null, "TaxIdentifier3": null, "TaxIdentifier4": null, "TaxIdentifier5": null, "Extended": {} }, { "Actions": {}, "PK": "6941645654886203002", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-08T09:16:05.488", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-08T09:16:05.488", "Messages": null, "OrgId": "ecomorg", "TaxDetailId": "Vertex1146259908", "TaxTypeId": "SELLER_USE", "TaxCode": null, "TaxableAmount": 39.99, "TaxAmount": 0.2, "TaxRate": 0.005, "Jurisdiction": "VOLUSIA", "JurisdictionTypeId": "COUNTY", "TaxDate": "2023-09-08T00:00:00", "TaxEngineId": null, "HeaderTaxDetailId": null, "FulfillmentGroupId": "59e2a249301533d5ac6b22d540c1ad", "IsInformational": false, "IsInvoiceTax": false, "VatTaxCode": null, "TaxIdentifier1": "Local Sales and Use Tax (Discretionary Sales Surtax)", "TaxIdentifier2": null, "TaxIdentifier3": null, "TaxIdentifier4": null, "TaxIdentifier5": null, "Extended": {} }, { "Actions": {}, "PK": "6941645655046234036", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-08T09:16:05.504", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-08T09:16:05.504", "Messages": null, "OrgId": "ecomorg", "TaxDetailId": "174987861214284557189", "TaxTypeId": "SELLER_USE", "TaxCode": "Shipping", "TaxableAmount": 0.00, "TaxAmount": 0.00, "TaxRate": 0.0, "Jurisdiction": "FLORIDA", "JurisdictionTypeId": "STATE", "TaxDate": "2023-09-08T00:00:00", "TaxEngineId": null, "HeaderTaxDetailId": "Vertex-67609729", "FulfillmentGroupId": "59e2a249301533d5ac6b22d540c1ad", "IsInformational": false, "IsInvoiceTax": false, "VatTaxCode": null, "TaxIdentifier1": "Sales and Use Tax", "TaxIdentifier2": null, "TaxIdentifier3": null, "TaxIdentifier4": null, "TaxIdentifier5": null, "Extended": {} }, { "Actions": {}, "PK": "6941645655056248182", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-08T09:16:05.505", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-08T09:16:05.505", "Messages": null, "OrgId": "ecomorg", "TaxDetailId": "174987872865773604330", "TaxTypeId": "SELLER_USE", "TaxCode": "Shipping", "TaxableAmount": 0.00, "TaxAmount": 0.00, "TaxRate": 0.0, "Jurisdiction": "VOLUSIA", "JurisdictionTypeId": "COUNTY", "TaxDate": "2023-09-08T00:00:00", "TaxEngineId": null, "HeaderTaxDetailId": "Vertex-1084259800", "FulfillmentGroupId": "59e2a249301533d5ac6b22d540c1ad", "IsInformational": false, "IsInvoiceTax": false, "VatTaxCode": null, "TaxIdentifier1": "Local Sales and Use Tax (Discretionary Sales Surtax)", "TaxIdentifier2": null, "TaxIdentifier3": null, "TaxIdentifier4": null, "TaxIdentifier5": null, "Extended": {} } ], "OrderLineChargeDetail": [ { "Actions": {}, "PK": "6941645651706185230", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-08T09:16:05.17", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-08T09:16:05.17", "Messages": null, "OrgId": "ecomorg", "ChargeDetailId": "174984520622897101783", "TaxCode": "Shipping", "ChargeDisplayName": null, "ChargeTotal": 0.00, "ChargePercent": null, "UnitCharge": null, "FulfillmentGroupId": "59e2a249301533d5ac6b22d540c1ad", "HeaderChargeDetailId": "3a6ee1fc95a52af3a423dda597ad7a7", "IsInformational": false, "IsLineDiscount": false, "IsOverridden": false, "OriginalChargeAmount": 0, "Comments": null, "ChargeReferenceId": null, "ChargeReferenceDetailId": null, "RelatedChargeDetailId": null, "RelatedChargeType": null, "RelatedOrderLineId": null, "RequestedAmount": null, "IsReturnCharge": false, "IsTaxIncluded": false, "ChargeSequence": 0, "ParentChargeDetailId": null, "IsProratedAtSameLevel": false, "IsCopied": false, "IsPostReturn": false, "IsCopiedHeaderCharge": false, "ChargeType": { "ChargeTypeId": "Shipping" }, "Reason": null, "DiscountOn": null, "ChargeSubType": null, "TaxableAmount": null, "Extended": {} } ], "OrderLineVASInstructions": [], "OrderLinePromisingInfo": null, "OrderLineAdditional": null, "OrderLineAttribute": [], "OrderLineSalesAssociate": [], "OrderLinePickupDetail": [], "OrderLineNote": [], "OrderLineHold": [], "QuantityDetail": [ { "Actions": {}, "PK": "6939953082914677944", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-06T10:15:08.291", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-06T10:22:32.087", "Messages": null, "OrgId": "ecomorg", "QuantityDetailId": "53132407381590521183", "ItemId": "Tops-12238-Blue-L", "Quantity": 0.0, "StatusId": "1000", "SubstitutionRatio": null, "SubstitutionType": null, "Reason": null, "ReasonType": null, "UOM": "EA", "Extended": {} }, { "Actions": {}, "PK": "6939957520359027997", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-06T10:22:32.035", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-06T10:22:39.941", "Messages": null, "OrgId": "ecomorg", "QuantityDetailId": "350085645217996413070", "ItemId": "Tops-12238-Blue-L", "Quantity": 0.0, "StatusId": "2000", "SubstitutionRatio": null, "SubstitutionType": null, "Reason": null, "ReasonType": null, "UOM": "EA", "Extended": {} }, { "Actions": {}, "PK": "6939957599379096179", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-06T10:22:39.937", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-06T10:22:39.937", "Messages": null, "OrgId": "ecomorg", "QuantityDetailId": "350164668872036506219", "ItemId": "Tops-12238-Blue-L", "Quantity": 1.0, "StatusId": "3000", "SubstitutionRatio": null, "SubstitutionType": null, "Reason": null, "ReasonType": null, "UOM": "EA", "Extended": {} } ], "Allocation": [ { "Actions": {}, "PK": "6939957513889014726", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-06T10:22:31.39", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-06T10:22:39.86", "Messages": null, "OrgId": "ecomorg", "AllocationId": "350079099117839825602", "ItemId": "Tops-12238-Blue-L", "Quantity": 1.0, "ShipFromLocationId": "ecomorg:T0983", "ShipToLocationId": null, "PoId": null, "PoDetailId": null, "AsnId": null, "AsnDetailId": null, "CommittedShipDate": null, "CommittedDeliveryDate": null, "LatestReleaseDate": null, "ReleaseDate": null, "LatestReleaseDateOnHandForRDD": null, "LatestShipDate": null, "SubstitutionRatio": null, "SubstitutionTypeId": null, "InventorySegmentId": null, "AllocatedOn": "2023-09-06T10:22:31.01", "GroupId": null, "AllocationType": "Delivery", "AllocationDependencyId": null, "CarrierCode": "UPS", "ServiceLevelCode": "UPS_GROUND", "CountryOfOrigin": null, "BatchNumber": null, "ProductStatusId": null, "InventoryTypeId": null, "InventoryAttribute1": null, "InventoryAttribute2": null, "InventoryAttribute3": null, "InventoryAttribute4": null, "InventoryAttribute5": null, "ShipViaId": "UPSGR", "ReservationRequestDetailId": "1", "ReservationRequestId": "CC10162", "EarliestDeliveryDate": "2023-09-06T10:22:00", "EarliestShipDate": "2023-09-06T10:22:00", "IsVirtual": false, "PredictedShipDate": null, "PredictedDeliveryDate": null, "HeuristicShipDate": "2023-09-06T10:22:00", "HeuristicDeliveryDate": "2023-09-06T10:22:00", "LocationBacklog": null, "PurgeDate": null, "Status": { "StatusId": "Released" }, "UOM": "EA", "Extended": {} } ], "OrderLineTagDetail": [ { "Actions": {}, "PK": "6939953018144477959", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-06T10:15:01.814", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-06T10:15:01.814", "Messages": null, "OrgId": "ecomorg", "ParentOrderLine": { "PK": "6939952986564329187" }, "Tag": "ProductClass", "IsExternal": false, "PurgeDate": null, "Extended": {} } ], "FulfillmentDetail": [], "LineType": null, "CancelReason": null, "ParentOrderLineType": null, "DeliveryMethod": { "DeliveryMethodId": "ShipToAddress" }, "LineProcessInfo": null, "OrderLineMilestone": [ { "Actions": {}, "PK": "6939953019244547595", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-06T10:15:01.924", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-06T10:22:40.303", "Messages": null, "OrgId": "ecomorg", "MilestoneDefinitionId": "OrderLine::Milestone::Released", "ExpectedTime": null, "ActualTime": "2023-09-06T10:22:39.989", "NextEventTime": null, "MonitoringRuleId": null, "Extended": {} }, { "Actions": {}, "PK": "6939953019244552067", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-06T10:15:01.924", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-06T10:15:01.924", "Messages": null, "OrgId": "ecomorg", "MilestoneDefinitionId": "OrderLine::Milestone::ReadyForPickup", "ExpectedTime": null, "ActualTime": null, "NextEventTime": null, "MonitoringRuleId": null, "Extended": {} }, { "Actions": {}, "PK": "6939953019244562876", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-06T10:15:01.924", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-06T10:15:01.924", "Messages": null, "OrgId": "ecomorg", "MilestoneDefinitionId": "OrderLine::Milestone::PickedUp", "ExpectedTime": null, "ActualTime": null, "NextEventTime": null, "MonitoringRuleId": null, "Extended": {} }, { "Actions": {}, "PK": "6939953019244575985", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-06T10:15:01.924", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-06T10:15:01.924", "Messages": null, "OrgId": "ecomorg", "MilestoneDefinitionId": "OrderLine::Milestone::Fulfilled", "ExpectedTime": null, "ActualTime": null, "NextEventTime": null, "MonitoringRuleId": null, "Extended": {} } ], "OrderLineMilestoneEvent": [], "OrderLinePromotionRequest": [], "OrderLineCancelHistory": [], "ReturnType": null, "ReturnDetail": [], "OrderLinePriceOverrideHistory": [], "StoreSaleEntryMethod": null, "TaxOverrideType": null, "OrderLineComponents": [], "FulfillmentStatus": "Released", "ReturnableQuantity": 0.0, "ReturnableLineTotal": 0, "ReturnLineTotalWithoutFees": 0, "CalculatedValues": { "OrginalOrderedQuantity": "1", "TotalBackorderedQuantity": "0", "SmallImageURI": "http://res.cloudinary.com/com-manh-cp/image/upload/12238_poolsidebluebeachwalk_a1.jpg", "Color": "Blue", "TotalLineInstructionNotes": 0, "TotalDeliveredQuantity": "0", "ReturnableLineTotal": 0, "TotalShippedQuantity": "0", "ShortDescription": "The Duval printed linen cap sleeve top is a summer essential. Wear this with your favorite printed", "NewEffectiveQuantity": "1", "ETA": "2023-09-06T10:22:00", "TotalAllocatedQuantity": "1", "Allocation": [ { "Actions": {}, "PK": "6939957513889014726", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-06T10:22:31.39", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-06T10:22:39.86", "Messages": null, "OrgId": "ecomorg", "AllocationId": "350079099117839825602", "ItemId": "Tops-12238-Blue-L", "Quantity": 1.0, "ShipFromLocationId": "ecomorg:T0983", "ShipToLocationId": null, "PoId": null, "PoDetailId": null, "AsnId": null, "AsnDetailId": null, "CommittedShipDate": null, "CommittedDeliveryDate": null, "LatestReleaseDate": null, "ReleaseDate": null, "LatestReleaseDateOnHandForRDD": null, "LatestShipDate": null, "SubstitutionRatio": null, "SubstitutionTypeId": null, "InventorySegmentId": null, "AllocatedOn": "2023-09-06T10:22:31.01", "GroupId": null, "AllocationType": "Delivery", "AllocationDependencyId": null, "CarrierCode": "UPS", "ServiceLevelCode": "UPS_GROUND", "CountryOfOrigin": null, "BatchNumber": null, "ProductStatusId": null, "InventoryTypeId": null, "InventoryAttribute1": null, "InventoryAttribute2": null, "InventoryAttribute3": null, "InventoryAttribute4": null, "InventoryAttribute5": null, "ShipViaId": "UPSGR", "ReservationRequestDetailId": "1", "ReservationRequestId": "CC10162", "EarliestDeliveryDate": "2023-09-06T10:22:00", "EarliestShipDate": "2023-09-06T10:22:00", "IsVirtual": false, "PredictedShipDate": null, "PredictedDeliveryDate": null, "HeuristicShipDate": "2023-09-06T10:22:00", "HeuristicDeliveryDate": "2023-09-06T10:22:00", "LocationBacklog": null, "PurgeDate": null, "Status": { "StatusId": "Released" }, "UOM": "EA", "Extended": {} } ], "OrderedQuantity": "1", "ItemStyle": "12238", "TotalCancelledQuantity": 0, "ServiceCharges": 0, "TotalLinePromotions": 0, "TotalReleasedQuantity": "1", "ItemSize": "L", "TotalLineCommunicationNotes": 0, "TotalLineCoupons": 0 }, "TaxableAmount": 39.99, "TotalInformationalTaxes": 0, "SelfServiceUrl": null, "ShortSelfServiceUrl": null, "PostReleaseModificationStatus": "Failure", "ShipFromAddress": null, "MaxAppeasementAmount": 39.99, "ShipToAddress": { "Actions": {}, "PK": null, "CreatedBy": null, "CreatedTimestamp": null, "UpdatedBy": null, "UpdatedTimestamp": null, "Messages": null, "AddressId": "c772ac9e7cca7c1760e3cc48c1f9b63", "IsAddressVerified": true, "AddressName": null, "Address": { "FirstName": "John", "LastName": "Smith", "Address1": "138 Cedar Springs Cir", "Address2": null, "Address3": null, "City": "Debary", "State": "FL", "PostalCode": "32713-4806", "County": null, "Country": "US", "Phone": "(678) 597-7070", "Email": "john.smith@manh-dev.com" }, "AvsReason": null, "Extended": {} }, "UOM": "EA", "IsItemTaxOverridable": true, "Extended": {} } ], "TransactionReference": [], "OrderChargeDetail": [ { "Actions": {}, "PK": "6941645651656175573", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-08T09:16:05.165", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-08T09:16:05.165", "Messages": null, "OrgId": "ecomorg", "ChargeDetailId": "3a6ee1fc95a52af3a423dda597ad7a7", "TaxCode": "Shipping", "ChargeDisplayName": null, "ChargeTotal": 0, "ChargePercent": null, "IsTaxIncluded": false, "IsOverridden": false, "OriginalChargeAmount": 0, "Comments": null, "IsInformational": false, "IsProrated": true, "FulfillmentGroupId": "59e2a249301533d5ac6b22d540c1ad", "IsOrderDiscount": false, "ChargeReferenceId": null, "ChargeReferenceDetailId": null, "RelatedChargeDetailId": null, "RelatedChargeType": null, "RequestedAmount": null, "IsReturnCharge": false, "ChargeSequence": 0, "ParentChargeDetailId": null, "IsProratedAtSameLevel": false, "IsPostReturn": false, "ChargeType": { "ChargeTypeId": "Shipping" }, "Reason": null, "DiscountOn": null, "ChargeSubType": null, "TaxableAmount": 0, "Extended": {} } ], "OrderTaxDetail": [ { "Actions": {}, "PK": "6941645654966214385", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-08T09:16:05.496", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-08T09:16:05.496", "Messages": null, "OrgId": "ecomorg", "TaxDetailId": "Vertex-67609729", "TaxTypeId": "SELLER_USE", "TaxCode": "Shipping", "TaxableAmount": 0.0, "TaxAmount": 0.0, "TaxRate": 0.0, "Jurisdiction": "FLORIDA", "JurisdictionTypeId": "STATE", "TaxDate": "2023-09-08T00:00:00", "TaxEngineId": null, "IsInformational": false, "IsProrated": true, "FulfillmentGroupId": "59e2a249301533d5ac6b22d540c1ad", "IsInvoiceTax": false, "VatTaxCode": null, "TaxIdentifier1": "Sales and Use Tax", "TaxIdentifier2": null, "TaxIdentifier3": null, "TaxIdentifier4": null, "TaxIdentifier5": null, "Extended": {} }, { "Actions": {}, "PK": "6941645654976222023", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-08T09:16:05.497", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-08T09:16:05.497", "Messages": null, "OrgId": "ecomorg", "TaxDetailId": "Vertex-1084259800", "TaxTypeId": "SELLER_USE", "TaxCode": "Shipping", "TaxableAmount": 0.0, "TaxAmount": 0.0, "TaxRate": 0.0, "Jurisdiction": "VOLUSIA", "JurisdictionTypeId": "COUNTY", "TaxDate": "2023-09-08T00:00:00", "TaxEngineId": null, "IsInformational": false, "IsProrated": true, "FulfillmentGroupId": "59e2a249301533d5ac6b22d540c1ad", "IsInvoiceTax": false, "VatTaxCode": null, "TaxIdentifier1": "Local Sales and Use Tax (Discretionary Sales Surtax)", "TaxIdentifier2": null, "TaxIdentifier3": null, "TaxIdentifier4": null, "TaxIdentifier5": null, "Extended": {} } ], "OrderAttribute": [], "OrderCaptureDetail": [], "OrderPaymentMethod": [], "ContactPreference": [], "CustomerIdentityDoc": [], "OrderSalesAssociate": [], "OrderNote": [], "OrderHold": [], "OrderUpdatedBy": [ { "Actions": {}, "PK": "6939952987494331510", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-06T10:14:58.749", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-06T10:14:58.749", "Messages": null, "OrgId": "ecomorg", "UpdatedByUser": "admin@ecomorg.com", "UpdatedByDate": "2023-09-06", "Extended": {} }, { "Actions": {}, "PK": "6940820461464796554", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-07T10:20:46.147", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-07T10:20:46.147", "Messages": null, "OrgId": "ecomorg", "UpdatedByUser": "admin@ecomorg.com", "UpdatedByDate": "2023-09-07", "Extended": {} }, { "Actions": {}, "PK": "6941491722585444342", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-08T04:59:32.258", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-08T04:59:32.258", "Messages": null, "OrgId": "ecomorg", "UpdatedByUser": "admin@ecomorg.com", "UpdatedByDate": "2023-09-08", "Extended": {} } ], "Release": [ { "Actions": {}, "PK": "6939957598439077129", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-06T10:22:39.843", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-06T10:22:40.325", "Messages": null, "OrgId": "ecomorg", "ReleaseId": "CC101621", "ShipFromLocationId": "ecomorg:T0983", "ShipToLocationId": null, "ShipViaId": "UPSGR", "ServiceLevelCode": "UPS_GROUND", "CarrierCode": "UPS", "ReleaseType": null, "DeliveryMethodId": "ShipToAddress", "DestinationAction": "Delivery", "EffectiveRank": "05", "OrderId": "CC10162", "PurgeDate": null, "ReleaseExtension1": [], "ReleaseLine": [ { "Actions": {}, "PK": "6939957598489086015", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-06T10:22:39.849", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-06T10:22:39.849", "Messages": null, "OrgId": "ecomorg", "ReleaseLineId": "1", "OrderLineId": "1", "AllocationId": "350079099117839825602", "ItemId": "Tops-12238-Blue-L", "Quantity": 1.0, "FulfilledQuantity": 0.0, "CancelledQuantity": 0.0, "EffectiveRank": "05", "CancelledDate": null, "PurgeDate": null, "UOM": "EA", "Extended": {} } ], "Extended": {} } ], "OrderTagDetail": [ { "Actions": {}, "PK": "6939953017734457827", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-06T10:15:01.773", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-06T10:15:01.773", "Messages": null, "OrgId": "ecomorg", "ParentOrder": { "PK": "6939952986504312406" }, "Tag": "Gold Customer", "IsExternal": false, "PurgeDate": null, "Extended": {} }, { "Actions": {}, "PK": "6939953017744464844", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-06T10:15:01.774", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-06T10:15:01.774", "Messages": null, "OrgId": "ecomorg", "ParentOrder": { "PK": "6939952986504312406" }, "Tag": "Active Registered Customer", "IsExternal": false, "PurgeDate": null, "Extended": {} } ], "OrderPromisingInfo": null, "Invoice": [], "OrderType": { "OrderTypeId": "Ecom Order" }, "DocType": { "DocTypeId": "CustomerOrder" }, "SellingChannel": { "SellingChannelId": "CallCenter" }, "CancelReason": null, "TaxOverrideReason": null, "TaxExemptReason": null, "PostVoidReason": null, "PaymentStatus": { "StatusId": "3000.000" }, "RefundRecipient": { "RefundRecipientId": "Customer" }, "PublishStatus": null, "ProcessInfo": null, "OrderMilestone": [ { "Actions": {}, "PK": "6939953018264481881", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-06T10:15:01.826", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-06T10:15:01.826", "Messages": null, "OrgId": "ecomorg", "MilestoneDefinitionId": "Order::Milestone::Created", "ExpectedTime": null, "ActualTime": "2023-09-06T10:15:01.825", "NextEventTime": null, "MonitoringRuleId": null, "Extended": {} }, { "Actions": {}, "PK": "6939953018264492330", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-06T10:15:01.827", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-06T10:15:45.621", "Messages": null, "OrgId": "ecomorg", "MilestoneDefinitionId": "Order::Milestone::Confirmed", "ExpectedTime": "2023-09-06T15:15:01.825", "ActualTime": "2023-09-06T10:15:45.613", "NextEventTime": "2023-09-06T15:15:01.825", "MonitoringRuleId": "AgedConfirmationDueAlertRule", "Extended": {} }, { "Actions": {}, "PK": "6939953018274501436", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-06T10:15:01.827", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-06T10:22:33.725", "Messages": null, "OrgId": "ecomorg", "MilestoneDefinitionId": "Order::Milestone::Allocated", "ExpectedTime": null, "ActualTime": "2023-09-06T10:22:33.578", "NextEventTime": null, "MonitoringRuleId": null, "Extended": {} }, { "Actions": {}, "PK": "6939953018274513601", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-06T10:15:01.827", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-06T10:22:40.306", "Messages": null, "OrgId": "ecomorg", "MilestoneDefinitionId": "Order::Milestone::Released", "ExpectedTime": null, "ActualTime": "2023-09-06T10:22:39.976", "NextEventTime": null, "MonitoringRuleId": null, "Extended": {} }, { "Actions": {}, "PK": "6939953018274528034", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2023-09-06T10:15:01.827", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2023-09-06T10:15:01.827", "Messages": null, "OrgId": "ecomorg", "MilestoneDefinitionId": "Order::Milestone::Shipped", "ExpectedTime": null, "ActualTime": null, "NextEventTime": null, "MonitoringRuleId": null, "Extended": {} } ], "OrderMilestoneEvent": [], "OrderPromotionRequest": [], "ProcessReturnReason": null, "ReturnTrackingDetail": [], "ReturnLabel": [], "RefundPaymentMethod": null, "TaxOverrideType": null, "OrderTrackingInfo": [], "SuggestedPromo": [], "ManagerAuthDetail": [], "OrderAdditionalAttribute": null, "CustomerCommPref": [], "SelfServiceAttribute": null, "BouncebackCouponDetail": [], "Payment": null, "FulfillmentStatus": "Released", "ReturnStatus": null, "ReturnTotalWithoutFees": 0, "TotalInformationalTaxes": 0, "TotalReturnFees": 0, "CalculatedValues": { "TotalCoupons": 0, "IsSnHOverridden": false, "TotalPromotions": 0, "TotalInstructionNotes": 0, "ItemSubTotal": 39.99, "OtherCharges": 0.00, "TotalCommunicationNotes": 0, "TotalShippingCharges": 0, "TotalDiscounts": 0.00, "EstimatedTaxes": 2.60 }, "PostReleaseModificationStatus": "Failure", "MaxAppeasementAmount": 39.99, "Extended": {} }, "messageKey": null, "message": null, "errors": [], "exceptions": [], "messages": { "Message": [ { "Type": "INFO", "Code": "99999", "Description": "error.99999_en", "ShortDescription": null, "ErrorCode": null, "ErrorField": null, "ResourceId": null, "QuickInfo": false, "BusinessKeys": null, "ReasonCodeOverrideTypeCode": null } ], "Size": 1 }, "rootCause": null, "cloudComponent": "com-manh-cp-order:order,docker:10061", "cloudComponentHostName": "rubikon-vm-shabbanakuppe-305fe3a8-d2cc-49bd-a0b2-5011ece0e342", "requestUri": null, "statusCode": "OK" } The specific section where the error code and respective message is populated in the response is given below: "Messages": { "Message": [ { "Type": "INFO", "Code": "99999", "Description": "error.99999_en" } ], "Size": 1 } Illustrative Examples Fraud Response: Accepted Action to be taken: Allow the current address update transaction to go through Generate release update message and publish to fulfillment Pre condition: Post Release address update is enabled Response: Attribute Value populated in the response Order.PostReleaseUpdateActions.IsAddressAccepted true Order.PostReleaseUpdateActions.AddressRejectedErrorCode null - error message is not displayed on CSR/DSS UI if the IsAddressAccepted is true. Order.Extended custom - populate fraud response data in extended attributes store the AddressId for which the fraud verification response belongs in one of the extended attributes Order.Hold.HoldTypeId null Order.Hold.StatusId null Order.OrderLine.Extended null Order.OrderLine.Hold.HoldTypeId null Order.OrderLine.Hold.StatusId null Order.OrderLine.IsCancelled false - for each order line in the release Order.OrderLine.IsPullbackRelease false - for each order line in the release Sample Response json: { "Messages": null, "PostReleaseUpdateActions": { "IsAddressAccepted": true, "AddressRejectedErrorCode": null }, "OrderHold": null, "OrderId": "CC10278", "Extended": null, "OrderLine": [ { "OrderLineId": "1", "IsPullbackRelease": false, "IsCancelled": false, "OrderLineHold": null, "Extended": null, }, { "OrderLineId": "2", "IsPullbackRelease": false, "IsCancelled": false, "OrderLineHold": null, "Extended": null, } ] } Result: The out of the box address update successful message is displayed on the CSR or DSS UI. All order lines impacted will be updated with the new address. Release update will be generated and published to the fulfillment system with the new address. Fraud Response: Rejected Option-1: Retailer wants to reject the post release address change request and cancel the order lines Action to be taken: Terminate the current address update transaction Display appropriate error message on the CSR / DSS UI Cancel the impacted release AND cancel the impacted order lines Pre condition: Post Release address update is enabled Post Release Cancellation is enabled Response: Attribute Value populated in the response Order.PostReleaseUpdateActions.IsAddressAccepted false Order.PostReleaseUpdateActions.AddressRejectedErrorCode custom Order.Extended custom - populate fraud response data in extended attributes store the AddressId for which the fraud verification response belongs in one of the extended attributes Order.Hold.HoldTypeId null Order.Hold.StatusId null Order.OrderLine.Extended custom - populate fraud response data in extended attributes - optional Order.OrderLine.Hold.HoldTypeId null Order.OrderLine.Hold.StatusId null Order.OrderLine.IsCancelled true - for each order line in the release Order.OrderLine.IsPullbackRelease false - for each order line in the release Sample Response json: { "Messages": null, "PostReleaseUpdateActions": { "IsAddressAccepted": false, "AddressRejectedErrorCode": "ERROR12204" }, "OrderHold": null, "OrderId": "CC10278", "Extended": null, "OrderLine": [ { "OrderLineId": "1", "IsPullbackRelease": false, "IsCancelled": true, "OrderLineHold": null, "Extended": null, }, { "OrderLineId": "2", "IsPullbackRelease": false, "IsCancelled": true, "OrderLineHold": null, "Extended": null, } ] } Result: The current post release address update transaction will be terminated and impacted order lines will have the old ship to address populated A response will be generated for request rejected with the respective error message associated with the error code populated in the response, which is displayed on the CSR or DSS UI. Order extended, order line extended will be updated if they are populated in the response. Post release cancellation will be triggered for the current release. If the post release cancellation is successful, all order lines impacted will be cancelled. If all the order lines in the order are cancelled, the order is also cancelled. Option-2: Retailer wants to reject the post release address change but ship the order to the old shipping address Action to be taken: Terminate the current address update transaction Display appropriate error message on the CSR / DSS UI Keep the current release intact so that the order is shipped to the old address. Pre condition: Post Release address update is enabled Response: Attribute Value populated in the response Order.PostReleaseUpdateActions.IsAddressAccepted false Order.PostReleaseUpdateActions.AddressRejectedErrorCode custom Order.Extended custom - populate fraud response data in extended attributes store the AddressId for which the fraud verification response belongs in one of the extended attributes Order.Hold.HoldTypeId null Order.Hold.StatusId null Order.OrderLine.Extended custom - populate fraud response data in extended attributes - optional Order.OrderLine.Hold.HoldTypeId null Order.OrderLine.Hold.StatusId null Order.OrderLine.IsCancelled false - for each order line in the release Order.OrderLine.IsPullbackRelease false - for each order line in the release Sample Response json: { "Messages": null, "PostReleaseUpdateActions": { "IsAddressAccepted": false, "AddressRejectedErrorCode": "ERROR12205" }, "OrderHold": null, "OrderId": "CC10278", "Extended": null, "OrderLine": [ { "OrderLineId": "1", "IsPullbackRelease": false, "IsCancelled": false, "OrderLineHold": null, "Extended": null, }, { "OrderLineId": "2", "IsPullbackRelease": false, "IsCancelled": false, "OrderLineHold": null, "Extended": null, } ] } Result: The current post release address update transaction will be terminated and impacted order lines will have the old ship to address populated A response will be generated for request rejected with the respective error message associated with the error code populated in the response , which is displayed on the CSR or DSS UI. Order extended, order line extended will be updated if they are populated in the response. The release update message is not generated and the current release is not impacted. Option-3: Retailer wants to reject the post release address change and ship the order to the old shipping address; and followup with the customer on the address change transaction via a CSR case or any other standard operation procedure Action to be taken: Terminate the current address update transaction Keep the current release intact so that the order is shipped to the old address. Put the order on hold for any specific fraud followup standard operation procedure. Pre condition: Post release address update is enabled Order hold and hold status should exist in the system Response: Attribute Value populated in the response Order.PostReleaseUpdateActions.IsAddressAccepted false Order.PostReleaseUpdateActions.AddressRejectedErrorCode custom Order.Extended custom - populate fraud response data in extended attributes store the AddressId for which the fraud verification response belongs in one of the extended attributes Order.Hold.HoldTypeId custom - populate order hold Id Order.Hold.StatusId custom - order hold status id Order.OrderLine.Extended custom - populate fraud response data in extended attributes Order.OrderLine.Hold.HoldTypeId null Order.OrderLine.Hold.StatusId null Order.OrderLine.IsCancelled false - for each order line in the release Order.OrderLine.IsPullbackRelease false - for each order line in the release Sample Response json: { "Messages": null, "PostReleaseUpdateActions": { "IsAddressAccepted": false, "AddressRejectedErrorCode": "ERROR12206" }, "OrderHold": { "HoldTypeId":"FraudCheckHold", "StatusId":"1000" }, "OrderId": "CC10278", "Extended": null, "OrderLine": [ { "OrderLineId": "1", "IsPullbackRelease": false, "IsCancelled": false, "OrderLineHold": null, "Extended": null, }, { "OrderLineId": "2", "IsPullbackRelease": false, "IsCancelled": false, "OrderLineHold": null, "Extended": null, } ] } Result: The current post release address update transaction will be terminated and impacted order lines will be having the old ship to address populated A response will be generated for request rejected with the respective error message associated with the error code populated in the response - which is displayed on the CSR or DSS UI. Order extended, order line extended, order hold - will be updated if they are populated in the response The current release is not impacted Fraud Response: Review Note: Even though the fraud response is review, and the current post release address update transaction is yet to be verified conclusively to decide if it is a fraudulent transaction or not, the current address update transaction cannot be kept pending till the final response is received; the transaction has to be either continued or terminated immediately. The retailer is expected to track the pending fraud verification and take further action when the fraud verification is concluded as part of a custom solution. Option-1: Retailer wants to inform the customer that the post release address change request is being processed, cancel the current release and process the post release address change once the fraud verification is concluded Action to be taken: Terminate the current address update transaction Cancel the release and restore all order lines to allocated status Put the order on fraud hold Pre condition: Post Release address update is enabled Order hold and hold status should exist in the system Post Release Cancellation is enabled Response: Attribute Value populated in the response Order.PostReleaseUpdateActions.IsAddressAccepted false Order.PostReleaseUpdateActions.AddressRejectedErrorCode custom Order.Extended custom - populate fraud response data in extended attributes store the AddressId for which the fraud verification response belongs in one of the extended attribute Order.Hold.HoldTypeId custom - populate order hold Id Order.Hold.StatusId custom - order hold status id Order.OrderLine.Extended custom - populate fraud response data in extended attributes - optional store the new AddressId in one of the extended attribute Order.OrderLine.Hold.HoldTypeId null Order.OrderLine.Hold.StatusId null Order.OrderLine.IsCancelled false - for each order line in the release Order.OrderLine.IsPullbackRelease true - for each order line in the release Sample Response json: { "Messages": null, "PostReleaseUpdateActions": { "IsAddressAccepted": false, "AddressRejectedErrorCode": "ERROR12207" }, "OrderHold": { "HoldTypeId":"FraudReviewHold", "StatusId":"1000" }, "OrderId": "CC10278", "Extended": null, "OrderLine": [ { "OrderLineId": "1", "IsPullbackRelease": true, "IsCancelled": false, "OrderLineHold": null, "Extended": null, }, { "OrderLineId": "2", "IsPullbackRelease": true, "IsCancelled": false, "OrderLineHold": null, "Extended": null, } ] } Result: The current post release address update transaction will be terminated and impacted order lines will be having the old ship to address populated A response will be generated for request rejected with the respective error message associated with the error code populated in the response - which is displayed on the CSR or DSS UI. Order extended, order line extended, order hold - will be updated if they are populated in the response The current release and fulfillment will be cancelled. All order lines impacted will be restored to allocated status. Processing final response for fraud verification in "Review": The fraud verification call resulting in a "Review" response can be tracked as part of custom solution for further action after the final fraud response is received from the third party fraud verification application. The following solution can be considered for further processing the post release address update transaction that was in review on receiving the final response from the third party fraud verification application for order lines that are in allocated status with the order on fraud hold. Fraud Response Action to be taken Custom process Outcome Accepted Resolve the fraud hold and release the order with new ship to address Configure "Resubmit Pipeline" service for the Resolve Hold Modtype on the respective order config, which will indicate the system to release the order with the new ship to address Id populated on the respective order lines. Create order save payload and update the order hold to resolve the fraud hold with ResolveReasonId and ResolveComments populated, along with updating the fraud response on order.Extended entity to - Accepted Populate the orderLine.shipToAddressId with the new AddressId stored in orderLine.Extended entity for all order lines in the release Call order save API with the above order save payload Order hold should be resolved Order lines should be released with a new AddressId Rejected Resolve the fraud hold and cancel the order lines Create order save payload and update the order hold to resolve the fraud hold with ResolveReasonId and ResolveComments populated, along with updating the fraud response on order.Extended entity to - Rejected Populate the orderLine.isCancelled = true for all order lines in the release Call order save API with the above order save payload, which will indicate the system to perform post release cancellation to cancel the release and cancel the order line(s)/order. Order lines should be cancelled along with the order if all the order lines are cancelled. Option-2: Retailer wants to inform the customer that the post release address changerequest is being processed, update the release with the new address but cancel the release and order lines if the fraud verification is concluded as rejected Action to be taken: Continue the current address update transaction Generate release update message and publish to fulfillment Put the order on fraud hold Pre condition: Post Release address update is enabled Hold and hold status exist in the system Response: Attribute Value populated in the response Order.PostReleaseUpdateActions.IsAddressAccepted true Order.PostReleaseUpdateActions.AddressRejectedErrorCode custom Order.Extended custom - populate fraud response data in extended attributes store the AddressId for which the fraud verification response belongs in one of the extended attribute Order.Hold.HoldTypeId custom - populate order hold Id Order.Hold.StatusId custom - order hold status id Order.OrderLine.Extended custom - populate fraud response data in extended attributes - optional store the old AddressId in one of the extended attribute Order.OrderLine.Hold.HoldTypeId null Order.OrderLine.Hold.StatusId null Order.OrderLine.IsCancelled false - for each order line in the release Order.OrderLine.IsPullbackRelease false - for each order line in the release Sample Response json: { "Messages": null, "PostReleaseUpdateActions": { "IsAddressAccepted": false, "AddressRejectedErrorCode": "ERROR12208" }, "OrderHold": null, "OrderId": "CC10278", "Extended": null, "OrderLine": [ { "OrderLineId": "1", "IsPullbackRelease": false, "IsCancelled": false, "OrderLineHold": null, "Extended": null, }, { "OrderLineId": "2", "IsPullbackRelease": false, "IsCancelled": false, "OrderLineHold": null, "Extended": null, } ] } Result: The out of the box address update successful message is displayed on the CSR or DSS UI. All order lines impacted will be updated with the new address. Release update will be generated and published to the Fulfillment system with the new address. Order will be put on Hold Order extended, order line extended - will be updated if they are populated in the response Processing final response for fraud verification in "Review": The fraud verification call resulting in a "Review" response can be tracked as part of custom solution for further action after the final fraud response is received from the third party fraud verification application. The following solution can be considered for further processing the post release address update transaction that was in review on receiving the final response from the third party fraud verification application for order lines that are in released status having the new address Id on them with the order on fraud hold. Fraud Response Action to be taken Custom process Outcome Accepted Resolve the fraud hold from order Create order save payload and update the order hold to resolve the fraud hold with ResolveReasonId and ResolveComments populated, along with updating the fraud response on order.Extended entity to - Accepted Call order save API with the above order save payload Order fraud hold should be resolved. Rejected Resolve the fraud hold and cancel the order lines Create order save payload and update the order hold to resolve the fraud hold with ResolveReasonId and ResolveComments populated, along with updating the fraud response on order.Extended entity to - Rejected Populate the orderLine.isCancelled = true for all order lines in the release Call order save API with the above order save payload, which will indicate the system to perform post release cancellation to cancel the release and cancel the order line(s)/order. Order lines should be cancelled along with the order if all the order lines are cancelled. Option-3: Retailer wants to inform the customer that the post release address change request is under process but ship the order to the old shipping address and process the post release address change once the fraud verification is concluded Action to be taken: Terminate the current address update transaction Display appropriate error message on the CSR / DSS UI Keep the current release intact so that the order is shipped to the old address. Put the order on fraud hold Pre condition: Post Release address update is enabled Hold and hold status exist in the system Response: Attribute Value populated in the response Order.PostReleaseUpdateActions.IsAddressAccepted false Order.PostReleaseUpdateActions.AddressRejectedErrorCode custom Order.Extended custom - populate fraud response data in extended attributes store the AddressId for which the fraud verification response belongs in one of the extended attribute Order.Hold.HoldTypeId custom - populate order hold Id Order.Hold.StatusId custom - order hold status id Order.OrderLine.Extended custom - populate fraud response data in extended attributes - optional store the new AddressId in one of the extended attribute Order.OrderLine.Hold.HoldTypeId null Order.OrderLine.Hold.StatusId null Order.OrderLine.IsCancelled false - for each order line in the release Order.OrderLine.IsPullbackRelease false - for each order line in the release Sample Response json: { "Messages": null, "PostReleaseUpdateActions": { "IsAddressAccepted": false, "AddressRejectedErrorCode": "ERROR12209" }, "OrderHold": null, "OrderId": "CC10278", "Extended": null, "OrderLine": [ { "OrderLineId": "1", "IsPullbackRelease": false, "IsCancelled": false, "OrderLineHold": null, "Extended": null, }, { "OrderLineId": "2", "IsPullbackRelease": false, "IsCancelled": false, "OrderLineHold": null, "Extended": null, } ] } Result: The current post release address update transaction will be terminated and impacted order lines will be having the old ship to address populated A response will be generated for request rejected with the respective error message associated with the error code populated in the response - which is displayed on the CSR or DSS UI. Order extended, order line extended - will be updated if they are populated in the response Order will be put on Hold The release update message is NOT generated - the current release is not impacted Processing final response for fraud verification in "Review": The fraud verification call resulting in a "Review" response can be tracked as part of custom solution for further action after the final fraud response is received from the third party fraud verification application. The following solution can be considered for further processing the post release address update transaction that was in review on receiving the final response from the third party fraud verification application for order lines that are in released status having the old AddressId on it with the order on fraud hold. Fraud Response Action to be taken Custom process Outcome Accepted Resolve the fraud hold from order Re-submit the post release address change request for the AddressId for which fraud verification is accepted. To avoid possibility of the fraud check call getting in to a loop in the custom logic implemented in the user exit, it is advisable to verify if the fraud check response has already been received before making the fraud check call to third party service provider. Create order save payload and update the order hold to resolve the fraud hold with ResolveReasonId and ResolveComments populated, along with updating the fraud response on order.Extended entity to - Accepted Populate the orderLine.shipToAddressId with the new AddressId stored in orderLine.Extended entity for all order lines in the release Call order save API with the above order save payload Fraud hold applied on the order should be resolved. Post release address change request is submitted for the AddressId for which fraud verification is accepted. Rejected Resolve the fraud hold Create order save payload and update the order hold to resolve the fraud hold with ResolveReasonId and ResolveComments populated, along with updating the fraud response on order.Extended entity to - Rejected Call order save API with the above order save payload, which will indicate the system to resolve fraud hold from the order Fraud hold applied on the order should be resolved. In summary given below are the permutations and combinations of implementation flavours for post release address fraud check. Fraud verification response Terminate address update transaction? Order Line -> Shipping Address Generate Release Update? Cancel Release ? Release / Fulfillment Cancel order line ? Order Line -> Allocated Put order on Hold? Accepted No New adress Yes No Updated with new address No No No Rejected Yes Old address No Yes Cancelled Yes No No Old address No No Not updated -> old address No No Yes Review No New adress Yes No Updated with new address No No Yes Yes Old address No Yes Cancelled No Yes Yes Old address No No Not updated -> old address No No Yes High Level Process: The high level process diagram for the tentative fraud check implementation before order save is given below: FraudCheck-OnOrderSave The high level process diagram for the tentative fraud check implementation before order release is given below: FraudCheck-onOrderRelease The high level process diagram for the post release fraud check implementation is given below: Click on the diagram to magnify PostReleaseAddressUpdate-FraudCheck How to initiate change shipping address request from external systems? Change shipping address requests can be initiated from external systems such as E-Commerce integrating via API. Refer here for more API details. How to restrict the change shipping address request on a same day delivery order? Currently, the same day delivery order change address restriction can be implemented using an extension point, PostEvaluateShippingRestriction. This extension can be implemented to restrict change shipping address on SDD order line. Refer here on how to implement this UE. Feature Scope Currently, only full line change of address is supported; Unit-level updates of released units are not supported. Emails are generated on a successful address update. Fulfillment system can either send a success or failure response for a post release address change request and cannot send an accepted response and process the request later. Currently, only the synchronous mode of integration is supported between MAO and Fulfillment system - address change the request cannot be processed in asynchronous mode. UIs Entities NA Services The APIs listed in the following table are referenced in this document. Refer to the API documentation for additional details on each service. Service Component Group Service Endpoint Save Order Order Order Services /order/api/order/order/save Return all the valid mod types for input order Order Order Services /order/api/order/order/orderId/{orderId}/permittedModTypes Late Order Cancellation Fulfillment Fulfillment Process Controller /fulfillment/api/fulfillment/fulfillment/lateOrderCancellation Fulfillment Update Fulfillment Fulfillment Translate and Update Controller /fulfillment/api/fulfillment/fulfillment/update Troubleshooting Why is update address request consisting of released order lines not eligible for change shipping address? Verify if the STA released line is eligible for address update by calling the eligible mod type API for your order - {{url}}/order/api/order/order/orderId/{orderId}/permittedModTypes, verify for "OrderLine::AddressId" and "OrderLine::FulfillmentGroupId" mod types for the line. If yes, then follow step 2. Verify invoice is not created for each order line in the request. If not created, then follow step 3. Verify merge leg is not released for any of the release lines corresponding to the order lines in the request. If this condition is true, then follow step 4. Verify each order line in the request is in Released status and above but less than Packed status. If yes, then follow step 5. Verify if the release location is MA Active location for all the order lines in the request. If yes, then follow step 6. Verify if each order line in the update address request belongs to only one release. If yes, then follow step 7. Verify if any Open tracker request exists for the given order. If there are none, then follow step 8. Verify if there are no shipping restrictions. If none, then follow step 9. Verify that the update is requested for all the order-lines under the release to which the requested line belongs to. If yes, then follow step 10. Verify if all the order lines belonging to the same release have the same addresses for updating. If yes, then follow step 11. Verify if there is no country change in the update address request for any requested order line. If this verification also passes through, then the request is eligible for address update. Why is released Ship to address(STA) order line with merge leg not eligible for address update? Verify if any of the release lines has an associated allocation with type as "Merge". If so, then the line is not eligible for post release address update. Why is STA order line with shipped merge leg not eligible for address update? When a merge leg is shipped, the delivery leg is released based on configurations. I have an order line that is post the release status but the check box across it is disabled? How do I edit the address? Refer to the Eligibility for Update Address section for details on the criteria that have to be met for post release line to be eligible for address change Why is the address of the released order line not updated after requesting for address update? Verify the order save response > Refer to section Release of corresponding order lines and look for “PostReleaseModificationStatus”. If the status is Failure, Fetch the Tracker details by using the below API GET {{url}}/order/api/order/postReleaseModificationTracker?query=OrderId={orderId} If Tracker Status for a release is Failure → The address update request has failed. Possible reasons can be: If a line in the request has crossed the eligible update state in the meanwhile, example packed or fulfilled, then the tracker can be marked as Failure. If any of the below list of fields is missing from the new address to which the previous address should be updated to, then the tracker can be marked as Failure. address.Email address.Address1 address.Country address.State address.City address.PostalCode address.Phone If fulfillment was down during the request, the tracker can be marked as Failure. But, if fulfillment was down during the retry attempt, it should stay in Open status. Why is an exception thrown when change address is requested? If a 500 error is received, then possible reasons for such an exception can be that time out occurred between Order Management and Fulfillment Sync call. In such case, the transaction update on order is rolled back, and the tracker will remain in Open status for further reattempts through delayed message after a minute. Verify the tracker status as mentioned below: Fetch the Tracker details by using the below API GET {{url}}/order/api/order/postReleaseModificationTracker?query=OrderId=. {orderId} If the Tracker Status for a release is Open → The message posted is a delayed message, so please wait for a few seconds and check again. If it is still stuck in Open after a few mins then do the following: Check the Failed Messages table and filter for "PostReleaseAddressUpdateMSGType" under Message Type. If multiple rows are returned, select each row and click on VIEW at the top. Then go to the PAYLOAD DETAILS section and check that the order Id which is mentioned there is same as the order Id in your address update request. If so, come back to the main table and note which was that row. For the row found above, if the value under the Next Runtime is mentioned, then wait till that time and check again as it will retry on its own. If Next Runtime is empty, then you can manually retry. For doing so, again select the row and click on VIEW option, go to the MESSAGE DETAILS section, set the status to READY and click on the REPOST button at the bottom. If the tracker is still in Open status after the above steps, then update the tracker manually to Failure using below API, API: {{url}}/order/api/order/postReleaseModificationTracker/save Request Body{ "Messages": null, "Status": { "StatusId": "Failure" }, "UpdatedTimestamp": "2022-03-22T10:26:01.895", "CreatedBy": admin@ecomorg.com, "CreatedTimestamp": "2022-03-22T10:24:09.362", "TrackerId": "6479446492704733346", "Process": null, "ReleaseId": "MS_STA_111", "OrderId": "MS_STA_11", "OrgId": "ecomorg", "UpdatedBy": admin@ecomorg.com, "ContextId": "a0ff244f-5e54-4385-81d6-fbe2df385907", "Payload": "{\"OrderId\":\"MS_STA_11\",\"OrderLine\":[{\"OrderLineId\":\"1\",\"ShipToAddress\":{\"Actions\":{},\"PK\":\"6479446484665528335\",\"CreatedBy\":\admin@ecomorg.com\,\"CreatedTimestamp\":[2022,3,22,10,24,8,466000000],\"UpdatedBy\":\admin@ecomorg.com\,\"UpdatedTimestamp\":[2022,3,22,10,24,8,466000000],\"Messages\":null,\"OrgId\":\"ecomorg\",\"PurgeDate\":null,\"OrderId\":\"MS_STA_11\",\"AddressId\":\"5ccff7da3b8321ba6eea565c77b3c0d0\",\"IsAddressVerified\":true,\"AddressName\":\"El Paso Texas\",\"Address\":{\"FirstName\":\"Megada\",\"LastName\":\"Sujatha1\",\"Address1\":\"500 E\",\"Address2\":\"San Antonio Ave\",\"Address3\":\"#123\",\"City\":\"El Paso\",\"State\":\"TX\",\"PostalCode\":\"79901\",\"County\":\"El Paso\",\"Country\":\"US\",\"Phone\":\"423-306-1973\",\"Email\":\sujathamanhattan@gmail.com\},\"AvsReason\":null,\"AVSReasonComments\":null,\"Extended\":{}},\"AddressId\":\"5ccff7da3b8321ba6eea565c77b3c0d0\"}]}", "PK": "6479446493625704408", "PurgeDate": null, "Unique_Identifier": "6479446493625704408__6479446492704733346" } Note: Whether the address has already been updated at the fulfillment side by this time or not, if you mark the tracker as Failure, then you can request again for the same address update. If it stays open, you can't request an address update again for any order line belonging to this order. Thus, you update the status to Failure. If the address was already updated at the fulfillment side, then the tracker should now be marked as Completed based on the success response. If it was not updated at the fulfillment side, it will be a re-request to process. Related Articles Extend Pickup WindowLate Order CancellationPrevent Shipment on Payment FailurePull Back Released Orders