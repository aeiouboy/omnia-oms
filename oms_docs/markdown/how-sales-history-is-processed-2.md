# How Sales History is Processed

**Permalink:** how-sales-history-is-processed-2
**Content Length:** 17,153 characters
**Scraped:** 2025-08-09T22:37:17.388558

---

Home &rsaquo;&rsaquo;Manhattan Active® Supply Chain Planning&rsaquo;&rsaquo;Process &amp; Configuration Guides&rsaquo;&rsaquo;Feed - Sales Data ››How Sales History is Processed How&nbsp;Sales History&nbsp;is Processed &nbsp; Demand HistoryProcess FlowConfigurationImplementation FlavorsUls and EntitiesRelated Articles Sales metrics are essential for evaluating and optimizing the performance of a sales team, as sales are the primary driver of revenue for most businesses. Tracking the right metrics helps identify strengths, areas for improvement, and opportunities to align sales efforts with overall business goals to maximize revenue. Sales metrics, also known as sales performance metrics, are data points that represent the performance and potential of sales.&nbsp;Warehouse management can capture sales metrics&nbsp;through KPIs, or key performance indicators, such as:&nbsp; Inventory to sales ratio:&nbsp;The ratio of remaining inventory at the end of a month to the sales for that month.&nbsp; Inventory turnover:&nbsp;The number of times inventory is sold and replaced over a period of time.&nbsp; Inventory accuracy:&nbsp;How well the warehouse inventory matches the recorded data in the system.&nbsp; Carrying cost of inventory:&nbsp;The total expenses associated with storing unsold goods, including warehousing, insurance, depreciation, and obsolescence.&nbsp; Back order rate:&nbsp;The percentage of customer orders that cannot be fulfilled immediately because of insufficient inventory.&nbsp; Order fill rate:&nbsp;The percentage of an order that has been filled.&nbsp; Order fulfillment timeliness:&nbsp;The time it takes to fulfill an order.&nbsp; &nbsp; Note: The Demand Metrics component is designed to maintain a record of the daily, weekly, and monthly sales history. This data serves as a critical foundation for demand planning, forecasting, and replenishment processes. Demand History The Demand/Sales history interface from host systems provides daily sales data at the item-location level. This data can be transmitted either once daily or in real time, as sales occur at a location. The interface supports the &quot;ADD&quot; transaction type, meaning incoming units are added to the sales value for the corresponding transaction date. Various types of metrics can be interfaced, including: Sales Metrics: Categorized by types such as Retail, BOPIS (Buy Online, Pick Up In Store), Curbside Pickup, Ship from Store (further broken down into options like Next Day or Two-Day Shipping), promotional sales, and cleansed demand. Historical Data: Includes metrics like historical inventory, out-of-stock instances, overstock occurrences, lost sales, and promotional sales. Forecast Metrics: Cover forecast projections and forecast history, segmented by type (e.g., Retail, BOPIS, etc.). Daily Demand Metrics: Capture daily demand data and process it into weekly periods. Define the number of days stored in daily buckets versus weekly buckets for optimal analysis. This structured approach to capturing and categorizing demand history ensures that businesses have a comprehensive view of sales performance across various channels and timeframes, facilitating informed decision-making in inventory management and demand forecasting. &nbsp; Process Flow The Demand Metrics Flow begins with data inputs from external systems, including historical sales data, POS orders, and demand-related events. These inputs are published as Demand Events in the Active OM - Order Processing system and sent to Active SCP - Demand Metrics (Write) for processing. The system retrieves staged events for each item and year, determining whether an existing entry exists. If found, the new data is appended; otherwise, a new metric log entry is created. The affected items are captured, and older historical data (beyond one year) is retrieved from the Metric Log and stored in the Availability Cache. The processed data is then queued and pushed to Google Cloud Storage (GCS) for long-term retention. In the Active SCP - Demand Metrics (Read) process, when a REST API request is received for demand data, the system first checks the Availability Cache for recent records. If unavailable, the data is fetched from GCS and aggregated based on request parameters such as item ID, location, date range, and metric type. The final response is structured with the required sales or demand details and forwarded to Demand Forecasting & Replenishment for inventory planning. This process ensures real-time demand tracking, optimized storage, and efficient forecasting for replenishment decisions. Configuration To interface with the metrics data, we can use the following API Demand Metrics - Sales/ai-demandmetrics/api/ai-demandmetrics/metric { &nbsp; &nbsp; &quot;Data&quot;: [ &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;ItemId&quot;: &quot;QE_1_DM&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;LocationId&quot;: &quot;QE_Store2DM&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;MetricTypeId&quot;: &quot;CleansedSales&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;SystemGroupingKey&quot;: &quot;Default-Sales&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;LastModifiedDateTime&quot;: null, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;MetricValues&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;2023-01-22&quot;: 4870.0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;2023-01-21&quot;: 4010.0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;2023-01-15&quot;: 5756.0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;2023-01-08&quot;: 2210.0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;2023-01-01&quot;: 3077.0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;2022-12-25&quot;: 3275.0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; }, &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;ItemId&quot;: &quot;QE_2_DM&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;LocationId&quot;: &quot;QE_Store2DM&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;MetricTypeId&quot;: &quot;CleansedSales&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;SystemGroupingKey&quot;: &quot;Default-Sales&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;LastModifiedDateTime&quot;: null, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;MetricValues&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;2023-01-22&quot;: 4870.0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;2023-01-21&quot;: 4010.0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;2023-01-15&quot;: 5756.0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;2023-01-08&quot;: 2210.0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;2023-01-01&quot;: 3077.0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;2022-12-25&quot;: 3275.0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;2022-12-18&quot;: 2030.0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;2022-12-11&quot;: 2430.0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;2022-12-04&quot;: 9420.0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;2022-11-27&quot;: 3944.0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;2022-11-20&quot;: 9442.0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;2022-11-13&quot;: 3405.0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; ] } Implementation Flavors NA Uls and Entities &nbsp; Entity &nbsp; Profile Purpose &nbsp; Description &nbsp; metricsType systemAugmentable Store Metrics type configuration metricsLog dmt::metrics Store Metrics Log groupingKeyPolicy dmt::metrics Policy for consolidating grouping keys groupingKeyConsolidation dmt::metrics Grouping Key Consolidation metricGroup dmt::metrics Metric Groups enterpriseDailySales dmt::metrics save enterprise level sales at daily level metricFactor dmt::metrics Store Metric Factors for Item Location combinations metricParameter dmt::config Store demand metric component configurations &nbsp; Related Articles