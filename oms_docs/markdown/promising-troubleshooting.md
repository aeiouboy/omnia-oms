# Troubleshooting

**Permalink:** promising-troubleshooting
**Path:** Manhattan Active® Omni/Order Management/Process & Configuration Guides/Order Promising/Troubleshooting
**Content Length:** 40,121 characters
**Scraped:** 2025-08-09T21:56:11.033896

---

Home ››Manhattan Active® Omni››Order Management››Process & Configuration Guides››Order Promising ››Troubleshooting Order Promising - Troubleshooting Previous Fulfillment Optimization Config EvaluationExtended attributes added are not recognizedBOPIS - Line level overrides are not usedBOPIS - Prioritization Tiers are not usedPromising AlgorithmWhy Order(s) are split even if a Location can fulfill all line(s)Why Order(s) are not Force Allocated even if Order Line is marked as Force Allocate as TrueHow does scheduling constraints impact promising? OptimizationLocation ProximityStores are in the same Zip code but the overall cost seems to be differentWhat to do if Orders does not get allocated to the closest LocationShipping CostWhy Shipping cost is not populated/not correct as part of OptimizationPromising ResponseEarliest dates are incorrect in the responseScenarios where the Allocation will be empty in the Promising responsePromising slowness after activation of RDD flowRelated Article(s) Fulfillment Optimization Config Evaluation Extended attributes added are not recognized Fulfillment Optimization Config considers only the extended attributes defined at Order or Order Line level. Extended attributes added any where else will not be considered by Fulfillment Optimization Configuration. BOPIS - Line level overrides are not used Verify if Delivery Method is used as a filter in the Line overrides Verify if the Source type at Line override is ATC and not DC as for BOPIS order, Ship from Location ID is populated as a Store location. BOPIS - Prioritization Tiers are not used For BOPIS order - Ship from location ID is provided. So in this case Prioritization tiers are not evaluated. Only Source (Header and Line overrides) ar evaluated. So any overrides, Demand type priority defined in the prioritization tiers are ignored for BOPIS lines. Promising Algorithm Why Order(s) are split even if a Location can fulfill all line(s) Verify if Prioritization Tier is defined in the Fulfillment Optimization Config Verify if there are Location(s) which have actually allocated in the top ranked tiers than the Location which can fulfill all the line(s). If yes, Order split is inevitable. Reason - Promising is tried (max possible) for the locations in the top ranked tier before moving to the next tier. Within a Tier, Promising tries to find a location which can fulfill max line(s) or unit(s). Next tier location(s) are evaluated only for the unfulfilled unit(s) Why Order(s) are not Force Allocated even if Order Line is marked as Force Allocate as True Verify if there are multiple Line(s) in the Order and Ship From Location ID is populated for all the Line(s). If yes, then Force allocate flag sent in the Order line will be honored If Ship from Location ID is not populated for all line(s), then Force allocate flag sent in the Order will not be honored and system goes through the regular promising flow. In this flow, system uses the Force allocate flag defined in the Fulfillment Optimization Config (Prioritization Tier). Refer to B2B vs Regular promising flow for more details. How does scheduling constraints impact promising? Check the dedicated scheduling troubleshooting guide. Optimization Location Proximity Stores are in the same Zip code but the overall cost seems to be different This could have if there is any Hard cost (Shipping or Handling cost) in the same Optimization level or Preceding Optimization level. Refer to Evaluate Soft cost for more details. What to do if Orders does not get allocated to the closest Location Verify the following - Prioritization Tier: Verify if Prioritization Tier is used in the Fulfillment Optimization config. Verify if these location(s) are part of the same Location group. If different location group then there is a possibility of location (farther to the customer) are part of higher ranked tier. If these location(s) are part of the same location group or No Tiers then Postal Codes: Verify if zip code is loaded in the Geo component (API - {{url}}/geo/api/geo/zipdetails/"CountryCode"/"ZipCode"). Postal code can be Numeric or Aplha numeric.If not, follow the below section to upload the postal codes How to Load Postal codes?When using Manhattan’s Active Omni application for either Geo-proximity based sourcing and allocation (based on lat/long of sources and destinations) Radius based store look up the application requires city/state/zip code/lat & long data to be pre-loaded and maintained. If a customer order has a particular city/state/zip as its destination, that city/state/zip must exist in the application’s base data in order for store look up and/or geo-location based sourcing to work properly. Although Manhattan provides pre-loaded sample data (source: Geonames https://www.geonames.org/) for use during initial system installation, pilots, and so on, it is strongly recommended to establish a reliable external source for this data and to build a plan to refresh this data on a periodic basis, for example, yearly. Upon receipt of this data, it can be formatted and loaded into the Active database using an exposed upload API. Check the postal code GPS coordinates: API: GET : {{url}}/geo/api/geo/zipdetails/{{country code in 2 letters}}/{{postal code}} Token: System admin Upload the postal code data in the Geo Component To upload data in the Geo component, an API is exposed to load csv data from a file. POST: {{url}}/geo/api/geo/loaddata Postman Collection: Select the POST request, in the "body" section, select "form-data". in "KEY", type in 'zipCodeData' and value, Browse to the postal data file. Postal code samples can be downaloded from http://download.geonames.org/export/zip/ Verify Lat and Long: Verify if the Latitude and Longitude are correctly populated on the Origin and Destination Zip codes and Country (API - {{url}}/geo/api/geo/zipdetails/"CountryCode"/"ZipCode") Verify if the Latitude and Longitude are correctly populated for the Location (API - {{url}}/inventory/api/inventory/location/locationId/"LocationId") Find the closest Location: Compare the Lat and Long between Origin and Destination location for the location(s) Verify if the Geo component is up and running. Shipping Cost Why Shipping cost is not populated/not correct as part of Optimization Verify if Shipping Rate exists for the Origin and Destination details by invoking the API - POST {{url}}/parcel/api/parcel/shippingCostList. Sample request Compute Shipping Cost - Sample request{{url}}/parcel/api/parcel/shippingCostList { "ShippingCostRequestList": [ { "CarrierId": "UPS", "ServiceLevelId": "UPS_GROUND", "Weight": 1, "Origin": [ { "LocationId": "ecomorg:AtlantaDC", "CountryCode": "US", "CarrierCode": "UPS", "ServiceLevelCode": "UPS_GROUND", "ZipCode": "94130" } ], "Destination": { "ZipCode": "75200", "CountryCode": "US" } } ] } If Shipping rate doesn't exist then Verify if a zone and region exists by invoking the API - POST {{url}}/parcel/api/parcel/carrier/scheduleList. If zone/lane doesn't exist then Origin and Destination Region will not be populated. Scheduling - Sample request & responseSample Request - API POST {{url}}/parcel/api/parcel/carrier/scheduleList. { "CarrierSchedulingRequestList": [ { "CarrierId": "UPS", "ServiceLevelId": "UPS_GROUND", "Origin": [ { "CarrierCode": "UPS", "ServiceLevelCode": "UPS_GROUND", "LocationId": "ecomorg:AtlantaDC", "City": "Atlanta", "State": "GA", "CountryCode": "US", "ZipCode": "94130" } ], "Destination": { "City": "Atlanta", "State": "GA", "CountryCode": "US", "ZipCode": "75200" } } ] } Sample Response: When Lane is available, Origin and Destination Region is available in the response. If not, Regions will not be populated Response 1 - Lane is available { "CarrierSchedulingData": [ { "originDetails": "94130:ecomorg:AtlantaDC:Atlanta:GA:US:UPS:UPS_GROUND", "RequestId": null, "OriginZipCode": "94130", "OriginLocationId": "ecomorg:AtlantaDC", "DestinationZipCode": "75200", "DestinationLocationId": null, "OriginRegion": "941", "DestinationRegion": "752", "TransitTime": null, "IsLaneAvailable": true, "CarrierSchedulingOperatingHours": [], "CarrierCode": "UPS", "ServiceLevelCode": "UPS_GROUND", "OriginCity": "Atlanta", "DestinationCity": "Atlanta", "OriginState": "GA", "DestinationState": "GA", "OriginCountry": "US", "DestinationCountry": "US", "CarrierSchedulingHolidayList": [], "CarrierSchedulingHolidayDataList": [] } ] } Response 2 - Lane is not available { "CarrierSchedulingData": [ { "originDetails": "94130:ecomorg:AtlantaDC:Atlanta:GA:US:UPS:UPS_GROUND", "RequestId": null, "OriginZipCode": "94130", "OriginLocationId": "ecomorg:AtlantaDC", "DestinationZipCode": "75100", "DestinationLocationId": null, "OriginRegion": null, "DestinationRegion": null, "TransitTime": null, "IsLaneAvailable": false, "CarrierSchedulingOperatingHours": [], "CarrierCode": "UPS", "ServiceLevelCode": "UPS_GROUND", "OriginCity": "Atlanta", "DestinationCity": "Atlanta", "OriginState": "GA", "DestinationState": "GA", "OriginCountry": "US", "DestinationCountry": "US", "CarrierSchedulingHolidayList": [], "CarrierSchedulingHolidayDataList": [] } ] } If Zone/Lane doesn't exist then create the Zone and Zone Shipping Rates for the Region. Note: There can be overlapping Region for the Origin and Dest. details. Verify the details using the above APIs. Refer to the below section for a sample Shipping cost computation Compute Shipping Cost - ExamplesRegion: Consider the below Region set up Region Type (Zip code for US). Zip code can be 9 digit, 5 digit or 3 digit zip code. Region Type "Location" for Canada Region Type "Country" for France. Region Schema Name Region Name Region Type Country code Zip start Zip end City State Location France Schema France Country FR Canada Schema Toronto Store Location Store 1 Canada Schema Ottawa Store Location Store 2 US Schema 300 Zip code US 30000 30099 US Schema 301 Zip code US 30100 30199 US Schema 30339 Zip code US 30339 30339 US Schema 30144A Zip code US 30144 30144 US Schema 30144B Zip code US 301440000 301449999 Region is selected based on the more granular data available. Following is the order of the preference - Location, Zip Code (9 digit, 5 digit and 3 digit), City, State and finally Country. Carrier Zone: Consider the following zone/lane setup. Create lane and zones for every required "Origin Region" and "Dest. Region" combinations (for all applicable Carrier, Service levels) Lane ID Zone ID Carrier Service Level Origin Region Destination Region Comments FR-FR FR-FR UPS Ground FR FR France TR-OT TR-OT UPS Ground Toronto Store Ottawa Store Canada Stores OT-TR OT-TR UPS Ground Ottawa Store Toronto Store Canada Stores 300-301 300-301 UPS Ground 300 301 301-300 301-300 UPS Ground 301 300 300-30339 300-30339 UPS Ground 300 30339 30339-300 30339-300 UPS Ground 30339 300 30339-30144A 30339-30144A UPS Ground 30339 30144A 30339-30144B 30339-30144B UPS Ground 30339 30144B 300-30144A 300-30144A UPS Ground 300 30144A Carrier Zone selection: For the below Origin and Destination details in the Order/promising request, below lanes/zones will be considered Origin Details Dest. Details Zone/Lane considered Comments 30339 30144 30339-30144A There is a matching Region (30144A) for Destination zip code "30144" 30339 334015513 30339-30144B For Destination zip code "334015513" - Since there is region with 9 digit zip code, system considers Region 30144B. 30339 300569999 30339-300 For Destination zip code "300569999" - Since there is no region with 9 digit or 5 digit zip code, system considers the next granular Region which is Region 300. 30100 300569999 301-300 For Origin zip code "30100" - Since there is no region with 5 digit zip code, system considers the next granular Region which is Region 301. For Destination zip code "300569999" - Since there is no region with 9 digit or 5 digit zip code, system considers the next granular Region which is Region 300. 30100 30339 No Lane exists Though Regions exist for the Origin zip code and Destination zip code but no lane/zone exists for this Origin and Destination region. 300569999 334015513 300-30144A For Origin zip code "300569999" - Since there is no region with 9 or 5 digit zip code, system considers the next granular Region which is Region 300. For Destination zip code "334015513" - Since there is no region with 9 digit zip code, system considers the next granular Region which is Region 30144A (5 digit zip code). France Paris Zip - 75000 France Marseille Zip - 13000 FR-FR For Origin and Dest. - Since there is no region with zip code and city, system considers the next granular Region which is Region "FR". Lane FR-FR exists, so it is used. Ship from: Store 1 Canada Toronto Ship to: Store 2 Canada Ottawa TR-OT Once a zone is selected, Shipping rate should exist for the selected zone. If not, the Shipping rate response will be empty. Zone Shipping Rate: Consider the below shipping rate Zone ID Carrier Service Level From Weight To Weight UOM Currency Rate FR-FR UPS Ground 0.01 10 lb EUR 10 FR-FR UPS Next Day 0.01 10 lb EUR 20 TR-OT UPS Ground 0.01 10 lb CAD 5 OT-TR UPS Ground 0.01 10 lb USD 5 300-301 UPS Ground 0.01 10 lb USD 3 301-300 UPS Ground 0.01 10 lb USD 3 300-30339 UPS Ground 0.01 10 lb USD 4 300-30339 UPS Ground 10.01 20 lb USD 8 30339-300 UPS Ground 0.01 10 lb USD 4 30339-300 UPS Ground 10.01 20 lb USD 8 30339-30144A UPS Ground 0.01 10 lb USD 6 30339-30144B UPS Ground 0.01 10 lb USD 6 It is recommended to clear the Parcel cache once the Region, Zone, Zone shipping rates are configured in the Parcel DELETE : - {{url}}/parcel/api/framework/cache/clearCache/zoneCache Example 1 - Origin Details: 30339 Destination Details: 300569999 Carrier, Service level: UPS - Ground Weight: 1 lb Zone Selected: 30339-300 Shipping Rate computed: $4 Example 2 - Origin Details: 30339 Destination Details: 300569999 Carrier, Service level: UPS - Ground Weight: 12 lb Zone Selected: 30339-300 Shipping Rate computed: $8 Example 3 - Origin Details: Zip code-75000, Country - France (FR) Destination Details: Zip code-13000, Country - France (FR) Carrier, Service level: UPS - Next day Weight: 4 lb Zone Selected: FR-FR Shipping Rate computed: EUR 20 Example 4 - No Zone/Lane available Origin Details: 300569999 Destination Details: 334015513 Carrier, Service level: UPS - Ground Weight: 4 lb Zone Selected: 300-30144A Shipping Rate computed: Empty as there is no shipping rate configured Example 5 - No Shipping Rate configured for the Zone Origin Details: 30100 Destination Details: 30339 Carrier, Service level: UPS - Ground Weight: 4 lb Zone Selected: No Lane/zone exists Shipping Rate computed: Empty as there is no lane/zone configured Note: If there are multiple Region types (By Location, By Zip code, By Country) to be created then Create one region Schema and region lookup and define Region of different region type within the Region schema. Promising Response Earliest dates are incorrect in the response If Transit Time is not considered correctly then verify if there has been any recent updates to the Organization location address. If yes - If Organization local Cache is not cleared, then the promising response may give incorrect result. Workaround - Clear the Org location cache (Delete url/promising/api/promising/orgLocation/cache/clearAll) Scenarios where the Allocation will be empty in the Promising response Allocation list in the Promising response can be empty in the following scenarios { "PromisingRequestId": "137c8e6148b5ac5fc5f8183294", "RequestType": "Reservation", "MessageDTO": null, "OrganizationId": null, "PromisingRequestDetailList": [ { "PromisingRequestDetailId": "1", "ItemId": "14400", "ParentRequestDetailId": null, "Allocation": [] } ], "ExistingReservationsDetailList": [] } If there are no supply for the Item against the eligible location(s). If there are future supply but demand type doesn't consider the future supply then also the allocation can be empty If there are any line level overrides then verify if the line source ID is provided in the promising request to evaluate the source correctly. Promising slowness after activation of RDD flow After the RDD flow is activated, the response time has increased and has resulted in promising slowness leading to service degradation. Use the following Cart APIs instead of promising calls to improve the response time. POST {{url}}/promising/api/promising/cart/atp Related Article(s) How Optimization WorksCustomer Engagement ConfigurationsOverviewForce AllocateForecast ReservationProcure To SellHow Promising WorksAdvanced Shipping RestrictionsSubstitution During AllocationREST APIs and User Exits