# How Future Supply works

**Permalink:** future-supply
**Path:** Manhattan Active® Omni/Order Management/Process & Configuration Guides/Enterprise Inventory/Inventory/How Future Supply works
**Content Length:** 31,818 characters
**Scraped:** 2025-08-09T21:53:53.788439

---

Home ››Manhattan Active® Omni››Order Management››Process & Configuration Guides››Enterprise Inventory››Inventory ››How Future Supply works How Future Supply Works Previous I Next Foreword and prerequisiteFuture Transaction TypesSegments on future supplyReceiving DelayHandle Message Sequence MismatchesConfigurationsReceiving Delay ConfigurationConfiguration to Add Existing Attributes from Inventory Locations Configuration to Add Extended Attributes from Inventory LocationsTroubleshootingCan the location be updated on the purchase order?Related Article(s) Foreword and prerequisite Before starting to use future supply, the below points should be taken in consideration: For any future supply transaction to be persisted, the location should maintain "on order" (for POs) and "in transit" (for ASNs) inventory in Inventory Location Attributes. Custom supply types can only be created for on hand supply. Future Transaction Types All future supply transactions have to reference the PO/ASN ID and the PO line / ASN line ID. PO and ASN are not objects in MAO but are just attributes of the supply record. Because PO and ASN are not objects, header level updates of PO and ASN are not supported. All updates must be explicitly done at the PO/ASN line level. For that reason, header level receipt or header level verification is not supported. Future Supply Transaction Types Transaction Type Supply Updates PO Create A purchase order is an agreement between the retailer and vendor indicating the type, quantity, and agreed prices for products. The planning system creates purchase orders for vendors to fulfill the goods. POs provide visibility to the DC/store on things such as item and quantity. With this transaction type, a future supply record (PO) is created. PO Update Planning systems can update the purchase order quantity or ETA based on the negotiations with the vendor. In this case, the future supply record (PO) is updated with the latest information (quantity or ETA.). PO Update is always an absolute updates and will replace the existing quantity (minus already received). If ASN is received with partial quantity and PO and ASN still have some quantity left, PO will not be updated to a quantity lower than what is already received. PO Cancel The planning system can cancel a PO anytime after it is created based on their business needs, and is normally done when they don't need it anymore. When a PO is cancelled, its quantity is set to zero. PO Close The purchase order is closed, preventing vendors from working on the PO any longer. The planning system typically closes the PO when it is unable to cancel the PO. The future supply record (PO) quantity is set to zero. ASN Create A vendor ships goods from a vendor location to a DC/Store location. During this process, an advance shipment notice (ASN) is sent to the destination location such as a DC or store. An ASN provides a better visibility than a PO on the items, quantities shipped and ETA. This helps a DC/store to plan better. A warehouse or store can also ship goods from one location to another as part of the fulfillment flow. During this process, an ASN is generated to the destination location indicating the items, quantities shipped and ETA. In either case, a future supply record(ASN) is created in the system. Any parent future supply record (PO) is accordingly reduced based on ASN quantity. ASN Update The ETA of the ASN is updated based on the real-time transit information. The vendor, DC or store can also update the ASN quantity if any mismatches are found between the inventory. The future supply record (ASN) is updated based on the latest information. Any parent future supply records (PO) are updated accordingly based on ASN quantity. ASN Update is always an absolute updates and will replace the existing quantity (minus already received). Receipt Store/Warehouse can receive ASN/PO with TransactionTypeId = Receipt. Upon receipt, the ASN/PO quantities can be transferred to onhand quantities in the store/warehouse. This receipt can happen single/multiple times till the ASN is verified. This receipt quantity will reduce the ASN/PO quantity and increase the onhand quantity. ASN Cancel The ASN is canceled by the vendor, DC or store. The future supply record (ASN) quantity is set to zero. Any parent future supply records (PO) are updated accordingly based on ASN quantity. ASN Close The ASN can be closed if no more Items are expected against the ASN. The future supply record (ASN) quantity is set to zero. Any parent future supply records (PO) are updated accordingly based on ASN quantity. ASN Verify The warehouse verifies the ASN during the receiving process to indicate that verification is complete, and no more items are expected to be received against the ASN. Any available quantity in future supply record (ASN) is reduced to zero. These units are transferred to the parent future supply record (PO) to indicate item(s) are still not received. Note: Quantity is not mandatory for ASN verify message. If it is null then what ever received so far will be assumed to be the ASN verify quantity. System will not honor any more Receipt message post verify (Note: Receipt message can come post ASN verify because of message sequence mismatch. Refer how message sequence mismatch is handled in Enterprise Inventory Note: If QuantityAdjustmentType = S is passed along with TransactionTypeId = Receipt, the on-hand quantities in the store/warehouse will be transferred to ASN/PO quantities. This applies to situations where items received are in improper condition, and the vendor is required to re-ship the same number of units against the same ASN/PO. Future Supply Example: Transaction Transaction Type Details Supply Record T0 POCreate PO1 Created for 100 units PO1:Line1:100 T1 ASNCreate ASN1 created for 60 units PO1:Line1:40 ASN1:Line1:60 T2 ASNCreate ASN2 created for 20 units PO1:Line1:20 ASN1:Line1:60 ASN2:Line1:20 T3 Receipt Received 40 units against ASN1 PO1:Line1:20 ASN1:Line1:20 ASN2:Line1:20 On Hand:Line1:40 T4 ASNUpdate ASN1 updated as 50 units PO1:Line1:30 ASN1:Line1:10 ASN2:Line1:20 On Hand:Line1:40 T5 ASNUpdate ASN1 updated as 30 units No changes (as ASN1 is already received for 40 units) PO1:Line1:30 ASN1:Line1:10 ASN2:Line1:20 On Hand:Line1:40 T6 POUpdate PO1 updated as 90 units PO1:Line1:20 ASN1:Line1:10 ASN2:Line1:20 On Hand:Line1:40 T7 POUpdate PO1 updated as 60 units No changes (as there are ASNs for 70 units) PO1:Line1:20 ASN1:Line1:10 ASN2:Line1:20 On Hand:Line1:40 T8 POClose PO1 Closed with 100 units The PO1 Quantity and Available Quantity will be reset to 0, but the Supply Type ID will remain unchanged. Note: For Future Supply (PO, ASN) - Reference Type can be "PO", "ASN". The Reference ID is POId or ASN ID and the Reference Detail ID is PO/ASN Detail ID. If a Reference detail ID is not passed then it is auto populated as an Item ID. Example: If your supply event is related to a PO: - Reference type = "PO" - Reference ID = PO Id - Reference Detail ID = PO line ID If your supply event is related to an ASN for which you don't have a PO: - Reference type = "ASN" - Reference ID = ASN ID - Reference Detail ID = ASN line ID If your supply event is related to an ASN for which you have a PO: - Reference type = "ASN" - Reference ID = ASN ID - Reference Detail ID = ASN line ID - Parent Reference type = "PO" - Parent Reference ID = PO ID - Parent reference detail ID = PO line ID Note: In the case of inventory transfer (PO -> ASN) or PO/ASN ETA Update, the System does not recalculate Latest Dates and Committed Delivery Date. Only earliest dates, such as Earliest Ship Date and  Earliest Delivery Date are recalculated. Segments on future supply See the segmentation guide for information on future supply segmentation. Receiving Delay Receiving delay is intended to give customers the ability to delay the received inventory to e-comm channels. This allows retailers time to unpack/unbox inventory, hold back new styles from e-comm for a certain amount of time to be available for in-store customer sales. Refer to Receiving Delay Configuration for more details. Receiving Inventory Delay - Process Note: • If Receiving Delay = 0, then a reservation will not happen on receiving inventory • If Receiving Delay = null, the system will check for the next configuration Handle Message Sequence Mismatches Typically, supply event messages comes in a sequence - PO, ASN, Receipt and followed by Verification. But in exception scenarios, messages can come in the wrong sequences, like Execution system sending message in the wrong sequence or the inventory component processing the message in the wrong sequence because of multi-threading. Enterprise Inventory can handle message sequence mismatches like Receipt messages coming after Verification message or ASN message post Receipt. The system reconciles the supply quantity accordingly by either making the On Hand updates as part of verify message or creating a dummy ASN Expected sequence of message: Incorrect message sequence (supply updates handled by Enterprise Inventory system) ASN verify message before receipt Note:  If the ASN Verify message is received prior to the receipt message, then the quantity becomes mandatory in the ASN Verify message. ASN message after Receipt/Verify/Both Configurations Receiving Delay Configuration Receiving delay has two new profile purposes: inv::rules and inv::config, which needs to be synced to the active profile. Because these profile purposes have additional seed data, follow steps below to copy the seed data to the active profiles. Step1 :  Navigate to Menu > Master Data > Manage Profiles > Provisioning Profiles. Step2 : Select the base provisioning profile and click view to view the provisioning profile details. In the Provisioning Profile Detail tab, search inv::rules and inv::config profiles and click the copy icon. In the Copy Profile Data pop-up window, select the profile Id to which you want to copy the selected inv::rules and inv::config profiles and click Copy Profile Data. Step 3 : Now, select the active provisioning profile and click Sync. The Receiving Delay configuration helps in reserving inventory by adding a delay. The receiving delay can be configured for an item/location combination, certain item, certain location, or all location. After the set delay time has reached, the inventory will be available for sale across all selling channels. The receiving delay feature enables you to set up a delay specific to: Item Location Receiving Delay - To configure delay for Item/Location combination or for specific item across all locations. Refer here for more details. Inventory Location Configuration - To configure delay in specific location for all items received. Refer here for more details. Location Receiving Delay -  To configure delay for location, location type, location sub type(High volume stores/Low volume store), and all locations. Refer here for more details. Manage Reservation Hold - To change the reservation expiration date and delete a reservation after receiving a delay has been configured. Refer here for more details. Configuration to Add Existing Attributes from Inventory Locations For example, follow the below steps to add the attribute "preferredCarrier" in Location Receiving Delay Step 1: GET {{url}}/inventory/api/rules/availableEntity?size=500 If "AvailableEntityId": "location" is present, then proceed to step 2. otherwise, POST {{url}}/inventory/api/rules/availableEntity/save { "TopLevelEntity": 0, "AvailableEntityId": "location", "EntityLabel": "Location" } Step2 : POST {{url}}/inventory/api/rules/availableAttribute/save { "AvailableEntityId": "location", "AttributeLabel": "PreferredCarrier", "AttributeDataType": "text", "AvailableAttributeId": "preferredCarrier" } Step 3 : GET  {{url}}/inventory/api/rules/ruleTypeAvailableEntityXref Check if AvailableEntityId: location and RuleTypeID: LocationDefaultConfigRule are present. If present, go to step 4 Otherwise, save the Available Entity using the below API POST  {{url}}/inventory/api/rules/ruleTypeAvailableEntityXref/save { "TopLevelEntity": true, "AvailableEntity": { "AvailableEntityId": "location" }, "RuleType": { "RuleTypeId": "LocationDefaultConfigRule" } } Step 4 : POST {{url}}/inventory/api/rules/ruleTypeAvailableAttributeXref/save { "AvailableAttribute": { "AvailableEntityId": "location", "AvailableAttributeId": "preferredCarrier" }, "RuleType": { "RuleTypeId": "LocationDefaultConfigRule" } } To view the added preferred carrier location, navigate to Location Receiving Delay page and check "location.preferredCarrier" under "Attributes" . Configuration to Add Extended Attributes from Inventory Locations Step 1 : Add the below entry to availableEntity.json with TopLevelEntity as “0”. POST {{url}}/inventory/api/rules/availableEntity { "TopLevelEntity": 0, "AvailableEntityId": "extended", "EntityLabel": "Extended" } Step 2 : Add “extended” as an attribute for "location" entity with an “Object” dataType to the availableAttribute.json POST {{url}}/inventory/api/rules/availableAttribute { "AvailableEntityId": "location", "AvailableAttributeId": "extended", "AttributeDataType": "object", "AttributeLabel": "Location Extended" } Using the same API, add the required available attribute for "extended" entity Id, on which a rule has to be executed. In this example, the attribute is "size". { "AvailableEntityId": "extended", "AttributeLabel": "Size", "AttributeDataType": "number", "AvailableAttributeId": "size" } To link AvailableAttribute and AvailableEntity to a rule criteria, a) Link AvailableEntity to RuleType. POST {{url}}/inventory/api/rules/ruleTypeAvailableEntityXref { "RuleType": { "RuleTypeId": "LocationDefaultConfigRule" }, "AvailableEntity": { "AvailableEntityId": "extended" }, "TopLevelEntity": 0 } b) Now, link each of the attributes for entities to a RuleType as shown below. POST {{url}}/inventory/api/rules/ruleTypeAvailableAttributeXref/save { "RuleType": { "RuleTypeId": "LocationDefaultConfigRule" }, "AvailableAttribute": { "AvailableEntityId": "location", "AvailableAttributeId": "extended" } } Similarly, using the same API add: { "RuleType": { "RuleTypeId": "LocationDefaultConfigRule" }, "AvailableAttribute": { "AvailableEntityId": "extended", "AvailableAttributeId": "size" } } Troubleshooting Can the location be updated on the purchase order? Since the item ID and location ID serve as business keys, if a purchase order (PO) is updated with a different location ID, a new record will be created with the same PO and PO detail ID. If any orders are allocated to the original PO, they will remain allocated to the original PO. Related Article(s) Audit & ArchiveHow to Configure Supply ProfilesReapportionment Publishing InventoryHow Supply WorksOverviewTroubleshootingInfinite InventoryRest APIs & User ExitsSegmentationSupply Sync