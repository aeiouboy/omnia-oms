# Shipping Restriction

**Permalink:** shipping-restriction
**Path:** Manhattan Active® Omni/Order Management/Process & Configuration Guides/Order Orchestration/Shipping Restriction
**Content Length:** 215,257 characters
**Scraped:** 2025-08-09T21:56:45.671522

---

Home ››Manhattan Active® Omni››Order Management››Process & Configuration Guides››Order Orchestration ››Shipping Restriction Shipping Restriction Previous I Next OverviewHow Shipping Restrictions WorkProcess FlowRestriction TypesSoft CheckHard CheckShipping Restriction Order Line HoldShipping Restrictions in Contact centerConfigurationConfiguring Shipping RestrictionsConfiguring Service for Evaluating Shipping RestrictionsUser ExitsImplementation FlavorsHow to stop shipping restriction evaluation for imported ordersHow to prevent Orders from getting Allocated or Released (with Shipping Restriction Hold)How to implement shipping restrictions on a PO Box addressHow to implement shipping restrictions to restrict change of address on a post released same day delivery order lineHow to clear shipping restriction data before entering new data with a large importTroubleshootingEvaluateShippingRestrictions API is throwing a 500 exceptionRelated Articles Overview There are certain rules and restrictions which have to be evaluated by the retailer at the time of capturing or modifying an order. These restrictions are mostly shipping restrictions enforced by state/country laws that have to be evaluated before providing the appropriate shipping and delivery options to customers. For example, Fur or Leather goods cannot be shipped to California Flammables like nail polish or perfume cannot be shipped through Air Freight USPS Ground is the only shipping method allowed for PO Box or Military Zones (APO/FPO) or diplomatic offices (DTO) in US These restriction rules have to be evaluated for a given set of input parameters like item and associated item attributes(for example, Hazmat) to be shipped, shipping method selected to ship the item, the shipping address where the item is to be delivered. Also, note that the source location of the items is not considered for evaluating shipping restrictions. How Shipping Restrictions Work Retailers can choose to configure shipping restriction rules in the Shipping and Handling component, which helps to notify customers of any shipping restriction applicable during order capture or modification process. For e.g. if Blazers are to be restricted in California, then this shipping restriction can be configured from the Shipping Restrictions UI by selecting product class as Blazers and ShipToState as CA. Refer here for more details on configuration. If rules are configured, then every time an order is captured or modified with a change in shipping address, shipping method, or delivery method will result in evaluating shipping restrictions. Shipping restrictions are evaluated using EvaluateShippingRestriction service, which is a wrapper around the EvaluateShippingRestriction API. It is called to evaluate shipping restrictions when the following modtypes are triggered during order capture or modification process: Update Address Update Shipping Info Update Delivery Method Add Line This service can be enabled/disabled from the Order Configuration UI in modification rules. This service can also be called by custom mod types. Once the EvaluateShippingRestriction service is called and a response is received from the shipping and handling component, the configured restrictions are returned as an error message and displayed in the Customer Service UI, so that the contact center agent can update the shipping method or shipping address to which the item can be shipped. Although the system automatically evaluates any shipping restrictions configured in the system for ship to address order lines on order capture and modification, shipping restrictions can also be evaluated explicitly by calling the EvaluateShippingRestrictions API. Below are the sample request and response messages. Evaluate Shipping Restrictions API RequestPOST /api/snh/evaluateShippingRestrictions Note: It is mandatory to populate all the attributes in the request body except for the Id. { "ShippingDetails": [ { "Id": "2", "ItemId": "Tops-19691-Blue-S", "ShippingMethodId": "Ground", "ShipToAddress": { "Address": { "Country": "US", "PostalCode": "28211", "State": "NC", "IsPoBox": null } } } ] } Evaluate Shipping Restrictions API Response{ "ShippingDetails": [ { "isHazmat": false, "Id": "2", "ItemId": "Tops-19691-Blue-S", "ProductClass": "Tops", "ShippingMethodId": null, "ShipToAddress": { "Address": { "Country": "US", "State": "NC", "PostalCode": "28211", "IsPoBox": null } }, "ShippingRestrictions": [ { "ProductClass": "Tops", "ShippingMethodId": null, "ShipToCountry": "US", "ShipToState": "NC", "ShipToPostalCode": "28211", "ErrorCode": 10001, "IsRestricted": false, "ErrorMessage": "Item: Tops-19691-Blue-S isHazmat: false Product class: Tops cannot be shipped to Country: US State: NC Postal Code: 28211 isPostBox: NULL.", "IsHazmat": false, "isRestrictedForPoBox": null } ], "IsHazmat": false, "IsPoBox": null } ] } Note: Shipping restriction evaluation is applicable only to ship to address order lines. Process Flow Shipping Restrictions - Process Flow Restriction Types Shipping restriction rules can be configured either as soft checks or hard checks. The isRestricted flag in the shipping and handling entity determines whether a configured restriction is a soft check or hard check. If isRestricted = true ; restriction is a hard check If isRestricted = false ; restriction is a soft check Retailers can choose to configure restrictions as soft checks when they want to provide an opportunity for the contact center agent to read out restrictions to the customer and correct the shipping method or address, but also give an option to ignore the restriction without updating the valid address or shipping method and proceed with the order. On the contrary, restrictions are configured as hard checks when restrictions should not be ignored and valid shipping method or shipping address should always be updated for the restricted line. Refer here for more details on configuration. Soft Check If rules are configured as soft checks, then configured restrictions are populated as an error message for the contact center agent to acknowledge any restrictions on the order, but they do not restrict those order lines in any form. Order populates the restrictions in the order header message so that the customer service UI can display the message as an error pop-up, but these restrictions are not persisted anywhere in the order component. Soft Restriction - Sample Response{ "success": true, "header": null, "data": { "Messages": { "Message": [ { "Type": "INFO", "Code": "10209", "Description": "Tops-12238-Blue-L:10005:Product class: Tops cannot be shipped by Shipping method: OneDay Shipping Restriction.", "ShortDescription": null, "ErrorCode": null, "ErrorField": null, "ResourceId": null, "QuickInfo": false, "BusinessKeys": null } ], "Size": 1 }, "ConfirmedOrderTotal": 90.97, "PostVoidReason": null, "SuspendedOrderId": null, "Invoice": [], "CreatedTimestamp": "2022-01-31T12:23:34.658", "BusinessDate": null, "TaxOverrideValue": null, "MaxFulfillmentStatusId": "1000", "TaxExemptReason": null, "CurrencyCode": "USD", "CustomerPhone": "9945586015", "EventSubmitTime": null, "UpdatedBy": "admin@ecomorg.com", "CustomerFirstName": "Chitra", "RefundRecipient": { "RefundRecipientId": "Customer" }, "TaxExemptId": null, "OrderLineCount": 1, "OrderHold": [ { "UpdatedTimestamp": "2022-01-31T12:23:35.229", "HoldTypeId": "TaxServiceNotAvailable", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2022-01-31T12:23:35.229", "Process": null, "ResolveReasonId": null, "ExternalCreatedDate": null, "ResolveReasonComments": null, "OrgId": "ecomorg", "UpdatedBy": "admin@ecomorg.com", "ExternalCreatedBy": null, "ContextId": "6afb21c2-63f8-4317-9062-14745caf0355", "StatusId": "1000", "ApplyReasonComments": null, "PK": "6436318152292847661", "Unique_Identifier": "6436318152292847661__TaxServiceNotAvailable" } ], "ManagerAuthDetail": [], "OrderToken": "w4Mv7pb7zvc5S8Ty5g6Z007e24dbe24504c9be47b24fbee6f012", "IsArchiveInProgress": false, "IsCapturedOffline": false, "CreatedBy": "admin@ecomorg.com", "IsCancelled": false, "OrderExtension5": [], "CustomerId": "CS101451", "OrderAdditionalAttribute": null, "OrderExtension3": [], "OrderExtension4": [], "OrderExtension1": null, "OrderPaymentMethod": [], "IsTaxExempt": false, "OrderExtension2": [], "MaxReturnStatus": null, "BouncebackCouponDetail": [], "ParentReservationRequestId": null, "OrderTrackingInfo": [], "ContextId": "6afb21c2-63f8-4317-9062-14745caf0355", "ReturnLabel": [], "TotalInformationalTaxes": 0, "ArchiveDate": null, "LoyaltyNumber": null, "TaxOverrideReason": null, "StoreSaleCount": 0, "MinReturnStatusId": null, "IsTaxOverridden": false, "IsPostVoided": false, "AlternateOrderId": null, "TaxOverridePercValue": null, "CancelledOrderSubTotal": null, "OrderLine": [ { "ParentLineCreatedTimestamp": null, "CreatedTimestamp": "2022-01-31T12:23:34.659", "BusinessDate": null, "RefundPrice": null, "IsHazmat": false, "TaxOverrideValue": null, "MaxFulfillmentStatusId": "1000", "OrderLineCancelHistory": [], "StoreSaleEntryMethod": null, "IsRefundGiftCard": false, "ShippingMethodId": "OneDay", "ValueEntryRequired": false, "ItemMaxDiscountPercentage": null, "UpdatedBy": "admin@ecomorg.com", "OrderLineSalesAssociate": [], "ReleaseGroupId": null, "OrderLineSubTotal": 79.98, "ItemStyle": "12238", "ParentOrderId": null, "ReturnableQuantity": 0.0, "OrderLineHold": [], "CreatedBy": "admin@ecomorg.com", "SmallImageURI": "http://res.cloudinary.com/com-manh-cp/image/upload/12238_poolsidebluebeachwalk_a1.jpg", "IsCancelled": false, "IsDiscountable": true, "CancelledOrderLineSubTotal": null, "ItemBrand": "U.S. Polo", "ReturnType": null, "IsPerishable": false, "GiftCardValue": null, "ContextId": "6afb21c2-63f8-4317-9062-14745caf0355", "IsPriceOverridden": false, "TotalInformationalTaxes": 0, "IsPreSale": false, "HasComponents": false, "ItemMaxDiscountAmount": null, "ItemDepartmentName": null, "IsExchangeable": true, "ItemColorDescription": "Blue", "OrderLineAttribute": [], "IsReturn": false, "IsTaxOverridden": false, "OrderLineNote": [], "TaxOverridePercValue": null, "CanShipToAddress": true, "OrderLineTagDetail": [ { "OrgId": "ecomorg", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2022-01-31T12:23:35.25", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2022-01-31T12:23:35.25", "ParentOrderLine": { "PK": 6436318146592745652 }, "IsExternal": false, "ContextId": "6afb21c2-63f8-4317-9062-14745caf0355", "Process": null, "PK": "6436318152502866800", "Tag": "ProductClass", "Unique_Identifier": "6436318152502866800" } ], "OrderLinePickupDetail": [], "ShortSelfServiceUrl": null, "ProductClass": "Tops", "MinFulfillmentStatusId": "1000", "PaymentGroupId": null, "MinFulfillmentStatus": { "StatusId": "1000" }, "UpdatedTimestamp": "2022-01-31T12:23:34.659", "EffectiveRank": "05", "DeliveryMethod": { "DeliveryMethodId": "ShipToAddress" }, "TaxOverrideType": null, "TaxableAmount": 79.98, "TotalDiscountOnItem": 0, "CancelledTotalDiscounts": null, "ReturnLineTotalWithoutFees": 0, "IsReturnableAtStore": true, "FulfillmentGroupId": "117aa080a788783d63676252a090c271", "ReturnDetail": [], "OrgId": "ecomorg", "UnitPrice": 39.99, "MaxAppeasementAmount": 79.98, "ItemShortDescription": "DUVAL NOTCH NECKLINE LINEN TOP", "CarrierCode": null, "ItemBarcode": null, "QuantityDetail": [ { "Status": { "StatusId": "1000" }, "UpdatedTimestamp": "2022-01-31T12:23:34.695", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2022-01-31T12:23:34.695", "QuantityDetailId": "61523091177822104315", "Quantity": 2.0, "Process": null, "SubstitutionRatio": null, "ItemId": "Tops-12238-Blue-L", "Reason": null, "OrgId": "ecomorg", "SubstitutionType": null, "UpdatedBy": "admin@ecomorg.com", "UOM": "EACHES", "ContextId": "6afb21c2-63f8-4317-9062-14745caf0355", "StatusId": "1000", "ReasonType": null, "PK": "6436318146952784352", "Unique_Identifier": "6436318146952784352__61523091177822104315__Tops-12238-Blue-L" } ], "NextEventTime": null, "CancellationRequestStatus": null, "PromisedShipDate": null, "TotalDiscounts": 0, "AllocationConfigId": null, "ShipToAddress": { "AddressName": null, "AvsReason": null, "Address": { "Email": "csharma@manh.com", "FirstName": "Chitra", "State": "GA", "Phone": "423-306-1973", "Address2": null, "Address3": null, "Country": "US", "PostalCode": "30339", "LastName": "Sharma", "Address1": "4400 Sharon Road", "City": "Charlotte", "County": null }, "IsAddressVerified": true, "AddressId": "df6c4ce61ea633a299db9e51f79b6ae" }, "ServiceLevelCode": "ServiceLeve2222", "ItemDepartmentNumber": null, "IsReturnable": true, "IsTaxIncluded": false, "IsPriceOverrideable": true, "CustomerResponseTracker": [], "OrderLinePriceOverrideHistory": [], "IsOnHold": false, "IsReceiptExpected": true, "ItemWebURL": "", "OrderLineComponents": [], "Process": null, "ItemId": "Tops-12238-Blue-L", "PhysicalOriginId": null, "ReturnableLineTotal": 0, "SellingLocationId": null, "IsGift": false, "FulfillmentStatus": "Open", "ParentOrderLineId": null, "TotalCharges": 0, "ParentOrderLineType": null, "AddressId": "df6c4ce61ea633a299db9e51f79b6ae", "ShipFromAddress": null, "VolumetricWeight": null, "Priority": null, "ItemDeptNumber": null, "SelfServiceUrl": null, "OrderId": "CS_SR_001", "IsPreOrder": false, "PromisedDeliveryDate": null, "ItemTaxCode": null, "CancelReason": null, "LatestDeliveryDate": null, "StreetDate": null, "OrderLinePromotionRequest": [], "AlternateOrderLineId": null, "OrderLinePromisingInfo": null, "OrderLineMilestone": [ { "UpdatedTimestamp": "2022-01-31T12:23:38.46", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2022-01-31T12:23:38.46", "ExpectedTime": null, "ActualTime": null, "MilestoneDefinitionId": "OrderLine::Milestone::Released", "Process": null, "MonitoringRuleId": null, "OrgId": "ecomorg", "UpdatedBy": "admin@ecomorg.com", "ContextId": "6afb21c2-63f8-4317-9062-14745caf0355", "NextEventTime": null, "PK": "6436318184602924226", "Unique_Identifier": "6436318184602924226__OrderLine::Milestone::Released" }, { "UpdatedTimestamp": "2022-01-31T12:23:38.46", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2022-01-31T12:23:38.46", "ExpectedTime": null, "ActualTime": null, "MilestoneDefinitionId": "OrderLine::Milestone::ReadyForPickup", "Process": null, "MonitoringRuleId": null, "OrgId": "ecomorg", "UpdatedBy": "admin@ecomorg.com", "ContextId": "6afb21c2-63f8-4317-9062-14745caf0355", "NextEventTime": null, "PK": "6436318184602934474", "Unique_Identifier": "6436318184602934474__OrderLine::Milestone::ReadyForPickup" }, { "UpdatedTimestamp": "2022-01-31T12:23:38.46", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2022-01-31T12:23:38.46", "ExpectedTime": null, "ActualTime": null, "MilestoneDefinitionId": "OrderLine::Milestone::PickedUp", "Process": null, "MonitoringRuleId": null, "OrgId": "ecomorg", "UpdatedBy": "admin@ecomorg.com", "ContextId": "6afb21c2-63f8-4317-9062-14745caf0355", "NextEventTime": null, "PK": "6436318184602942536", "Unique_Identifier": "6436318184602942536__OrderLine::Milestone::PickedUp" }, { "UpdatedTimestamp": "2022-01-31T12:23:38.46", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2022-01-31T12:23:38.46", "ExpectedTime": null, "ActualTime": null, "MilestoneDefinitionId": "OrderLine::Milestone::Fulfilled", "Process": null, "MonitoringRuleId": null, "OrgId": "ecomorg", "UpdatedBy": "admin@ecomorg.com", "ContextId": "6afb21c2-63f8-4317-9062-14745caf0355", "NextEventTime": null, "PK": "6436318184602955911", "Unique_Identifier": "6436318184602955911__OrderLine::Milestone::Fulfilled" } ], "DeliveryMethodSubType": null, "DoNotShipBeforeDate": null, "OrderLineTaxDetail": [], "IsItemTaxOverridable": true, "OrderLineChargeDetail": [ { "CreatedTimestamp": "2022-01-31T12:23:34.897", "IsTaxIncluded": false, "RelatedChargeType": null, "Process": null, "UnitCharge": null, "ChargeReferenceId": null, "ChargeReferenceDetailId": null, "Reason": null, "OriginalChargeAmount": 10.99, "UpdatedBy": "admin@ecomorg.com", "TaxCode": "Shipping", "HeaderChargeDetailId": "b0e839d1686753973d70398bbb5068c4", "IsReturnCharge": false, "ChargeDetailId": "61525111892641686215", "ParentChargeDetailId": null, "RelatedOrderLineId": null, "RelatedChargeDetailId": null, "IsProratedAtSameLevel": false, "UpdatedTimestamp": "2022-01-31T12:23:34.897", "ChargePercent": null, "CreatedBy": "admin@ecomorg.com", "ChargeTotal": 10.99, "Comments": null, "TaxableAmount": null, "RequestedAmount": null, "IsLineDiscount": false, "IsCopied": false, "IsOverridden": false, "IsPostReturn": false, "ChargeSubType": null, "FulfillmentGroupId": "117aa080a788783d63676252a090c271", "OrgId": "ecomorg", "ChargeSequence": 0, "IsInformational": false, "IsCopiedHeaderCharge": false, "DiscountOn": null, "ChargeType": { "ChargeTypeId": "Shipping" }, "ChargeDisplayName": null, "ContextId": "6afb21c2-63f8-4317-9062-14745caf0355", "PK": "6436318148972838057", "Unique_Identifier": "6436318148972838057__61525111892641686215" } ], "ItemSeason": null, "OrderLineTotal": 79.98, "ItemDescription": "The Duval printed linen cap sleeve top is a summer essential. Wear this with your favorite printed", "IsItemTaxExemptable": true, "Allocation": [], "OrderLineVASInstructions": [], "PipelineId": "ShipToHome", "ItemSize": "L", "IsNonMerchandise": false, "LineType": null, "ShipToLocationId": null, "ShipFromAddressId": null, "IsActivationRequired": false, "LineShortCount": 0, "Quantity": 2.0, "IsItemNotOnFile": false, "IsPackAndHold": false, "IsGiftCard": false, "CancelComments": null, "MaxFulfillmentStatus": { "StatusId": "1000" }, "VolumetricWeightUOM": null, "OrderLineExtension1": null, "FulfillmentDetail": [], "OrderLineExtension2": [], "UOM": "EACHES", "OrderLineExtension3": [], "OrderLineExtension4": [], "OrderLineId": "1", "TotalTaxes": null, "OrderLineAdditional": null, "OrderLineMilestoneEvent": [], "TransactionReferenceId": null, "RequestedDeliveryDate": null, "PK": "6436318146592745652", "OriginalUnitPrice": 39.99, "IsEvenExchange": false, "OrderLineExtension5": [], "LineProcessInfo": null, "Unique_Identifier": "6436318146592745652__1" } ], "CustomerEmail": "csharma@manh.com", "DoNotReleaseBefore": null, "OrderNote": [], "OrderAttribute": [], "CustomerCommPref": [ { "InteractionType": { "InteractionTypeId": "TextMessage" }, "UpdatedTimestamp": "2022-01-31T12:23:34.72", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2022-01-31T12:23:34.72", "OptInStatus": { "OptInStatusId": "OptIn" }, "Process": null, "PreferenceType": { "PreferenceTypeId": "All" }, "OrgId": "ecomorg", "UpdatedBy": "admin@ecomorg.com", "ContextId": "6afb21c2-63f8-4317-9062-14745caf0355", "PK": "6436318147202803368", "CountryCode": "IN", "Unique_Identifier": "6436318147202803368" } ], "CustomerSignature": null, "RunId": null, "MinFulfillmentStatusId": "1000", "DocType": { "DocTypeId": "CustomerOrder" }, "PublishStatus": null, "MinFulfillmentStatus": { "StatusId": "1000" }, "UpdatedTimestamp": "2022-01-31T12:23:34.658", "ReturnLabelEmail": null, "ProcessReturnReason": null, "TaxOverrideType": null, "ProcessReturnComments": null, "CancelledTotalDiscounts": null, "OrderMilestoneEvent": [], "IsUnArchiveInProgress": false, "MerchSaleLineCount": 1, "CustomerIdentityDoc": [], "OrgId": "ecomorg", "OrderLocale": null, "MaxAppeasementAmount": 90.97, "IsOrderCountable": true, "OrderCaptureConfig": { "UpdatedTimestamp": "2022-01-31T12:23:34.687", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2022-01-31T12:23:34.687", "InvoiceTaxModeId": "Quotation", "Process": null, "ReturnInvoiceTaxMode": "ReturnOrderLedger", "TrackDelivery": false, "UpdatedBy": "admin@ecomorg.com", "OrgId": "ecomorg", "TaxComparisonStrategy": "Jurisdiction", "ContextId": "6afb21c2-63f8-4317-9062-14745caf0355", "PK": "6436318146872776439", "Unique_Identifier": "6436318146872776439" }, "CustomerLastName": "Sharma", "ReturnStatus": null, "CapturedDate": "2022-01-31T12:23:34.658", "CustomerTypeId": null, "NextEventTime": null, "TotalDiscounts": 0, "CancelLineCount": 0, "SelfServiceAttribute": null, "OrderUpdatedBy": [ { "OrgId": "ecomorg", "UpdatedByUser": "admin@ecomorg.com", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2022-01-31T12:23:34.687", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2022-01-31T12:23:34.687", "UpdatedByDate": "2022-01-31", "ContextId": "6afb21c2-63f8-4317-9062-14745caf0355", "Process": null, "PK": "6436318146872766771", "Unique_Identifier": "6436318146872766771__admin@ecomorg.com__2022-01-31" } ], "ReturnTrackingDetail": [], "IsOnHold": true, "Process": null, "IsConfirmed": true, "RefundPaymentMethod": null, "SellingLocationId": null, "FulfillmentStatus": "Open", "OrderChargeDetail": [ { "CreatedTimestamp": "2022-01-31T12:23:34.893", "IsTaxIncluded": false, "RelatedChargeType": null, "Process": null, "ChargeReferenceId": null, "ChargeReferenceDetailId": null, "Reason": null, "IsProrated": true, "OriginalChargeAmount": 10.99, "UpdatedBy": "admin@ecomorg.com", "TaxCode": "Shipping", "IsReturnCharge": false, "ChargeDetailId": "b0e839d1686753973d70398bbb5068c4", "ParentChargeDetailId": null, "RelatedChargeDetailId": null, "IsProratedAtSameLevel": false, "UpdatedTimestamp": "2022-01-31T12:23:34.893", "ChargePercent": null, "CreatedBy": "admin@ecomorg.com", "ChargeTotal": 10.99, "Comments": null, "TaxableAmount": 10.99, "RequestedAmount": null, "IsOverridden": false, "IsPostReturn": false, "IsOrderDiscount": false, "ChargeSubType": null, "FulfillmentGroupId": "117aa080a788783d63676252a090c271", "OrgId": "ecomorg", "ChargeSequence": 0, "IsInformational": false, "DiscountOn": null, "ChargeType": { "ChargeTypeId": "Shipping" }, "ChargeDisplayName": null, "ContextId": "6afb21c2-63f8-4317-9062-14745caf0355", "PK": "6436318148932827667", "Unique_Identifier": "6436318148932827667__b0e839d1686753973d70398bbb5068c4" } ], "OrderType": { "OrderTypeId": "Ecom Order" }, "TotalReturnFees": 0, "CountedDate": "2022-01-31T12:23:38.489", "TotalCharges": 10.99, "ReturnLineCount": 0, "PaymentStatus": { "StatusId": "1000.000" }, "OrderSalesAssociate": [], "Priority": null, "StoreReturnCount": 0, "OrderTagDetail": [ { "OrgId": "ecomorg", "UpdatedBy": "admin@ecomorg.com", "UpdatedTimestamp": "2022-01-31T12:23:35.236", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2022-01-31T12:23:35.236", "IsExternal": false, "ContextId": "6afb21c2-63f8-4317-9062-14745caf0355", "Process": null, "PK": "6436318152362857756", "Tag": "Active Registered Customer", "ParentOrder": { "PK": 6436318146582735789 }, "Unique_Identifier": "6436318152362857756" } ], "OrderId": "CS_SR_001", "OrderSubTotal": 79.98, "OrderCaptureDetail": [], "Payment": null, "CancelReason": null, "ContactPreference": [], "OrderPromotionRequest": [], "ConfirmedDate": "2022-01-31T12:23:34.695", "IsReadyForTender": false, "CustomerAddress": null, "VersionTimestamp": null, "TransactionReference": [], "TaxExemptComments": null, "CancelledOrderTotal": null, "OrderPromisingInfo": null, "MinReturnStatus": null, "OrderTaxDetail": [], "SuggestedPromo": [], "PackageCount": null, "SellingChannel": { "SellingChannelId": "Web" }, "Release": [], "ReturnTotalWithoutFees": 0, "MaxReturnStatusId": null, "MerchReturnLineCount": 0, "ProcessInfo": null, "CancelComments": null, "MaxFulfillmentStatus": { "StatusId": "1000" }, "OrderMilestone": [ { "UpdatedTimestamp": "2022-01-31T12:23:38.456", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2022-01-31T12:23:38.456", "ExpectedTime": null, "ActualTime": "2022-01-31T12:23:38.456", "MilestoneDefinitionId": "Order::Milestone::Created", "Process": null, "MonitoringRuleId": null, "OrgId": "ecomorg", "UpdatedBy": "admin@ecomorg.com", "ContextId": "6afb21c2-63f8-4317-9062-14745caf0355", "NextEventTime": null, "PK": "6436318184562878486", "Unique_Identifier": "6436318184562878486__Order::Milestone::Created" }, { "UpdatedTimestamp": "2022-01-31T12:23:38.457", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2022-01-31T12:23:38.457", "ExpectedTime": null, "ActualTime": "2022-01-31T12:23:38.456", "MilestoneDefinitionId": "Order::Milestone::Confirmed", "Process": null, "MonitoringRuleId": null, "OrgId": "ecomorg", "UpdatedBy": "admin@ecomorg.com", "ContextId": "6afb21c2-63f8-4317-9062-14745caf0355", "NextEventTime": null, "PK": "6436318184572884369", "Unique_Identifier": "6436318184572884369__Order::Milestone::Confirmed" }, { "UpdatedTimestamp": "2022-01-31T12:23:38.457", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2022-01-31T12:23:38.457", "ExpectedTime": null, "ActualTime": null, "MilestoneDefinitionId": "Order::Milestone::Allocated", "Process": null, "MonitoringRuleId": null, "OrgId": "ecomorg", "UpdatedBy": "admin@ecomorg.com", "ContextId": "6afb21c2-63f8-4317-9062-14745caf0355", "NextEventTime": null, "PK": "6436318184572893648", "Unique_Identifier": "6436318184572893648__Order::Milestone::Allocated" }, { "UpdatedTimestamp": "2022-01-31T12:23:38.457", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2022-01-31T12:23:38.457", "ExpectedTime": null, "ActualTime": null, "MilestoneDefinitionId": "Order::Milestone::Released", "Process": null, "MonitoringRuleId": null, "OrgId": "ecomorg", "UpdatedBy": "admin@ecomorg.com", "ContextId": "6afb21c2-63f8-4317-9062-14745caf0355", "NextEventTime": null, "PK": "6436318184572908252", "Unique_Identifier": "6436318184572908252__Order::Milestone::Released" }, { "UpdatedTimestamp": "2022-01-31T12:23:38.458", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2022-01-31T12:23:38.458", "ExpectedTime": null, "ActualTime": null, "MilestoneDefinitionId": "Order::Milestone::Shipped", "Process": null, "MonitoringRuleId": null, "OrgId": "ecomorg", "UpdatedBy": "admin@ecomorg.com", "ContextId": "6afb21c2-63f8-4317-9062-14745caf0355", "NextEventTime": null, "PK": "6436318184582918629", "Unique_Identifier": "6436318184582918629__Order::Milestone::Shipped" } ], "TotalTaxes": null, "PK": "6436318146582735789", "OrderFiscalDetail": null, "OrderTotal": 90.97, "Unique_Identifier": "6436318146582735789__CS_SR_001" }, "messageKey": null, "message": null, "errors": [], "exceptions": [], "messages": { "Message": [], "Size": 0 }, "rootCause": null, "cloudComponent": "com-manh-cp-order:order,docker,omni,cloud,side,om-side:8080", "cloudComponentHostName": "90dea09d0a37", "requestUri": null, "statusCode": "OK" } Hard Check If rules are configured as hard checks, then configured restriction populates as an error message and the order line with the corresponding restriction is then put on hold. Hard Restriction - Sample Response{ "success": true, "header": null, "data": { "Messages": { "Message": [ { "Type": "INFO", "Code": "10208", "Description": "Tops-19823-Green-L:10004:Product class: Tops cannot be shipped to Country: US State: GA Postal Code: 30339 .,10004:Product class: Tops cannot be shipped to Country: US State: GA .", "ShortDescription": null, "ErrorCode": null, "ErrorField": null, "ResourceId": null, "QuickInfo": false, "BusinessKeys": null } ], "Size": 1 }, "ConfirmedOrderTotal": 2.00, "PostVoidReason": null, "SuspendedOrderId": null, "Invoice": [], "CreatedTimestamp": "2022-01-24T08:05:58.801", "BusinessDate": null, "TaxOverrideValue": null, "MaxFulfillmentStatusId": "1000", "TaxExemptReason": null, "CurrencyCode": "USD", "CustomerPhone": null, "EventSubmitTime": "2038-01-18T23:59:00", "UpdatedBy": "dummyUser", "CustomerFirstName": "BD1", "RefundRecipient": { "RefundRecipientId": "Customer" }, "TaxExemptId": null, "OrderLineCount": 1, "OrderHold": [ { "UpdatedTimestamp": "2022-01-24T08:06:06.47", "HoldTypeId": "PriceServiceNotAvailable", "CreatedBy": "dummyUser", "CreatedTimestamp": "2022-01-24T08:06:03.936", "Process": null, "ResolveReasonId": "PriceCalculateSuccess", "ExternalCreatedDate": null, "ResolveReasonComments": null, "OrgId": "dummyOrg", "UpdatedBy": "dummyUser", "ExternalCreatedBy": null, "ContextId": "8e4b09ff-0df7-4cee-b85a-40e8cd484be3", "StatusId": "2000", "ApplyReasonComments": null, "PK": "6430115639363888560", "Unique_Identifier": "6430115639363888560__PriceServiceNotAvailable" }, { "UpdatedTimestamp": "2022-01-24T08:06:09.455", "HoldTypeId": "TaxServiceNotAvailable", "CreatedBy": "dummyUser", "CreatedTimestamp": "2022-01-24T08:06:09.455", "Process": null, "ResolveReasonId": null, "ExternalCreatedDate": null, "ResolveReasonComments": null, "OrgId": "dummyOrg", "UpdatedBy": "dummyUser", "ExternalCreatedBy": null, "ContextId": "8e4b09ff-0df7-4cee-b85a-40e8cd484be3", "StatusId": "1000", "ApplyReasonComments": null, "PK": "6430115694553908439", "Unique_Identifier": "6430115694553908439__TaxServiceNotAvailable" } ], "ManagerAuthDetail": [], "OrderToken": "qqJyIJZN8HxaqZ0IA4k1818ebf2e9059c7fbc2da7659e86e4f59", "IsArchiveInProgress": false, "IsCapturedOffline": false, "CreatedBy": "dummyUser", "IsCancelled": false, "OrderExtension5": [], "CustomerId": null, "OrderAdditionalAttribute": null, "OrderExtension3": [], "OrderExtension4": [], "OrderExtension1": null, "OrderPaymentMethod": [], "IsTaxExempt": false, "OrderExtension2": [], "MaxReturnStatus": null, "BouncebackCouponDetail": [], "ParentReservationRequestId": null, "OrderTrackingInfo": [], "ContextId": "8e4b09ff-0df7-4cee-b85a-40e8cd484be3", "ReturnLabel": [], "TotalInformationalTaxes": 0, "ArchiveDate": null, "LoyaltyNumber": null, "TaxOverrideReason": null, "StoreSaleCount": 0, "MinReturnStatusId": null, "IsTaxOverridden": false, "IsPostVoided": false, "AlternateOrderId": null, "TaxOverridePercValue": null, "CancelledOrderSubTotal": null, "OrderLine": [ { "ParentLineCreatedTimestamp": null, "CreatedTimestamp": "2022-01-24T08:05:59.423", "BusinessDate": null, "RefundPrice": null, "IsHazmat": false, "TaxOverrideValue": null, "MaxFulfillmentStatusId": "1000", "OrderLineCancelHistory": [], "StoreSaleEntryMethod": null, "IsRefundGiftCard": false, "ShippingMethodId": null, "ValueEntryRequired": false, "ItemMaxDiscountPercentage": null, "UpdatedBy": "dummyUser", "OrderLineSalesAssociate": [], "ReleaseGroupId": null, "OrderLineSubTotal": 2.00, "ItemStyle": "Scallop", "ParentOrderId": null, "ReturnableQuantity": 0.0, "OrderLineHold": [ { "UpdatedTimestamp": "2022-01-24T08:06:13.289", "HoldTypeId": "ShippingRestriction", "CreatedBy": "dummyUser", "CreatedTimestamp": "2022-01-24T08:06:13.289", "Process": null, "ResolveReasonId": null, "ExternalCreatedDate": null, "ResolveReasonComments": null, "OrgId": "dummyOrg", "UpdatedBy": "dummyUser", "ExternalCreatedBy": null, "ContextId": "8e4b09ff-0df7-4cee-b85a-40e8cd484be3", "StatusId": "1000", "ApplyReasonComments": "10004:Product class: Tops cannot be shipped to Country: US State: GA Postal Code: 30339 .,10004:Product class: Tops cannot be shipped to Country: US State: GA .", "PK": "6430115732893911900", "Unique_Identifier": "6430115732893911900__ShippingRestriction" } ], "CreatedBy": "dummyUser", "SmallImageURI": "37343_poolside_blue.jpg", "IsCancelled": false, "IsDiscountable": true, "CancelledOrderLineSubTotal": null, "ItemBrand": "U.S. Polo", "ReturnType": null, "IsPerishable": false, "GiftCardValue": null, "ContextId": "8e4b09ff-0df7-4cee-b85a-40e8cd484be3", "IsPriceOverridden": true, "TotalInformationalTaxes": 0, "IsPreSale": false, "HasComponents": false, "ItemMaxDiscountAmount": null, "ItemDepartmentName": null, "IsExchangeable": true, "ItemColorDescription": "Poolside Blue", "OrderLineAttribute": [], "IsReturn": false, "IsTaxOverridden": false, "OrderLineNote": [], "TaxOverridePercValue": null, "CanShipToAddress": true, "OrderLineTagDetail": [], "OrderLinePickupDetail": [], "ShortSelfServiceUrl": null, "ProductClass": "Tops", "MinFulfillmentStatusId": "1000", "PaymentGroupId": null, "MinFulfillmentStatus": { "StatusId": "1000" }, "UpdatedTimestamp": "2022-01-24T08:06:14.078", "EffectiveRank": "Not Applicable", "DeliveryMethod": { "DeliveryMethodId": "ShipToAddress" }, "TaxOverrideType": null, "TaxableAmount": 2.00, "TotalDiscountOnItem": 0, "CancelledTotalDiscounts": null, "ReturnLineTotalWithoutFees": 0, "IsReturnableAtStore": true, "FulfillmentGroupId": "d6d413f7596a316682724287361eaaf7", "ReturnDetail": [], "OrgId": "dummyOrg", "UnitPrice": 1, "MaxAppeasementAmount": 2.00, "ItemShortDescription": "Robby Item", "CarrierCode": null, "ItemBarcode": null, "QuantityDetail": [ { "Status": { "StatusId": "1000" }, "UpdatedTimestamp": "2022-01-24T08:06:03.233", "CreatedBy": "dummyUser", "CreatedTimestamp": "2022-01-24T08:06:03.233", "QuantityDetailId": "1704851026401224702115", "Quantity": 2.0, "Process": null, "SubstitutionRatio": null, "ItemId": "Tops-19823-Green-L", "Reason": null, "OrgId": "dummyOrg", "SubstitutionType": null, "UpdatedBy": "dummyUser", "UOM": "EA", "ContextId": "8e4b09ff-0df7-4cee-b85a-40e8cd484be3", "StatusId": "1000", "ReasonType": null, "PK": "6430115632333862575", "Unique_Identifier": "6430115632333862575__1704851026401224702115__Tops-19823-Green-L" } ], "NextEventTime": null, "CancellationRequestStatus": null, "PromisedShipDate": null, "TotalDiscounts": null, "AllocationConfigId": null, "ShipToAddress": { "AddressName": null, "AvsReason": null, "Address": { "Email": "yammy@rooster.net", "FirstName": "BD11", "State": "GA", "Phone": "2815551212", "Address2": null, "Address3": null, "Country": "US", "PostalCode": "30339", "LastName": "Rodgers", "Address1": "1302 Riverview Run Lane", "City": "Suwanee", "County": null }, "IsAddressVerified": false, "AddressId": "a6242b4f2669359d874823582db1f84f" }, "ServiceLevelCode": null, "ItemDepartmentNumber": null, "IsReturnable": true, "IsTaxIncluded": false, "IsPriceOverrideable": true, "CustomerResponseTracker": [], "OrderLinePriceOverrideHistory": [ { "PriceOverrideId": "1704882830058178582211", "UpdatedTimestamp": "2022-01-24T08:06:06.413", "CreatedBy": "dummyUser", "CreatedTimestamp": "2022-01-24T08:06:06.413", "Comments": null, "UpdatedPrice": 1, "Process": null, "ItemId": "Tops-19823-Green-L", "Reason": null, "OrgId": "dummyOrg", "UpdatedBy": "dummyUser", "ContextId": "8e4b09ff-0df7-4cee-b85a-40e8cd484be3", "PK": "6430115664123895819", "IsPriceOverridden": true, "PreviousPrice": null, "Unique_Identifier": "6430115664123895819__1704882830058178582211" } ], "IsOnHold": true, "IsReceiptExpected": true, "ItemWebURL": "http://www.google.com", "OrderLineComponents": [], "Process": null, "ItemId": "Tops-19823-Green-L", "PhysicalOriginId": null, "ReturnableLineTotal": 0, "SellingLocationId": null, "IsGift": false, "FulfillmentStatus": "Open", "ParentOrderLineId": null, "TotalCharges": null, "ParentOrderLineType": null, "AddressId": "a6242b4f2669359d874823582db1f84f", "ShipFromAddress": null, "VolumetricWeight": null, "Priority": null, "ItemDeptNumber": null, "SelfServiceUrl": null, "OrderId": "SN_501", "IsPreOrder": false, "PromisedDeliveryDate": null, "ItemTaxCode": null, "CancelReason": null, "LatestDeliveryDate": null, "StreetDate": null, "OrderLinePromotionRequest": [], "AlternateOrderLineId": null, "OrderLinePromisingInfo": { "InventorySegmentId": null, "CreatedTimestamp": "2022-01-24T08:05:59.46", "LastPossibleDeliveryDate": null, "ShipFromLocationId": null, "CountryOfOrigin": null, "Process": null, "InventoryTypeId": null, "ConsolidatationLocationId": null, "UpdatedBy": "dummyUser", "AsnId": null, "AsnDetailId": null, "UpdatedTimestamp": "2022-01-24T08:05:59.46", "StrategyType": null, "CreatedBy": "dummyUser", "BatchNumber": null, "ExternalRouteId": null, "IsForceAllocate": false, "ProductStatusId": null, "OrgId": "dummyOrg", "PoDetailId": null, "ItemAttribute4": null, "ContextId": "8e4b09ff-0df7-4cee-b85a-40e8cd484be3", "ItemAttribute3": null, "ItemAttribute2": null, "PK": "6430115594593828289", "ItemAttribute1": null, "PoId": null, "Unique_Identifier": "6430115594593828289", "ReqCapacityPerUnit": null, "ShipThroughLocationId": null, "ItemAttribute5": null }, "OrderLineMilestone": [ { "UpdatedTimestamp": "2022-01-24T08:06:13.994", "CreatedBy": "dummyUser", "CreatedTimestamp": "2022-01-24T08:06:13.994", "ExpectedTime": null, "ActualTime": null, "MilestoneDefinitionId": "OrderLine::Milestone::Released", "Process": null, "MonitoringRuleId": null, "OrgId": "dummyOrg", "UpdatedBy": "dummyUser", "ContextId": "8e4b09ff-0df7-4cee-b85a-40e8cd484be3", "NextEventTime": null, "PK": "6430115739943987079", "Unique_Identifier": "6430115739943987079__OrderLine::Milestone::Released" }, { "UpdatedTimestamp": "2022-01-24T08:06:14.005", "CreatedBy": "dummyUser", "CreatedTimestamp": "2022-01-24T08:06:14.005", "ExpectedTime": null, "ActualTime": null, "MilestoneDefinitionId": "OrderLine::Milestone::ReadyForPickup", "Process": null, "MonitoringRuleId": null, "OrgId": "dummyOrg", "UpdatedBy": "dummyUser", "ContextId": "8e4b09ff-0df7-4cee-b85a-40e8cd484be3", "NextEventTime": null, "PK": "6430115740053994357", "Unique_Identifier": "6430115740053994357__OrderLine::Milestone::ReadyForPickup" }, { "UpdatedTimestamp": "2022-01-24T08:06:14.006", "CreatedBy": "dummyUser", "CreatedTimestamp": "2022-01-24T08:06:14.006", "ExpectedTime": null, "ActualTime": null, "MilestoneDefinitionId": "OrderLine::Milestone::PickedUp", "Process": null, "MonitoringRuleId": null, "OrgId": "dummyOrg", "UpdatedBy": "dummyUser", "ContextId": "8e4b09ff-0df7-4cee-b85a-40e8cd484be3", "NextEventTime": null, "PK": "6430115740064003064", "Unique_Identifier": "6430115740064003064__OrderLine::Milestone::PickedUp" }, { "UpdatedTimestamp": "2022-01-24T08:06:14.007", "CreatedBy": "dummyUser", "CreatedTimestamp": "2022-01-24T08:06:14.007", "ExpectedTime": null, "ActualTime": null, "MilestoneDefinitionId": "OrderLine::Milestone::Fulfilled", "Process": null, "MonitoringRuleId": null, "OrgId": "dummyOrg", "UpdatedBy": "dummyUser", "ContextId": "8e4b09ff-0df7-4cee-b85a-40e8cd484be3", "NextEventTime": null, "PK": "6430115740074011150", "Unique_Identifier": "6430115740074011150__OrderLine::Milestone::Fulfilled" } ], "DeliveryMethodSubType": null, "DoNotShipBeforeDate": null, "OrderLineTaxDetail": [], "IsItemTaxOverridable": true, "OrderLineChargeDetail": [], "ItemSeason": null, "OrderLineTotal": 2.00, "ItemDescription": "Robby Item", "IsItemTaxExemptable": true, "Allocation": [], "OrderLineVASInstructions": [], "PipelineId": "ShipToHome", "ItemSize": "Small", "IsNonMerchandise": false, "LineType": null, "ShipToLocationId": null, "ShipFromAddressId": null, "IsActivationRequired": false, "LineShortCount": 0, "Quantity": 2.0, "IsItemNotOnFile": false, "IsPackAndHold": false, "IsGiftCard": false, "CancelComments": null, "MaxFulfillmentStatus": { "StatusId": "1000" }, "VolumetricWeightUOM": null, "OrderLineExtension1": null, "FulfillmentDetail": [], "OrderLineExtension2": [], "UOM": "EA", "OrderLineExtension3": [], "OrderLineExtension4": [], "OrderLineId": "1", "TotalTaxes": null, "OrderLineAdditional": null, "OrderLineMilestoneEvent": [], "TransactionReferenceId": null, "RequestedDeliveryDate": null, "PK": "6430115594213811486", "OriginalUnitPrice": null, "IsEvenExchange": false, "OrderLineExtension5": [], "LineProcessInfo": null, "Unique_Identifier": "6430115594213811486__1" } ], "CustomerEmail": "aa@yahoo.com", "DoNotReleaseBefore": null, "OrderNote": [], "OrderAttribute": [], "CustomerCommPref": [], "CustomerSignature": null, "RunId": null, "MinFulfillmentStatusId": "1000", "DocType": { "DocTypeId": "CustomerOrder" }, "PublishStatus": null, "MinFulfillmentStatus": { "StatusId": "1000" }, "UpdatedTimestamp": "2022-01-24T08:06:15.144", "ReturnLabelEmail": null, "ProcessReturnReason": null, "TaxOverrideType": null, "ProcessReturnComments": null, "CancelledTotalDiscounts": null, "OrderMilestoneEvent": [], "IsUnArchiveInProgress": false, "MerchSaleLineCount": 1, "CustomerIdentityDoc": [], "OrgId": "dummyOrg", "OrderLocale": null, "MaxAppeasementAmount": 2.00, "IsOrderCountable": true, "OrderCaptureConfig": { "UpdatedTimestamp": "2022-01-24T08:06:02.285", "CreatedBy": "dummyUser", "CreatedTimestamp": "2022-01-24T08:06:02.285", "InvoiceTaxModeId": "Quotation", "Process": null, "ReturnInvoiceTaxMode": "ReturnOrder", "TrackDelivery": false, "UpdatedBy": "dummyUser", "OrgId": "dummyOrg", "TaxComparisonStrategy": "Jurisdiction", "ContextId": "8e4b09ff-0df7-4cee-b85a-40e8cd484be3", "PK": "6430115622853852590", "Unique_Identifier": "6430115622853852590" }, "CustomerLastName": "Bdash1", "ReturnStatus": null, "CapturedDate": "2017-12-30T16:21:36.169", "CustomerTypeId": null, "NextEventTime": "2022-01-24T10:06:13.381", "TotalDiscounts": null, "CancelLineCount": 0, "SelfServiceAttribute": null, "OrderUpdatedBy": [ { "OrgId": "dummyOrg", "UpdatedByUser": "dummyUser", "UpdatedBy": "dummyUser", "UpdatedTimestamp": "2022-01-24T08:06:02.256", "CreatedBy": "dummyUser", "CreatedTimestamp": "2022-01-24T08:06:02.256", "UpdatedByDate": "2022-01-24", "ContextId": "8e4b09ff-0df7-4cee-b85a-40e8cd484be3", "Process": null, "PK": "6430115622563846031", "Unique_Identifier": "6430115622563846031__dummyUser__2022-01-24" } ], "ReturnTrackingDetail": [], "IsOnHold": true, "Process": null, "IsConfirmed": true, "RefundPaymentMethod": null, "SellingLocationId": null, "FulfillmentStatus": "Open", "OrderChargeDetail": [], "OrderType": { "OrderTypeId": "Ecom Order" }, "TotalReturnFees": 0, "CountedDate": "2022-01-24T08:06:15.123", "TotalCharges": null, "ReturnLineCount": 0, "PaymentStatus": { "StatusId": "1000.000" }, "OrderSalesAssociate": [], "Priority": 1, "StoreReturnCount": 0, "OrderTagDetail": [], "OrderId": "SN_501", "OrderSubTotal": 2.00, "OrderCaptureDetail": [], "Payment": null, "CancelReason": null, "ContactPreference": [], "OrderPromotionRequest": [], "ConfirmedDate": "2022-01-24T08:06:03.294", "IsReadyForTender": false, "CustomerAddress": null, "VersionTimestamp": null, "TransactionReference": [], "TaxExemptComments": null, "CancelledOrderTotal": null, "OrderPromisingInfo": null, "MinReturnStatus": null, "OrderTaxDetail": [], "SuggestedPromo": [], "PackageCount": null, "SellingChannel": null, "Release": [], "ReturnTotalWithoutFees": 0, "MaxReturnStatusId": null, "MerchReturnLineCount": 0, "ProcessInfo": null, "CancelComments": null, "MaxFulfillmentStatus": { "StatusId": "1000" }, "OrderMilestone": [ { "UpdatedTimestamp": "2022-01-24T08:06:13.413", "CreatedBy": "dummyUser", "CreatedTimestamp": "2022-01-24T08:06:13.413", "ExpectedTime": null, "ActualTime": "2022-01-24T08:06:13.381", "MilestoneDefinitionId": "Order::Milestone::Created", "Process": null, "MonitoringRuleId": null, "OrgId": "dummyOrg", "UpdatedBy": "dummyUser", "ContextId": "8e4b09ff-0df7-4cee-b85a-40e8cd484be3", "NextEventTime": null, "PK": "6430115734093923719", "Unique_Identifier": "6430115734093923719__Order::Milestone::Created" }, { "UpdatedTimestamp": "2022-01-24T08:06:13.662", "CreatedBy": "dummyUser", "CreatedTimestamp": "2022-01-24T08:06:13.418", "ExpectedTime": "2022-01-24T13:06:13.381", "ActualTime": "2022-01-24T08:06:13.381", "MilestoneDefinitionId": "Order::Milestone::Confirmed", "Process": null, "MonitoringRuleId": "AgedConfirmationDueAlertRule", "OrgId": "dummyOrg", "UpdatedBy": "dummyUser", "ContextId": "8e4b09ff-0df7-4cee-b85a-40e8cd484be3", "NextEventTime": null, "PK": "6430115734183936430", "Unique_Identifier": "6430115734183936430__Order::Milestone::Confirmed" }, { "UpdatedTimestamp": "2022-01-24T08:06:13.671", "CreatedBy": "dummyUser", "CreatedTimestamp": "2022-01-24T08:06:13.419", "ExpectedTime": "2022-01-24T10:06:13.381", "ActualTime": null, "MilestoneDefinitionId": "Order::Milestone::Allocated", "Process": null, "MonitoringRuleId": "AgedAllocationDueAlertRule", "OrgId": "dummyOrg", "UpdatedBy": "dummyUser", "ContextId": "8e4b09ff-0df7-4cee-b85a-40e8cd484be3", "NextEventTime": "2022-01-24T10:06:13.381", "PK": "6430115734193948107", "Unique_Identifier": "6430115734193948107__Order::Milestone::Allocated" }, { "UpdatedTimestamp": "2022-01-24T08:06:13.677", "CreatedBy": "dummyUser", "CreatedTimestamp": "2022-01-24T08:06:13.419", "ExpectedTime": "2022-01-24T11:06:13.381", "ActualTime": null, "MilestoneDefinitionId": "Order::Milestone::Released", "Process": null, "MonitoringRuleId": "AgedReleaseDueAlertRule", "OrgId": "dummyOrg", "UpdatedBy": "dummyUser", "ContextId": "8e4b09ff-0df7-4cee-b85a-40e8cd484be3", "NextEventTime": "2022-01-24T11:06:13.381", "PK": "6430115734193951337", "Unique_Identifier": "6430115734193951337__Order::Milestone::Released" }, { "UpdatedTimestamp": "2022-01-24T08:06:13.419", "CreatedBy": "dummyUser", "CreatedTimestamp": "2022-01-24T08:06:13.419", "ExpectedTime": null, "ActualTime": null, "MilestoneDefinitionId": "Order::Milestone::Shipped", "Process": null, "MonitoringRuleId": null, "OrgId": "dummyOrg", "UpdatedBy": "dummyUser", "ContextId": "8e4b09ff-0df7-4cee-b85a-40e8cd484be3", "NextEventTime": null, "PK": "6430115734193965786", "Unique_Identifier": "6430115734193965786__Order::Milestone::Shipped" } ], "TotalTaxes": null, "PK": "6430115587953801398", "OrderFiscalDetail": null, "OrderTotal": 2.00, "Unique_Identifier": "6430115587953801398__SN_501" }, "messageKey": null, "message": null, "errors": [], "exceptions": [], "messages": { "Message": [ { "Type": "INFO", "Code": "10208", "Description": "Tops-19823-Green-L:10004:Product class: Tops cannot be shipped to Country: US State: GA Postal Code: 30339 .,10004:Product class: Tops cannot be shipped to Country: US State: GA .", "ShortDescription": null, "ErrorCode": null, "ErrorField": null, "ResourceId": null, "QuickInfo": false, "BusinessKeys": null } ], "Size": 1 }, "rootCause": null, "cloudComponent": "com-manh-cp-order:order:10061", "cloudComponentHostName": "C02ZJ3QMLVCF", "requestUri": null, "statusCode": "OK" } For both, a warning and a hard check, the error message details for the shipping restriction will be prefixed with an error code to indicate the type of restriction: RESTRICTION_MISSING(10000), RESTRICTION_BY_COUNTRY(10004), RESTRICTION_BY_SHIPPING_METHOD(10005), DATA_EXISTS_WITH_SAME_RESTRICTION(10003) Example: Blazer-Blue-L: 10004: cannot be shipped to country : US Shipping Restriction Order Line Hold Order lines having hard bound restriction on them should be prevented from moving ahead in the order fulfillment process like allocation, release, etc., because eventually such order lines are not shippable to the customer's address. Hence, hard restricted lines are always flagged by an order line hold with holdType as ShippingRestriction and error message for the shipping restrictions are captured in OrderHold.ApplyReasonComments. Once the shipping address or shipping method is modified, and order line is no longer restricted with a hard check, the system automatically resolves the order line hold. When order line hold is applied - Sample JSON{ "OrderLineHold": [ { "UpdatedTimestamp": "2022-01-17T10:44:36.574", "HoldTypeId": "ShippingRestriction", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2022-01-17T10:44:36.574", "Process": null, "ResolveReasonId": null, "ExternalCreatedDate": null, "ResolveReasonComments": null, "OrgId": "ecomorg", "UpdatedBy": "admin@ecomorg.com", "ExternalCreatedBy": null, "ContextId": "7f66968d-5a13-448f-a962-dce5135f5134", "StatusId": "1000", "ApplyReasonComments": "10004:Product class: Tops cannot be shipped to Country: US State: GA Postal Code: 30339 Po Box .", "PK": "6424162765742478777", "Unique_Identifier": "6424162765742478777__ShippingRestriction" } ] } When order line hold is resolved - Sample JSON{ "OrderLineHold": [ { "UpdatedTimestamp": "2022-01-17T10:44:36.574", "HoldTypeId": "ShippingRestriction", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2022-01-17T10:44:36.574", "Process": null, "ResolveReasonId": "ShippingRestrictionResolved", "ExternalCreatedDate": null, "ResolveReasonComments": null, "OrgId": "ecomorg", "UpdatedBy": "admin@ecomorg.com", "ExternalCreatedBy": null, "ContextId": "7f66968d-5a13-448f-a962-dce5135f5134", "StatusId": "2000", "ApplyReasonComments": "", "PK": "6424162765742478777", "Unique_Identifier": "6424162765742478777__ShippingRestriction" } ] } Refer here for more details on how to restrict allocation or release for hard restricted lines. Shipping Restrictions in Contact center The existing 'Evaluate Shipping Restrictions' option in the Call center config mentioned will soon be depreciated. To evaluate shipping restriction as a warning/ soft check (no change in order line status) or hard check (order line goes on hold if there is a shipping restriction), refer to ' Shipping restrictions'. The 'Is Restricted'' flag can be used to add a shipping restriction as a hard check and put the order line on hold if it has a shipping restriction. Until the 'Evaluate Shipping Restrictions' option in the Call center config is depreciated. Users will see two pop-ups with the shipping restrictions info if the call center config and Order config shipping restrictions are both turned on at the same time. To avoid seeing 2 popups for the same functionality. Please uncheck the call center config and use only the Shipping restrictions config to set shipping restrictions. Configuration Component Configuration Additional Details Shipping and Handling (SnH) Create Shipping Restrictions rules in SnH component UI: Shipping and Handling >> Shipping Restrictions UI API: /snh/api/snh/shippingRestriction/save While configuring the rules, Enable isRestricted flag to true for hard restriction check Click here Order Enable service for evaluating shipping restrictions on order modification Order Configuration >> Modification Rules >> Order Line >> Enable Evaluate Shipping Restrictions Click here Configuring Shipping Restrictions Retailers can configure shipping restriction rules in the Shipping and Handling component as mentioned below: Attribute Attribute Category Description Shipping Restriction Id Id (optional - will be auto generated by the system if left blank) Description Description of the shipping restriction (optional) Product Class Condition to be satisfied for applying the Shipping Restriction Shipping restriction is applicable if the item belongs to the specified Product Class Is Hazmat Shipping restriction is applicable if item is a Hazmat item (isHazmat = true) Note : To apply this restriction, item should be configured as "Hazmat" in handling attributes under item component. Shipping Method Id Shipping restriction is applicable for the specified Shipping Method Ship To Country Shipping Restrictions for the specified Country, Postal Code, or State Shipping restriction is applicable if the item has to be shipped to a specified Country Ship To Postal Code Shipping restriction is applicable if the item has to be shipped to a specified Postal Code Ship To State Shipping restriction is applicable if the item has to be shipped to a specified State Is Restricted Restriction Type If it is a hard stop and the order line with restriction needs to be put on hold Is Restricted For Po Box Shipping restriction is applicable if Ship To Address is identified as a PO Box. The third-party AVS provider must provide PO Box identifier and the PO Box field on the request should be populated for base to handle PO Box restrictions. Additional Information Message Any additional information that has to be appended to the message returned in the response as part of Shipping Restriction evaluation Given below are some examples of Shipping Restrictions that can be configured. Scenario ShippingRestrictionId Description ProductClass IsHazmat ShippingMethodId ShipToCountry ShipToPostalCode ShipToState IsRestricted IsRestrictedForPoBox AdditionalInformation Cannot ship items belonging to a specific product class to a specific country Gaza Strip PCAMN0001 PS TRUE Cannot ship items belonging to a specific product class to a specific postal code PCFWB0003 90230 FALSE Cannot ship items belonging to a specific product class to a specific state PCFUR0100 CA TRUE Cannot use certain Shipping Method for delivering Hazmat items TRUE AirFreight TRUE Cannot use specific Shipping Method for any item to an address designated as PO Box AirFreight TRUE TRUE Only USPS Shipping Method can be selected for PO Box Cannot ship items belonging to a specific product class to a specific Zip Code (identified as FPO/APO/DTO PCAMN0001 90231 Shipping restriction rules can either be configured from the Shipping Restrictions UI or by using the below API. Refer here for more details on how to configure from UI. POST: /snh/api/snh/shippingRestriction/save Configuring shipping restrictions - Request Json { "AdditionalInformation": "perfume is hazmat", "Description": "", "ShipToCountry": "", "IsHazmat": true, "IsRestricted": true, "ShippingRestrictionId": "2", "ShippingMethodId": "OneDay", "ShipToPostalCode": "", "ShipToState": "GA", "LocalizedData": [], "ProductClass": "Perfume", "IsRestrictedForPoBox": false } Configuring shipping restrictions - Response Json{ "success": true, "header": null, "data": { "Messages": null, "ProfileId": "ecomorg", "AdditionalInformation": "perfume is hazmat", "UpdatedTimestamp": "2022-01-28T09:46:54.303", "Description": "", "CreatedBy": "admin@ecomorg.com", "CreatedTimestamp": "2022-01-28T09:46:54.303", "ShipToCountry": "", "IsHazmat": true, "IsRestricted": true, "Process": null, "ShippingRestrictionId": "2", "ShippingMethodId": "OneDay", "ShipToPostalCode": "", "UpdatedBy": "admin@ecomorg.com", "ShipToState": "GA", "ContextId": "b593dba3-672f-4899-97bb-a1b14d633248", "LocalizedData": [], "PK": "6433632143037672580", "ProductClass": "Perfume", "IsRestrictedForPoBox": false, "Unique_Identifier": "6433632143037672580__2" }, "messageKey": null, "message": null, "errors": [], "exceptions": [], "messages": { "Message": [], "Size": 0 }, "rootCause": null, "cloudComponent": "com-manh-cp-snh:snh,docker,omni,cloud,side,om-side:8080", "cloudComponentHostName": "86be051e5304", "requestUri": null, "statusCode": "OK" } Configuring Service for Evaluating Shipping Restrictions EvaluateShippingRestriction service can be enabled from the modification rules in Order Configuration. Refer here for more details on how to configure. Order Configuration >> Modification Rules >> Order Line >> Enable Evaluate Shipping Restrictions for below Mod types: Add Line Update Delivery Method Update Shipping Info Update Address User Exits Access the user exit documentation for more details on the below user exit User Exit Input Order:Order:UserExit:PreEvaluateShippingRestriction ShippingRestrictionRequestDTO Order How to access Omnifacade app -> Developer Resource -> Order -> Order User Exit Documentation Grants required omnifacade::order::userexit::read Implementation Flavors How to stop shipping restriction evaluation for imported orders "ShippingRestrictionsEvaluated" flag should be set to true under OrderActions while importing Order so that EvaluateShippingRestrictions service is not called during Order Create/update process. { "OrderActions": { "IsAlreadyPriced": true, "IsAlreadyCharged": true, "IsAlreadyTaxed": true, "IsImport": true, "ShippingRestrictionsEvaluated": true } } How to prevent Orders from getting Allocated or Released (with Shipping Restriction Hold) Extended attribute needs to be configured manually in fulfillment optimization and release configuration templates, which considers the shipping restriction hold type as an order line criterion to restrict allocation/release of order lines with shipping restrictions hold (filter criteria having holdType=ShippingRestriction) How to implement shipping restrictions on a PO Box address Enable isRestrictedForPobox to true while configuring shipping restrictions and identify the shipping address as a PO box address using Order:Order:UserExit:PreEvaluateShippingRestriction. How to implement shipping restrictions to restrict change of address on a post released same day delivery order line Enable extension SnH:ShippingRestriction:UserExit:PostEvaluate. Perform get of {{url}}/snh/api/ServiceDefinition/extensionPoint?size=200 for "ExtensionPointId": "SnH:ShippingRestriction:UserExit:PostEvaluate", update flag isEvent as false. The input for this UE is the response of shipping restriction evaluation and order DTO. The post released lines can be evaluated for any Same day delivery order line address change and if the carrier is unable to support the same, then respond with an error. The response of this UE should adhere to Shipping Restriction evaluation response. SamplePostEvaluateShippingRestrictionRequest{ "ShippingDetails": [ { "isHazmat": true, "poBox": true, "Id": "1", "ItemId": "string", "ProductClass": "string", "ShippingMethodId": "1D", "ShipToAddress": { "Address": { "Country": "string", "State": "string", "PostalCode": "string", "IsPoBox": true } }, "ShippingRestrictions": [ { "ProductClass": "string", "ShippingMethodId": "string", "ShipToCountry": "string", "ShipToState": "string", "ShipToPostalCode": "string", "ErrorCode": 123, "IsHazmat": true, "isRestrictedForPoBox": true, "ErrorMessage": "Same Day Delivery Not Supported", "IsRestricted": true } ], "IsHazmat": true }, { "isHazmat": false, "poBox": null, "Id": "3", "ItemId": "Diamond_Ring-99101-White-L", "ProductClass": "Diamond_Ring", "ShippingMethodId": "Standard", "ShipToAddress": { "Address": { "Country": "US", "State": "GA", "PostalCode": "30339", "IsPoBox": null } }, "ShippingRestrictions": [ { "ProductClass": "Diamond_Ring", "ShippingMethodId": null, "ShipToCountry": "US", "ShipToState": "GE", "ShipToPostalCode": "30339", "ErrorCode": 10004, "IsHazmat": false, "isRestrictedForPoBox": false, "ErrorMessage": "Product class: Diamond_Ring cannot be shipped to Country: US State: GE Postal Code: 30339 .", "IsRestricted": true } ], "IsHazmat": false } ], "Order": null } While using this extension, add order fields that are required for evaluation, define a new response template with exact name "DefaultShippingRestrictionOrderTemplate". This configured order subobjects and their fields will be sent in the UE request under section "Order". Use the below API to create a new response template, {{url}}/order/api/fwcore/responseTemplate/save SamplePostEvaluateShippingRestrictionResponse{ "ShippingDetails": [ { "isHazmat": true, "poBox": true, "Id": "1", "ItemId": "string", "ProductClass": "string", "ShippingMethodId": "1D", "ShipToAddress": { "Address": { "Country": "string", "State": "string", "PostalCode": "string", "IsPoBox": true } }, "ShippingRestrictions": [ { "ProductClass": "string", "ShippingMethodId": "string", "ShipToCountry": "string", "ShipToState": "string", "ShipToPostalCode": "string", "ErrorCode": 123, "IsHazmat": true, "isRestrictedForPoBox": true, "ErrorMessage": "Same Day Delivery Not Supported", "IsRestricted": true } ], "IsHazmat": true }, { "isHazmat": false, "poBox": null, "Id": "3", "ItemId": "Diamond_Ring-99101-White-L", "ProductClass": "Diamond_Ring", "ShippingMethodId": "Standard", "ShipToAddress": { "Address": { "Country": "US", "State": "GA", "PostalCode": "30339", "IsPoBox": null } }, "ShippingRestrictions": [ { "ProductClass": "Diamond_Ring", "ShippingMethodId": null, "ShipToCountry": "US", "ShipToState": "GE", "ShipToPostalCode": "30339", "ErrorCode": 10004, "IsHazmat": false, "isRestrictedForPoBox": false, "ErrorMessage": "Product class: Diamond_Ring cannot be shipped to Country: US State: GE Postal Code: 30339 .", "IsRestricted": true } ], "IsHazmat": false } ], "Order": null } How to clear shipping restriction data before entering new data with a large import This can be achieved using Action Reset. Refer below for API details - POST /snh/api/snh/shippingRestriction/import Sample Request { "data": [ "Actions": { "ShippingRestrictions": "RESET" }, { "ShippingMethodId": "Saturday", "Address1": null, "ShipToCountry": "US", "ShipToState": "AA", "ShipToCity": "APO", "ProductClass": null, "ShipToPostalCode": null, "IsRestricted": false, "IsHazmat": false } } Troubleshooting EvaluateShippingRestrictions API is throwing a 500 exception Make sure there are no spaces in the ShippingRestrictionId while providing configuration. Related Articles Order CancellationDelivery TrackingPublishing Order Cart and Preview ModeMod TypesOrder TaggingOrder Audit Order Orchestration ConfigurationOrder ArchivingHoldsOrder Orchestration ProcessCreating and Updating Order