# Offline Troubleshooting

**Permalink:** offline-troubleshooting
**Path:** Manhattan Active® Omni/Store/Process & Configuration Guides/Point of Sale/POS Guides/POS Offline/POS Offline Troubleshooting
**Content Length:** 111,115 characters
**Scraped:** 2025-08-09T22:02:36.623757

---

Home ››Manhattan Active® Omni››Store››Process & Configuration Guides››Point of Sale››POS Guides››POS Offline ››Offline Troubleshooting POS 2.0 Offline Troubleshooting Overview Data Export TroubleshootingCheck the status of an Individual Export: Status remains in the INITIATED stateStatus remains in the STARTED statusStatus:GENERATION_SUCCESSStatus:COMPRESSEDStatus:UPLOAD_INPROGRESSStatus remains in the END_OF_LIFE_TIMEOUTStatus remains in the NO_DATAStatus:GENERATION_FAILUREStatus:SUCCESSStatus:FALUREValidate for awpf related message typesUnderstanding the Status of a Device Using the RegisterInfo EntityRegisterInfoRegisterImportDetailUseful APIsUse Cases for Leveraging RegisterInfo to Troubleshoot IssuesNot getting the switch to offline option on my deviceIdentify which day's export the device is using for each import type (e.g., Item, Tax)Promotion TroubleshootingData Import Troubleshooting Overview This guide provides detailed steps and troubleshooting instructions for identifying and resolving issues related to offline within the Manhattan Active® Omni POS. Data Export Troubleshooting Check the status of an Individual Export: This section provides instructions on how to verify the status of an individual export process for various components. To verify the status of an individual export, use the following HTTP GET method. API to Check the status of an Individual Export HTTP Method: GET API: {{url}}/<component name goes here>/api/entity/exportStatus/<export id goes here> User to be used to generate token - The user must be an organization user with authorisation to run the API and set ups Status remains in the INITIATED state The next possible steps are STARTED, NO_DATA and FAILURE. Step 1: Check the Queue and Consumers Queue Name: queue.OfflineExportTrigger Check if there are any messages stuck in the queue. Verify whether there are any consumers active for this queue. Step 2: Actions Based on Observations Scenario A: No Messages in the Queue Check for the outbound message type OfflineExportTriggerMsgType: Ensure it is present and enabled. If not available, import it from the base profile. Trigger the export again after enabling it. Check for necessary awpf related message types - Awpf message type troubleshooting If no issues are found related to message types, check the failed messages for OfflineExportTriggerMsgType to identify any underlying errors. Scenario B: No Consumers Present Check for the inbound message type OfflineExportTriggerMsgType for the com-manh-cp-backoffice component. If missing, import it from the base profile. If the message type is present, but consumers are not running: Wait for the consumers to come up. If they do not appear after some time: Check whether an ALL container or a Low Volume Processor (LVP) is deployed for the com-manh-cp-backoffice component. If neither is present, contact the Ops team. Scenario C: Messages and Consumers Are Present Wait a few minutes and observe whether the message count in the queue decreases. If messages remain stuck: Check Kibana logs for the com-manh-cp-backoffice component and look for errors or processing issues. Status remains in the STARTED status Please note that transitioning from the STARTED status to the next status depends on how much data is present for the respective entities. For example, if there is a large volume of data for items or prices, it may take several hours for the respective status to change. The next possible steps are NO_DATA, GENERATION_SUCCESS, GENERATION_FAILURE and FAILURE. Step 1: Check the Queue and Consumers The transition from the STARTED state to other states occurs when the backoffice component posts messages to the respective components of export types, which then consume those messages and export the data. Please find the details of the relevant message types and queues below. Ensure respective inbound and outbound message types present and enabled. If not available, import it from the base profile. Export type Queue name OutBoundMessageType & InBoundMessageType InBoundMessageType component OutBoundMessageType component Item offlineEntityExportEventItem OfflineEntityExportEventItemMSGType com-manh-cp-item com-manh-cp-backoffice ItemWithPrice queue.OfflineExportItemWithPricesTrigger OfflineExportItemWithPricesTriggerMsgType com-manh-cp-backoffice com-manh-cp-backoffice GenericPrice offlineEntityExportEventPricePromo OfflineEntityExportEventPricePromoMSGType com-manh-cp-pricepromo com-manh-cp-backoffice LocationPrice offlineEntityExportEventPricePromo OfflineEntityExportEventPricePromoMSGType com-manh-cp-pricepromo com-manh-cp-backoffice Promotion offlineEntityExportEventPricePromo OfflineEntityExportEventPricePromoMSGType com-manh-cp-pricepromo com-manh-cp-backoffice User offlineEntityExportEventOrg OfflineEntityExportEventOrgMSGType com-manh-cp-organization com-manh-cp-backoffice Grant offlineEntityExportEventOrg OfflineEntityExportEventOrgMSGType com-manh-cp-organization com-manh-cp-backoffice Tax offlineEntityExportEventTax OfflineEntityExportEventTaxMSGType com-manh-cp-organization com-manh-cp-backoffice BundleData offlineEntityExportEventBackoffice OfflineEntityExportEventBackofficeMSGType com-manh-cp-backoffice com-manh-cp-backoffice Check if there are any messages stuck in the queue for the export type. Verify whether there are any consumers active for this queue. Step 2: Actions Based on Observations Scenario A: No Messages in the Queue Check for necessary awpf related message types - Awpf message type troubleshooting If no issues are found related to message types, check the failed messages for respective message type for the export type to identify any underlying errors. If there are no issues related to message types and there are no failed messages Check if there are any messages in fwEntityExport-<component name wthout com-manh-cp- prefix> , if there are no messages here, since use config director 2 framework to export the data, compare all the inboundMessageType, outboundMessageType and extPointToMessageType of the respective components and import them to your profile and try. Export type Component name Entity export queue Item com-manh-cp-item fwEntityExport-item GenericPrice com-manh-cp-pricepromo fwEntityExport-pricepromo LocationPrice com-manh-cp-pricepromo fwEntityExport-pricepromo Promotion com-manh-cp-pricepromo fwEntityExport-pricepromo User com-manh-cp-organization fwEntityExport-organization Grant com-manh-cp-organization fwEntityExport-organization Tax com-manh-cp-tax fwEntityExport-tax BundleData com-manh-cp-backoffice com-manh-cp-backoffice Scenario B: No Consumers Present If the message type is present, but consumers are not running: Wait for the consumers to come up. If they do not appear after some time: Check whether an ALL container or a Low Volume Processor (LVP) is deployed for the com-manh-cp-backoffice component. If neither is present, contact the Ops team. Scenario C: Messages and Consumers Are Present Wait a few minutes and observe whether the message count in the queue fwEntityExport-<component name wthout com-manh-cp- prefix> decreases. If messages remain stuck for very long time: Check Kibana logs for the respective component and look for errors or processing issues. Status:GENERATION_SUCCESS This status indicates that the data files have been generated, and they will be zipped and exported in the subsequent steps. The status is not expected to remain in this state for an extended period. It should transition to one of the following: COMPRESSED, UPLOAD_INPROGRESS, SUCCESS, or FAILURE. Status:COMPRESSED This status indicates that zip file is created, and it will be exported in the subsequent steps. The status is not expected to remain in this state for an extended period. It should transition to one of the following: UPLOAD_INPROGRESS, SUCCESS, or FAILURE. Status:UPLOAD_INPROGRESS This status indicates that zip file is getting uploaded to the object store. The status is not expected to remain in this state for an extended period. It should transition to one of the following: SUCCESS, or FAILURE. Status remains in the END_OF_LIFE_TIMEOUT This status indicates that the export remained in one of the previous statuses for over 24 hours and did not transition to any of the valid end statuses. You will need to re-trigger the export and identify the status in which it is getting stuck, then troubleshoot accordingly. Status remains in the NO_DATA This status indicates that there is no data to export for the given export type. It is an expected end state of the export process. Status:GENERATION_FAILURE This status indicates that an error occurred during the data file generation for the export. This should be a rare scenario, as the process uses the Config Director 2 framework. It may be a temporary failure, and you can try re-triggering the export to see if it resolves the issue. Status:SUCCESS This status indicates that all of the steps are successfully executed. It is an expected end state of the export process. Status:FALURE This status indicates that an exception occurred in the code during the export process. You can check the logs of the backoffice component for more details. If the root cause is not clear, consider reaching out to the development team for assistance. Validate for awpf related message types For all status transitions, certain AWPF-related message types must be present in your profile. Check if the following AWPF-related inbound message types are present: OfflineExportStatusUpdateMsgType, awpf-payload, awpf-processedmsg, awpf-acknowledgement, awpf-delayed-payload-schedule, awpf-delayed-payload, awpf-track-payload, awpf-consolidate-payload, awpf-semi-sync-payload . If any are missing, import them from the base profile to your project profile. Check if the following AWPF-related outbound message types are present: OfflineExportStatusUpdateMsgType,awpf-processedmsg, awpf-payload, awpf-junkyard,awpf-reprocess, awpf-logPersistentMessagesToStore, awpf-ackPersistentMessagesToStore, awpf-docPersistentMessagesToStore, awpf-docPersistentMessagesToStoreTrnxl, awpf-delayed-payload-schedule, awpf-delayed-payload, awpf-track-payload, awpf-consolidate-payload, awpf-semi-sync-payload.  If any of these are not present, import them from the base profile to your profile Along with this there should be at least one unacked message should be present in queue awpf-delayed-payload-schedule-bcf Understanding the Status of a Device Using the RegisterInfo Entity The RegisterInfo entity is designed to store information about a device’s status in the cloud. Since we cannot directly communicate with the device’s local database, this entity helps provide insights into what might be happening on the device. Note: This is different from the DeviceInfo table, which serves a separate purpose. Register info is stored in tw entities entities: RegisterInfo and RegisterImportDetail RegisterInfo This entity stores high-level, cloud-side information about a device's current status. It provides insights such as health, connectivity, offline readiness, and sync activity. Field Description Comments DeviceId Unique identifier of the device. LocationId Current device location info. ShortDeviceId Short device ID. RegisterId Current device register info. OfflineReady Indicates whether the app was offline ready or not. OfflineDisableReason Reasons why the offline switch was disabled on this device. UnsyncedOrderCount Number of orders yet to be synced to the cloud from this device. LastPingTimestamp UTC timestamp of the last time the device communicated with the backend server. This timestamp is in UTC timezone RegisterImportDetail This entity stores detailed records of the most recent data imports (e.g., items, taxes, prices) for a device. It tracks versioning, download and import timestamps, and file names for each data type, offering low-level visibility into the master data state on the device. Field Description Comments Type Type/Entity of the import. E.g., Item, Tax, Grant, etc. CurrentVersion Active IndexedDB version of the type in the device. DownloadedTimestamp Indicates when the export file was last successfully downloaded to the device. This timestamp is in the timezone of the device ImportedTimestamp Indicates when the export was last successfully processed on the device. This timestamp is in the timezone of the device FileName File name of the export. Useful APIs Note : Response of below APIs includes both RegisterInfo & RegisterImportDetail entities Get registerInfo for all the devices in the org {{url}}/devicemanagement/api/devicemanagement/registerInfo?size=99999 Get registerInfo for all the devices in the store {{url}}/devicemanagement/api/devicemanagement/registerInfo?size=99999&query=LocationId='<store id goes here>' Get registerInfo for a device {{url}}/devicemanagement/api/devicemanagement/registerInfo?size=99999&query=DeviceId='<device id goes here>' Use Cases for Leveraging RegisterInfo to Troubleshoot Issues Not getting the switch to offline option on my device You can use the OfflineDisableReason field to understand the possible reasons for the device Reason Code Description Possible next steps RegisterInfo Offline is disabled for the type of register Check if the register is offline enabled Item Item data is not imported to the device Check the status of the export Tax Tax data is not imported to the device Check the status of the export User User data is not imported to the device Check the status of the export Grant Grant data is not imported to the device Check the status of the export Identify which day's export the device is using for each import type (e.g., Item, Tax) You can use the FileName field in the RegisterImportDetail entity to determine which export file was used to import data into the device. This field contains the name of the file, from which the UTC export date can be inferred.ort used. Format of the file name - <org>_<Type of export>_<Location>_<Timestamp of export in UTC - yyyy-MM-dd'T'HH:mm:ss.SSSSSS> Example - tm-demo-us_Grant_tm-demo-us:80228-1028_2025-02-28T07:43:41.704198.zip In this example, 2025-02-28 is the export date for the grant Note : When data is being imported into the device: First, the export file is downloaded. After the download, the DownloadedTimestamp and FileName fields are updated. The ImportedTimestamp field is then updated once the file has been successfully processed on the device and the data is ready for use. If the ImportedTimestamp(Device timezone) is older than the current FileName’s timestamp(UTC timezone), it indicates that the latest file may not have been processed yet. In such cases, the data being used might still correspond to an earlier export. Promotion Troubleshooting 1. I just added or modified a promotion, but it’s not applying in offline mode when I add an item to the cart, even though it works in online mode. Why? If the promotion is working in online mode but not in offline mode, it’s likely that the offline device hasn’t received the latest promotion data.If the promotion was added or modified on the same day, you need to trigger the promotion export job again. This ensures the updated promotion is synced to the offline device.Until the export is triggered, the new or updated promotion will not be available in offline mode. 2. I can see the export file in IndexedDB, but promotions are still not applying in offline mode. Why? To verify if the offline promotion service is ready, follow these steps: Open the Network tab in the browser's developer tools after logging into the POS application. Look for the **/healthcheck** API call: If it appears red (failed), the promotion service is not yet up. Wait for a few minutes and refresh/check again. Once the **/healthcheck** call returns a 200 OK, the system will trigger two additional API calls: **/featureFlagImport** **/importConfigurations** If both of these return a 200 OK, the Offline Promotion Service is ready and promotions should begin applying in offline mode. { "success": true, "header": null, "data": { "Messages": null, "IsFeatureFlagLoaded": true, "IsConfigurationLoaded": true, "IsPromotionServiceReady": true }, "messageKey": null, "message": null, "errors": [], "exceptions": [], "messages": { "Message": [], "Size": 0 }, "rootCause": null, "cloudComponent": "com-manh-cp-pricepromo-1", "cloudComponentHostName": "DHKKQGFPWX", "requestUri": null, "statusCode": "OK" } 3. It's been more than 10 minutes, and while the java.exe process is visible in Task Manager, the /featureFlagImport and /importConfigurations APIs are still failing (showing red status or returning 403 Forbidden). What should I do? To fix this you can do the below steps, You need to install the application using Windows PowerShell (Run as Administrator). This will install the ManhSCALE certificate which is being used by the promo server. If the execution policy is not available / set in this VM then set it Set-ExecutionPolicy -ExecutionPolicy Unrestricted -Scope CurrentUser Run this command for installing the store App .\Install.ps1 If you encounter Security Warning while running the power shell then make sure to select Run Once option 4. How do I know that the promo service is up? You can go to task manager → Details. When you launch the app, you should see BridgeLauncher.exe getting launched. Then once that closes, you should see POSDeviceBridge.exe getting launched and immediately after that java.exe (this is your promo server). The BridgeLauncher.exe copies all the necessary files to the local app path. The POSDeviceBridge.exe launches the promo server as a java application in your local. The java.exe is your promo server, it takes approximately 2 minutes to start once you see the java.exe in your task manager. The metrics tab will tell you when your promo is ready with the data 5. I do not see the java.exe promo service in the Task Manager → Details tab. What should I check? If the java.exe process (which runs the offline promo service) is not visible in Task Manager under the Details tab, follow these steps to troubleshoot: Ensure the required environment variable is correctly configured. Make sure there are no typos, incorrect casing, or extra spaces When you launch the application,check following path on the Windows device:  C:\Users\POS15\AppData\Local\Packages\com.manh.storeui_h35559jr9hy9m\LocalState. At this location, The Promo folder and POSDeviceBridge should be present. Below is the reference When you navigate to the Promo folder, it should appear as shown below. All files within this folder are important. Ensure that: The jdk-11 folder is extracted from the OpenJDK zip file and is present in the path. The META-INF and WEB-INF folders are available. The promoVersion file is present, as it  control upgrade If the jdk-11 folder is missing, it indicates that the OpenJDK zip file is corrupted or only partially downloaded. Check the file size — it should be approximately 43 MB. Data Import Troubleshooting 1. Offline Import Worker is not triggering ? What is happening ? What should I check? All of the below mentioned logs will be Present in Kibana Offline Login Check Log: OfflineImportService:executeOfflineImport : Skipping import as this is an offline login. Possible Cause:The user has logged in pure offline login. Resolution:Ensure the user logs in online mode before attempting to trigger the import. Iris Resource Access Check Log:OfflineImportService:executeOfflineImport : Iris resource not available to the user, skipping the sync. Possible Cause:User lacks permission or access to the IRIS resource. Resolution:Verify user entitlement and role-based access to IRIS. Store Details Not Available Log:OfflineImportService:executeOfflineImport : StoreDetails is not available in local storage yet probably because user has not selected the store yet, re triggering the sync. Possible Cause:Store selection has not been completed. Resolution:Ask the user to select a store before initiating offline import. Register Data Not Available Log:OfflineImportService:executeOfflineImport : registerData is not available in local storage yet probably because user has not done the pos settings yet, re triggering the sync. Possible Cause:POS setup has not been completed. Resolution:Complete the POS settings and register configuration. Register Type Not Configured Log:OfflineImportService:executeOfflineImport : Register type is not set in the pos settings, skipping the sync. Possible Cause:Register type missing in POS settings. Resolution: Configure the register type under POS settings. Register Type Not Supported in Offline Mode Log:OfflineImportService:executeOfflineImport : Offline is not configured for register type, skipping the sync. Possible Cause:Current register type not eligible for offline (e.g., mobile registers). Resolution:Check offline configuration policies for the register type. Enable if needed. (Under Store Common Config => Offline Supported Register Type) Worker Already Running Log:OfflineImportService:executeOfflineImport : Offline import worker already exists, import process is in progress. Possible Cause:A previous import is still running in the background. Resolution:Wait for the ongoing process to finish, or restart the app to reset the worker. Worker Timeout Log:OfflineImportService:executeOfflineImport : Offline import worker terminated due to a timeout of {WORKER_TIMEOUT_MS}. Possible Cause:Worker took too long (possible large dataset or performance bottleneck). Resolution:Investigate the size of the imported data. Worker Failure Status Log:OfflineImportService:executeOfflineImport : Received response from the import worker: Failure Possible Cause:Worker completed but returned status = Failure. Resolution:Check logs emitted by the worker (from e.data.data). 2. What are some of the logs emitted by the worker? INFO LOGS OFFLINE : OfflineImportWorker:processOfflineImport : OfflineImportWorker triggered, Received: {\"isTrusted\":true} from the main thread. Starting offline import process. OFFLINE: OfflineImportWorker:processOfflineImport Status for the UI Extension Metadata import - true , System Data Import - true OFFLINE : OfflineSyncWorker:processOfflineImport : Time taken to complete the import items 3259.7000000011176 ms. Item with Prices Enabled : false ERROR LOGS OFFLINE : OfflineImportWorker:callAPIToDownloadExportAndExtractData : Data not found for ${TYPE} for the day OFFLINE: OfflineImportWorker:callAPIToDownloadExportAndExtractData : Received response with invalid status: ${res?.status}. Expected 200 or 404. OFFLINE : OfflineImportWorker:processOfflineImport : Export Date: 2025-04-21 and Offline Import Status : Entity Import: SUCCESS, Item Import: SUCCESS, Promotion Import : SUCCESS, System Data Import : SUCCESS, UI Extension  Metadata Import : SUCCESS OFFLINE: OfflineImportWorker:processOfflineImport : Error occurred while importing the data in the worker OFFLINE: OfflineImportWorker:importDataForPromotionEntities : Data not found for Promotion for the day. Returning importDataForPromotionEntitiesSuccess status as success. This will be retried on the next login OFFLINE: OfflineImportWorker:saveImportedDataToLocalPromoService: Promotion Import Status : SUCCESS, Feature Flags Import: SUCCESS, Promo Configuration Import: SUCCESS OFFLINE: OfflineImportWorker:importDataForEntities: Data not found for entity ${TYPE} for the day. Considering the status of success. This will be retried on the next login OFFLINE: OfflineImportWorker:importDataForEntities: Error occurred in importDataForEntities ${ERROR} OFFLINE: OfflineImportWorker:importDataForEntities: Error occurred in importDataForItemAndPrice ${ERROR} OFFLINE: OfflineImportWorker:extractNestedZip: Error while extracting nested zip file for Entity ${entity} and DB Name ${itemDbName} : ${JSON.stringify(error)} DEBUG LOGS OFFLINE : OfflineImportWorker:isImportRequired : Import required: true, Export type: ${TYPE} OFFLINE : OfflineImportWorker:importDataForItemAndPrice Processed Item export file in ${endTime - startTime} ms. OFFLINE: OfflineImportWorker:importDataForItemandPrice Processed ItemPrice export files in ${endTime - startTime} ms. OFFLINE : OfflineImportWorker:callAPIToDownloadExportAndExtractData : Calling API to download export: exportType=User, endpoint=/storefacade/api/storefacade/backoffice/offline/downloadExport OFFLINE : OfflineImportWorker:callAPIToDownloadExportAndExtractData : Time taken to download export file for User: 4573.800000000745 ms OFFLINE : OfflineImportWorker:callAPIToDownloadExportAndExtractData : Received response for export type: User, status: 200, data: {}. OFFLINE : OfflineImportWorker:processFiles : Processing 1 files for entity: User, dbName: user-v4, tableName: User, schema: UserId