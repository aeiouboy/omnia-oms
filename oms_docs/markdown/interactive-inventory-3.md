# Delivery Dates Services

**Permalink:** interactive-inventory-3
**Path:** Manhattan Active® Omni/Order Management/Process & Configuration Guides/Order Promising/Interactive Inventory/Delivery Dates Services
**Content Length:** 289,028 characters
**Scraped:** 2025-08-09T21:56:14.166559

---

Home ››Manhattan Active® Omni››Order Management››Process & Configuration Guides››Order Promising››Interactive Inventory ››Delivery Dates Services How “Delivery Dates Services” Work Previous I Next OverviewProcess FlowInventory AvailabilityOptimization ProcessValidate Service LevelValidate Transit LanesValidate VASFetch Optimization DataOptimize — Find Best LocationsScheduling ProcessImplementation FlavorsEvaluate Shipping OptionsEvaluate Pickup OptionsEvaluate Ship to Store OptionsMixed CartIncoming sourceLocal fulfillmentRate-Based Carrier SelectionRank-Based Carrier SelectionMeet On Hand SLAOn Hand SLA + Rate-Based Carrier SelectionOn Hand SLA + Rank-Based Carrier SelectionShipping restrictions for cart and product ATP Complete single source for the same day shipping method Id Calculate Delivery Dates for Kit Item in Product and Cart ATP callsCalculation of Delivery Dates for Out-of-Stock Items in Product and Cart ATP CallsDelivery Dates Services ConfigurationPreferred Shipping MethodValidate Service LevelValidate Transit LanesValidate VASConsider Fulfillment Processing TimeRate-Based Carrier Selection ConfigurationRank-Based Carrier Selection ConfigurationOn Hand SLA ConfigurationEnable Shipping Restrictions for Cart and Product ATPEnable CSS for Same Day Shipping Method ID Enable Kits for Cart and Product ATPTroubleshootingHow to reduce or eliminate the processing time used on location VAS to adjust the ESD calculationServicesRelated Articles Overview The Delivery Dates services leverage a new, in-memory cache to provide high availability, scalability and sub-second response times required for digital commerce channels. The services support a request parameter called “Source” which allows identifying different selling channels like Web, POS, Call Center, and so on. This allows tracking metrics like request counts, response times, etc. by selling channel. The Delivery Dates services evaluate both shipping and pickup options by default for a product or a cart. As part of the shipping options, the earliest ship date (ESD), earliest delivery dates (EDD), and committed delivery date (CDD) are calculated for every shipping method coming in the request. For pickup options, the services compute the earliest pickup date for an incoming pickup location. If the requested delivery date (RDD) or the latest possible delivery date (LPDD) is populated in the request, latest release and ship dates are also calculated. Product Delivery Dates: This service can be directly invoked from the Product Details page when an end customer chooses a single product to view the estimated ship and delivery dates. The expected product arrival dates are calculated dynamically from thousands of fulfillment locations, considering configured optimization factors. Cart Delivery Dates: This service can be invoked from the “View Cart” or “Checkout” pages once the end customer has finalized the cart or is in the process of finalizing the cart. The underlying logic for computing dates and availability is the same as the Product Delivery Dates service, except that this service will consider an optimized list of locations across all items in the cart, as against a single product in case of “Product Delivery Dates” service. Sample Cart ATP{ "FulfillmentOptions": { "Pickup": { "PickupLocationIds": [ "20102" ] }, "ShipToStore": { "ShippingMethodIds": [ "DHL-Express" ], "ShipToLocationIds": [ "20102" ] } }, "RequestId": "X0001", "DemandType": "Allocation", "PromisingConfigName": "PCN1589205077667", "RequestDetails": [ { "SourceId": "SRC1688468810885", "ItemId": "809382762", "DetailId": "1", "Quantity": 1, "EvaluatePickup": true, "EvaluateShipping": false, "EvaluatePickupWithShipTo": false }, { "ItemId": "809382762", "DetailId": "2", "Quantity": 1, "EvaluatePickup": false, "EvaluateShipping": false, "EvaluatePickupWithShipTo": true } ] } Note : Please provide PromisingRequestId in "PromisingConfigName" attribute. Process Flow The “Delivery Dates” services go through a series of validations before checking for inventory availability. Manhattan Active® Omni will provide an error code along with an error description for all these validation failures, which allows the source system to orchestrate their response processing better. Refer to the API documentation for a list of request level and configuration level validations that are available. Inventory Availability Once all the request and configuration level validations pass, a list of availability parameters is computed based on the incoming request and promising configuration. The availability parameters include: Item(s) Capacity overrides Protection overrides Demand Type Supply Attributes View ID Ship from Location ID — for pickup requests. Refer How Promising Works for more details on how promising sources and priority tiers are evaluated to come up with the availability parameters. Note: The requested quantity is considered 1 if not provided. The demand type is considered “Allocation” if not provided. Optimization Process The optimization process comprises the following Fetch supported service levels Fetch factors contributing to the hard and soft costs Evaluate hard and soft costs and choose the best locations. Validate Service Level Once the availability check is complete, the list of service levels supported by each location that have availability is fetched. Only the locations that support the incoming service level(s) are considered eligible for promising and will participate in the optimization process. If the incoming request contains shipping method and not a service level, the shipping method is first resolved to a service level based on the Ship Via Selection Logic and the locations are evaluated against this service level. Refer to Inventory Location - Service Level for details on how to configure the eligible service levels for a location. This feature to validate service levels as part of the "Delivery Dates" services processing is configurable. Refer to Validate Service Level for more details on how to enable this feature. Validate Transit Lanes In addition to the service level check, the “Delivery Dates” services also checks whether locations have valid transit lanes to the destination for a given carrier/service level. Only the locations with valid transit lanes to the destination are considered for the rest of the optimization process. To check the eligibility, the "Delivery Dates" services invoke a parcel service that takes in a list of origin locations that have availability, carrier, service level and destination details, and responds back the eligible origin locations that have valid lanes. If the incoming request contains shipping method and not a service level, the shipping method is first resolved to a carrier/service level based on the Ship Via Selection Logic and the lanes are evaluated against this carrier/ service level. This feature to validate transit lanes is configurable. Refer to Validate Transit Lanes for more details on how to enable this feature. Validate VAS It is also possible to add a validation on the Value Added Services that are supported by the location when calling the "Delivery Dates" services. If that validation is enabled, only a location that supports the requested VAS (or list of VAS) can be considered for the rest of the optimization process. Specifically, for pickup in store orders, it is possible to disable this validation while keeping it enabled for ship to address orders. If the validation is disabled for pick up in store orders, the location can be selected even if the requested VAS is not supported. In case of merge shipment or ship to store, VAS validation is only done at the original location. Fetch Optimization Data A list of optimization cost parameters is computed based on the promising configuration and the destination details on the incoming request. The optimization cost parameters include: Destination Country Destination Postal Code Optimization factors. Using the above optimization cost parameters, the labor cost, shipping costs, days of supply multiplier, rejection rate, origin, and destination latitude/longitude is fetched. In addition to this, selling price differential (price margin) is fetched for all qualifying item(s) and location(s). Optimize — Find Best Locations The hard costs and soft costs are computed depending on the optimization factors selected. Refer to Optimization Details for more information on how hard and soft costs are computed. Once the available quantity and the optimization costs are evaluated for every qualifying location, the locations are sorted based on availability first, followed by the optimization cost. If there is more than 1 location that can fulfill the entire request, the most optimal location is chosen from the group. If none of the locations can fulfill the entire request completely, the locations are sorted in descending order of availability and optimization cost to minimize shipments. Product Delivery Dates - ExampleLocation Data Set Up: S.No LocationId Quantity in Cache Labor Cost in Cache Location Postal Code 1 SanJoseDC 15 4 95112 2 DallasDC 20 8 75023 3 AtlantaDC 20 12 30339 4 FloridaDC 30 10 32003 Scenarios: S.NO Scenario Optimzation Factor Location Chosen Inference 1 Requested Quantity - 10 Destination Postal Code - 30339 Handling Cost SanJoseDC All 4 locations can fulfill 10 units, but SanJose has the least Labor Cost 2 Requested Quantity - 10 Destination Postal Code - 30339 Geo Proximity AtlantaDC All 4 locations can fulfill 10 units, but AtlantaDC is the closest to the destination 3 Requested Quantity - 18 Destination Postal Code - 30339 Handling Cost DallasDC FloridaDC, DallasDC and AtlantaDC can fulfill all 18 units, but DallasDC has the least labor cost 4 Requested Quantity - 18 Destination Postal Code - 30339 Geo Proximity AtlantaDC FloridaDC, DallasDC and AtlantaDC can fulfill all 18 units, but AtlantaDC is the closest 5 Requested Quantity - 35 Destination Postal Code - 30339 Handling Cost FloridaDC - 30 units DallasDC - 5 units None of the locations can fulfill the units completely. The results are sorted by availability and then cost to minimize shipments. FloridaDC has the highest availability, as a result it is chosen first. AtlantaDC and Dallas DC have the next highest availability but DallasDC has a better labor cost and hence DallasDC is chosen over AtlantaDC. Though SanJoseDC has the least labor cost and can fulfill the remaining 5 units, DallasDC is preferred due to the sorting logic 6 Requested Quantity - 35 Destination Postal Code - 30339 Geo Proximity FloridaDC - 30 units AtlantaDC - 5 units None of the locations can fulfill the units completely. The results are sorted by availability and then cost to minimize shipments. FloridaDC has the highest availability, as a result it is chosen first. AtlantaDC and Dallas DC have the next highest availability but AtlantaDC is closer to the destination and hence AtlantaDC is chosen over DallasDC. Cart Delivery Dates - ExamplesLocation Data Set Up: S.No LocationId Item1 - Quantity Item2 - Quantity Labor Cost in Cache 1 SanJose DC 15 0 4 2 Boston Store 0 15 8 3 Atlanta DC 20 20 15 4 Dallas Store 10 10 10 Scenarios: Scenarios Optimization Factor Location Chosen Expected Results Items: Item1, Item2 Quantity: 5 Labor Cost Dallas Store Atlanta DC and Dallas Store can fulfill all 5 quantities for both the items. Dallas Store is chosen as a result of cheaper labor cost Items: Item1, Item2 Quantity: 15 Labor Cost SanJose DC - 15 units of Item1 Boston Store - 15 units of Item2 15 units of Item1 and Item2 can be fulfilled by just Atlanta DC. The overall cost of fulfillment is $15. But SanJose and Boston Store together can fulfill each of the items separately at a cheaper cost of $12 Items: Item1, Item2 Quantity: 20 Labor Cost Atlanta DC Atlanta DC can fulfill 20 units of each of the items. Any other combinations would be more expensive than $20. Scheduling Process When the optimal location or locations (if splitting the order is needed or mandating on the order) to fulfill the request is finalized, the earliest/latest release, ship and delivery dates are computed for each of the locations based on the processing times, transit lane, zone and transit time configuration and the response is sent back at an ETA level, thus making the dates more accurate with respect to how many units are getting shipped/delivered. The delivery dates services utilize the following processing times to compute the earliest/latest release, ship dates. Item Fulfillment Processing Time - This is the time (in hours) it takes to fulfill an item from order creation to shipment in the fulfillment center. For example, regular apparel might take lesser time compared to a dining table, to pick, pack and ship. Please refer to Item Fulfillment Processing Time for details on how to configure this. In case of merge shipment or ship to store, item processing time is only counted in the origin location. Service Level based Processing Time - This is the time (in hours) it takes in a specific location to process an order from creation to fulfillment for a specific service level. For example, Express orders will have to be fulfilled ahead of standard orders, and hence will take a lesser processing time. Please refer to Service Level based Processing Time for details on how to configure this. VAS based Processing Time - This is the time (in hours) it takes in a specific location to perform a value added service on the incoming order before it is ready to be shipped. For example, Embroidery on an apparel item can take more time compared to Gift-wrapping a gift item. Please refer to VAS based Processing Time for details on how to configure this. It is important to note that VAS processing time is only counted in the origin location in case of merge shipment or ship to store. Location Processing Time - This is the average time(in hours) it takes for the location to process an order, including picking, packing, and other processing activities excluding the above. All the above factors are added to arrive at the Earliest Ship Date for a given line item on the ATP request. The processing time evaluation based on all Item, Service Level and VAS can be controlled by a flag "ConsiderFulfillmentProcTime" in promising configuration parameters. Please refer to Consider Fulfillment Processing Time for more details on the configuration. Delivery Dates Services - Processing Times - ExampleItem Processing Time ITEM Fulfillment Processing Time (in Hours) T-Shirt 1 Display Cabinet 4 Service Level based Processing Time: LOCATION SERVICE LEVEL PROCESSING TIME Atlanta DC Standard 24 Atlanta DC Express 4 SanJose DC Standard 48 SanJose DC Express 8 VAS based Processing Time: LOCATION VAS OPTION PROCESSING TIME Atlanta DC Gift-Wrap 2 Atlanta DC Special Packaging 8 SanJose DC Gift-Wrap 4 SanJose DC Special Packaging 10 Availability Data: ITEM LOCATION AVAILABLE QUANTITY (ON HAND) T-Shirt Atlanta DC 2 T-Shirt SanJose DC 2 Display Cabinet Atlanta DC 1 Display Cabinet SanJose DC 1 Scenario: Consider Location Processing Time as 1 HR for both the locations Consider both locations work 24/7. Time of Request: Dec 23, 10AM Request Details: Calculate Delivery Dates for a request with 2 lines for 2 shipping methods. Request ID Shipping Methods Item Requested Quantity Request1 Standard T-Shirt 4 Display Cabinet 2 Request1 Express T-Shirt 4 Display Cabinet 2 Response Details: Service Level Item Location VAS Option Quantity Fulfilled Location Processing Time Item Processing Time Service Level Processing Time VAS Processing Time Earliest Ship Date Standard T-Shirt Atlanta DC Gift-Wrap 2 1 1 24 2 Dec 24, 2PM T-Shirt SanJose DC Gift-Wrap 2 1 1 48 4 Dec 25, 4PM Display Cabinet Atlanta DC Special Packaging 1 1 4 24 8 Dec 24, 11PM Display Cabinet SanJose DC Special Packaging 1 1 4 48 10 Dec 26, 1AM Express T-Shirt Atlanta DC Gift-Wrap 2 1 1 4 2 Dec 23, 6PM T-Shirt SanJose DC Gift-Wrap 2 1 1 6 4 Dec 23, 10PM Display Cabinet Atlanta DC Special Packaging 1 1 4 4 8 Dec 24, 3AM Display Cabinet SanJose DC Special Packaging 1 1 4 6 10 Dec 24, 7AM Refer to Forward Scheduling for additional details on forward scheduling date calculations. Refer to backward scheduling for additional details on backward scheduling. Product Delivery Dates - Future Inventory ExampleLocation Data Setup: S.No LocationId Quantity Supply Type ETA 1 SanJose DC 4 On Hand  Available Not Applicable 2 Boston Store 3 On Order 5-Sep 3 Atlanta DC 2 On Order 10-Sep 4 Dallas Store 1 In Transit 5-Sep Scenarios: Scenarios Response Requested Quantity - 3 units SanJose DC - 3 units; ETA - NULL Requested Quantity - 6 units Sanjose DC - 4 units; ETA - NULL Boston Store - 2 units; ETA - 5-Sep Requested Quantity - 8 units Sanjose DC - 4 units; ETA - NULL Boston Store - 3 units; ETA - 5-Sep Atlanta DC - 1 unit; ETA - 10-Sep Requested Quantity - 10 units Sanjose DC - 4 units; ETA - NULL Boston Store - 3 units; ETA - 5-Sep Atlanta DC - 2 unit; ETA - 10-Sep Dallas Store - 1 unit; ETA - 5-Sep Note: The Delivery Dates services support forward and backward scheduling dates. Implementation Flavors Evaluate Shipping Options The following are some use cases where customers can choose different actions on the website which can result in different request details for the Delivery Dates services: Customer chooses a product and expects to see the dates for all eligible shipping methods for that product. Customer adds items to the cart and clicks on “View Cart” or “Checkout” and expects to see the dates for all eligible shipping methods for the cart. In both these scenarios, the selling channel can invoke the delivery dates services to Manhattan Active® Omni for the product or cart with all eligible shipping methods. The “Delivery Dates” services support multiple shipping methods in the request. The promising process is executed for every shipping method and dates are computed for the product/cart for each shipping method. Multiple Shipping Methods - Product Delivery Dates ExampleAvailability, Service Levels Supported & Cost: ITEM LOCATION QUANTITY LABOR COST SUPPORTED SERVICE LEVELS Item1 Atlanta DC 20 2 GROUND Item1 SanJose DC 20 4 GROUND, NEXT_DAY_AIR Item1 Florida DC 20 6 SECOND_DAY_AIR Shipping Method and Transit Time SHIPPING METHOD SHIP VIA CARRIER SERVICE LEVEL TRANSIT TIME (IN DAYS) UPS_GROUND UPSGR UPS GROUND 5 UPS_NEXT_DAY_AIR UPSND UPS NEXT_DAY_AIR 1 UPS_SECOND_DAY_AIR UPS2D UPS SECOND_DAY_AIR 2 Scenarios S.NO SCENARIO OPTIMIZATION FACTOR SELECTED LOCATION INFERENCE 1 Item1 - Requested Quantity - 20 Header Shipping Methods - UPS_GROUND, UPS_NEXT_DAY_AIR, UPS_SECOND_DAY_AIR Handling Cost UPS_GROUND Atlanta DC Delivery Date - Current Date + 5 DAYS UPS_NEXT_DAY_AIR SanJose DC Delivery Date - Current Date + 1 DAY UPS_SECOND_DAY_AIR Florida DC Delivery Date - Current Date + 2 DAYS UPS_GROUND Atlanta DC and SanJose DC supports UPS_GROUND and Atlanta DC is cheaper UPS_NEXT_DAY_AIR SanJose DC alone supports UPS_NEXT_DAY_AIR UPS_SECOND_DAY_AIR Florida DC alone supports UPS_SECOND_DAY_AIR 2 Item1 - Requested Quantity - 40 Header Shipping Methods - UPS_GROUND, UPS_NEXT_DAY_AIR, UPS_SECOND_DAY_AIR Handling Cost UPS_GROUND Atlanta DC Allocated Quantity - 20 units Delivery Date - Current Date + 5 DAYS SanJose DC Allocated Quantity - 20 units Delivery Date - Current Date + 5 DAYS UPS_NEXT_DAY_AIR SanJose DC Allocated Quantity - 20 units Delivery Date - Current Date + 1 DAYS 20 units are backordered UPS_SECOND_DAY_AIR Florida DC Allocated Quantity - 20 units Delivery Date - Current Date + 2 DAYS 20 units are backordered UPS_NEXT_DAY_AIR and UPS_SECOND_DAY_AIR are supported only by 1 location and as a result, 20 units are backordered for each of these shipping methods. UPS_GROUND is supported by both Atlanta DC and SanJose DC and all 40 units are allocated for this shipping method. Sample Request & Response: Service URL: /promising/api/promising/product/atp Http Method: POST Request - Response: Request: { "RequestId": "Product_01", "FulfillmentOptions": { "Shipping": { "ShippingMethodIds": [ "UPS_GROUND", "UPS_NEXT_DAY_AIR", "UPS_SECOND_DAY_AIR" ] } }, "PromisingConfigName": "ShippingConfiguration", "Address": { "PostalCode": "30339", "Country": "US" }, "RequestDetails": [ { "DetailId": "Line1", "ItemId": "Item1", "Quantity": 20, "EvaluatePickup": false } ] } Response: { "RequestId":"Product_01", "ShippingOptions":[ { "ShippingMethodId":"UPS_GROUND", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-30T21:45:00", "AreAllItemsAvailable":true }, { "ShippingMethodId":"UPS_NEXT_DAY_AIR", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-26T21:45:00", "AreAllItemsAvailable":true }, { "ShippingMethodId":"UPS_SECOND_DAY_AIR", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-27T21:45:00", "AreAllItemsAvailable":true } ], "PickupOptions":[], "ResponseDetails":[ { "DetailId":"Line1", "ItemId":"Item1", "FulfillmentGroupId":null, "ShippingOptions":[ { "ShippingMethodId":"UPS_GROUND", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-30T21:45:00", "Quantity":20.0, "SupplyDetailsInfo":[ { "Eta":null, "Quantity":20.0, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-30T21:45:00", "ShipFromLocationId":"AtlantaDC" } ] }, { "ShippingMethodId":"UPS_NEXT_DAY_AIR", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-26T21:45:00", "Quantity":20.0, "SupplyDetailsInfo":[ { "Eta":null, "Quantity":20.0, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-26T21:45:00", "ShipFromLocationId":"SanJoseDC" } ] }, { "ShippingMethodId":"UPS_SECOND_DAY_AIR", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-27T21:45:00", "Quantity":20.0, "SupplyDetailsInfo":[ { "Eta":null, "Quantity":20.0, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-27T21:45:00", "ShipFromLocationId":"FloridaDC" } ] } ], "PickupOptions":[] } ], "MessageDTO":null } Multiple Shipping Methods - Cart Delivery Dates ServiceAvailability Data: ITEM LOCATION QUANTITY Item1 Atlanta DC 20 Item1 SanJose DC 20 Item 2 Atlanta DC 20 Item 2 SanJose DC 20 Item 3 Atlanta DC 20 Item 3 Florida DC 20 Location Data: LOCATION LABOR COST SUPPORTED SERVICE LEVELS Atlanta DC 2 GROUND SanJose DC 4 GROUND, NEXT_DAY_AIR Florida DC 6 SECOND_DAY_AIR Shipping Method and Transit Time SHIPPING METHOD SHIP VIA CARRIER SERVICE LEVEL TRANSIT TIME (IN DAYS) UPS_GROUND UPSGR UPS GROUND 5 UPS_NEXT_DAY_AIR UPSND UPS NEXT_DAY_AIR 1 UPS_SECOND_DAY_AIR UPS2D UPS SECOND_DAY_AIR 2 Scenarios S.NO SCENARIO OPTIMIZATION FACTOR SELECTED LOCATION INFERENCE 1 Item1, Item2 - Requested Quantity - 20 Header Shipping Methods - UPS_GROUND, UPS_NEXT_DAY_AIR, UPS_SECOND_DAY_AIR Handling Cost UPS_GROUND Atlanta DC for Item1 and Item2 Delivery Date - Current Date + 5 DAYS Allocated Quantity - 20 units UPS_NEXT_DAY_AIR SanJose DC for Item1 and Item2 Delivery Date - Current Date + 1 DAY Allocated Quantity - 20 units UPS_SECOND_DAY_AIR All items are backordered. UPS_GROUND Atlanta DC and SanJose DC supports UPS_GROUND and Atlanta DC is cheaper UPS_NEXT_DAY_AIR SanJose DC alone supports UPS_NEXT_DAY_AIR UPS_SECOND_DAY_AIR Florida DC alone supports UPS_SECOND_DAY_AIR. But Florida does not have inventory for Item1 and Item2 2 Item1, Item3 - Requested Quantity - 40 Header Shipping Methods - UPS_GROUND, UPS_NEXT_DAY_AIR, UPS_SECOND_DAY_AIR Handling Cost UPS_GROUND Atlanta DC Allocates Item1 and Item3 Delivery Date - Current Date + 5 DAYS Allocated Quantity - 20 units SanJose DC Allocates only Item1 Delivery Date - Current Date + 5 DAYS Allocated Quantity - 20 units UPS_NEXT_DAY_AIR SanJose DC Allocates Item1 Delivery Date - Current Date + 1 DAY Allocated Quantity - 20 units Item3 is backordered UPS_SECOND_DAY_AIR Florida DC Allocates Item3 Delivery Date - Current Date + 2 DAYS Allocated Quantity - 20 units Item1 is backordered For UPS_GROUND, Item1 is fully allocated as both SanJose DC and Atlanta DC supports UPS_GROUND. Item3 is partially allocated for 20 units since Florida DC, though it has inventory does not support the service level. For UPS_NEXT_DAY_AIR, Item1 is partially allocated and Item3 is fully backordered. Item1 is available in Atlanta but the service level is not supported. Item3 is available in Florida and Atlanta, but again service level is not supported. For UPS_SECOND_DAY_AIR, Item3 is partially allocated and Item1 is fully backordered. Item3 is available in Atlanta but the service level is not supported. Item1 is available in SanJose and Atlanta but again service level is not supported. Sample Request & Response: Service URL: /promising/api/promising/cart/atp Http Method: POST Request: { "RequestId": "Cart_01", "FulfillmentOptions": { "Shipping": { "ShippingMethodIds": [ "UPS_GROUND", "UPS_NEXT_DAY_AIR", "UPS_SECOND_DAY_AIR" ] } }, "PromisingConfigName": "ShippingConfiguration", "Address": { "PostalCode": "30339", "Country": "US" }, "RequestDetails": [ { "DetailId": "Line1", "ItemId": "Item1", "Quantity": 20, "EvaluatePickup": false }, { "DetailId": "Line2", "ItemId": "Item2", "Quantity": 20, "EvaluatePickup": false } ] } Response: { "RequestId":"Cart_01", "ShippingOptions":[ { "ShippingMethodId":"UPS_GROUND", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-30T21:45:00", "AreAllItemsAvailable":true }, { "ShippingMethodId":"UPS_NEXT_DAY_AIR", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-26T21:45:00", "AreAllItemsAvailable":true } ], "PickupOptions":[], "ResponseDetails":[ { "DetailId":"Line1", "ItemId":"Item1", "FulfillmentGroupId":null, "ShippingOptions":[ { "ShippingMethodId":"UPS_GROUND", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-30T21:45:00", "Quantity":20.0, "SupplyDetailsInfo":[ { "Eta":null, "Quantity":20.0, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-30T21:45:00", "ShipFromLocationId":"AtlantaDC" } ] }, { "ShippingMethodId":"UPS_NEXT_DAY_AIR", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-26T21:45:00", "Quantity":20.0, "SupplyDetailsInfo":[ { "Eta":null, "Quantity":20.0, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-26T21:45:00", "ShipFromLocationId":"SanJoseDC" } ] }, { "ShippingMethodId":"UPS_SECOND_DAY_AIR", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":null, "EarliestDeliveryDate":null, "Quantity":0, "SupplyDetailsInfo":[] } ], "PickupOptions":[] }, { "DetailId":"Line2", "ItemId":"Item2", "FulfillmentGroupId":null, "ShippingOptions":[ { "ShippingMethodId":"UPS_GROUND", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-30T21:45:00", "Quantity":20.0, "SupplyDetailsInfo":[ { "Eta":null, "Quantity":20.0, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-30T21:45:00", "ShipFromLocationId":"AtlantaDC" } ] }, { "ShippingMethodId":"UPS_NEXT_DAY_AIR", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-26T21:45:00", "Quantity":20.0, "SupplyDetailsInfo":[ { "Eta":null, "Quantity":20.0, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-26T21:45:00", "ShipFromLocationId":"SanJoseDC" } ] }, { "ShippingMethodId":"UPS_SECOND_DAY_AIR", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":null, "EarliestDeliveryDate":null, "Quantity":0, "SupplyDetailsInfo":[] } ], "PickupOptions":[] } ], "MessageDTO":null } Customer chooses a specific shipping method per line in the cart and expects to see the date only for respective shipping method for each line. In these scenarios, the Cart Delivery Dates service supports a shipping method at a line level which will take precedence over the header level shipping methods, and shipping options are evaluated only for that shipping method on the line. Delivery Dates - Shipping Method Override - ExampleAvailability Data: ITEM LOCATION QUANTITY Item1 Atlanta DC 20 Item1 SanJose DC 20 Item1 Florida DC 20 Item 2 Florida DC 20 Item 3 SanJose DC 20 Item 3 Florida DC 20 Location Data: Assuming every location supports all service levels. LOCATION LABOR COST Atlanta DC 2 SanJose DC 4 Florida DC 6 Shipping Method and Transit Time SHIPPING METHOD SHIP VIA CARRIER SERVICE LEVEL TRANSIT TIME (IN DAYS) UPS_GROUND UPSGR UPS GROUND 5 UPS_NEXT_DAY_AIR UPSND UPS NEXT_DAY_AIR 1 UPS_SECOND_DAY_AIR UPS2D UPS SECOND_DAY_AIR 2 Scenarios S.NO REQUEST OPTIMIZATION FACTOR RESPONSE INFERENCE 1 Header Shipping Methods - UPS_GROUND, UPS_NEXT_DAY_AIR, UPS_SECOND_DAY_AIR Line Details Line1 Item1 Requested Quantity - 20 Shipping Method - UPS_GROUND Fulfillment Group - FG1 Line2 Item2 Requested Quantity - 20 Shipping Method - UPS_NEXT_DAY_AIR Fulfillment Group - FG2 Line3 Item3 Requested Quantity - 20 Shipping Method - No Line Level Shipping Method Fulfillment Group - FG3 Handling Cost Header Shipping Options Line Details Line1 - Item1 Fulfillment Group - FG1 Shipping Options UPS_GROUND Allocated Quantity - 20 Ship from Location - Atlanta DC Earliest Ship Date - Current Date Earliest Delivery Date - Current Date + 5 Days Line2 - Item2 Fulfillment Group - FG2 Shipping Options UPS_NEXT_DAY_AIR Allocated Quantity - 20 Ship from Location - Florida DC Earliest Ship Date - Current Date Earliest Delivery Date - Current Date + 1 Day Line3 - Item3 Fulfillment Group - FG3 Shipping Option1: UPS_GROUND Allocated Quantity - 20 Ship from Location - SanJose DC Earliest Ship Date - Current Date Earliest Delivery Date - Current Date + 5 Days Shipping Option2: UPS_NEXT_DAY_AIR Allocated Quantity - 20 Ship from Location - SanJose DC Earliest Ship Date - Current Date Earliest Delivery Date - Current Date + 1 Day Shipping Option3: UPS_SECOND_DAY_AIR Allocated Quantity - 20 Ship from Location - SanJose DC Earliest Ship Date - Current Date Earliest Delivery Date - Current Date + 2 Days Line1 is evaluated only for UPS_GROUND Line2 is evaluated only for UPS_NEXT_DAY_AIR Line3 is evaluated for all shipping methods passed on the header. Sample Request & Response: Service URL: /promising/api/promising/cart/atp Http Method: POST Request - Response: Request: { "RequestId": "Cart_01", "FulfillmentOptions": { "Shipping": { "ShippingMethodIds": [ "UPS_GROUND", "UPS_NEXT_DAY_AIR", "UPS_SECOND_DAY_AIR" ] } }, "PromisingConfigName": "ShippingConfiguration", "Address": { "PostalCode": "30339", "Country": "US" }, "RequestDetails": [ { "DetailId": "Line1", "ItemId": "Item1", "Quantity": 20, "ShippingMethodId": "UPS_GROUND", "FulfillmentGroupId": "FG1", "EvaluatePickup": false }, { "DetailId": "Line2", "ItemId": "Item2", "Quantity": 20, "ShippingMethodId": "UPS_GROUND", "FulfillmentGroupId": "FG2", "EvaluatePickup": false }, { "DetailId": "Line3", "ItemId": "Item3", "Quantity": 20, "FulfillmentGroupId": "FG3", "EvaluatePickup": false } ] } Response: { "RequestId":"Cart_01", "ShippingOptions":[ { "ShippingMethodId":"UPS_GROUND", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-30T21:45:00", "AreAllItemsAvailable":true }, { "ShippingMethodId":"UPS_NEXT_DAY_AIR", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-26T21:45:00", "AreAllItemsAvailable":true }, { "ShippingMethodId":"UPS_SECOND_DAY_AIR", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-27T21:45:00", "AreAllItemsAvailable":true } ], "PickupOptions":[], "ResponseDetails":[ { "DetailId":"Line1", "ItemId":"Item1", "FulfillmentGroupId":"FG1", "ShippingOptions":[ { "ShippingMethodId":"UPS_GROUND", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-30T21:45:00", "Quantity":20.0, "SupplyDetailsInfo":[ { "Eta":null, "Quantity":20.0, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-30T21:45:00", "ShipFromLocationId":"AtlantaDC" } ] } ], "PickupOptions":[] }, { "DetailId":"Line2", "ItemId":"Item2", "FulfillmentGroupId":"FG2", "ShippingOptions":[ { "ShippingMethodId":"UPS_NEXT_DAY_AIR", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-26T21:45:00", "Quantity":20.0, "SupplyDetailsInfo":[ { "Eta":null, "Quantity":20.0, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-26T21:45:00", "ShipFromLocationId":"FloridaDC" } ] } ], "PickupOptions":[] }, { "DetailId":"Line3", "ItemId":"Item3", "FulfillmentGroupId":"FG3", "ShippingOptions":[ { "ShippingMethodId":"UPS_GROUND", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-30T21:45:00", "Quantity":20.0, "SupplyDetailsInfo":[ { "Eta":null, "Quantity":20.0, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-30T21:45:00", "ShipFromLocationId":"SanJoseDC" } ] }, { "ShippingMethodId":"UPS_NEXT_DAY_AIR", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-26T21:45:00", "Quantity":20.0, "SupplyDetailsInfo":[ { "Eta":null, "Quantity":20.0, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-26T21:45:00", "ShipFromLocationId":"SanJoseDC" } ] }, { "ShippingMethodId":"UPS_SECOND_DAY_AIR", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-27T21:45:00", "Quantity":20.0, "SupplyDetailsInfo":[ { "Eta":null, "Quantity":20.0, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-27T21:45:00", "ShipFromLocationId":"SanJoseDC" } ] } ], "PickupOptions":[] } ], "MessageDTO":null } Customer chooses to ship one order to two different destination addresses. The Cart Delivery Dates service accepts a fulfillment group on the request, which will be a unique combination of destination address and shipping method. If the entire cart is shipped to the same destination and has to be evaluated for the same shipping methods, the fulfillment group is optional. In scenarios where there are line level shipping methods or different destination addresses, a unique fulfillment group is required for lines having the same shipping method and shipping to the same destination address. This allows the optimization to be performed at the fulfillment group level. Delivery Dates - Multiple Fulfillment Groups - ExampleAvailability Data: ITEM LOCATION QUANTITY Item1 Atlanta DC 20 Item1 SanJose DC 20 Item 2 Atlanta DC 20 Item2 SanJose DC 20 Location Data: Assuming every location supports all service levels. LOCATION POSTAL CODE Atlanta DC 30339 SanJose DC 95123 Shipping Method and Transit Time SHIPPING METHOD SHIP VIA CARRIER SERVICE LEVEL TRANSIT TIME (IN DAYS) UPS_GROUND UPSGR UPS GROUND 5 UPS_NEXT_DAY_AIR UPSND UPS NEXT_DAY_AIR 1 Scenarios S.NO REQUEST OPTIMIZATION FACTOR RESPONSE INFERENCE 1 Header Details: Shipping Methods: UPS_GROUND, UPS_NEXT_DAY_AIR Address Postal Code - 95123 Country - US Line Details Line1 Item1 Requested Quantity - 20 Address Postal Code - 30339 Country - US Fulfillment Group - FG1 Line2 Item2 Requested Quantity - 20 No Line Level Address Fulfillment Group - FG2 Location Proximity Header Shipping Options Line Details Line1 - Item1 Fulfillment Group - FG1 Shipping Option1 UPS_GROUND Allocated Quantity - 20 Ship from Location - Atlanta DC Earliest Ship Date - Current Date Earliest Delivery Date - Current Date + 5 Days Shipping Option2 UPS_NEXT_DAY_AIR Allocated Quantity - 20 Ship from Location - Atlanta DC Earliest Ship Date - Current Date Earliest Delivery Date - Current Date + 1 Day Line2 - Item2 Fulfillment Group - FG2 Shipping Option1 UPS_GROUND Allocated Quantity - 20 Ship from Location - SanJose DC Earliest Ship Date - Current Date Earliest Delivery Date - Current Date + 5 Days Shipping Option2 UPS_NEXT_DAY_AIR Allocated Quantity - 20 Ship from Location - SanJose DC Earliest Ship Date - Current Date Earliest Delivery Date - Current Date + 1 Day Line1 ships to 30339 and is allocated from Atlanta DC based on geo proximity. Line2 does not have a line level address. So it uses header level address and ships to 95123 and is allocated from SanJose DC based on geo proximity. Sample Request & Response: Service URL: /promising/api/promising/cart/atp Http Method: POST Request: { "RequestId": "Cart_01", "FulfillmentOptions": { "Shipping": { "ShippingMethodIds": [ "UPS_GROUND", "UPS_NEXT_DAY_AIR" ] } }, "PromisingConfigName": "ShippingConfiguration", "Address": { "PostalCode": "95123", "Country": "US" }, "RequestDetails": [ { "DetailId": "Line1", "ItemId": "Item1", "Quantity": 20, "FulfillmentGroupId": "FG1", "Address": { "PostalCode": "30339", "Country": "US" }, "EvaluatePickup": false }, { "DetailId": "Line2", "ItemId": "Item2", "Quantity": 20, "FulfillmentGroupId": "FG2", "EvaluatePickup": false } ] } Response: { "RequestId":"Cart_01", "ShippingOptions":[ { "ShippingMethodId":"UPS_GROUND", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-30T21:45:00", "AreAllItemsAvailable":true }, { "ShippingMethodId":"UPS_NEXT_DAY_AIR", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-26T21:45:00", "AreAllItemsAvailable":true } ], "PickupOptions":[], "ResponseDetails":[ { "DetailId":"Line1", "ItemId":"Item1", "FulfillmentGroupId":"FG1", "ShippingOptions":[ { "ShippingMethodId":"UPS_GROUND", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-30T21:45:00", "Quantity":20.0, "SupplyDetailsInfo":[ { "Eta":null, "Quantity":20.0, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-30T21:45:00", "ShipFromLocationId":"AtlantaDC" } ] }, { "ShippingMethodId":"UPS_NEXT_DAY_AIR", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-30T21:45:00", "Quantity":20.0, "SupplyDetailsInfo":[ { "Eta":null, "Quantity":20.0, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-26T21:45:00", "ShipFromLocationId":"AtlantaDC" } ] } ], "PickupOptions":[] }, { "DetailId":"Line2", "ItemId":"Item2", "FulfillmentGroupId":"FG2", "ShippingOptions":[ { "ShippingMethodId":"UPS_GROUND", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-30T21:45:00", "Quantity":20.0, "SupplyDetailsInfo":[ { "Eta":null, "Quantity":20.0, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-30T21:45:00", "ShipFromLocationId":"SanJoseDC" } ] }, { "ShippingMethodId":"UPS_NEXT_DAY_AIR", "CarrierCode":null, "ServiceLevelCode":null, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-26T21:45:00", "Quantity":20.0, "SupplyDetailsInfo":[ { "Eta":null, "Quantity":20.0, "EarliestShipDate":"2021-03-25T21:45:00", "EarliestDeliveryDate":"2021-03-26T21:45:00", "ShipFromLocationId":"SanJoseDC" } ] } ], "PickupOptions":[] } ], "MessageDTO":null } Note: The Delivery Dates services support either shipping methods or Carrier/Service Level combination as part of the incoming request. If the service is invoked using Carrier/Service Level, only 1 Carrier/Service level is supported. The multiple shipping methods functionality is applicable only when the incoming request is for shipping methods. Note: The scheduling info will be populated in the cart call response if merge route is defined or consolidation location ID or external route ID is passed. Evaluate Pickup Options Use case: Customer clicks on a product or finalizes their cart and expects to see the earliest pickup dates for a pickup location. The product/cart request can include a single location in the 'PickupLocationIds' field with 'EvaluatePickup' set as true in the 'RequestDetails' in order to retrieve pickup dates. The promising process will check for inventory availability in that specific location and provide the earliest pickup date for the product/cart. The pickup options do not go through prioritization tiers or optimization factors, since there is only one location to evaluate. As long as the pickup location is an eligible source based on the source definition in promising configuration, the location will be sent back in response with available inventory. Pickup Options - Cart Delivery Dates - ExampleAvailability Data: Location Item Available Quantity Supply ETA Atlanta Store Item1 15 On Hand Available - Available Today Atlanta Store Item2 0 NA Atlanta Store Item3 10 In Transit Inventory - Available on Apr-5 Atlanta Store Item4 2 On Order Inventory - Available on Apr-10 Location processing hours is 0 and location operates 24/7. Scenario: S.NO SCENARIO RESPONSE 1 Item1 - Requested Quantity - 5 Item2 - Requested Quantity - 5 Pickup Location - Atlanta Store Item1 Promised Quantity - 5 (Fully Allocated) Pickup Date - Today Item2 Promised Quantity - 0 (Fully Backordered) 2 Item3 - Requested Quantity - 5 Item4 - Requested Quantity - 5 Pickup Location - Atlanta Store Item3 Promised Quantity - 5 (Fully Allocated) Pickup Date - Apr-5 Item4 Promised Quantity - 2 (Partially Allocated) Pickup Date - Apr-10 Sample Request & Response - Scenario1: Service URL: /promising/api/promising/cart/atp Http Method: POST Request: { "RequestId": "Cart_01", "FulfillmentOptions": { "Pickup": { "PickupLocationIds": [ "Atlanta Store" ] } }, "PromisingConfigName": "PickupConfiguration", "Address": {}, "RequestDetails": [ { "DetailId": "Line1", "ItemId": "Item1", "Quantity": 5, "EvaluateShipping": false }, { "DetailId": "Line2", "ItemId": "Item2", "Quantity": 5, "EvaluateShipping": false } ] } Response: { "RequestId": "Cart_01", "ShippingOptions": [], "PickupOptions": [ { "PickupLocationId": "Atlanta Store", "EarliestPickupDate": "2021-03-25T21:45:00", "AreAllItemsAvailable": false } ], "ResponseDetails": [ { "DetailId": "L1", "ItemId": "Item1", "FulfillmentGroupId": null, "ShippingOptions": [], "PickupOptions": [ { "PickupLocationId": "Atlanta Store", "EarliestPickupDate": "2021-03-25T21:45:00", "Quantity": 5.0 } ] }, { "RequestDetailId": "L2", "ItemId": "Item2", "FulfillmentGroupId": null, "ShippingOptions": [], "PickupOptions": [ { "PickupLocationId": "Atlanta Store", "EarliestPickupDate": null, "Quantity": 0.0 } ] } ] } Sample Request & Response - Scenario2: Service URL: /promising/api/promising/cart/atp Http Method: POST Request: { "RequestId": "Cart_01", "FulfillmentOptions": { "Pickup": { "PickupLocationIds": [ "Atlanta Store" ] } }, "PromisingConfigName": "PickupConfiguration", "Address": {}, "RequestDetails": [ { "DetailId": "Line1", "ItemId": "Item3", "Quantity": 5, "EvaluateShipping": false }, { "DetailId": "Line2", "ItemId": "Item4", "Quantity": 5, "EvaluateShipping": false } ] } Response: { "RequestId": "Cart_01", "ShippingOptions": [], "PickupOptions": [ { "PickupLocationId": "Atlanta Store", "EarliestPickupDate": "2021-04-10T21:45:00", "AreAllItemsAvailable": false } ], "ResponseDetails": [ { "DetailId": "L1", "ItemId": "Item1", "FulfillmentGroupId": null, "ShippingOptions": [], "PickupOptions": [ { "PickupLocationId": "Atlanta Store", "EarliestPickupDate": "2021-04-05T21:45:00", "Quantity": 5.0 } ] }, { "DetailId": "L2", "ItemId": "Item2", "FulfillmentGroupId": null, "ShippingOptions": [], "PickupOptions": [ { "PickupLocationId": "Atlanta Store", "EarliestPickupDate": "2021-04-10T21:45:00", "Quantity": 2.0 } ] } ] } Use case: Customer's preferred location does not have item in stock, so customer expects pickup dates for the nearest location with availability (for product call only) Populate AlternatePickupDetail in the request to enable this functionality. If 'AlternatePickupDetails' is present and the item is not available at the requested location, the response will return pickup dates for the nearest location having availability considering the radius and address in the request. The 'IsAlternateLocation' flag in the response indicates whether a nearby location was returned instead of the requested location. Optionally, the' AllUnitsRequired' field can be set to true in the request to indicate the location must have the entire quantity available (as opposed to at least one unit). Note: The Delivery Dates service supports one pickup location in a single request. If more than one location is passed in the input, the API responds back with an error indicating only one pickup location is supported. Note: The cart Delivery Date services for BOPIS (Buy Online Pick Up In Store) lines automatically considers the default view set in the promising configuration, eliminating the need for a line-specific override for BOPIS transactions. Refer here for configuration. Evaluate Ship to Store Options Similar to Pickup option but can also be used if the inventory is not available in the store. The "Delivery Dates" service supports a ship to location and a shipping method in the request. The product/cart call can be made to Manhattan Active® Omni with a pickup location which can either be the customer's preferred pickup location or the nearest location. The promising process will check for inventory availability in that specific location and in the rest of the network and provide the earliest pickup date for the product/cart. If inventory is not available at the pickup location, the promising process will evaluate the optimization configuration to select the best possible location to send the product to the store for customer pickup. The "merge leg" from the origin location to the store uses the shipping method provided in the request. Delivery Date - Evaluate Ship to StoreAvailability Data: Location Item Available Quantity Supply ETA Atlanta Store Item1 15 On Hand Available - Available Today Atlanta Store Item2 0 NA Atlanta DC Item1 10 On Hand Available - Available Today Atlanta DC Item2 20 On Order Inventory - Available on Apr-10 Location processing hours is 0 and location operates 24/7. Transit time between Atlanta DC and Atlanta Store is 24h Scenario: S.NO SCENARIO RESPONSE 1 Item1 - Requested Quantity - 5 Item2 - Requested Quantity - 5 Pickup Location - Atlanta Store Item1 Promised Quantity - 5 (Fully Allocated) Pickup Date - Today Item2 Promised Quantity - 5 (Fully Allocated) Pickup Date - Apr-11 2 Item1 - Requested Quantity - 25 Item1 Promised Quantity - 25 (Fully Allocated) Pickup Date: 15 available today 10 available tomorrow Sample Request & Response - Scenario1: Service URL: /promising/api/promising/cart/atp Http Method: POST Request: { "RequestId": "Cart_01", "FulfillmentOptions": { "ShipToStore": { "ShipToLocationIds": [ "Atlanta Store" ], "ShippingMethodIds": [ "Standard" ] } } }, "PromisingConfigName": "Ship to Configuration", "Address": {}, "RequestDetails": [ { "DetailId": "Line1", "ItemId": "Item1", "Quantity": 5, "EvaluatePickupWithShipTo": true }, { "DetailId": "Line2", "ItemId": "Item2", "Quantity": 5, "EvaluatePickupWithShipTo": true } ] } Response: { "RequestId": "Cart_01", "ShippingOptions": [], "PickupOptions": [], "ShipToStoreOptions": [ { "PickupLocationId": "Atlanta Store", "EarliestPickupDate": "2022-04-1121:40:00", "AreAllItemsAvailable": true } ], "ResponseDetails": [ { "DetailId": "L1", "ItemId": "Item1", "FulfillmentGroupId": "FG2", "ShippingOptions": [], "PickupOptions": [], "ShipToStoreOptions": [ { "ShipToLocationId": "Atlanta Store", "EarliestPickUpDate": "2022-04-01T21:40:00", "EarliestShipDate": "2022-04-01T21:40:00", "Quantity": 5.0, "ShippingMethodId": "Standard", "CarrierCode": null, "ServiceLevelCode": null, "SupplyDetailsInfo": [ { "Eta": null, "Quantity": 5.0, "EarliestShipDate": "2022-04-01T21:40:00", "EarliestDeliveryDate": "2022-04-01T21:40:00", "ShipFromLocationId": "Atlanta Store", "SchedulingInfo": null } ] } ] }, { "DetailId": "L2", "ItemId": "Item2", "FulfillmentGroupId": "FG2", "ShippingOptions": [], "PickupOptions": [], "ShipToStoreOptions": [ { "ShipToLocationId": "Atlanta Store", "EarliestPickUpDate": "2022-04-11T21:40:00", "EarliestShipDate": "2022-04-01T21:40:00", "Quantity": 5.0, "ShippingMethodId": "Standard", "CarrierCode": null, "ServiceLevelCode": null, "SupplyDetailsInfo": [ { "Eta": null, "Quantity": 5.0, "EarliestShipDate": "2022-04-11T21:40:00", "EarliestDeliveryDate": "2022-04-01T21:40:00", "ShipFromLocationId": "Atlanta DC", "SchedulingInfo": [ { "OriginLocationId": "Atlanta Store", "DestinationLocationId": "Atlanta Store", "DeliveryActionId": "Pickup", "EarliestShipDate": "2022-04-11T21:40:00", "EarliestDeliveryDate": "2022-04-11T21:40:00", "Sequence": 2 }, { "OriginLocationId": "Atlanta DC", "DestinationLocationId": "Atlanta Store", "DeliveryActionId": "Merge", "EarliestShipDate": "2022-04-01T21:40:00", "EarliestDeliveryDate": "2022-04-11T21:40:00", "Sequence": 1 } ] } ] } ] } ] } Sample Request & Response - Scenario2: Service URL: /promising/api/promising/cart/atp Http Method: POST Request: { "RequestId": "Cart_01", "FulfillmentOptions": { "ShipToStore": { "ShipToLocationIds": [ "Atlanta Store" ], "ShippingMethodIds": [ "Standard" ] } } }, "PromisingConfigName": "Ship to Configuration", "Address": {}, "RequestDetails": [ { "DetailId": "Line1", "ItemId": "Item1", "Quantity": 25, "EvaluatePickupWithShipTo": true } ] } Response: { "RequestId": "CART11", "ShippingOptions": [], "PickupOptions": [], "ShipToStoreOptions": [ { "PickupLocationId": "Atlanta Store", "EarliestPickupDate": "2022-09-26T21:46:00", "AreAllItemsAvailable": true } ], "ResponseDetails": [ { "DetailId": "L1", "ItemId": "Item1", "FulfillmentGroupId": "FG2", "ShippingOptions": [], "PickupOptions": [], "ShipToStoreOptions": [ { "ShipToLocationId": "Atlanta Store", "EarliestPickUpDate": "2022-09-26T21:46:00", "EarliestShipDate": "2022-09-26T21:46:00", "Quantity": 25.0, "ShippingMethodId": "Standard", "CarrierCode": null, "ServiceLevelCode": null, "SupplyDetailsInfo": [ { "Eta": null, "Quantity": 10.0, "EarliestShipDate": "2022-04-02T21:46:00", "EarliestDeliveryDate": "2022-04-02T21:46:00", "ShipFromLocationId": "Atlanta DC", "SchedulingInfo": [ { "OriginLocationId": "Atlanta Store", "DestinationLocationId": "Atlanta Store", "DeliveryActionId": "Pickup", "EarliestShipDate": "2022-04-02T21:46:00", "EarliestDeliveryDate": "2022-04-02T21:46:00", "Sequence": 2 }, { "OriginLocationId": "Atlanta DC", "DestinationLocationId": "Atlanta Store", "DeliveryActionId": "Merge", "EarliestShipDate": "2022-04-01T21:46:00", "EarliestDeliveryDate": "2022-04-02T21:46:00", "Sequence": 1 } ] }, { "Eta": null, "Quantity": 15.0, "EarliestShipDate": "2022-04-01T21:46:00", "EarliestDeliveryDate": "2022-04-01T21:46:00", "ShipFromLocationId": "Atlanta Store", "SchedulingInfo": null } ] } ] } ] } Note: The Delivery Dates service supports one ship to location in a single request. If more than one location is passed in the input, the API responds back with an error indicating only one pickup location is supported. It also supports only one shipping method in a single request. If more than one shipping method is passed in the input, the API responds back with an error. Mixed Cart Customer chooses a product (or) finalizes the cart and expects to see the delivery options and pickup options at one go. By default, the “Delivery Dates” services will provide both shipping options and pickup options in a single request for a product or cart. Customer decides to pick up some items and wants to know the delivery options for the remaining items in the cart. The Delivery Dates services respond back with both shipping and pickup options by default. The shipping method (or) carrier/service level (or) Preferred Shipping Method is mandatory for evaluating shipping options and Pickup location is mandatory for evaluating pickup options. In scenarios where the customer does not want all the lines in the cart to be evaluated for both shipping and pickup options, the “Delivery Dates” services allow the ordering channel to selectively choose lines that have to be evaluated for shipping and/or pickup options. The following flags at the line level on the request allow selection of specific fulfillment options by lines: Attribute Default Value Description EvaluateShipping true This flag indicates whether a line has to be evaluated for Shipping Options or not. If this flag is false, the line will not be evaluated for shipping options and any shipping related validation will not be evaluated for these lines. EvaluatePickup true This flag indicates whether a line has to be evaluated for Pickup Options or not. If this flag is false, the line will not be evaluated for pickup options and any pickup related validation will not be evaluated for these lines. The following are some examples of mixed cart scenarios. Mixed Cart - Cart Delivery Dates - ExampleAvailability Data: ITEM LOCATION QUANTITY SUPPLY TYPE ETA Item1 Atlanta DC 20 On Hand Available NA Item1 SanJose DC 20 On Hand Available NA Item1 Atlanta Store 20 On Hand Available NA Item 2 Atlanta DC 20 In Transit March 8th Item 2 Atlanta Store 20 Purchase Order March 19th Item 3 Atlanta DC 20 Purchase Order March 9th Item 3 Florida DC 20 On Hand Available NA Location Data: LOCATION LABOR COST Atlanta DC 2 SanJose DC 4 Florida DC 6 Atlanta Store 1 Shipping Method and Transit Time SHIPPING METHOD TRANSIT TIME (IN DAYS) Standard 5 Express 1 Scenarios S.NO REQUEST DETAILS RESPONSE DETAILS 1 Header Fulfillment Options: Shipping Methods - Standard, Express Pickup Location - Atlanta Store Line Level Item Details: Item1 - Requested Quantity - 20 Evaluate Shipping - TRUE Evaluate Pickup - FALSE Item2 - Requested Quantity - 20 Evaluate Shipping - TRUE Evaluate Pickup - TRUE Item3 - Requested Quantity - 20 Evaluate Shipping - FALSE Evaluate Pickup - TRUE Response Details: Item1 Shipping Options: Standard Allocated Quantity - 20 Ship from Location - Atlanta DC Earliest Ship Date - Current Date Earliest Delivery Date - Current Date + 5 Days Express Allocated Quantity - 20 Ship from Location - Atlanta DC Earliest Ship Date - Current Date Earliest Delivery Date - Current Date + 1 Day Pickup Options No Pickup options. Item1 has Evaluate Pickup FALSE. Item2 Shipping Options: Standard Allocated Quantity - 20 Ship from Location - Atlanta DC Earliest Ship Date - March 8th Earliest Delivery Date - March 8th + 5 Days Express Allocated Quantity - 20 Ship from Location - Atlanta DC Earliest Ship Date - March 8th Earliest Delivery Date - March 8th + 1 Day Pickup Options Pickup Location - Atlanta Store Pick up Quantity - 20 Earliest Pickup Date - March 19th Item3 Shipping Options: Standard Allocated Quantity - 20 Ship from Location - Atlanta DC Earliest Ship Date - March 9th Earliest Delivery Date - March 9th + 5 Days Express Allocated Quantity - 20 Ship from Location - Atlanta DC Earliest Ship Date - March 9th Earliest Delivery Date - March 9th + 1 Day Pickup Options Empty - Inventory not available for Atlanta Store 2 Header Fulfillment Options: Shipping Methods - Standard, Express Pickup Location - Atlanta Store Line Level Item Details: Item1 - Requested Quantity - 20 Evaluate Shipping - FALSE Item2 - Requested Quantity - 20 Evaluate Shipping - FALSE Item3 - Requested Quantity - 20 Evaluate Shipping - FALSE All shipping options in the response are empty as Evaluate Shipping is false for all the lines. Item1 Shipping Options: Empty Pickup Options Pickup Location - Atlanta Store Pick up Quantity - 20 Earliest Pickup Date - Current Date Item2 Shipping Options: Empty Pickup Options Pickup Location - Atlanta Store Pick up Quantity - 20 Earliest Pickup Date - March 19th Item3 Shipping Options: Empty Pickup Options Empty - Inventory not available for Atlanta Store Sample Request & Response: Service URL: /promising/api/promising/cart/atp Http Method: POST Request - Response: Request: { "RequestId": "Cart_01", "FulfillmentOptions": { "Shipping": { "ShippingMethodIds": [ "Standard", "Express" ] }, "Pickup": { "PickupLocationIds": [ "Atlanta Store" ] } }, "PromisingConfigName": "MixedCartConfiguration", "Address": { "PostalCode": "30339", "Country": "US" }, "RequestDetails": [ { "DetailId": "L1", "ItemId": "Item1", "Quantity": 20, "EvaluateShipping": true, "EvaluatePickup": false }, { "DetailId": "L2", "ItemId": "Item2", "Quantity": 20, "EvaluateShipping": true, "EvaluatePickup": true }, { "DetailId": "L3", "ItemId": "Item3", "Quantity": 20, "EvaluateShipping": false, "EvaluatePickup": true } ] } Response: { "RequestId": "CART1", "ShippingOptions": [ { "ShippingMethodId": "Standard", "CarrierCode": null, "ServiceLevelCode": null, "EarliestShipDate": "2021-03-09T21:45:00", "EarliestDeliveryDate": "2021-03-14T21:45:00", "AreAllItemsAvailable": true }, { "ShippingMethodId": "Express", "CarrierCode": null, "ServiceLevelCode": null, "EarliestShipDate": "2021-03-09T21:45:00", "EarliestDeliveryDate": "2021-03-10T21:45:00", "AreAllItemsAvailable": true } ], "PickupOptions": [ { "PickupLocationId": "Atlanta Store", "EarliestPickupDate": "2021-03-19T21:45:00", "AreAllItemsAvailable": false } ], "ResponseDetails": [ { "DetailId": "L1", "ItemId": "Item1", "FulfillmentGroupId": null, "ShippingOptions": [ { "ShippingMethodId": "Standard", "CarrierCode": null, "ServiceLevelCode": null, "EarliestShipDate": "2021-03-05T21:45:00", "EarliestDeliveryDate": "2021-03-10T21:45:00", "Quantity": 20.0, "SupplyDetailsInfo": [ { "Eta": null, "Quantity": 12.0, "EarliestShipDate": "2021-03-05T21:45:00", "EarliestDeliveryDate": "2021-03-10T21:45:00", "ShipFromLocationId": "AtlantaDC" } ] }, { "ShippingMethodId": "Express", "CarrierCode": null, "ServiceLevelCode": null, "EarliestShipDate": "2021-03-05T21:45:00", "EarliestDeliveryDate": "2021-03-06T21:45:00", "Quantity": 20.0, "SupplyDetailsInfo": [ { "Eta": null, "Quantity": 20.0, "EarliestShipDate": "2021-03-05T21:45:00", "EarliestDeliveryDate": "2021-03-06T21:45:00", "ShipFromLocationId": "AtlantaDC" } ] } ], "PickupOptions": [] }, { "DetailId": "L2", "ItemId": "Item2", "FulfillmentGroupId": null, "ShippingOptions": [ { "ShippingMethodId": "Standard", "CarrierCode": null, "ServiceLevelCode": null, "EarliestShipDate": "2021-03-08T21:45:00", "EarliestDeliveryDate": "2021-03-13T21:45:00", "Quantity": 20.0, "SupplyDetailsInfo": [ { "Eta": null, "Quantity": 20.0, "EarliestShipDate": "2021-03-08T21:45:00", "EarliestDeliveryDate": "2021-03-13T21:45:00", "ShipFromLocationId": "AtlantaDC" } ] }, { "ShippingMethodId": "Express", "CarrierCode": null, "ServiceLevelCode": null, "EarliestShipDate": "2021-03-08T21:45:00", "EarliestDeliveryDate": "2021-03-09T21:45:00", "Quantity": 20.0, "SupplyDetailsInfo": [ { "Eta": null, "Quantity": 20.0, "EarliestShipDate": "2021-03-08T21:45:00", "EarliestDeliveryDate": "2021-03-09T21:45:00", "ShipFromLocationId": "AtlantaDC" } ] } ], "PickupOptions": [ { "PickupLocationId": "Atlanta Store", "EarliestPickupDate": "2021-03-19T21:45:00", "Quantity": 20.0 } ] }, { "DetailId": "L3", "ItemId": "Item3", "FulfillmentGroupId": null, "ShippingOptions": [ { "ShippingMethodId": "Standard", "CarrierCode": null, "ServiceLevelCode": null, "EarliestShipDate": "2021-03-09T21:45:00", "EarliestDeliveryDate": "2021-03-14T21:45:00", "Quantity": 20.0, "SupplyDetailsInfo": [ { "Eta": null, "Quantity": 20.0, "EarliestShipDate": "2021-03-09T21:45:00", "EarliestDeliveryDate": "2021-03-14T21:45:00", "ShipFromLocationId": "AtlantaDC" } ] }, { "ShippingMethodId": "Express", "CarrierCode": null, "ServiceLevelCode": null, "EarliestShipDate": "2021-03-09T21:45:00", "EarliestDeliveryDate": "2021-03-10T21:45:00", "Quantity": 20.0, "SupplyDetailsInfo": [ { "Eta": null, "Quantity": 20.0, "EarliestShipDate": "2021-03-09T21:45:00", "EarliestDeliveryDate": "2021-03-10T21:45:00", "ShipFromLocationId": "AtlantaDC" } ] } ], "PickupOptions": [ { "PickupLocationId": "Atlanta Store", "EarliestPickupDate": null, "Quantity": 0.0 } ] } ] } Note: The "Evaluate Shipping" and "Evaluate Pickup" flags are overrides in scenarios where a particular line should not be evaluated for either shipping or pickup. Note: The Delivery Dates service supports only header level view source for both pickup and shipping options. Incoming source In case a specific PO or ASN is to be used to compute delivery dates, it is possible to specify the PO/ASN ID on the cart/product request. In case a specific location is to be used to compute delivery dates, it is possible to specify a location as the origin location of the cart/product request. If there is no inventory at that location or if the location is not in the ATC view or if the location cannot fulfill the contents of the cart for any reason, the cart/product response is returned empty. or in case a line level override is configured in the fulfillment optimization configuration, the source ID needs to be populated at the cart/product detail level. Local fulfillment Based on the distance between the origin and the destination, the delivery date API is able to evaluate if the fulfillment system is local to the delivery address. The local radius is configured in the promising config parameters and can be defined in kilometers or miles. Based on the response of the delivery date API, an order capture system can not only display a promised delivery date but can also start displaying an indicator of sustainability in case the fulfillment is done using inventory that is already physically close to the destination. Entity Attribute Description PromisingConfigParameters LocalDistance The ATP call has the ability to signal what location is within local distance of the destination. Fulfillment from a local location ensures CO2 emissions are kept at a minimum. This field is used to configure what the local distance is. PromisingConfigParameters LocalDistanceUOM The ATP call has the ability to signal what location is within local distance of the destination. Fulfillment from a local location ensures CO2 emissions are kept at a minimum. This field is used to configure what the local distance UOM is. Valid values are “km” and “mi”. If no value is provided, “mi” is used as default. Rate-Based Carrier Selection Rate-based carrier selection should be enabled if a business would like the cheapest ship via (carrier/service level combination) to automatically get selected during the promising and Earliest Delivery Date (EDD) calculation. If this feature is enabled, the shipping rates configured in Carrier Shipping Rates UI will be evaluated during Adaptive Network Fulfillment (ANF)/Fulfillment Optimization cost calculation to determine the cheapest carrier, service level, and LocationId for the requested shipping method. The cheapest carrier, service level and respective EDD will then be printed in response to the following APIs: Promising call (/promising/api/promising/promise) Product ATP (/promising/api/promising/product/atp) Cart ATP (/promising/api/promising/product/atp) In case there is a tie between the cheapest ship vias for the requested shipping method, the highest ranking ship via will get selected. Rate-based carrier selection will not occur if carrier, service level, or RequestedDeliveryDate (RDD) is present in the request, or if shipping method Id is missing from the request. If ValidateServiceLevels is set to true in Promising Config Parameters, then the service levels will continue to be validated as usual. Since lanes are validated as part of this feature, ValidateLanesForEDD can be set to true or false without a difference in result. Rate shopping for merge legs is not supported. Additionally, if On Hand SLA and SLA End of Day are configured in the Carrier Shipping Method (New) UI, then the least expensive ship via within the SLA will be selected. If the SLA cannot be met, but allocation is possible, the EDD will still be populated in the response along with a flag indicating SLA was not met at the line and header level (isSLAMet and isSLAMetForAllLines, respectively). On Hand SLA is only supported for Cart and Product ATP. There are three flavors of Rate-Based Carrier Selection. Each version calculates the weight of a shipment differently, which impacts the carrier shipping rate for each carrier. Basic Weight Calculation Promising Requests: Weight is taken directly from the request. If weight is not present, then it will be defaulted to volumetric weight in item master Cart/Product ATP: Weight is taken directly from the request. If weight is not present, then ‘ConsiderWeightFromItem’ Promising Config Parameter will be evaluated. If this parameter is true, then VolumetricWeight will be used. If the parameter is false, then the quantity on the request will be considered to calculate the weight of the item. Advanced Weight Calculation The purpose of Advanced Weight Calculation is to mimic the process carriers like UPS and FedEx used to calculate the weight, and therefore the cost of a shipment. This leads to a more accurate result when rating shopping across carriers. Weight is calculated by finding the chargeable weight for each ship via. The chargeable weight is the maximum of the mass weight and the dimensional weight. Mass Weight is directly pulled from the ‘Weight’ field in item master and summed for all items in the shipment, and the dimensional weight is calculated by taking the sum of the volume of each item in the shipment and dividing it by the DimFactor in the Ship Via UI. If the volume is missing from item master, length, width, and height can be used instead. See below for an example: For each carrier, the mass weight and the dimensional weight are compared to find the chargeable weight. For example above, determine the “Chargeable Weight” for each Ship Via Now rate shop using the above weights for each Ship Via for each lane UPS Ground | 5 lbs | LANE1 | rate: $10 UPS SurePost | 4 lbs | LANE1 | rate: $7  (Winning Ship Via) FedEx Ground | 4.5 lbs | LANE1 | rate: $11 Mass Weight: 4 LBS UPS Ground Dimensional Weight: 240 / 48 DIM = 5 UPS SurePost Dimensional Weight: 240 / 80 DIM = 3 FedEx Ground Dimensional Weight: 240 / 53 DIM = 4.5 UPS Ground: MAX(4,5) → 5 lbs UPS SurePost: MAX(4,3) → 4 lbs FedEx Ground: MAX(4,4,5) → 4.5 lbs Advanced Weight Calculation with Cubing Weight is calculated by first determining the optimal box size for the shipment using a lightweight cubing algorithm that assumes all package types configured in the Package Types UI are considered valid for all shipments. Once the box sizes are determined, Advanced Weight Calculation is performed for each box, on order to find the Chargeable Weight for each box and for each Ship Via. The Mass Weight is the sum of the weight of the items in each box plus the weight of the box (TareWeight in Package Type UI). Dimensional Weight is calculated using the ExternalVolume of the box (configured in Package Type UI) divided by the DimFactor in the Ship Via UI. If an item is ShipReady (configured in item master), then the item can either be placed in a box during cubing, or if it is more optimal, shipped without a box. Advanced Weight Calculation with Cubing is not supported if an item has a decimal quantity. Also, it is assumed that all items that are not ShipReady can fit in at least one package type. If it does not, cubing will not be used for that shipment, and instead Advanced Weight Calculation without Cubing will be used. Refer here to enable Rate-Based Carrier Selection for a particular shipping method. Rank-Based Carrier Selection Rank-based carrier selection, when used in combination with lane and/or service level validation, provides the ability to select the highest ranking ship via for a requested shipping method that has a valid lane and/or service level. This carrier, service level, and respective Earliest Delivery Date (EDD) will then be printed in response to the following APIs: Promising call (/promising/api/promising/promise) Product ATP (/promising/api/promising/product/atp) Cart ATP (/promising/api/promising/product/atp) Rank-based carrier selection will not occur if carrier, service level, or RequestedDeliveryDate (RDD) is present in the request, or if shipping method Id is missing from the request. If the preferred carrier is configured in Inventory Location UI for any location having availability for the requested item, the preferred carrier will take precedence over the rank 1 ship via for any other location having availability. Additionally, if On Hand SLA and SLA End of Day are configured in the Carrier Shipping Method (New) UI, then the highest ranking ship via is selected, and then the EDD is evaluated against the SLA. If the SLA can be met with the selected ship via, then a flag in the response will say the SLA is met. If the SLA cannot be met with the selected ship via, but allocation is possible, then the EDD (that is after SLA) will still be populated in the response along with a flag indicating SLA was not met at the line and header level (IsSLAMet, IsSLAMetForAllLines). On Hand SLA is only supported for Cart and Product ATP. Refer here to enable Rank-Based Carrier Selection. Meet On Hand SLA On Hand SLA can be enabled on its own, or in combination with Rate-Based Carrier Selection, or in combination with Rank-based Carrier Selection. See below for the behavior in each of these scenarios. If On Hand SLA is enabled without Rate-Based Carrier Selection or Rank-Based Carrier Selection, then the ship via is determined by first checking if there is a preferred carrier in inventory location. If it is there, then a ship via tied to the shipping method having that preferred carrier is selected. If the preferred carrier is null in inventory location, then the rank 1 ship via for that shipping method is selected. After the ship via is selected, the EDD is evaluated against the SLA. If the SLA can be met with the selected ship via, then a flag in the response will say the SLA is met. If the SLA cannot be met with the selected ship via, but allocation is possible, then the EDD (that is after SLA) will still be populated in the response along with a flag indicating SLA was not met at the line and header level (IsSLAMet, IsSLAMetForAllLines). On Hand SLA is only supported for Cart and Product ATP. Refer here for the configuration. On Hand SLA + Rate-Based Carrier Selection If On Hand SLA and SLA End of Day are configured in Carrier Shipping Method (New) UI along with Rate-Based Carrier Selection, then the cheapest ship via within the SLA will get selected. If the SLA cannot be met, but allocation is possible, the EDD will still be populated in the response along with a flag indicating SLA was not met at the line and header level (IsSLAMet, IsSLAMetForAllLines). On Hand SLA is only supported for Cart and Product ATP.https://omni.helpdocsonline.com/interactive-inventory-3$enable-shipping-restrictions-for-cart-and-product-atp On Hand SLA + Rank-Based Carrier Selection If On Hand SLA and SLA End of Day are configured in Carrier Shipping Method (New) UI along with Rank-Based Carrier Selection, then the highest ranking ship via is selected, and then the EDD is evaluated against the SLA. If the SLA can be met with the selected ship via, then a flag in the response will say the SLA is met. If the SLA cannot be met with the selected ship via, but allocation is possible, then the EDD (that is after SLA) will still be populated in the response along with a flag indicating SLA was not met at the line and header level (IsSLAMet, IsSLAMetForAllLines). On Hand SLA is only supported for Cart and Product ATP. Shipping restrictions for cart and product ATP Product and cart services can now automatically account for shipping restrictions, while determining delivery dates and item availability. If enabled, the system applies configured shipping restrictions, including specific exclusions based on supply types and location types. Configuring Advanced Shipping Restrictions Rules Enable Shipping Restrictions for cart and product ATP. Complete single source for the same day shipping method Id If "Is Same Day Delivery" is set to "Yes" for any Shipping Method ID, the promising, product, and cart requests will attempt a Complete Single Source evaluation for that specific Shipping Method. This will assist retailers using the Same Day Shipping Method by ensuring allocation from the same location, thereby increasing the likelihood of same-day delivery. Example : If the Shipping Method ID is provided at the header level and "Is Same Day Delivery" is set to "Yes," the system will evaluate all the lines. Allocation will occur only if all lines can be sourced from the same location; otherwise, they will be backordered. Enable CSS for same day shipping method ID Calculate Delivery Dates for Kit Item in Product and Cart ATP calls On an e-commerce site, when a customer selects a kit item, the estimated delivery dates can be displayed on the product details and checkout page. The IsKitItem flag in the response indicates whether the selected item is a kit item, while the LineComponents attribute lists the associated component items along with their required quantities to make one unit of the kit item. Refer to enable kits for cart and product ATP for more details on configuration. Calculation of Delivery Dates for Out-of-Stock Items in Product and Cart ATP Calls The 'VendorLeadTime' attribute in item master represents the time (in hours) required for a vendor to deliver an item to a location. When a cart call request includes out-of-stock items, the delivery dates are determined by incorporating the Vendor Lead Time, provided this value is populated for the item. Additionally, a configurable buffer time(in hours) allows for consideration of purchase orders within the range of "LatestReleaseDate - BufferTime" and "LatestShipDate" when the request includes a RequestedDeliveryDate. Impacted Delivery Date Calculations in Cart Call: EarliestShipDate = CurrentTime + LocationProcessingTime + VendorLeadTime EarliestDeliveryDate = EarliestShipDate + TransitTime Impacted Calculations When Buffer Time is Configured: LatestShipDate = RequestedDeliveryDate - TransitTime LatestReleaseDate = LatestShipDate - LocationProcessingTime - VendorLeadTime - BufferTime For more details on configuration, refer here. NOTE: Ensure that Continuous Allocation is enabled for the Calculation of Delivery Dates for Out-of-Stock Items in Product and Cart ATP Calls Delivery Dates Services Configuration Preferred Shipping Method The Product Details and the Checkout pages can be accessed by both registered and non-registered customers. If a registered customer having a preferred shipping method is browsing the Product Details page or adding items to the cart, the incoming request to Manhattan Active® Omni will have a shipping method and dates are calculated for that shipping method. In scenarios where the customer is registered but does not have a preferred shipping method or the customer is not registered, the incoming request will not have a shipping method. Manhattan Active® Omni provides a configuration which allows the user to configure a preferred shipping method. This preferred shipping method is used for date computation in scenarios where the incoming request does not have a shipping method. For cart calls, the preferred shipping method is used in request details that does not have shipping method bridged in. Entity Attribute Description PromisingConfigParameters PreferredShippingMethod Used in the Delivery Dates services when incoming request (or) one of the request details does not have a shipping method. Save Preferred Shipping MethodPOST: {url}/promising/api/promising/promisingConfigParameters/save { "PromisingConfigParameterId": "PDPConfiguration", "PreferredShippingMethodId": "Standard" } Note: If the incoming request does not have a shipping method and the "Preferred Shipping Method" is not configured, the service responds back with an error code and an error description indicating that shipping method is mandatory. Validate Service Level The functionality to qualify locations that take part in the promising process based on the supported service levels can be turned on/off using the “Validate Service Level” configuration. When this configuration is turned on, the promising process will filter only the eligible locations that support the incoming service level. If a particular location is not configured with any supported service levels, it will not be considered for the promising process. As a result, turning on this parameter mandates the user to configure all supported service levels at the location level. When the configuration is turned off, the promising process will skip the location filtering process. All locations will be considered eligible for the promising process irrespective of whether they support the incoming service level or not. Entity Attribute Description PromisingConfigParameters ValidateServiceLevel Indicates whether the promising process should qualify locations based on supported service levels or not. Set Validate Service LevelPOST: {url}/promising/api/promising/promisingConfigParameters/save { "PromisingConfigParameterId": "DeliveryDatesConfiguration", "ValidateServiceLevel": true } Validate Transit Lanes The functionality to validate the transit lane presence during the forward scheduling part of the promising process can be turned on and off using the "Validate Lanes for EDD" configuration. When this configuration is turned on, the promising process will only consider locations that are connected to the destination by a valid transit lane for that carrier/service level. If no transit lane is found for that combination of origin, destination, carrier and service level, the location will not be considered for allocation. When the configuration is turned off, if the promising process does not find a transit lane for that combination of origin, destination, carrier and service level, the location will still be considered for allocation even if no transit lane and transit time can be found. Entity Attribute Description PromisingConfigParameters ValidateLanesForEDD Indicates whether the promising process should validate the transit lane presence during the Earliest Delivery Date computation. Note: As soon as RDD is passed on the request, transit lanes are validated independently of this parameter. Set Validate transit lanesPOST: {url}/promising/api/promising/promisingConfigParameters/save { "PromisingConfigParameterId": "DeliveryDatesConfiguration", "ValidateLanesForEDD": true } Validate VAS The functionality to validate the value added service support during the promising process can be turned on and off using the "Validate VAS" configuration. When this configuration is turned on, the promising process will only consider locations that support that specific VAS. If no location is found that has availability and supports that VAS (or list of VAS) then the allocation will fail. It is possible to ignore the VAS validation in case of a BOPIS order using "Ignore VAS validation for BOPIS" configuration. If that parameter is turned on and the request requires a VAS, it will be ignored while evaluating pickup options. Entity Attribute Description PromisingConfigParameters ValidateVASEligibility Indicates whether the promising process should qualify locations based on supported VAS or not PromisingConfigParameters IgnoreVasValidationForBopis Indicates whether the promising process should ignore VAS validation while evaluating pickup options. Consider Fulfillment Processing Time The functionality to use Item-based, Service Level - based and VAS-based processing times is controlled using the "Consider Fulfillment Processing Time" configuration. When this configuration is turned on, these processing times are added to come up with the Earliest/latest Ship Date for each of the lines on the ATP request. By default, the parameter is turned off, and when it is turned off, Location Processing Time is the only processing time that is considered to compute the Earliest Ship Date. Entity Attribute Description PromisingConfigParameters ConsiderFulfillmentProcTime Indicates whether the scheduling process of the ATP request should consider Item-based, Service Level - based and VAS-based processing times for computing Earliest/latest Ship Date. Consider Fulfillment Processing TimePOST: {url}/promising/api/promising/promisingConfigParameters/save { "PromisingConfigParameterId": "DeliveryDatesConfiguration", "ConsiderFulfillmentProcTime": true } Rate-Based Carrier Selection Configuration To enable Rate-Based Carrier Selection for a particular shipping method, navigate to Carrier Shipping Method (New) UI and select the box next to “Rate-based Carrier Selection” for the shipping method. The following configurations must also be present: Shipping cost factor - Shipping Cost must be a factor in Adaptive Network Fulfillment (ANF) for rate-based carrier selection to occur. Carrier Zones - All zones must be configured for all possible origins, destinations, service levels, and carriers. Carrier Zone Transit Times - Transit Time must be configured for all zones and carriers Carrier Shipping Rates - All rates must be configured for all weights (from 0 to the maximum possible weight) for each lane, carrier, and service level combination. Clear the caches below after rate configurations are added or updated: POST {{url}}/parcel/api/framework/cache/clearAll DELETE {{url}}/parcel/api/parcel/orgLocation/cache/clearAll GET {{url}}/parcel/api/parcel/zone/clearAllCachedZones ConsiderWeightFromItem - Set this to true in Promising Config Parameters if weight is not given on the request, and if it should be taken from VolumetricWeight in item master Additional Requirements for Advanced Weight Calculation Weight (item master) Volume or Length, Width and Height (item master) Dim Factor (Ship Via) Additional Requirements for Advanced Weight Calculation with Cubing Weight (item master) Volume or Length, Width and Height (item master) Dim Factor (Ship Via) MaxCubingVolume (PackageType) ExternalVolume (PackageType) TareWeight (PackageType) While testing, you can validate lanes and rates exist using the below APIs: POST {{url}}/parcel/api/parcel/zoneByLocation { "ZoneRequestList": [ { "RequestId": "124", "CarrierId": "FedEx", "ServiceLevelId": "FedEx Ground", "OriginLocationIds": [ "ecomorg:AtlantaDC" ], "DestinationZipCode": "30339", "DestinationLocationId": null, "DestinationCity": null, "DestinationState": null, "DestinationCountryCode": "US" } ] } POST {{url}}/parcel/api/parcel/shippingRateByZone { "ShippingRatesRequestList": [ { "RequestId": "123", "CarrierId": "FedEx", "ServiceLevelId": "FedEx Ground", "Zones": [ "303303" ] } ] } Rank-Based Carrier Selection Configuration To enable Rank-Based Carrier Selection, navigate to Carrier Shipping Method (New) UI and check the box next to “Rank-based Carrier Selection”. If Lanes should be validated, then ValidateLanesForEDD or ValidateLanesForGreedy should be set to true in Promising Config Parameters (ValidateLanesForEDD if interactive inventory is being used, ValidateLanesForGreedy otherwise). If Service Levels should be validated, then ValidateServiceLevels should be set to true in Promising Config Parameters. Clear the caches below after rate configurations are added or updated: GET {{url}}/parcel/api/parcel/zone/clearAllCachedZones DELETE {{url}}/parcel/api/parcel/orgLocation/cache/clearAll POST {{url}}/promising/api/framework/cache/clearAll While testing, you can validate lanes and rates exist using the below APIs: POST {{url}}/parcel/api/parcel/zoneByLocation { "ZoneRequestList": [ { "RequestId": "124", "CarrierId": "FedEx", "ServiceLevelId": "FedEx Ground", "OriginLocationIds": [ "ecomorg:AtlantaDC" ], "DestinationZipCode": "30339", "DestinationLocationId": null, "DestinationCity": null, "DestinationState": null, "DestinationCountryCode": "US" } ] } POST {{url}}/parcel/api/parcel/shippingRateByZone { "ShippingRatesRequestList": [ { "RequestId": "123", "CarrierId": "FedEx", "ServiceLevelId": "FedEx Ground", "Zones": [ "303303" ] } ] } On Hand SLA Configuration On Hand SLA can be configured in Carrier Shipping Method (New) UI using the following attributes: On Hand SLA: The maximum number of days the order should be delivered. On Hand SLA End of Day: The time of day that should be considered - the End of Day when determining whether the SLA can be met Once we have the above configuration in the shipping method, make sure to set "ConsiderOnHandSLA" as "true" in the cart request. Find below the sample cart request and response. Sample Cart Request { "RequestId": "Cart_01", "DemandType": "Allocation and Future", "ConsiderOnHandSLA": true, "FulfillmentOptions": { "Shipping": { "ShippingMethodIds": [ "Standard" ] } }, "PromisingConfigName": "PCN1701845961895", "Address": { "PostalCode": "75250", "Country": "US", "Latitude": null, "Longitude": null }, "RequestDetails": [ { "DetailId": "2", "Quantity": 1, "ItemId": "Tops-19691-Blue-M", "FulfillmentGroupId": "FG-02", "Address": { "PostalCode": "75250", "Country": "US", "Latitude": null, "Longitude": null }, "EvaluatePickup": false, "EvaluateShipping": true, "EvaluatePickupWithShipTo": false } ] } Sample Cart Response<div class="computer_code" data-renderer-start-pos="10996"> <pre tabindex="0"> <code data-lang="json">{ "success": true, "header": null, "data": { "RequestId": "Cart_01", "ShippingOptions": [ { "ShippingMethodId": "Standard", "CarrierCode": null, "ServiceLevelCode": null, "EarliestShipDate": "2024-09-04T09:33:00", "EarliestDeliveryDate": "2024-09-08T09:33:00", "PredictedShipDate": null, "PredictedDeliveryDate": null, "HeuristicShipDate": "2024-09-04T09:33:00", "HeuristicDeliveryDate": "2024-09-08T09:33:00", "AreAllItemsAvailable": true, "CutOffTime": null, "LatestShipByDate": "2024-09-05T20:00:00", "LatestReleaseByDate": "2024-09-05T18:00:00", "LatestReleaseByDateForFutureSupply": null, "CommittedDeliveryDate": null, "LocalFulfillment": null, "IsSLAMetForAllLines": true } ], "PickupOptions": [], "ShipToStoreOptions": [], "ResponseDetails": [ { "DetailId": "2", "ItemId": "Item02Sep_02", "FulfillmentGroupId": "FG-02", "ShippingOptions": [ { "ShippingMethodId": "Standard", "CarrierCode": null, "ServiceLevelCode": null, "EarliestShipDate": "2024-09-04T09:33:00", "EarliestDeliveryDate": "2024-09-08T09:33:00", "PredictedShipDate": null, "PredictedDeliveryDate": null, "HeuristicShipDate": "2024-09-04T09:33:00", "HeuristicDeliveryDate": "2024-09-08T09:33:00", "LatestShipByDate": "2024-09-05T20:00:00", "LatestReleaseByDate": "2024-09-05T18:00:00", "LatestReleaseByDateForFutureSupply": null, "CommittedDeliveryDate": null, "Quantity": 1.0, "CutOffTime": null, "LocalFulfillment": null, "SupplyDetailsInfo": [ { "Eta": null, "Quantity": 1.0, "EarliestShipDate": "2024-09-04T09:33:00", "EarliestDeliveryDate": "2024-09-08T09:33:00", "PredictedShipDate": null, "PredictedDeliveryDate": null, "HeuristicShipDate": "2024-09-04T09:33:00", "HeuristicDeliveryDate": "2024-09-08T09:33:00", "ShipFromLocationId": "ecomorg:AtlantaDC", "CutOffTime": null, "LatestShipByDate": "2024-09-05T20:00:00", "LatestReleaseByDate": "2024-09-05T18:00:00", "LatestReleaseByDateForFutureSupply": null, "CommittedDeliveryDate": null, "LocalFulfillment": null, "CarrierCode": null, "ServiceLevelCode": null, "SchedulingInfo": null } ], "IsSLAMet": true } ], "PickupOptions": [], "ShipToStoreOptions": [] } ] }</code></pre> </div> If the SLA cannot be met across all carriers and service levels for that shipping method due to no inventory, then the allocation will fail. If the SLA cannot be met, but inventory is available after the SLA, then the response will include the EDD that is past the SLA along with a flag indicating isSLAMet at the line level and IsSLAMetForAllLines which is at the header level. Enable Shipping Restrictions for Cart and Product ATP To enable the shipping restrictions evaluation during cart and product ATP follow the below steps : Navigate to Menu > Application Configuration > Manage Enterprise Fulfillment Configuration > Fulfillment Optimization. In the Fulfillment Optimization strategy, select the fulfillment optimization for which shipping restrictions need to be evaluated, and then click Edit. Select "Evaluate Shipping Restrictions" to enable evaluation during product/cart ATP. The shipping restriction can also be enabled by triggering the following API. {{url}}/promising/api/promising/promisingConfig/save { "PromisingConfigId": "PCN1723195803705", "PromisingConfigName": "Ecom", "EvaluateShippingRestrictions": true } Enable CSS for Same Day Shipping Method ID CSS for a specific Shipping Method ID can be enabled by following the steps below: Navigate to Carrier Shipping Method (New) UI From Omnifacade. Select the “Is Same Day Delivery” checkbox. The Same-day delivery can also be enabled through the following API. {{url}}/parcel/api/parcel/shippingMethod/save { "ShippingMethodId": "Standard", "IsSameDayDelivery": true } Enable Kits for Cart and Product ATP To support kit items in product and cart ATP calls, enable the 'Enable Kit' flag in the promising configuration parameters by following these steps: Navigate to Menu > Application Configuration > Manage Enterprise Fulfillment Configuration > Promising Config Parameters. In the Promising Config Parameters, select the promising config and click Edit. Select the "Enable Kits" checkbox to enable kits for product and cart ATP. Alternatively, the above configuration can also be enabled using the API below. POST {{url}}/promising/api/promising/promisingConfigParameters/save { "PromisingConfigParameterId": "1", "EnableKits": true } Troubleshooting How to reduce or eliminate the processing time used on location VAS to adjust the ESD calculation Scenario: Any order placed on a working day should be shipped the next working day. However, orders placed on a holiday or non-working day should be shipped two working days later considering one day for processing time and the next day for shipment. For example, if an order is placed on a Saturday, the ESD calculated would be the following Tuesday. However, the requirement is to have an exception to this rule, wherein any order placed on Saturday before 4 PM should be shipped on Monday instead of Tuesday by reducing or elimination the processing time without affecting the configuration for other days. Solution: Applying negative VAS processing time will reduce or cancel the processing time applied without affecting the configuration for other days Services Service Component Service EndPoint Description Product Delivery Dates Promising /promising/api/promising/product/atp Request Parameter: Source — Example Web, POS, Call Center, and so on. Key Input Parameters: Promising Configuration ID, Item ID, Requested Quantity, Shipping Method/Carrier & Service Level, Destination Country and Postal Code, Pickup Location Key Output Parameters: Earliest Ship Date, Earliest Delivery Date, ETA, Promised Quantity, Ship From Location ID. If RDD is passed on the request, Latest release and ship dates are also calculated. Note: If an address, latitude and longitude are available, while calculating the delivery dates, address will take precedence over latitude and longitude. Cart Delivery Dates Promising /promising/api/promising/cart/atp Request Parameter: Source — Example Web, POS, Call Center, and so on. Key Input Parameters: Promising Configuration ID, Item ID, Requested Quantity, Shipping Method/Carrier & Service Level, Destination Country and Postal Code, Pickup Location Key Output Parameters: Earliest Ship Date, Earliest Delivery Date, ETA, Promised Quantity, Ship From Location ID. If RDD is passed on the request, Latest release and ship dates are also calculated. Note: If an address, latitude and longitude are available, while calculating the delivery dates, address will take precedence over latitude and longitude. Related Articles Metrics DashboardDelivery Date Performance DashboardReservations from CacheOverview