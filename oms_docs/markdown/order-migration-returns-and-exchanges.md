# Order Migration Returns and Exchanges

**Permalink:** order-migration-returns-and-exchanges
**Path:** Manhattan Active® Omni/Order Management/Process & Configuration Guides/Order Processing/Order Migration/Returns and Exchanges
**Content Length:** 30,290 characters
**Scraped:** 2025-08-09T21:58:01.729138

---

Home ››Manhattan Active® Omni››Order Management››Process & Configuration Guides››Order Processing››Order Migration ››Order Migration Returns and Exchanges Returns and Exchanges Previous I Next Rules for Migrating Returns and ExchangesAdditional RecommendationsExampleReturn Order MigrationExchange Order MigrationStatus MappingReturn Quantity Detail Mapping ExamplesMigrating Exchange Order Payment Details How to capture invoice details and apply them to exchange orders during migrationRelated Articles This page contains recommendations for migrating returns and exchanges. Return orders will only be migrated after parent Customer Orders have been migrated successfully.  Return orders with order status “Return Invoice Created”, “Exchange Order Confirmed” or “Canceled”, will be migrated with payment information and invoices in closed status for refund scenarios. Exchange orders, both “Completed” or “Canceled”, will be migrated with payment information and invoices in closed status for refund scenarios. Refer here for sample return and exchange order jsons. Rules for Migrating Returns and Exchanges The following table highlights the differences between 2013 returns and Active Omni (AO) returns. 2013 Return & Exchange Behavior Active Omni Return & Exchange Behavior Rule for Migration 1 Even exchanges ($0 exchanges) in 2013 were modeled with two orders: a return order and an exchange order. Even exchanges are modeled with a single order with two lines: one return and one exchange. The value of these two lines cancels each other out such that the order total is $0, unless additional return charges or fees are applied. These two orders must be combined into two order lines (one return and one exchange) on a single order. See Exchange Order Migration for more details. 2 Return invoices are stored on the parent order (customer order), not the return order. Return invoices are stored on the return order. Return invoices should be migrated with the return order, not the parent order. See Return Order Migration for more details. 3 Refunds are stored on the parent order, not the return order. The original settlement exists only on the parent order. Return credit is modeled by copying a portion of the original settlement to the return order, so that it can be used to either refund the customer or as credit towards the exchange items. Refunds are processed against that copied settlement, on the return order. A 'Return Credit' payment transaction is created against the settlement on the parent order to block the funds from being used. A settlement for the return order value should be copied from the parent order to the return order during migration. Refund transactions should be migrated with the return order, not the parent order. On the parent order, a transaction of type 'Return Credit' should be saved with an amount equal to the refund. See Return Order Migration. This return credit transaction can be imported with the parent order, or if not sent, then the system will create the return credit transaction on the parent order, when the return order payment transactions are imported with the correct parent order payment method references. 4 For exchanges, return credit is modeled as a discount on the exchange order. For example, if a $30 item is exchanged, the order has a $30 item and a -$30 discount with discount type 'Return Credit' or 'Exchange Order' (type = 40) so the customer is not charged. Return credit is modeled by copying a portion of the original settlement to the return order, so that it can be used to either refund the customer or as credit towards the exchange items. This discount should not be migrated to Active Omni as a discount, but instead as a return credit payment method/transaction. See Exchange Order Migration for more details. 5 In 2013, return orders did not contain a break down of taxes, charges, and discounts; these values were included into the return line unit price. Return orders have prorated taxes, charges, and discounts copied from the parent order. The unit price is purely the unit price and does not contain any additions. When migrating these return orders, migrate the unit price as-is (inclusive of taxes, charges, and discounts) because the tax, discount, and charge details do not exist in 2013. Returns which get created in Active Omni will have the breakdown of taxes, charges, and discounts being refunded as part of the return, but these migrated returns will not. See Return Order Migration for more details. 6 Uneven exchanges are not supported. Uneven exchanges are supported. None 7 Item variance did not result in a new order line. Item variance in Active Omni can sometimes result in a new order line. Test this scenario in 2013 and determine how to map this to Active Omni. Additional Recommendations To ensure returnable quantity is decremented on the parent order when return orders are migrated, parent orders should be migrated before return orders. For example, if a customer order with 4 shipped units has a return with 2 units, then the customer order needs to be saved in Active Omni and the return is created, so that the customer order line returnable quantity gets decremented from 4 to 2. To import an open $0 exchange, ensure the OrderActions attributes isAlreadyPriced, isAlreadyTaxed, and isAlreadyCharged are set to true. If these attributes are not set to true, then the Active Omni will recalculate the price, charges, taxes, and discounts by copying from the parent order, and return shipping and fees may also be applied if configured. Also, ensure the exchange line, return line, and all charges, taxes, and discounts on the order sum up to $0. Because the taxes, charges, and discounts are included into the unit price for 2013 returns, we want to avoid triggering the re-pricing of these lines in Active Omni. For returns, this should not be an issue, as order edits are not supported. For exchanges, thorough testing is required for even exchanges to ensure that no issues arise in Active Omni for migrated even exchange orders. Return variance scenarios are not yet included in this mapping. If your project is using return variance, please test these scenarios in 2013 and determine where the variance data (variance quantity, condition, item variance) is stored. Work with R&D by logging a support ticket if you need assistance in mapping this to Active Omni. There are two key differences to the data when a completed return order is imported, versus when the return is completed within Active Omni : For returns completed in Active Omni, an entity called parentOrderPaymentMethod is created on the return order to link to the parent order payment method and refunded amount. This triggers the return credit transaction creation on the parent order. For imported completed returns, this parentOrderPaymentMethod is not populated. The return credit is imported separately on the parent order, so this is not an issue. This should not cause any functional issues, but is something to be aware of. For returns completed in Active Omni, the paymentTransactionDetail entity on the parent order return credit transaction contains a link to the return invoice. For imported completed returns, this link does not exist. This should not cause any functional issues, but is something to be aware of. In case you want to apply appeasement and refund after migrating a historical return order, payment configurations like payment rule etc. has to be configured in the system. Example Return Order Migration In this example, a customer order (parent order) in EOM 2013 is fully returned for a refund. The return is received and invoiced, and the refund is processed. In 2013, the return invoice and refund transaction are saved on the parent order, but in Active Omni these are moved to the return order. In Active Omni , an additional return credit payment transaction is created on the parent order to block the funds from being used for appeasements, other returns, and so on. v2013 Active Omni Orders Parent Order Order 1: Total = $58 Header S&H: $10 Order Lines: Item A, 1 unit, unit price = $40 Line sales tax = $8 Line total = $48 Payment: Amount = $58 Authorization: $58 Settlement: $58 Invoice = Shipment invoice Refund: $58 Invoice = Return invoice Invoices: Shipment invoice: $58 Return invoice: -$58 Order 1: Total = $58 Header S&H: $10 Order Lines: Item A, 1 unit, unit price = $40 Line sales tax = $8 Line total = $48 Payment: Amount = $58 Authorization: $58 Settlement: $58 Invoice = Shipment invoice FollowOnProcessedAmount = $58 Return Credit: $58 FollowOnId = RequestId of Settlement (Refund transaction moved to return order) Invoices: Shipment invoice: $58 (Return invoice moved to return order) Return Order Order 2: Total = $58 Order Lines: Item A, 1 unit, unit price = $58 Payment: none Invoices: none Order 2: Total = -$58 Order Lines: Item A, 1 unit, Unit Price = -$58 Payment: PaymentMethod copied from parent order with IsCopied = true Amount = $58 PaymentTransactions Settlement: $58 (copy from parent order with IsCopied = true) Refund: $58 (processed against copied settlement) Invoices: Return invoice: -$58 Exchange Order Migration In this example, a customer order (parent order) in EOM 2013 is fully returned for an even exchange. S&H is not included in the refund. The return is received and invoiced, and the exchange order is shipped. In 2013, the return invoice and refund transaction are saved on the parent order, but in Active Omni these are moved to the exchange order. In Active Omni, an additional return credit payment transaction is created in the parent order to block the funds from being used for appeasements, other returns, etc. In 2013, there are three orders: a parent, return, and exchange. In Active Omni, there are only two orders: a parent and an exchange, because the exchange order contains both return and exchange lines for a total of $0. In 2013, the exchange order contains a discount to zero out the order total, but in Active Omni this is not required since the return items cancel out the exchange value. v2013 Active Omni Orders Parent Order Order 1: Total = $55 Header S&H: $10 Order Lines: Item A, 1 unit, unit price = $40 Line sales tax = $10 Line discount = $5 Line total = $45 Payment: Amount = $55 Authorization: $55 Settlement: $55 Invoice = Shipment invoice Settlement: $0 Invoice = Return invoice Refund: $45 Invoice = Return invoice Invoices: Shipment invoice: $55 Return invoice: -$45 Order 1: Total = $55 Header S&H: $10 Order Lines: Item A, 1 unit, unit price = $40 Line sales tax = $10 Line discount = $5 Line total = $45 Payment: Amount = $55 Authorization: $55 Settlement: $55 Invoice = Shipment invoice FollowOnProcessedAmount = $45 Return Credit: $45 FollowOnId = RequestId of Settlement Invoices: Shipment invoice: $55 Return Order Order 2: Total = $45 Order Lines: Item A, 1 unit, unit price = $45 Payment: none Invoices: none Order 2 (contains return and exchange lines): Total = $0 Order Lines: IsReturn = true, Item A, 1 unit, unit price = -$45 IsEvenExchange = true, Item A, 1 unit, Unit Price = $45 Payment: PaymentMethod copied from parent order with IsCopied = true Amount = $45 Settlement: $45 (copy data from parent order with IsCopied = true) Invoices: Shipment invoice (for exchange item): $45 Return invoice: -$45 Exchange Order Order 3: Total = $0 Order Lines: Item A, 1 unit, unit price = $45 Line discount = $45 Payment: none Invoices: Shipment invoice Item A, 1 unit, unit price = $45 Line discount = $45 Total = $0 Status Mapping Pre-Active Status Active Status Active Entities Required Return created Pending Return (11000) Order Line Return Received Returned (18000) Order Line Quantity Detail Canceled Return Canceled (19000) Order Line with isCancelled = true Return Quantity Detail Mapping Examples Note: For exchange line quantity status mappings, refer to How to Migrate Quantity-Level Status. The below examples show how to translate return orders in different statuses to Active. Example 1: Pre-Active/Legacy Order Status = Open Pre-Active/Legacy Active Quantity Detail Line Id Line Status Ordered Qty ASN Unit Detail Received Quantity Line Id Quantity Quantity Detail Status Quantity Detail Qty Return Detail Qty 1 Return Created 1 1 1 N/A Example 2: Pre-Active/Legacy Order Status = Return received and verified (invoice created) Pre-Active/Legacy Active Quantity Detail Line Id Line Status Ordered Qty ASN Unit Detail Received Quantity Line Id Quantity Quantity Detail Status Quantity Detail Qty Return Detail Qty 1 Return received and verified 1 1 1 1 18000 1 1 Example 3: Pre-Active/Legacy Order Status = Cancelled Pre-Active/Legacy Active Quantity Detail Line Id Line Status Ordered Qty Cancelled Qty ASN Unit Detail Received Quantity Line Id Quantity Cancelled Quantity Quantity Detail Status Quantity Detail Qty Return Detail Qty 1 Cancelled 1 1 1 1 1 N/A Migrating Exchange Order Payment Details How to capture invoice details and apply them to exchange orders during migration The pre-active/legacy system does not maintain the parent settlement record on the XO order the same way as is designed in Active Omni. So, it is advisable not to migrate the existing invoices in pre-active/legacy system and allow Active Omni to create new invoices. Note that, this will not work for exchange orders with cancelled lines because when these orders are migrated, Active Omni creates the new invoice(s), copies the parent settlement, and creates new refund transactions that are submitted to the gateway. This will cause customers to be refunded twice on the same order, once in pre-active/legacy and once in Active Omni. To avoid such a scenario, follow the below steps: Send the right payment details - refund payment transactions as part of the parent order so that refund is not done again in Active Omni. Change the gateway to deny refund transactions for the migrated orders; however, this may not be an ideal option if any discount and appeasement needs to be added after migration. Related Articles Order Migration Sample JSONsOverviewPaymentMigrating Quantity Level Status Archiving Migrated OrdersTroubleshooting