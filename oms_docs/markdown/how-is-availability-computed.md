# How is Availability Computed?

**Permalink:** how-is-availability-computed
**Path:** Manhattan Active® Omni/Order Management/Process & Configuration Guides/Enterprise Inventory/Available to Commerce/How is Availability Computed?
**Content Length:** 110,793 characters
**Scraped:** 2025-08-09T21:54:12.141706

---

Home ››Manhattan Active® Omni››Order Management››Process & Configuration Guides››Enterprise Inventory››Available to Commerce ››How is Availability Computed? How is Availability Computed Previous | Next In this section let's understand how availability is computed and the various factors which affect availability computation. How is Availability ComputedOverviewHow Network and Location Availability WorksAvailable QuantityAvailability StatusAvailability Computation - Factors and ExampleRecompute Availability - TriggersHow Regional Availability WorksRegional Availability RulesDistance RulesPreferred Fulfillment Location RulesGet Availability at Nearby StoresHow Product Availability WorksHow Protection Override WorksHow Availability Works for Out-of-stock Items that can be ProcuredHow To'sHow to Define ViewHow to Define Business ScopeHow to Define Exclusions & ConstraintsExclusion & Constraints (Rule Set level)Commerce CharacteristicsFuture supply ConstraintsProtection QuantityCapacityExclusion & Constraints (Availability level)Network ProtectionFulfillment OutageStore ExclusionsRegional Availability RulesHow to Enable Product AvailabilityHow to Enable Availability(Location/Network and Publish) for out-of-stock items Implementation FlavorsWhy multiple ATC views may be requiredHow to filter Location specific to an Organization in ATC UIHow to Map a New Custom Location TypeWhat is the maximum number of items that can be returned by the product availability API based on style?Related Articles Overview Availability is determined for every Item either at network level or at location level. A use case for a network level will have to display the availability information such as available quantity, availability status or both in the Product Details page, and for location level, it must display the availability information such as available quantity, availability status or both on the Store Locater page, where the customer can pick or ship it to a specific store. Using the availability rules, commerce controls the amount of supply available to every commerce channel. The output of a commerce view is commerce availability (available quantity and availability status), which represents the pool of inventory available for the corresponding commerce channel. How Network and Location Availability Works Available Quantity Available quantity to sell is computed for an item by aggregating the supply quantities across locations (network level) and within location (location level) and reducing the quantities which are already allocated or protected. Exclusions such as capacity, outage, commerce characteristics and future supply constraints are considered while arriving at the available quantity. For a network view, the available quantity for an item is computed across all locations. For a location view, the availability quantity for an item is computed for a location. Available Quantity (Network) =  Σ (Supply Quantity - Supply Allocation Quantity - Protected Quantity at Item Location level - Any Exclusions) across all eligible location(s), supply record(s). Available Quantity (Location) =  Σ (Supply Quantity - Supply Allocation Quantity - Protected Quantity at Item Location level - Any Exclusions) across all supply record(s) for a specific location. Note: ATC quantity cannot be negative. While perpetual inventory may be negative in certain scenarios, but availability can never be negative. This is also true when applying inventory protection. If perpetual inventory was 2 units and the protection was 5 units, the available quantity would be communicated as 0 units. Availability Status Availability status compares the available quantity of an item to its stock level that is configured in the ATC and determines if the item is ’In Stock’, ’Limited Stock’ or ‘Out of stock’. You can consider the following stock level configuration: Out of stock: <= 5 units Limited stock: 6 - 50 units In stock: > 50 units For this configuration, if the available quantity to sell is more than 50 units, then it is "In Stock". Quantity between 6 and 50 is considered as ‘Limited Stock’ and below 6 is ‘Out of Stock’. Availability Computation - Factors and Example There are various factors which reduces the overall availability of an Item as follows: Factors Not included in Availability Computation Supply Records not included as part of view's scope, which are defined at View Rule set level are: Location(s) excluded in the View Item(s) excluded in the View Supply record(s) excluded in the View - Specific Supply Type, Attributes, Segments etc. Supply marked with errors Supply quantity already allocated Future Supply - ETA not falling between past by and expected in days that are configured in the view Refer How to Define Business scope for more details Commerce characteristics Ignore the supply records for which the commerce characteristics attributes defined in the view do not match the Item/Item-Location commerce characteristics attributes. Refer How to Define Exclusions & Constraints at Rule set level Outage rule Any Items/Location(s) part of the Active fulfillment outage rule will not be included in availability computation Active outage defined at location level Active outage defined at Item-Location level Refer How to Define Exclusions & Constraints at Availability level Protection quantity Protection quantity is reduced from Availability computation Protection quantity at Item-Location level Network level protection quantity (applies only to network view) Refer How to Define Exclusions & Constraints for details Store exclusion Stores excluded from publishing availability. Refer How to Define Exclusions & Constraints at Availability level details Regional availability rules If requested by regional availability, then location(s) participating in the availability computation is controlled by the rules defined in the view. Refer to Regional availability for more details. Refer to How to Configure Regional Availability Rules for more info. Others Backorder Quantity - Views may optionally be configured to remove the current quantity of backordered units from availability (applies only to network views) Substitution Items - Views may optionally be configured to Include Substitution Items in the availability picture Include Infinite Items - If the Item(s) are configured as Infinite supply for a location then View can be configured to include the infinite inventory in Availability computation or not. Compute Availability - ExamplesInventory Supply Records - Consider the following Inventory supply records for Item 1. Eligible units for Availability is computed as (Supply Qty - Allocated Qty). Also any supply records marked with errors are excluded. Note: Available quantity is determined by the configuration defined in the View (Rule set scope and other exclusion) Location Supply Type Quantity Allocated Error? Eligible Units DC 1 On Hand Available 10 0 No 10 DC 1 In Transit 50 20 No 30 DC 2 On Hand Available 15 0 No 15 Store 1 On Hand Available 20 5 No 15 Store 2 On Hand Available 10 0 No 10 Store 2 On Order 100 0 No 100 Store 3 On Hand Available 50 0 Yes 0 - Supply is marked with errors Example 1: Impact of Rule Set scope on availability Rule Set (scope) Exclusions Locations Items Supply Type Commerce Charac. Protection Qty (Rule set) Exclude Full Capacity? Protection Qty (Network) Outage Store Exclusion All Locations All Items On Hand In Transit On Order None None None None None None Total Available Units = 180 units (refer to the Inventory supply records above) Availability Status = "In Stock" Example 2: Impact of Rule Set scope on availability Rule Set (scope) Exclusions Locations Items Supply Type Commerce Charac. Protection Qty (Rule set) Exclude Full Capacity? Protection Qty (Network) Outage Store Exclusion DC 1 Store 2 All Items On Hand In Transit None None None None None None Total Available Units = 50 units (refer to the Inventory supply records above) Availability Status = "In Stock" Example 3: Impact of Rule Set scope on availability Rule Set (scope) Exclusions Locations Items Supply Type Commerce Charac. Protection Qty (Rule set) Exclude Full Capacity? Protection Qty (Network) Outage Store Exclusion DC 1 Store 2 All Items On Hand None None None None None None Total Available Units = 20 units (refer to the Inventory supply records above) Availability Status = "In Stock" Example 4: Impact of Exclusion - Protection quantity (rule set) Rule Set (scope) Exclusions Locations Items Supply Type Commerce Charac. Protection Qty (Rule set) Exclude Full Capacity? Protection Qty (Network) Outage Store Exclusion DC 1 Store 2 All Items On Hand In Transit None 4 None None None None Total Available Units = 42 units (Rule set protection quantity is decreased for every on hand Inventory supply records). In this case, there are three supply records eligible as part of rule set scope (DC 1 - On hand available, DC 1- In Transit and Store 2- On hand available). So 4 units is reduced from every on hand supply records. Available units is calculated as 30 units (DC 1 In Transit) + 20 units (DC 1 & Store 2 - On Hand Available) - 8 units (Protected qty - 4 for every on hand record) =  42 units Availability Status = "In Stock" Example 5: Impact of Exclusion - Protection quantity (rule set & network) Rule Set (scope) Exclusions Locations Items Supply Type Commerce Charac. Protection Qty (Rule set) Exclude Full Capacity? Protection Qty (Network) Outage Store Exclusion DC 1 Store 1 Store 2 All Items On Hand None 4 None 5 (network) None None Total Available Units = 18 units. In addition to the rule set protection, network protection is defined as 5 units. So 5 units is reduced from the all eligible inventory which is,  35 units (DC 1, store 1 and store 2 inventory) - 12 units (rule set protection of 4 units each from three supply records) - 5 units (network protection) = 18 units. Availability Status = "In Stock" Note: Network protection is applied only for Network View and not for Location View Example 6: Impact of Exclusion - Protection quantity (rule set & network) Rule Set (scope) Exclusions Locations Items Supply Type Commerce Charac. Protection Qty (Rule set) Exclude Full Capacity? Protection Qty (Network) Outage Store Exclusion DC 1 Store 1 Store 2 All Items On Hand None 4 None 3 (for store network) None None Total Available Units = 20 units (Rule set protection quantity is decreased for every Inventory supply records). In addition to the rule set protection, Store protection (network) is defined as 3 units. So 3 units is reduced from the eligible store inventory which is,  35 units (DC 1, store 1 and store 2 inventory) - 12 units (rule set protection of 4 units each from three supply records) - 3 units (store protection) = 20 units Availability Status = "In Stock" Example 7: Impact of Exclusion - "Exclude locations with full capacity" Rule Set (scope) Exclusions Locations Items Supply Type Commerce Charac. Protection Qty (Rule set) Exclude Full Capacity? Protection Qty (Network) Outage Store Exclusion DC 1 Store 1 Store 2 All Items On Hand None None Yes - Store 2 None None None Total Available Units = 25 units. Store 2 is excluded from availability computation as Store 2 is full capacity and ATC is configured to exclude the locations at full capacity. When store 2 capacity becomes available, store 2 inventory will be eligible for Availability Availability Status = "In Stock" Example 8: Impact of Exclusion - "Outage" and "Store Exclusion" Rule Set (scope) Exclusions Locations Items Supply Type Commerce Charac. Protection Qty (Rule set) Exclude Full Capacity? Protection Qty (Network) Outage Store Exclusion DC 1 Store 1 Store 2 All Items On Hand None 2 None None DC 1 Store 1 Total Available Units = 8 units. Store 1 is excluded from availability computation as it is part of store exclusion. DC 1 inventory is excluded as there is an active outage against DC 1. So only eligible supply is Store 2. Since there is a protection unit of 2 (rule set level). Available units = 10 units (store 2 supply) - 2 units (protected) Availability Status = "Limited Stock" Example 9: Impact of Exclusion - "Commerce Characteristics" Rule Set (scope) Exclusions Locations Items Supply Type Commerce Charac. Protection Qty (Rule set) Exclude Full Capacity? Protection Qty (Network) Outage Store Exclusion DC 1 Store 1 Store 2 All Items On Hand Store 2 (doesn't match) 2 None None DC 1 Store 1 Total Available Units = 0 units. Store 1 and DC 1 is already excluded from availability computation because of store exclusion and an active outage. Store 2 is also excluded as the commerce characteristics defined in the ATC configuration doesn't match the commerce characteristics defined for Store 2 and Item 1. So Available units = 0 units Availability Status = "Out of Stock" Recompute Availability - Triggers Availability is computed on certain rules which are above the perpetual Inventory, and any changes to the ATC rules or the configurations will affect the scope and exclusion(such as Item, Location, Supply type, Commerce characteristics and Protection quantity) of the rules, or cause changes to the underlying inventory supply records, which can affect the availability picture. The following are the factors which can reevaluate the availability: Trigger Factors Impact to Availability? Supply is created or increased Availability increases Supply is decreased Availability decreases Note: Supply quantity can go negative because of negative adjustment, but availability will remain as Zero and not negative in this case. On Reservation (Allocation) Availability decreases On De-allocation Availability increases Supply - Marked with Errors Availability decreases Supply - Errors are resolved Availability increases Supply - Future ETA changes Availability will increase if ETA falls within the View scope and Availability will decrease if ETA doesn't fall within the View scope. Future supply ETA constraint plays a role in determining which future supply can be part of the availability computation. A batch scheduler job (Job Type - FutureETASchedulerJob) can be configured to evaluate if the ETA of the Future supply records are part of the view scope or not. If yes, then it is included as part of the availability computation and sends the availability alert. Example - Consider Past by and Expected in days is 5 and 10 respectively. Below are the Future supply record(s) PO 1 - 04/Sep/20 08:00 PO 2 - 05/Sep/20 04:00 ASN 3 - 20/Sep/20 16:00 ASN 4 - 21/Sep/20 07:00 ASN 5 - 22/Sep/20 08:00 When scheduler runs on 10/Sep/20 7:59 AM, then the following future supply records will be eligible for availability. PO 1, PO 2, ASN 3, ASN 4 When scheduler runs on 10/Sep/20 11:59 PM, then the following future supply records will be eligible for availability. PO 2, ASN 3, ASN 4 When the scheduler runs next day on 11/Sep/20 11:59 PM, then the following future supply records will be eligible for availability ASN 3, ASN 4, ASN 5 System picks up all future supply records between (Past due datetime - 1) and (Expected in datetime + 1) for availability View Scope changes Item attribute changes: Season, Season year, Style, Color, Size, Brand, Product class & Selling attributes (Ship to store, Pick up in store, Ship from Store) Location attribute changes: Location Status Id, Location Type Id, Location Sub Type Id, Address, Ship From Store, Pickup At Store, Ship To Store, Extended attributes Availability will increase on adding to the scope and Availability will decrease on removing from scope. Note: When Items/Locations are not part of the view - Availability is displayed as "null" or 0 Location Capacity Full = True If View is configured to exclude supply from locations with full capacity, then availability decreases. Location Capacity Full = False If View is configured to exclude supply from locations with full capacity, then availability gets increased. Protection quantity changes: Item level Network Protection level 1 to level 5 DC Protection level 1 to level 5 Store Protection level 1 to level 5 Supplier Protection level 1 to level 5 Other Protection level 1 to level 5 Item Location configuration (Inventory Protection level 1 to level 5) If Protection Levels are defined as part of Rule Set or Network Protection, then availability gets reduced or increased based on the protection quantity changes. If protection quantity increases, then the availability gets decreased and vice versa. DC Protection - allows the retailers to protect a certain amount of inventory at the DC level. Store Protection - allows the retailers to protect a certain amount of inventory at the store level. Supplier Protection - allows the retailers to protect a certain amount of inventory at the supplier level. Other - allows the retailers to protect a certain amount of inventory for other types of facilities. Commerce characteristics changes (Price status ID, Item status ID, Sell Through) Item level Item Location configuration If commerce characteristics attributes are defined, then it is used to exclude the Item(s) and Location(s) which don't match the View configuration. Availability gets decreased when commerce characteristics don't match the configuration. Availability gets increased when commerce characteristics match the configuration. Fulfillment Outage - becomes Active If the Item(s)/Location(s) defined in the outage is part of the view, then the availability decreases. Fulfillment Outage - becomes Inactive If the Item(s)/Location(s) defined in the outage is part of the view, then the availability increases. Deactivate View If the entire View is deactivated, then the availability is not computed nor published. View changes - Configurations like list of stores excluded, Rule set scope, Commerce characteristics, Protection quantity, Outage reason etc. On View activation - Based on the view scope and exclusions, availability picture can be decreased or increased. How Regional Availability Works Regional availability allows users to find availability for certain order characteristics and subsequently fulfill the order from a region or subset of locations that satisfies the specific order requirements. In other words, it limits the availability to accurately promise and fulfill special orders. For example, it may be desirable to only fulfill the same-day delivery order requirement from locations which are in close proximity to the customer’s address. In this case, a regional availability rule which limits the availability to locations within a certain distance (say 35 miles) from the customer’s address can be used for order promising. The same regional availability rule can also be used for order fulfillment. Use cases are typically supported by regional availability. In both the scenarios below, some specific requests were made while placing the order (same day delivery request and ship to store request). Based on these order requests, availability is limited to the location(s) which can fulfill same day delivery or ship to store orders. Same day delivery order: Nancy needs a fancy pair of shoes urgently for a party she has to attend. She logs in to the host website and searches for her item. She chooses the same day delivery option. The website prompts her to enter the zip code where the delivery needs to be made to check availability. On entering the zip code, the website tells her that the item is available for same day delivery. She then goes ahead and places the order and voila… she receives the item the same evening. Ship to store order: A site to store (ship to store) order is one where the customer requests for the order to be delivered to a nearby store instead of their address. This generally results in a quicker order receipt and reduced delivery charges, and a potential up-sell for retailers, a win-win situation. Samantha calls a CSR and inquires for an item. The CSR suggests her to place a ship to store order. The CSR then asks her to provide a nearby store location to check if the item is available to be shipped to the store. The item is found available and Samantha places the order. Regional Availability Rules Two types of regional availability rules are supported: Distance rules Preferred fulfillment location rules Regional availability rules can be configured under Manage Availability/Regional Availability UI. Within one regional availability rule configuration, both distance and preferred location rules can be configured. These regional rules are configured at the view configuration level. Refer to the "How To Configure Regional Availability Rules" for more details on how to set up the Regional availability rules. Distance Rules Distance based rules limit availability to only those locations which lie within a certain radius of a zip code. Radius is defined under regional availability rules. This is useful in scenarios such as same day delivery orders. In this case, a radius-based rule configured to find availability only from those locations which lie within a certain distance from the zip code can be used for order promising. The distance rule finds all the locations which lie within a certain distance (as specified in the rule configuration) from the zip code (as requested in the Get Availability request). The locations are sorted from nearest to farthest location from the zip code. For a location level view (a view which maintains availability by each location), if the Get Location Availability request includes the list of locations, those locations are also added to the list of locations found earlier. Additionally, a configuration can be selected under regional availability rules to consider availability from the pickup store also. Note: Latitude and Longitude should be configured in the Org Location to limit the locations which lie within a certain radius of a zip code. Refer How To Configure Regional Availability Rules for more details. To get the distance in the get availability response and have the locations sorted by distance, see Get Availability at nearby store for more information. Example - Consider the distance rule is set as 50 miles from the destination zip code for the same day delivery. The following are the locations that are under 50 miles of zip code 30339 and its availability picture.  Preferred locations are Store 2 and DC 1. Availability of Item 1 at these locations are: Location Availability Store 1 10 Store 2 20 Store 3 5 DC 2 200 When availability is requested for Item 1 for zip code 30339, and rule as distance, the system computes the availability of Item 1 as 235 (sum of availability from Store 1, Store 2, Store 3 and DC 2). Preferred Fulfillment Location Rules A preferred fulfillment location rule limits the availability to only those locations which are the preferred fulfillment centers for the store. This is useful for ship to store orders when availability should be limited to only locations (DCs or stores) which are the preferred fulfillment centers for a particular pickup store. Preferred location rules find the locations which are configured as preferred fulfillment locations for the store (configured under Location attribute) requested in the Get Availability request. Additionally, a configuration can be selected under Regional availability rules to consider availability from the pickup store also. Refer How to configure Regional Availability rules for more details. Example - Consider for Store 1, the preferred locations are Store 2 and DC 1. Availability of Item 1 at these locations are: Location Availability Store 1 0 Store 2 20 DC 100 When availability is requested for Item 1 at store 1 and rule as preferred location rule, the system computes the availability of Item 1 as 120 (sum of availability from Store 2 and DC 1). Get Availability at Nearby Stores The Get Location Availability API can return the availability of requested inventory not only for the customer's preferred store, but also for nearby stores. The customer is able to input their address and the API will return availability for all the stores in a given radius. This feature is enabled if ReturnNearbyLocations flag is set to true in the get availability request. Below is a list of the possible requests and the responses from the get availability API: Location Array: If the location array is populated, the locations in the request are included in the response even if they are outside of the regional availability radius Order attribute pickup location: Customer preferred pickup location. If no postal code or lat/long is passed, it is the center of the region. If a postal code or lat/long is passed, the pickup location is included in the response even if it is outside of the availability radius. This ensures that traveling customers always have visibility over their preferred store. Order attribute postal code or lat/long and country: Center of the availability region. This is usually passed by the browser using a customer's IP address or their saved address. AvailabilityRules: Define the radius of the band. This needs to be configured in the view. AvailabilityRulesOverride: It is possible to override the distance and the distance UOM of the availability rule using the availability rule override. The response always returns a list of locations sorted by distance and their distance compared to the center of the region. How Product Availability Works A product can either be a style or an itemId which does not have a style associated with it. Product Availability is maintained to allow e-commerce sites to do the following: Get the availability of an entire style, a color/style combination, or a size/style combination to be displayed on the Product Detail Page (for a particular location or for the entire network) Get the availability of many styles and the available colors in that style to be displayed on the Product List Page (for a particular location or for the entire network) A product is considered available if at least one unit of one item is available for that style. A color/style combination is considered available if at least one unit is available for all items in that style and color. A size/style combination is considered available if at least one unit is available for all items in that style and color. All of these product availability calculations rely on the quantity of units determined by the Available Quantity. See Enable Product Availability configuration for more information. How Protection Override Works Protection quantity can be overridden in availability rules and at network level for any specific items, styles, product classes, department names, and brands. The protection override can be configured on the Protection Override Configuration UI. Overriding Protection on Availability Rules The protection quantity defined by the availability rules protects the on-hand supply at the Item-Location level. It provides the ability to override this protection for specific lists of items, particular styles, product classes, department names, and specific brands. This allows us to override the existing protection values set by availability rules for "DC," "store," "suppliers," and other categories. Overriding Protection at Network Level The protection quantity defined at the network level protects the on-hand supply at the item level. It allows overriding existing protection for specific lists of items, certain styles, product classes, department names, and specific brands. This includes overriding the current protection values set at view level for "Network", "DC," "store," "suppliers," and other categories. Override Protection - Examples Location Item Style Supply Type Quantity Allocated Error? Eligible Units DC 1 Item A Mens Pants On Hand Available 10 0 No 10 DC 2 Item B Mens Accessories On Hand Available 15 0 No 15 DC 3 Item A Mens Pants On Hand Available 20 0 No 20 DC 4 Item B Mens Accessories On Hand Available 10 0 No 10 Rule Set (scope) Exclusions Locations Items Supply Type Commerce Charac. Protection Qty (Rule set) Protection Override (Ruleset) - Item A Protection Qty (Network) Outage Store Exclusion All Locations All Items On Hand In Transit On Order None 5 2 0 None None Total Available Units (Item A) = (10 - 2) + (20 - 2) = 26 units (refer to the Inventory supply records above) Total Available Units (Item B) = (15 - 5) + (10 - 5) = 15 units (refer to the Inventory supply records above) Availability Status = "In Stock" Rule Set (scope) Exclusions Locations Items Supply Type Commerce Charac. Protection Qty (Rule set) Protection Override (Ruleset) - Style(Men's Accessories) Protection Qty (Network) Outage Store Exclusion All Locations All Items On Hand In Transit On Order None 5 3 0 None None Total Available Units (Item A) = (10 - 5) + (20 - 5) = 20 units (refer to the Inventory supply records above) Total Available Units (Item B) = (15 - 3) + (10 - 3) = 19 units (refer to the Inventory supply records above) Availability Status = "In Stock" Rule Set (scope) Exclusions Locations Items Supply Type Commerce Charac. Protection Qty (Rule set) Protection Qty (Network) Protection Qty (Network) Override - Item A Outage Store Exclusion All Locations All Items On Hand In Transit On Order None None 5 1 None None Total Available Units (Item A) = (10 - 0) + (20 - 0) - 1 = 29 units (refer to the Inventory supply records above) Total Available Units (Item B) = (15 - 0) + (10 - 0) - 5 = 20 units (refer to the Inventory supply records above) Availability Status = "In Stock" Rule Set (scope) Exclusions Locations Items Supply Type Commerce Charac. Protection Qty (Rule set) Protection Qty (Network) Protection Qty (Network) Override - Style (Mens Pants) Outage Store Exclusion All Locations All Items On Hand In Transit On Order None None 5 0 None None Total Available Units (Item A) = (10 - 0) + (20 - 0) - 0 = 30 units (refer to the Inventory supply records above) Total Available Units (Item B) = (15 - 0) + (10 - 0) - 5 = 20 units (refer to the Inventory supply records above) Availability Status = "In Stock" Rule Set (scope) Exclusions Locations Items Supply Type Commerce Charac. Protection Qty (Rule set) Protection Override (Ruleset) - Style(Men's Accessories) Protection Qty (Network) Protection Qty (Network) Override - Style (Men's Pants) Store Exclusion All Locations All Items On Hand In Transit On Order None 5 4 2 0 None Total Available Units (Item A) = (10 - 5) + (20 - 5) - 0= 20 units (refer to the Inventory supply records above) Total Available Units (Item B) = (15 - 4) + (10 - 4) - 2 = 15 units (refer to the Inventory supply records above) Availability Status = "In Stock" Note : When a new Protection Override configuration is created or an existing one is updated, the view will not be rebuilt automatically. You must manually trigger the view rebuild. How Availability Works for Out-of-stock Items that can be Procured The Get Availability API (Location/Network and Publish) now includes responses for out-of-stock items that can be procured from the vendor, provided items have VendorLeadTime configured. If an item is out-of-stock with no incoming purchase orders (PO), it is treated as having infinite inventory since the item can be procured from the vendor. A new boolean flag, ProcureSupply, has been added to the response which when true, it indicates that the item can be procured; when false, signifies that the item has available inventory. Refer here for configuration How To's How to Define View To configure Available to Commerce (ATC), a retailer can define the following: Multiple commerce views -one for each order capture system that requires an availability picture. Commerce view - within a commerce view, you can have multiple configurations to support the change in availability rules at different time periods such as, seasons, quarters, and promotions. Configuration - within a configuration, you can have multiple rule sets that are defined for various fulfillment locations such as DCs, stores, suppliers, and others. Refer to ATC - UI Help for more details on how to set up ATC from UI. Define Views Multiple commerce views; one for each order capture system that requires an availability picture. Commerce views can be defined at the network or location level. By location - Defines an availability pool with an availability quantity for each individual location. This is commonly used for pick-up in store orders that require inventory to be present at the location. View type = "location." By network - Represents a single availability pool with an aggregated availability quantity (across all eligible locations.) This is commonly used for ship from store orders that require inventory to simply be present in the network. View type = "network." Commerce View can be in Active or Inactive status.  View can be activated when there is at least one View configuration and View rule set defined. The maximum number of views allowed per profile (supply) is 60. Refer to ATC Profile set up for more details. Example - Consider a Retailer having three brands represented as unique organizations in a single deployment. Brands A & B share the same supply profile, which means they can have up to 60 views combined. Brand C has a separate supply profile, which means they can have up to 60 views. So for this deployment, because there are two active supply profiles managed, there can be up to 120 views total (60 per profile). Define View Configurations View configurations define the configuration(s) that exist for the view, which often correspond to different time periods (i.e., a season.). Though multiple configurations can exist for a View, only one configuration can be active at any given time. For example, a view created for all international orders can have configurations for every season. These configurations define multiple season sales for international orders. When a new configuration is added, it is added as inactive configuration. Users can activate, deactivate, rebuild, gather statistics (preview or current state) and publish the sync for a configuration. Inactive configurations can be activated at any point of time. When the view configuration is rebuild/activated then the previous configuration becomes inactive. Refer to the Rebuild and Activate process for more details. Up to 10 configurations can be defined within a View. Define View Rule Set A rule set constitutes the list of commerce rules for a configuration. Within each configuration, Rule set(s) can be defined for every location types (Distribution Center, Stores, Suppliers, Others). Multiple rule sets can be added for a view configuration. A rule set is uniquely identified within a configuration by a rule set name, and each rule set is assigned a unique sequence (rule set sequence). For a rule set, the sellable items, locations and supply types are defined as the rule set filter. Sellable items, locations and supply type configuration is mandatory while defining a rule set. In addition, a user can optionally specify exclusion rules such as capacity considerations, commerce evaluation, or inventory protection within the rule set as described further below. Once a rule set is evaluated based on the rule set filter (Location, Items and Supply Type) then exclusion rules (capacity consideration, commerce characterized, future supply, protection quantity) is evaluated to exclude supply or reduce availability accordingly. Refer to the significance of rule set sequence in Availability computation. Note: Multiple rule sets (no upper limit) can be defined within a View configuration. If the same Item, Location and Supply Type is defined across different rule sets then, the system evaluates and uses the rule set with the least rule set sequence. Example - If Rule Set 1 is defined with (Item 1, Location 1, On Hand Supply) and Rule Set 2 is also defined with the same configuration then system considers Rule Set 1 for further evaluation and doesn't look at Rule Set 2. Once the Rule set is evaluated, the system applies commerce characteristics, protection quantity on top of Rule Set 1 as exclusion rules. How to Define Business Scope This defines the list of eligible locations, items and supply records for availability computation. Any Location, Item and Supply record that is not part of the scope will not be considered for availability computation. Refer to the following sections to set up the business scope for availability. Location - Locations define the scope of the locations for a view, and is mandatory in rule set configuration. All location(s) can be selected, or specific location(s) can be filtered using location attributes such as location sub Type and location selling attributes (Pickup at store, ship to store) etc. Location selling attributes applied only to rule set of location type - Stores. To configure location attributes, navigate to the Inventory Locations UI. This is mandatory when configuring a rule set. Note: There is no common interface today to persist data in Location and Inventory Location. Retailers need to set up Location and Inventory Location data separately. Item - Items define the scope of the items for a view, and is mandatory in rule set configuration. All item(s) can be selected, or specific item(s) can be filtered using item attributes such as Product Class, Brand and Item selling attributes (sold online, sold in stores, pickup in store etc.). To configure item attributes, navigate to the Items UI. This is mandatory when configuring a rule set. Note: Item details are populated and filtered from Inventory Item and not directly from Item. List of supported ATC Item attributes in the ATC UI can be found from API - /api/inventory/item/search/ Note: Attributes supported in Inventory Location and Inventory Item can be added to the ATC UI Supply Type - Any combination of on-hand, in transit and on-order supply attributes can be configured to filter down the sellable supply types. This is mandatory when configuring a rule set. Eligible supply records for availability can be filtered using supply attributes like Supply Type, Segments, Batch number, etc. This is mandatory when configuring a rule set. Note: Supply records with custom On Hand supply type can be filtered for availability, but custom Future (ASN/PO) supply type is not available for selection under In Transit and On Order supply records. How is Rule Set Evaluated?One or more rule sets can be configured for each availability view, and a sequence (or rank) is defined for each rule set. In addition, each rule set can have one or more rule set filters that are based on location(s), item(s), supply type, and so on. A rule set is retrieved for every supply record/view combination based on the matching supply attributes (location, item, or inventory attributes) in the supply record and the rule set filter. If there are multiple matching rule sets for an Item/Location/Supply Type combination in a view, then least rule set sequence is used for evaluating availability. In the below Example – Item 1 and Location 2 is part of Rule set 2 and Rule set 3 (assume both the rule set has On Hand Available). For Availability computation for Item 1 and Location 2 – Configuration defined under Rule Set 2 is used. How to Define Exclusions & Constraints Availability exclusion and constraint rules can be defined to exclude a few supply records or locations participating from availability computation. Similarly, part of on-hand inventory can be protected from online sales, to keep inventory for store sales. Refer to the following sections for exclusions and constraints to be applied while computing availability. Exclusion & Constraints (Rule Set level) These can be defined or updated only when the View is in de-activate mode. Commerce Characteristics Commerce characteristics can be used to further specify which items should be included in the view based on selling attributes such as item status, price status, and sell through percentage. Any items that do not match the commerce characteristics filter criteria will be excluded from the view. These attributes can be manually configured or sent as a feed into the Items UI or the Item-Location UI. Item Status Id: Indicates whether an item is Fast Selling, Slow Selling, or Clearance Sell Through Percentage: Typically defined as units sold/units received in a given time period, but this field can be configured however it is preferred. Price Status Id: High Price or Low Price Depending on whether an Item or Item Location entity should be referred to, the Commerce Source must be configured in the Inventory Configuration UI to either ‘Item’, ‘ItemLocation’, or ‘SpecifyByAttribute’. If Commerce Source is missing, then no Commerce Characteristics are honored. Example: A retailer moves their Low Selling winter coats to the clearance shelf. This makes it difficult for their store fulfillment team to locate them in the store, so the retailer wishes to remove them from their e-commerce site. As another example, a retailer may wish to sell Rule Set constraints - Commerce characteristicsCommerce Source (from where the commerce attributes to be sourced) can be configured to either Item or ItemLocation or SpecifyByAttributes (Source levels can be configured under Inventory Configuration - Commerce source). Commerce characteristics are typically downloaded periodically at Item or Item Location level (i.e., once a day or once a week) via a batch process. If set to Item then all commerce attributes are sourced from Item configuration to compare against the ATC configuration. If set to ItemLocation then all commerce attributes are sourced from Item Location configuration to compare against the ATC configuration. If set to "SpecifyByAttributes" then individual commerce attributes can be set to either source by Item or ItemLocation level (This can be configured under Commerce Characteristic Config). Use GET API - api/inventory/inventoryConfig to find the source against the commerce attributes Each attributes (either sourced from Item or Item/Location based on the above configuration) is evaluated against the rules defined in the commerce view. If the commerce characteristic (item/ItemLocation) meets the criteria defined in the commerce view, inventory from that item/Location can contribute to the availability. However, if it fails the commerce criteria, the inventory is excluded from the availability calculation. Future supply Constraints Rule sets can be configured to constraint future supply based on the estimate date of arrival (past due by and expected in days). This plays a role in determining which future supply are eligible for availability computation and computing the next availability date during availability computation. Note: Though future supply constraint is at Rule set level, there is limitation to define different constraint per location type. Latest future supply constraint gets applied to all location type. When future supply constraint is enabled - It is required to define "Past by Days" and "Expected in days". Rule Set constraints - Future supply constraintsNext Availability Date - Indicate the latest availability date for the the inventory when there is no on hand inventory and no matching future supply as defined in the future supply constraint. Examples - Consider the following Inventory Supply Records Item Location Supply Type PO/ASN ID ETA Quantity Item 1 Store 2 On Hand 10 Item 1 Store 2 In Transit ASN 1 4/20/2020 5 Item 1 Store 2 On Order PO 1 5/30/2020 100 Item 1 Store 2 On Order PO 2 6/15/2020 200 Future Constraint in ATC View is configured to consider the future supply which is expected in 7 days from today (4/15/2020) - "Expected in Days". Example 1 - On Hand "10 units" are available and customer request for "5 units". In this case "Next Availability Date" will be blank as we have On Hand supply. Example 2 - On Hand is not available but there are Future supply (part of the view scope - Future constraint) which can fulfill the order . In this case "Next Availability Date" will still be blank as we have future supply "ASN 1" ETA (4/20/2020) within the View configuration Limit (Expected in 7 days from today - 4/15/2020). Example 3 - On Hand is not available and there are no Future supply with in the view scope - Future constraint. (which can fulfill the order). In this case "Next Availability Date" will be 5/30/2020 as this is the latest future supply which can become available (based on the future constraints defined in the ATC view). Note: If there is no On Hand record in the system (No Supply record exists in the system) then also Next availability date will be blank though a future supply could exists not part of the future supply constraint. Protection Quantity Protection quantity defines the quantities that are protected from available to sell. An inventory protection level can be configured as part of the rule set to protect on-hand supply at the Item-Location level. Based on the protection level configured for a rule set, the system retrieves and applies the protection quantity value for all the Item-Location combinations included in the rule set scope. Protection quantity can be defined directly at the rule set level or can be set against the protection level in Item Location Configuration UI. Note: Protection quantity can be set at Item Location level or Item level (Refer Network protection for details). Only the protection quantity set at Item location level is considered for Location level View. For Network view - Both the protection quantity set at Item and Item-Location level is considered. By default, the protection quantity is applied to each supply record for a specific Item-Location. For instance, if the protection quantity for Item-1 at Loc-1 is 5 units and there are two supply records (On Hand available and On Hand available soon), a total of 10 units will be protected during the availability call. However, if the 'Protect Inventory At Item Location' setting is enabled in the InventoryParameter, the protection quantity is applied only once at the Item-Location level, regardless of the number of supply records. In the previous example, only 5 units would be protected during the availability call. In this case, the inventory will be protected from the lowest-ranked supply type or attribute, as defined in the demand type ranking, during reservation. Capacity Additionally, rule sets can be configured to include or exclude locations at full capacity from publishing availability. If set to include, then all location(s) irrespective of the location capacity full flag will be included for availability computation and publishing. If set to exclude then the location(s) which are capacity full will be excluded from availability computation and also these location(s) inventory will not be published out. Refer to Capacity management guide for more details on how capacity flag is maintained for a location. Exclusion & Constraints (Availability level) Network Protection Network protection allows the retailer to protect a certain amount of inventory at a network level. This protection can be configured at the network level or the location group level, and differs from protection at the item/location level which reserves a number of units from each individual location. Network protection quantity or network protection level (configured at item level) can be set as part of view configuration. Navigate to Items UI to configure the protection quantity against the protection levels. Network Protection is considered only for Network view during Publish Availability and not during Allocation against this view. Availability constraints - Why Network Protection is neededWhy Network Protection is needed when there is protection at Item-location level? Protection at Item-location level is commonly used to reserve 1 unit of an item for display at each store, or to reserve X units for safety stock at the store. However, for some retailers (apparel,jewelry), since the "item" is the combination of style-color-size, most stores typically only have 1 unit of each item at each store. So the item-location inventory protection cannot be used (since protecting 1 unit from stores which are only stocked to have 1 unit, always results in 0 units of the item being exposed from every item-location or 0 units of the item from the store network). However, these retailers would still like a way to protect X units from the "store network" to account for inventory accuracy issues and to protect the customer experience. In these cases, Network protection can be used (Refer to the illustration below) Fulfillment Outage Outage Rules are configured in the Fulfillment Outage UI. A group of items and/or locations (from a particular facility type) can be selected along with an outage reason, effective date, and expiration date to create an outage. A Fulfillment Outage only impacts on hand inventory at the particular location. An outage is defined at the location level if the "all items" check box is selected while configuring a Fulfillment Outage. An outage is defined at the item/location level if a subset of items is selected while configuring a Fulfillment Outage. When the Fulfillment Outage becomes active (indicated by a green dot), the supply associated with the location(s) and item(s) configured in the outage rule is not considered for availability for all ATC views with that particular outage reason configured. Outages configured for a specific item/location are maintained against the supply record. When an outage is configured for a set of item(s) and location(s), the outage status is updated for every matching supply (item/location) and applicable view(s) in the Availability by Supply entity. Fulfillment Outage Configuration Tips: Fulfillment outages start and end times always need to be configured in UTC time zone. Always configure a Fulfillment Outage at least 15 minutes into the future. Ensure that the performance fixes for outage activation, update, and delete are enabled. Make sure the selected outage reason is also configured in the ATC view which should be impacted by the Fulfillment Outage Do not modify existing active outage rules; instead, create new ones. You can only edit the name and end time of an active rule. Expired rules cannot be modified. An active fulfillment outage cannot be deleted. Instead, to end a fulfillment outage early, update the end date. Benefit of Using Fulfillement Outage: The benefits of using Fulfillment Outage include: Rapid response to disruptions Precise control over inventory availability Prevention of overselling during outages Improved customer satisfaction Reduced operational complexity during disruptions Refer to configure fulfillment Outage section to configure Outage Rules in the Fulfillment Outage UI. Store Exclusions Store exclusions allow the retailer to configure stores to be part of the view but excluded from availability publishing. These stores are still applicable for sourcing and order allocation, but not availability publishing. Regional Availability Rules Regional rules allow the retailer to configure ATC views to show available items within a certain range of the destination address or based on preferred location. Configure on the Regional Availability UI. Refer to How To Configure Regional Availability Rules for more info. How to Enable Product Availability Enabling Product Availability Requests allows external systems to call the following APIs. Refer to How Product Availability Works for more details. Get Product Availability: Returns availability of a style, availability of all items having that style, and available colors/sizes having that style Get Store Product Availability: Returns the location availability of a style, availability of all items having that style, and available colors/sizes having that style Get Product List Availability: Returns the availability of multiple styles and a list of available colors for each style in the request Get Store Product List Availability. Returns the location availability of multiple styles and a list of available colors for each style in the request. Refer to ATC - UI help for more details on how to enable product availability request from UI. How to Enable Availability(Location/Network and Publish) for out-of-stock items Follow the below UI Steps : Navigate to "Available To Commerce (New)" Navigate to Publish Availability Tab > Additional Settings Enable "Consider Vendor Lead Time for Availability" checkbox OR Navigate to "Available To Commerce" Navigate to Availability Status Tab > Sync Enable "Consider Vendor Lead Time for Availability" checkbox Implementation Flavors Why multiple ATC views may be required Why multiple views may be required?Multiple commerce views can be required when The level in which the order capture system requires the availability differs (for example, pick-up in store requires the availability at each individual store, while ship to address requires an aggregated availability) The availability used to fulfill the orders differs (for example, replenishment orders only consider DC inventory while D2C orders consider DC + Store inventory). For example, let’s say you’re shopping online and you select monogramming or same day shipping. Once you select monogramming or same day shipping, then it is likely that only a subset of the stores can participate. In this scenario, ideally we would have a monogramming or same day shipping view, and once the shopper selected these options… the website would make a web service call to OM to get the updated / more precise availability. How to filter Location specific to an Organization in ATC UI How to filter Locations specific to a Org in ATC UI?This can be done provided Location is further categorized using Location sub type or any other attribute which can be used in the ATC filter. In this case, if all US locations are defined with a new location sub type then it can be filtered in the ATC view (thereby setting up an ATC view with only US locations). How to Map a New Custom Location Type New custom location Type should be mapped with Location Type “Others”. Only the location type Distribution Center, Stores, and Suppliers can be synced. What is the maximum number of items that can be returned by the product availability API based on style? API details: inventory/api/availability/product/availability { "ItemId": "string", "StyleDetail": { "Color": [ "string" ], "Size": [ "string" ], "Style": "string" }, "ViewDefinitionId": "string", "ViewName": "string" } Maximum 500 items per style and there is no pagination added as part of this API . If the style has more than 500 items, base throws the below error. Exception : Too many items matched the request criteria. Please adjust your request to reduce the number of items Related Articles REST APIs and User ExitsView Activation and RebuildsPublish AvailabilityTroubleshootingAvailability StatisticsOverview