# Capacity as a Constraint & Optimization

**Permalink:** capacity-as-constraints-optimization
**Path:** Manhattan Active® Omni/Order Management/Process & Configuration Guides/Enterprise Inventory/Capacity Management/Capacity as a Constraint & Optimization
**Content Length:** 36,090 characters
**Scraped:** 2025-08-09T21:54:36.624461

---

Home ››Manhattan Active® Omni››Order Management››Process & Configuration Guides››Enterprise Inventory››Capacity Management ››Capacity as a Constraint & Optimization Capacity as a Constraint & Optimization Previous | Next OverviewCapacity as ConstraintsCapacity as Optimization FactorImplementation FlavorsRelated Articles Overview Capacity is used both as a promising constraint and an optimization factor by the optimization engine. Refer to the following key attributes which plays a role in constraint and optimization. Max Capacity - Max capacity is used as a daily max, and no more orders are allowed in the store for that day/shift once it reaches the maximum capacity. The View configuration helps to take the store offline when full. When the View configuration says to keep the store online when full then the stores can go over max cap. For example, MaxBacklog = 10 orders; MaxBacklog is the total orders (or units or lines) that can be allocated to a store at a given point in time. This means that when 10 orders are allocated to the store, the ANF will move on to allocate orders to a different store, in order to load balance across stores. Max Backlog - Max backlog doesn’t stop the orders from releasing to the stores/location. It’s used more for balancing when configured as an optimization factor. Max backlog is defined as the queue depth at a given time for the stores, but it can go past that if there are no other options. For example, MaxCapacity = 10 orders; MaxCapacity is the total orders (or units or lines) that can be allocated to a store for an entire shift. This means that when 10 orders are allocated to the store, then all inventory at the store is considered unavailable in ATC until the next shift begins. Location Capacity Full - If the location capacity (defined at the order, order line or unit level) during the shift reaches the configured maximum capacity, the location is marked as full. The location is excluded from promising as the view does not publish any availability from the location. At no point, neither the max backlog or max capacity stops order directly from allocating or releasing the order to the store, but you can indirectly do that by removing the store from the view when the max capacity is reached. Capacity as Constraints Promising considers three constraints: scheduling, inventory and capacity.  If either of the following are true, the location is excluded from promising due to capacity: Capacity Fulfillment Hours not Matching - The location's capacity is not defined for the time of the day when the allocation is attempted. If the location is not available to fulfill orders at the time when promising is attempted, the location is excluded from promising. For example, if the capacity of a location is defined from 10:00 AM to 8:00 PM for a given day, the location is not considered for an order being allocated at 9:00 PM. Examples: Always Unlimited Capacity: For a location to always have unlimited capacity (i.e, a distribution center), no capacity definition or capacity override record should exist for the location for any day of the week or for any specific date. For such locations: Capacity is never considered as a constraint by the promising engine. Promising always assumes the capacity utilization percentage as zero. Unlimited Capacity only for a Day of the Week or Specific Date : On certain occasions (i.e., peak periods), a retailer may wish to grant unlimited capacity to a location that normally has a capacity constraint definition. For example, a business may normally define a max capacity for a DC, but as an exception wishes to exclude capacity constraints for a specific date. In such cases, an unlimited capacity override can be defined for the date. Example:  Unlimited capacity override for a specific date Location Id Date Start Time End Time Max Backlog Max Capacity DC 1 12/21/2020 07.30 22.00 - - Similarly, if a location has unlimited capacity on a particular day of the week, the retailer can define unlimited capacity for the day. Example: Unlimited capacity for a day of the week: Location Id Day Start Time End Time Max Backlog Max Capacity DC 1 Monday 10.00 20.00 - - In both cases: The location has unlimited capacity for consuming e-commerce orders since max Capacity is not defined. The capacity fulfillment hours defined for the location still act as a constraint for promising. The location is not considered for reservation for any order outside of the defined hours. Promising always assumes the capacity utilization percentage for the location to be zero. Unlimited Capacity with Backlog: Even if the location has unlimited capacity, the retailer may still choose to maintain a backlog for fulfilling e-commerce orders. This allows promising to continue to allocate to high-throughput stores, regardless of how many orders the store has already processed during the shift. Example: Location Id Day Start Time End Time Max Backlog Max Capacity DC 1 Monday 07.30 22.00 50 - Locations have unlimited capacity since max Capacity is not specified. The capacity fulfillment hours defined for the location acts as a constraint for promising. The location is not considered for reservation for any order outside of the defined hours. The location utilization percentage is calculated as a percentage of the current backlog to the max backlog of the location. This percentage helps the promising engine balance workload across locations. Capacity Constraint with no Backlog: Retailers can choose to only define the maximum capacity of a location if they wish to cap locations at a certain number of orders but are not concerned with backlog metrics. In such cases, the max backlog of the location is not defined. For example, a retailer can define the maximum number of orders the store is willing to accept in a shift, but not be concerned with the number of unfulfilled orders as long as it does not exceed the maximum capacity defined. Example: Location Id Day Start Time End Time Max Backlog Max Capacity DC 1 Monday 07.30 22.00 - 50 The location has a maximum capacity defined for accepting orders during the shift. The capacity fulfillment hours defined for the location acts as a constraint for promising. The location is not considered for reservation for any order outside of the defined hours. Since the max backlog is not defined, the location utilization percentage is considered as zero. Capacity Constraint Equal to Backlog: Retailers can set the max backlog to be the same as the max capacity when they wish to define capacity utilization percentages based on the max capacity. Example: Location Id Day Start Time End Time Max Backlog Max Capacity Store A Monday 07.30 22.00 50 50 When the number of orders reserved against Store A reaches 50, the store capacity utilization percentage reaches 100% and the store is marked as capacity full. The capacity fulfillment hours defined for the location acts as a constraint for promising. The location is not considered for reservation for any order outside of the defined hours. The location utilization percentage is calculated as a percentage of the current backlog to the max backlog of the location. This percentage helps promising engine balance workload across locations. Unavailable/No Capacity for Day of Week or Specific Date: If the location is not available for promising on a day of the week/shift, the capacity should not be defined. For example, if a location is not available for reservations on Sundays, no capacity record should exist for that day. Note: If no capacity definition or overrides exist for a location on any day/date, the location is considered to have unlimited capacity. However, if at least one capacity definition or capacity override record exists, the location is considered to have zero capacity on any days where a record is not defined.  For more information, see the always unlimited capacity section. However, if the capacity is not available at a location on a specific date that typically has capacity, the capacity for that date should be overridden with zero. For example, if a store is not available for order fulfillment on Sunday, 12/24/2020 but normally has capacity on a Sunday, the capacity for the date should be overridden with zero. Example: Location Id Date Start Time End Time Max Backlog Max Capacity Store A 12/24/2020 07.30 14.00 0 0 Using the above example, the location cannot accept any e-commerce orders for this shift. When the shift starts, the location is marked as capacity full and ATC view(s) excludes the location. Even if the view does not exclude the location (i.e., if the view does not subscribe to capacity), the promising process excludes the location as it will not find any available capacity for promising. Note: If a location is not available for one or more days, one can also configure exclusion rules to exclude the location from a view. The location does not have any remaining capacity to fulfill e-commerce orders. When current capacity utilization for the location reaches Max capacity then location is marked as Full. If the ATC view is configured to remove location(s) with full capacity, then it will not be considered for Allocation. Consider an e-commerce ATC view was configured to remove locations when they reached max capacity. Let's say there were a total of 3 stores, for the sake of an example. Before go-live, the store picture was as follows: Store Current Backlog Max Backlog Current Capacity Utilized Max Capacity Store Inventory available in ATC? A 0 10 0 10 Yes B 0 10 0 10 Yes C 0 10 0 10 Yes When orders began flowing in, the utilized capacity of each store quickly rose until it reached 10: Store Current Backlog Max Backlog Current Capacity Utilized Max Capacity Store Inventory available in ATC? A 10 10 10 10 No B 10 10 10 10 No C 10 10 10 10 No At this point, because the max capacity was reached for each store, the store locations were updated to CapacityFull = true in the inventory component. This makes all inventory at stores A, B, and C unavailable. These stores with full capacity can be considered for allocation based on Allocation overrides. Refer to Promising Guide for more details. Capacity as Optimization Factor Capacity also acts as one of the optimization factors to determine the best location for reservation. Based on the current backlog at each location, promising determines the most appropriate location in order to prevent locations from being over or under-utilized. Capacity utilization percentage data is fed to the promising engine which uses that data to balance the workload by giving higher preference to locations with lower utilization. The capacity percentage of a location is computed as the percentage of the current backlog of the maximum backlog defined for the location. Refer to the Order Promising guide for additional information. Capacity Percentage = Current Backlog / Max Backlog * 100 Examples Consider a configuration which uses MaxBacklog = 10 and MaxCapacity = 50. With this configuration, only 10 orders can be allocated to each store at any point in time, however, as the stores ship those units, more orders can be allocated to the store throughout the shift, until the maximum of 50 is reached. If ANF is configured to perform optimization based on capacity only then ANF will try to give preference to other stores where max back log is not reached. When 10 orders are allocated against store A (assuming it is the highest performing store, for example), then the capacity utilization picture is updated as below. Store Current Backlog Max Backlog Current Capacity Utilized Max Capacity Store Inventory available in ATC? A 10 10 10 50 Yes B 0 10 0 50 Yes C 0 10 0 50 Yes At this point, ANF attempts to balance the workload across stores and moves onto allocating to the next-highest performing store: store B. Store Current Backlog Max Backlog Current Capacity Utilized Max Capacity Store Inventory available in ATC? A 10 10 10 50 Yes B 10 10 10 50 Yes C 0 10 0 50 Yes Next 10 orders are allocated to store B, which reaches its max backlog. ANF then begins allocating against the next store which has available backlog: store C. Store Current Backlog Max Backlog Current Capacity Utilized Max Capacity Store Inventory available in ATC? A 10 10 10 50 Yes B 10 10 10 50 Yes C 10 10 10 50 Yes At this point, all 3 stores have reached their max backlog, but if more orders drop, then they can still allocate against stores A, B, and C if there are no other options, since max backlog is not a hard constraint, but is only used for load balancing. For instance, there could be 8 more units allocated to each of the 3 stores: Store Current Backlog Max Backlog Current Capacity Utilized Max Capacity Store Inventory available in ATC? A 18 10 18 50 Yes B 18 10 18 50 Yes C 18 10 18 50 Yes Next, stores B and C each ship 12 orders, then their current backlog counts are reduced to 6. At this point, when new orders come in, ANF will allocate them against stores B and C, as they are below their max backlog. Store Current Backlog Max Backlog Current Capacity Utilized Max Capacity Store Inventory available in ATC? A 18 10 18 50 Yes B 6 10 18 50 Yes C 6 10 18 50 Yes This process repeats until the current capacity utilized reaches the max of 50. If all 3 stores have shipped 50 orders by 3:00 PM but the shift doesn't end until 7:00 PM, then inventory at stores A, B, and C is removed from the ATC picture at 3:00 PM. Until the next shift starts (the next day, for instance), inventory from these stores is not considered available for sale. Once the next shift starts and capacity is available again, this is not considered as an inventory rise for purposes of re-allocation. This means that if orders are currently backordered because the location(s) with inventory have no available capacity, the orders will not automatically re-trigger allocation once capacity is added for the next shift. To accomplish this, an agent should be configured to re-allocate backordered quantity on a regular basis. A 0 10 50 50 No B 0 10 50 50 No C 0 10 50 50 No When the next shift starts, then capacity is reset, and inventory is considered available again: A 0 10 0 50 Yes B 0 10 0 50 Yes C 0 10 0 50 Yes With this configuration, the business is able to manage capacity without losing sales. Capacity Reset on Shift Change (scheduler run) Consider the below details before shift change Store Current Backlog Max Backlog Current Capacity Utilized Max Capacity Store Inventory available in ATC? A 10 10 50 50 No B 10 10 50 50 No C 10 10 50 50 No When the next shift starts, then capacity is reset and inventory is considered available again Store Current Backlog Max Backlog Current Capacity Utilized Max Capacity Store Inventory available in ATC? A 0 10 0 50 Yes B 0 10 0 50 Yes C 0 10 0 50 Yes Once the next shift starts and capacity is available again, this is not considered as an inventory rise for purposes of re-allocation. This means that if orders are currently backordered because the location(s) with inventory have no available capacity, the orders will not automatically re-trigger allocation once capacity is added for the next shift. To accomplish this, an agent should be configured to re-allocate backordered quantity on a regular basis. Consider a multi-tier organization set up: Location and Inventory are maintained at the parent organization level, and orders are at the child level. Capacity is defined at the inventory location level (parent). When orders are allocated, capacity utilization (at the parent org) is updated accordingly. This is implicitly taken care as ownership is shared (property name: IsOwnershipShared) between the organizations for this profile purpose (inv::locationconfiguration). Implementation Flavors NA Related Articles Releasing CapacityHow Capacity WorksManaging High Utilization LocationsRolling Capacity to the Next Day/ShiftRest APIs & User ExitsOverview