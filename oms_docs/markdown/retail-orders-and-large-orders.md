# Retail Orders and Large Orders

**Permalink:** retail-orders-and-large-orders
**Path:** Manhattan Active® Omni/Order Management/Process & Configuration Guides/Order Orchestration/Creating and Updating Order/Retail Orders and Large Orders
**Content Length:** 97,553 characters
**Scraped:** 2025-08-09T21:56:34.520727

---

Home ››Manhattan Active® Omni››Order Management››Process & Configuration Guides››Order Orchestration››Creating and Updating Order ››Retail Orders and Large Orders Retail Orders and Large Orders Previous I Retail Orders and Large OrdersOverviewProcess FlowRetail Order AllocationUploading Pullback and Transfer Orders via ExcelRetail Order CreationCreating Retail Order via Save Order APICreating Pullback and Transfer Orders using an Excel importCreating Pullbacks and Transfer Orders via the Orders UIHow to Upload Orders via the Orders UITracking Import ProgressUpdating Orders via Excel UploadCreating Pullbacks and Transfer Orders via the Bulk Import APIImplementation FlavorsFeature ScopeLarge OrdersConfigurationsComponent PropertiesConfiguration for the Allocation of Large OrdersConfiguration for the Release of Large Orders Related Articles Overview Manhattan Active® Omni supports retail orders with up to 5000 lines with different items. These orders can represent any retail processes from store replenishments to pullbacks and transfer orders. The main characteristic of retail orders is that they don't involve any selling related characteristics. This means that taxes, charges, invoices, and payment processes are out of scope for retail orders. A retail order with less than 1000 lines does not need specific configuration to be processed by the system. However, any order between 1000 and 5000 lines needs a change in the configuration. See Large order processing at the end of this guide for more information. An order is considered being a retail order when the field doc type ID contains the information "RetailOrder". /.. rest of the order json "DocType": { "DocTypeId": "RetailOrder" } /..rest of the order json Because of the nature of retail orders and retail supply chain in general, they also can have a "Ship From Location" to be populated at the order/order line level. A retail order can have different order types that represent different categories of retail orders. For example: Store replenishment orders are used when DC inventory needs to be pushed to the store either to replenish store inventory after a sale or to add new merchandise to the store. This can happen at any point during the season. Pullback orders are used when merchandising and planning teams pull inventory from the stores and return it to distribution centers (DCs). This typically happens at the end of each season, as new products are launched. Transfer orders are used when inventory forecasts are above or below the actual sales stores. For example, a retailer may create transfer orders each week to move inventory across stores or from store to DC to meet demand better. Pullback and transfer orders are commonly imported via an external integration with a Merchandise Planning System (MPS). However, for retailers who manage the process manually or without integrations, Manhattan Active® Omni offers an Excel upload option in the Orders UI or via API. This option is intended for businesses who manage their pullbacks and transfer orders in various sources in the enterprise data warehouse, such as forecasts, sales vs. forecast performance, seasonality, promotional events, physical space in stores, and new product launches. Process Flow Retail Order Allocation Retail order and large order allocation Uploading Pullback and Transfer Orders via Excel Process flow for Retail order through excel upload Retail Order Creation Creating Retail Order via Save Order API All types of retail orders can be created or updated through the Save Order API. Below is a sample pullback order with the ship-to address populated as a store or DC address. Pull back or Transfer Order Json{ "OrderId": "DD000-83964728016756667626", "IsConfirmed": true, "DocType": { "DocTypeId": "RetailOrder" }, "OrderType": { "OrderTypeId": "Pullback Order" }, "OrderLine": [ { "OrderLineId": "1",å "ItemId": "V01900911", "UOM": "Unit", "Quantity": 1, "DeliveryMethod": { "DeliveryMethodId": "ShipToAddress" }, "ShipToAddress": { "Address": { "Address1": "5660 Mosholu Ave", "City": "New York", "Country": "US", "Email": "Bdylan@yopmail.com", "FirstName": "Bob", "LastName": "Dylan", "Phone": "1231231234", "PostalCode": "10471", "State": "NY" } }, "CarrierCode": "UPS", "ServiceLevelCode": "Ground", "ShipToLocationId": "omniorg-us:AtlantaDC", "OrderLinePromisingInfo": { "ShipFromLocationId": "globalorg-uk:U1001" } } ] } Note: Within the Store application, the delivery method for pullback and transfer orders is created as "Ship to Location" for internal processing reasons. This conversion only occurs within Store. All outbound messages convert the delivery method back to the original “Ship To Address” for communication outside Store applications. Creating Pullback and Transfer Orders using an Excel import Pullbacks and transfer order creation is also supported using an Excel import tool. Import the Excel using the Orders UI Import Order option or via Postman using the following API: /order/api/order/order/excel/bulkupload. The specifications of both options will be described below. Creating Pullbacks and Transfer Orders via the Orders UI How to Upload Orders via the Orders UI Pre-requisites: User should have relevant grant to import orders and to view import progress (see Order Processing UI Resources). Navigate to the Orders UI Click "Import Order" Upload the Excel sheet Ensure the order data in the Excel sheet meets the following specifications: The Doc Type must be RetailOrder The ShipFromLocationId must be populated in the OrderLinePromisingInfo or OrderPromisingInfo for allocation to succeed. The ShipToLocationId must be populated in the OrderLine or OrderPromisingInfo for allocation to succeed. The carrier code and service level must be populated on the OrderLine or OrderPromisingInfo The delivery method must be "ShipToAddress" Tracking Import Progress Track the progress of your upload by using the View Import Progress button. This displays a list of the recent Excel imports. The associated Run Id for each load can be selected to search the Orders UI for the orders loaded in that import run. This Run Id value is also saved on the order and can be viewed in the Get Order API response if needed. For each run, a processed count will indicate how many orders were processed successfully. A user can determine the failed order count by comparing the total and the processed count. Updating Orders via Excel Upload The Excel upload option can also be used to update orders which were previously created. For example, this can be used to add missing data or correct data. To send an update, the "ActionType" should be set to "Update" for each existing Order Id. Click here for Excel upload to update orders. Creating Pullbacks and Transfer Orders via the Bulk Import API If a user prefers not to use the UI and wants to directly use an API to import orders using an Excel file, it is entirely possible. This offers the same capabilities as importing orders through the import order UI. Download the sample Excel template Manhattan's documentation space or request this from services. Input order information in correct fields/worksheets. Do not populate the Message/TimeStamp columns. Enhance the template with additional fields as needed by adding the field name into the next empty column in the appropriate worksheet. To load via Postman, use the below API In the Body, change the body format from JSON to “Form-Data”. The body will update to a grid. In the first cell under “Key”, input ‘workbook’ and select “File”. In “Value”, click the “Browse” button and navigate to your Excel file. Execute the API: /order/api/order/order/excel/bulkupload Implementation Flavors NA Feature Scope The Order Audit UI, Troubleshoot order UI and viewing large retail order on the Customer service UI are not supported. There is currently no way to restrict users from accessing these UIs for such order, but processes should be in place to ensure users do not try to access these UI/features for large retail orders as it could cause memory issues in the system and UI long loading time. Order with lines having same items getting allocated from different locations is not supported Fulfillment Optimization Config should not have Optimization parameters defined for these orders Excel upload is supported only for Doc Type 'Retail'. Customer order bulk import is not supported. Populating ship-to address for Retail orders via Excel upload is not supported. Additional details on orders which failed to upload using Excel are not currently provided. Order and order line extended attributes via Excel upload is not supported. Large Orders As mentioned before, any retail order of less than 1000 lines is not considered as a large order. However, for performance and technical constraints, any order that contains between 1000 and 5000 lines has to be treated specifically. Orders of more than 5000 lines are not supported. It is important to note that the performance of the allocation is linked to the order size. For example, promising APIs are limited to 1000 lines per call. To still be able to support 5000 lines in one order, the allocation process for large orders will internally break down the order into multiple promising request of maximum 1000 lines each. Large orders have to be flagged as such on import. A project can use an extended attribute or a specific order type to mark an order as a large order. This integration attribute will be used by the allocation and release configuration described below. Configurations Component Properties Below properties should be enabled to improve the performance for Large Orders. Below properties should be added under component.properties or KV store of order component. Property Value Comments manh.changemgmt.performanceEnabled true Property to improve order side performance. Note: This is enabled by default but should be checked by the project in case the property does not exist order.allowTrackingDetailForRetailOrder false To stop tracking for retail orders. Configuration for the Allocation of Large Orders Allocating large orders requires the use of a specific large order pipeline. It is recommended to have the order flagged as large order (using an extended attribute or a base field that you choose) on import as the system does not have logic to count the number of order lines to decide to use the large order processing. Configuration steps for large orders allocation: Step 1 Create a new service definition - allocateLargeOrder Component Request Method End Point Request Payload Notes Order POST {{url}}/order/api/ServiceDefinition/serviceDefinition/save { "ComponentId": "Order", "ServiceId": "allocateLargeOrder", "BeanName": "allocationMapServiceImpl", "TransitionsState": true, "InputSchema": null, "OutputSchema": null, "BusinessMethod": "allocateOrder", "Url": null, "ServiceStateTransition": { "ProcessTypeId": "ORDER_EXECUTION", "TriggerRequired": "true", "DriverEntityName": "Order" } } The large order will go through this service, based on the tag value. Step 2 Create outboundMessageType and inboundMessageType for AllocateLargeOrderEventMSGType Component Request Method End Point Request Payload Notes Order POST {{url}}/order/api/ServiceDefinition/inBoundMessageType/save { "MessageType": "AllocateLargeOrderEventMSGType", "NoOfConsumer": 1, "MinNoOfConsumer": 0, "Idempotent": true, "ExternalIntegrationRequired": false, "MaxDesiredInstances": 1, "ScaleUpTimeWindow": 10, "ScaleDownTimeWindow": 20, "ErrorMessageType":  null, "Description": "", "ServiceId": "allocateLargeOrder" } The large order will go through this service, based on the tag value. Order POST {{url}}/order/api/ServiceDefinition/outBoundMessageType/save { "MessageType": "AllocateLargeOrderEventMSGType", "Transactional": true, "PersistMessageToMsgStore": false } The large order will go through this service, based on the tag value. Below steps 3 to 6 are valid both for allocation and release of large orders. Step 3 Create ruleAction for ExtendedShipToHome Component Request Method End Point Request Payload Notes Order POST {{url}}/order/api/rules/ruleAction/save { "RuleActionId": "DELIVERYORDER_EXTENDED_PIPELINE_ACTION", "ActionDescription": "Extended Order Pipeline Action", "ActionValue": "ExtendedShipToHome" } The large order will go through this ruleAction. Step 4 - The attribute set on import to mark a large order is going to be used here. Create ruleCondition for DELIVERYORDER_EXTENDED_PIPELINE_CONDITION Component Request Method End Point Request Payload Notes Order POST {{url}}/order/api/rules/ruleCondition/save { "RuleConditionId": "DELIVERYORDER_EXTENDED_PIPELINE_CONDITION", "ConditionValue": "{\"expression\":{\"lhs\":{\"operandType\":\"attribute\",\"attribute\":\"orderLine.parentOrder.orderType.orderTypeId \"},\"rhs\":{\"operandType\":\"constant\",\"value\":\"RETAIL\"},\"operator\":\"=\"}}" } The large order will go through this ruleCondition, based on the Condition set here. In this example, the order type "retail" is used as an example. Each project is expected to adapt the condition to their specific large order import attribute Step 5 Create ruleCondition for DELIVERYORDER_EXTENDED_PIPELINE_RULE Component Request Method End Point Request Payload Notes Order POST {{url}}/order/api/rules/rule/save { "RuleId": "DELIVERYORDER_EXTENDED_PIPELINE_RULE", "RuleGroupId": "DELIVERYORDER_PIPELINE_RULE_GROUP", "RuleDescription": "Delivery Order EXTENDED Pipeline Rule", "Component": "Order", "RuleStatus": "active", "RuleVersion": "1", "Salience": "0", "DisplaySequence": "1", "ActivationDate": null, "ExpirationDate": null, "RuleConditionId": "DELIVERYORDER_EXTENDED_PIPELINE_CONDITION", "RuleActionId": "DELIVERYORDER_EXTENDED_PIPELINE_ACTION" } The large order will go through this rule. Step 6 (Note: This pipeline is valid both for allocating and releasing large orders) Create pipeline for ExtendedShipToHomePipeline Definition Component Request Method End Point Request Payload Notes Order POST {{url}}/order/api/ServiceDefinition/pipeline/save { "Actions": { "PickupService": "RESET", "DropStatusDetermination": "RESET" }, "PickupService": [ { "FromStatus": "0000", "ComponentId": "Order", "ServiceId": "createOrder" }, { "FromStatus": "2000", "ComponentId": "Order", "ServiceId": "updateOrder" }, { "FromStatus": "1500", "ComponentId": "Order", "ServiceId": "updateOrder" }, { "FromStatus": "1000", "ComponentId": "Order", "ServiceId": "allocateLargeOrder" }, { "FromStatus": "1000", "ComponentId": "Order", "ServiceId": "batchAllocate" }, { "FromStatus": "1000", "ComponentId": "Order", "ServiceId": "allocateBackOrder" }, { "FromStatus": "1500", "ComponentId": "Order", "ServiceId": "allocateLargeOrder" }, { "FromStatus": "1500", "ComponentId": "Order", "ServiceId": "batchAllocate" }, { "FromStatus": "2000", "ComponentId": "Order", "ServiceId": "releaseLargeOrder" }, { "FromStatus": "2000", "ComponentId": "Order", "ServiceId": "batchRelease" }, { "FromStatus": "2000", "ComponentId": "Order", "ServiceId": "deAllocateOrder" }, { "FromStatus": "3000", "ComponentId": "Order", "ServiceId": "shortOrder" }, { "FromStatus": "3000", "ComponentId": "Order", "ServiceId": "processOrder" }, { "FromStatus": "3000", "ComponentId": "Order", "ServiceId": "pickOrder" }, { "FromStatus": "3000", "ComponentId": "Order", "ServiceId": "packOrder" }, { "FromStatus": "3000", "ComponentId": "Order", "ServiceId": "fulfillOrder" }, { "FromStatus": "3500", "ComponentId": "Order", "ServiceId": "unProcessOrder" }, { "FromStatus": "3500", "ComponentId": "Order", "ServiceId": "shortOrder" }, { "FromStatus": "3500", "ComponentId": "Order", "ServiceId": "pickOrder" }, { "FromStatus": "3500", "ComponentId": "Order", "ServiceId": "packOrder" }, { "FromStatus": "3500", "ComponentId": "Order", "ServiceId": "fulfillOrder" }, { "FromStatus": "3600", "ComponentId": "Order", "ServiceId": "packOrder" }, { "FromStatus": "3600", "ComponentId": "Order", "ServiceId": "shortOrder" }, { "FromStatus": "3600", "ComponentId": "Order", "ServiceId": "fulfillOrder" }, { "FromStatus": "3700", "ComponentId": "Order", "ServiceId": "shortOrder" }, { "FromStatus": "3700", "ComponentId": "Order", "ServiceId": "fulfillOrder" }, { "FromStatus": "7000", "ComponentId": "Order", "ServiceId": "createReturn" }, { "FromStatus": "7000", "ComponentId": "Order", "ServiceId": "deliverOrder" }, { "FromStatus": "7500", "ComponentId": "Order", "ServiceId": "createReturn" }, { "FromStatus": "8000", "ComponentId": "Order", "ServiceId": "confirmReturn" }, { "FromStatus": "8000", "ComponentId": "Order", "ServiceId": "cancelReturn" }, { "FromStatus": "8500", "ComponentId": "Order", "ServiceId": "cancelReturn" } ], "ProcessTypeId": "ORDER_EXECUTION", "Description": "Extended Ship to home", "PipelineId": "ExtendedShipToHome", "DropStatusDetermination": [ { "ConditionText": null, "Sequence": 1, "DropStatus": "1000", "ServiceId": "createOrder", "FromStatus": "0000", "ComponentId": "Order", "IntendedDropStatus": "1000" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "1500", "ServiceId": "allocateLargeOrder", "FromStatus": "1000", "ComponentId": "Order", "IntendedDropStatus": "1500" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "2000", "ServiceId": "allocateLargeOrder", "FromStatus": "1000", "ComponentId": "Order", "IntendedDropStatus": "2000" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "2000", "ServiceId": "allocateLargeOrder", "FromStatus": "1500", "ComponentId": "Order", "IntendedDropStatus": "2000" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "1500", "ServiceId": "batchAllocate", "FromStatus": "1000", "ComponentId": "Order", "IntendedDropStatus": "1500" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "2000", "ServiceId": "batchAllocate", "FromStatus": "1000", "ComponentId": "Order", "IntendedDropStatus": "2000" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "2000", "ServiceId": "batchAllocate", "FromStatus": "1500", "ComponentId": "Order", "IntendedDropStatus": "2000" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "1500", "ServiceId": "deAllocateOrder", "FromStatus": "2000", "ComponentId": "Order", "IntendedDropStatus": "1500" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "1000", "ServiceId": "updateOrder", "FromStatus": "2000", "ComponentId": "Order", "IntendedDropStatus": "1000" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "1000", "ServiceId": "updateOrder", "FromStatus": "1500", "ComponentId": "Order", "IntendedDropStatus": "1000" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "3000", "ServiceId": "releaseLargeOrder", "FromStatus": "2000", "ComponentId": "Order", "IntendedDropStatus": "3000" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "3000", "ServiceId": "batchRelease", "FromStatus": "2000", "ComponentId": "Order", "IntendedDropStatus": "3000" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "1500", "ServiceId": "shortOrder", "FromStatus": "3000", "ComponentId": "Order", "IntendedDropStatus": "1500" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "3500", "ServiceId": "processOrder", "FromStatus": "3000", "ComponentId": "Order", "IntendedDropStatus": "3500" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "3600", "ServiceId": "pickOrder", "FromStatus": "3000", "ComponentId": "Order", "IntendedDropStatus": "3600" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "3700", "ServiceId": "packOrder", "FromStatus": "3000", "ComponentId": "Order", "IntendedDropStatus": "3700" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "7000", "ServiceId": "fulfillOrder", "FromStatus": "3000", "ComponentId": "Order", "IntendedDropStatus": "7000" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "7500", "ServiceId": "deliverOrder", "FromStatus": "7000", "ComponentId": "Order", "IntendedDropStatus": "7500" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "3000", "ServiceId": "unProcessOrder", "FromStatus": "3500", "ComponentId": "Order", "IntendedDropStatus": "3000" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "1500", "ServiceId": "shortOrder", "FromStatus": "3500", "ComponentId": "Order", "IntendedDropStatus": "1500" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "3600", "ServiceId": "pickOrder", "FromStatus": "3500", "ComponentId": "Order", "IntendedDropStatus": "3600" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "3700", "ServiceId": "packOrder", "FromStatus": "3500", "ComponentId": "Order", "IntendedDropStatus": "3700" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "7000", "ServiceId": "fulfillOrder", "FromStatus": "3500", "ComponentId": "Order", "IntendedDropStatus": "7000" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "1500", "ServiceId": "shortOrder", "FromStatus": "3600", "ComponentId": "Order", "IntendedDropStatus": "1500" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "3700", "ServiceId": "packOrder", "FromStatus": "3600", "ComponentId": "Order", "IntendedDropStatus": "3700" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "7000", "ServiceId": "fulfillOrder", "FromStatus": "3600", "ComponentId": "Order", "IntendedDropStatus": "7000" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "1500", "ServiceId": "shortOrder", "FromStatus": "3700", "ComponentId": "Order", "IntendedDropStatus": "1500" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "7000", "ServiceId": "fulfillOrder", "FromStatus": "3700", "ComponentId": "Order", "IntendedDropStatus": "7000" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "8000", "ServiceId": "createReturn", "FromStatus": "7000", "ComponentId": "Order", "IntendedDropStatus": "8000" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "8000", "ServiceId": "createReturn", "FromStatus": "7500", "ComponentId": "Order", "IntendedDropStatus": "8000" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "8500", "ServiceId": "confirmReturn", "FromStatus": "8000", "ComponentId": "Order", "IntendedDropStatus": "8500" }, { "ConditionText": null, "Sequence": 1, "DropStatus": "7000", "ServiceId": "cancelReturn", "FromStatus": "8000", "ComponentId": "Order", "IntendedDropStatus": "7000" }, { "Sequence": 1, "DropStatus": "7000", "ServiceId": "cancelReturn", "ConditionText": null, "FromStatus": "8500", "ComponentId": "Order", "IntendedDropStatus": "7000" } ] } The large order will go through this rule. Configuration for the Release of Large Orders Releasing large orders requires the use of a specific pipeline. The above steps are still valid but for release activities, additional objects have to be created. Configuration steps for large order release: Step 1 Create a new service definition - releaseLargeOrder Component Request Method End Point Request Payload Notes Order POST {{url}}/order/api/ServiceDefinition/serviceDefinition/save { "ComponentId": "Order", "ServiceId": "releaseLargeOrder", "BeanName": "releaseMapServiceImpl", "TransitionsState": true, "InputSchema": null, "OutputSchema": null, "BusinessMethod": "releaseOrder", "Url": null, "ServiceStateTransition": { "ProcessTypeId": "ORDER_EXECUTION", "TriggerRequired": "true", "DriverEntityName": "Order" } } The large order will go through this service, based on the order tag Step 2 Create outboundMessageType and inboundMessageType for ReleaseLargeOrderEventMSGType Component Request Method End Point Request Payload Notes Order POST {{url}}/order/api/ServiceDefinition/inBoundMessageType/save { "MessageType": "ReleaseLargeOrderEventMSGType", "NoOfConsumer": 1, "MinNoOfConsumer": 0, "Idempotent": true, "PreFetchCount":1, "ExternalIntegrationRequired": false, "MaxDesiredInstances": 6, "ScaleUpTimeWindow": 10, "ScaleDownTimeWindow": 20, "ErrorMessageType":  null, "Description": "", "ServiceId": "releaseLargeOrder" } The large order will go through this queue, based on the order tag Order POST {{url}}/order/api/ServiceDefinition/outBoundMessageType/save { "MessageType": "ReleaseLargeOrderEventMSGType", "Transactional": true, "PersistMessageToMsgStore": false } The large order will go through this queue, based on the order tag Step 3 to 6 are identical to the steps defined in previous sections. If you have already done, then no need to repeat them. Related Articles •  Creating and Updating Order