# Publishing Order 

**Permalink:** how-publish-order-works
**Path:** Manhattan Active® Omni/Order Management/Process & Configuration Guides/Order Orchestration/Publishing Order 
**Content Length:** 123,865 characters
**Scraped:** 2025-08-09T21:56:44.068155

---

Home ››Manhattan Active® Omni››Order Management››Process & Configuration Guides››Order Orchestration ››Publishing Order Publishing Order Previous I Next OverviewHow Publish Order Works?Configure Publish Order/Order LinePublish Order/Order Line Template SelectionPublish Order/Order Line Message ManuallyHow To'sHow to Configure Publish OrderHow to Customize Publish Order TemplateImplementation FlavorsUse Case 1 - Display supply details and supply quantity break up in publish orderUse Case 2 - Publish order or order line message whenever there is a change in allocated quantity or change in delivery date due to supply updatesUse Case 3 - Allocation supply details and supply quantity break up in get orderUse Case 4 - Release TogetherUse Case 5 - Allocation details in publish order for a cancelled orderUse Case 6 - PublishOrder outbound messages are asynchronous in nature. In certain instances, these messages are dispatched to the listener or consumed by a third party in an unordered mannerHow to set up template for base user exits to see the ChangeLog in the user exitHow to generate publish order line message when a merge line is shipped for ship to store ordersHow to stop sending email or messages when a return order is cancelled and parent order status changes from pending return to fulfilled or delivered (7000/7500) statusHow to generate the publish order line message only when all the units are shippedTroubleshootingI want to stop publishing the supply detail break-ups from Order sideHow can I get to know which order line is allocated, the quantity and delivery date changes from publish order/order line?Not able to see the new Mod Types like Update Reservation Match Quantity and Update Reservation Match ETA in the order config UI I want to stop generating Quantity Update/ ETA Update events from Reservation match changeI wanted to publish Committed Delivery Date closer to RDD and dont want to wait till LRD calculated based on LPDDIf any Inventory event leads to both quantity change and ETA change, which Order Mod Type should triggerWill order side changes like RDD/LPDD update and quantity update trigger republish eventWhat kind of inventory changes leads to republish orderWill the value update to OrderLinePromisingInfo.IsDeliveryByRequestedDate": (true/false) re-evaluate the datesWill the value update to OrderLinePromisingInfo.IsDeliveryByRequestedDate": (true/false) re-publish the datesWhat is the scenario when Onhand allocation can go to LPDD route evaluation?How can I see dates other than UTC, in omnifacade UI?Not able to see supply detailed breakup for Retail orders. (Orders having large number of orderlines)Is it possible to trigger a publish order on a specific mod type to get a specific changelog in the publish order?Send PublishOrder message when OrderLine level milestone is not met.Why is ShippedQuantity is always 0 in Allocation.SupplyDetailInfo.SupplyAttributes in the Publish Order status on Fulfilled?Will SupplyDetail Info get purged when reservation gets purged ?The publish order event does not honor the publish order template when invoked through an extension handlerRelated Articles Overview Driven by business needs, retailers may want to update external system with any order updates or update customers via emails on their order status. Entire order or only the specific order Line that is updated can be sent in the Publish message. Publish Order Line message is useful when external systems only want the lines that were updated on an order and not all the order lines. Publish Order outbound message allows external systems to track updates or changes made to the order and communicate information to customers or other systems. Common usage of Publish Order is to communicate any order updates or changes to external systems. The external system can consume these messages and send updates to the customer or third-party system. On Order Cancelation - Publish Order message can be sent to notify the customer or third-party system on cancelation. On Status Changes (Picked, Packed, Shipped) - Publish Order message can be sent to notify the customer on status change. Publish Order and Publish Order Line can be configured for specific order updates like Quantity, Status change, Attribute value changes, and so on. Refer to Mod Types guide for details on how to configure Publish Order/Order Line for specific MOD Types. Publish Order/Order Line can also be configured to be generated for specific Order Type (Use Case - Customer wants to Publish Order for Web Orders but not for Call Center Orders). This can be controlled by having different Order configurations for every Order Types. How Publish Order Works? Publish Order Process Flow When an order is created or updated, all the associated Mod Types are evaluated and triggered. For example, when an order is created or updated with "isConfirmed" as True, then MOD Type "ConfirmOrder" will be triggered. Configure Publish Order/Order Line As part of MOD Type, the Publish Order service can be configured at Order or Order Line or Quantity level. Refer to How to configure Publish Order in Order config for more details. For example, Mod Type "ConfirmOrder" is evaluated to check if Publish Order/Order line should be generated. If Publish Order service is not configured, Order is not published to the external system. Publish Order/Order Line Template Selection If Publish Order service is configured, then Order/Order line is published based on the selected Template in the Order Configuration UI. Both Publish Order and Publish Order Line uses the same template. The default template is provided out of the box. Publish Order Template can be customized to exclude attributes and include new order and order line attributes. Refer How to customize Publish Order Template for more details. Note: It is recommended not to modify out of the box templates but create a copy and modify the same. If no template is selected in the Order Configuration UI, then Order/Order line is published based on a default template. Refer to the below table for the default template attributes Entity Description Example Order Attributes of Order entity are included in this section OrderId, Customer First Name, Customer Last Name, Email, Is Confirmed, and so on Order Line Attributes of Order Line entity are included in this section OrderLineId, ItemId, Unit Price, Extended, and so on Invoice Attributes of Invoice entity are included in this section Invoice Line, Invoice Charge Detail, Invoice Tax Detail, and so on Release Attributes of Release entity are included in this section ReleaseType, ReleaseLine, Release Id, and so on OrderExtension1/2/3/4/5 Attributes of pre-configured OrderExtension1,2,3,4,5 OrderExtension1, OrderExtension2, OrderExtension3, OrderExtension4, OrderExtension5 Note: Any additional extended attributes can be added in custom template OrderLineExtension 1/2/3/4/5 Attributes of pre-configured OrderLineExtension1,2,3,4,5 OrderLineExtension1, OrderLineExtension2, OrderLineExtension3, OrderLineExtension4, OrderLineExtension5 Note: Any additional extended attributes can be added in custom template ChangeLog Tracks mod type that was triggered to generate Publish Order Message Change Log Address Ship to Address fields Order.Address is populated for Ship To Address orders. Ship To Store orders will not have address populated Based on the custom or default template, the Publish Order or Order Line message is generated in JSON format and sent to the respective queues for external system to consume. Below are the details of the Queues where the messages are published: Publish Order Queue: publishOrderEvent Publish Line Queue: publishOrderLineEvent Sample Publish Order message (triggered for mod type Apply Appeasement) Sample Publish Order { "ConfirmedOrderTotal": 35.3, "PostVoidReason": null, "SuspendedOrderId": null, "Invoice": [], "CreatedTimestamp": "2020-10-20T19:17:11.614", "BusinessDate": null, "TaxOverrideValue": null, "MaxFulfillmentStatusId": "2000", "TaxExemptReason": null, "CurrencyCode": "GBP", "CustomerPhone": "6786970001", "EventSubmitTime": null, "UpdatedBy": "admin@globalorg-uk.com", "CustomerFirstName": "Faiyaz", "RefundRecipient": { "RefundRecipientId": "Customer" }, "TaxExemptId": null, "OrderLineCount": 1, "OrderHold": [], "ManagerAuthDetail": [], "OrderToken": "KtLRGiBAiG5vYlx6wWZY", "IsArchiveInProgress": false, "IsCapturedOffline": false, "CreatedBy": "admin@globalorg-uk.com", "IsCancelled": false, "OrderExtension5": [], "CustomerId": null, "OrderAdditionalAttribute": null, "OrderExtension3": [], "OrderExtension4": [], "OrderExtension1": null, "OrderPaymentMethod": [], "IsTaxExempt": false, "OrderExtension2": [], "ParentReservationRequestId": null, "OrderTrackingInfo": [], "ContextId": "1e07f114-33a3-4424-b4a6-f710478a1b32", "ReturnLabel": [], "ArchiveDate": null, "LoyaltyNumber": null, "TaxOverrideReason": null, "StoreSaleCount": 0, "MinReturnStatusId": null, "IsTaxOverridden": false, "IsPostVoided": false, "AlternateOrderId": null, "TaxOverridePercValue": null, "CancelledOrderSubTotal": null, "OrderLine": [ { "ParentLineCreatedTimestamp": null, "CreatedTimestamp": "2020-10-20T19:17:11.621", "BusinessDate": null, "RefundPrice": null, "IsHazmat": false, "TaxOverrideValue": null, "MaxFulfillmentStatusId": "2000", "OrderLineCancelHistory": [], "StoreSaleEntryMethod": null, "IsRefundGiftCard": false, "ShippingMethodId": "Standard", "ValueEntryRequired": false, "ItemMaxDiscountPercentage": null, "UpdatedBy": "admin@globalorg-uk.com", "OrderLineSalesAssociate": [], "ReleaseGroupId": null, "OrderLineSubTotal": 35.3, "ItemStyle": "12238", "ParentOrderId": null, "ReturnableQuantity": 0.0, "OrderLineHold": [], "CreatedBy": "admin@globalorg-uk.com", "SmallImageURI": "http://res.cloudinary.com/com-manh-cp/image/upload/12238_poolsidebluebeachwalk_a1.jpg", "IsCancelled": false, "IsDiscountable": true, "CancelledOrderLineSubTotal": null, "ItemBrand": "U.S. Polo", "ReturnType": null, "IsPerishable": false, "GiftCardValue": null, "ContextId": "1e07f114-33a3-4424-b4a6-f710478a1b32", "IsPriceOverridden": false, "TotalInformationalTaxes": 0, "IsPreSale": false, "HasComponents": false, "ItemMaxDiscountAmount": null, "ItemDepartmentName": null, "IsExchangeable": true, "ItemColorDescription": "Blue", "OrderLineAttribute": [], "IsReturn": false, "IsTaxOverridden": false, "OrderLineNote": [], "TaxOverridePercValue": null, "OrderLineTagDetail": [], "OrderLinePickupDetail": [], "ShortSelfServiceUrl": null, "ProductClass": "Tops", "MinFulfillmentStatusId": "2000", "PaymentGroupId": null, "MinFulfillmentStatus": { "StatusId": "2000" }, "UpdatedTimestamp": "2020-10-20T19:57:54.083", "EffectiveRank": "Not Applicable", "DeliveryMethod": { "DeliveryMethodId": "ShipToAddress" }, "TaxOverrideType": null, "TaxableAmount": 27.3, "TotalDiscountOnItem": -8.0, "CancelledTotalDiscounts": null, "ReturnLineTotalWithoutFees": 0, "IsReturnableAtStore": true, "FulfillmentGroupId": "fa166a7e3c88f55cc6ca3c8abe24564e", "ReturnDetail": [], "OrgId": "globalorg-uk", "UnitPrice": 35.3, "MaxAppeasementAmount": 27.3, "ItemShortDescription": "DUVAL NOTCH NECKLINE LINEN TOP", "CarrierCode": null, "ItemBarcode": null, "QuantityDetail": [ { "Status": { "StatusId": "1000" }, "UpdatedTimestamp": "2020-10-20T19:17:52.665", "CreatedBy": "admin@globalorg-uk.com", "CreatedTimestamp": "2020-10-20T19:17:12.844", "QuantityDetailId": "44507174572333500535", "Quantity": 0.0, "Process": null, "SubstitutionRatio": null, "ItemId": "Tops-12238-Blue-L", "Reason": null, "OrgId": "globalorg-uk", "SubstitutionType": null, "UpdatedBy": "admin@globalorg-uk.com", "UOM": "EA", "ContextId": "0d7e6ecd-7f04-445b-b837-f9cebabb42a7", "StatusId": "1000", "ReasonType": null, "PK": "6032214328442833540", "ChangeLog": null, "Unique_Identifier": "6032214328442833540__44507174572333500535__Tops-12238-Blue-L" }, { "Status": { "StatusId": "2000" }, "UpdatedTimestamp": "2020-10-20T19:17:52.65", "CreatedBy": "admin@globalorg-uk.com", "CreatedTimestamp": "2020-10-20T19:17:52.65", "QuantityDetailId": "44905222160562033351", "Quantity": 1.0, "Process": null, "SubstitutionRatio": null, "ItemId": "Tops-12238-Blue-L", "Reason": null, "OrgId": "globalorg-uk", "SubstitutionType": null, "UpdatedBy": "admin@globalorg-uk.com", "UOM": "EA", "ContextId": "0d7e6ecd-7f04-445b-b837-f9cebabb42a7", "StatusId": "2000", "ReasonType": null, "PK": "6032214726503162716", "ChangeLog": null, "Unique_Identifier": "6032214726503162716__44905222160562033351__Tops-12238-Blue-L" } ], "ChangeLog": null, "PromisedShipDate": null, "TotalDiscounts": 0.0, "AllocationConfigId": null, "ShipToAddress": { "AddressName": null, "AvsReason": null, "Address": { "Email": "Khimanifaiyaz@gmail.com", "FirstName": "Faiyaz", "State": "GB", "Phone": "6786970001", "Address2": null, "Address3": null, "Country": "GB", "PostalCode": "30024-2993", "LastName": "Khimani", "Address1": "2700 Windy Ridge Parkway", "City": "Suwanee", "County": null }, "IsAddressVerified": true, "AddressId": "274b73ec9483eee9bc19cb86173327c3" }, "ServiceLevelCode": null, "ItemDepartmentNumber": null, "IsReturnable": true, "IsTaxIncluded": false, "IsPriceOverrideable": true, "OrderLinePriceOverrideHistory": [], "IsOnHold": false, "IsReceiptExpected": true, "ItemWebURL": "", "OrderLineComponents": [], "Process": null, "ItemId": "Tops-12238-Blue-L", "PhysicalOriginId": "globalorg-europe:HastingsDC", "ReturnableLineTotal": 0, "SellingLocationId": null, "IsGift": false, "FulfillmentStatus": "Allocated", "ParentOrderLineId": null, "TotalCharges": 0.0, "ParentOrderLineType": null, "AddressId": "274b73ec9483eee9bc19cb86173327c3", "ShipFromAddress": null, "VolumetricWeight": null, "Priority": null, "ItemDeptNumber": null, "SelfServiceUrl": null, "OrderId": "CC10006", "IsPreOrder": false, "PromisedDeliveryDate": null, "ItemTaxCode": null, "CancelReason": null, "LatestDeliveryDate": null, "StreetDate": null, "OrderLinePromotionRequest": [], "AlternateOrderLineId": null, "OrderLinePromisingInfo": null, "DeliveryMethodSubType": null, "DoNotShipBeforeDate": null, "OrderLineTaxDetail": [ { "VatTaxCode": null, "IsInvoiceTax": false, "CreatedTimestamp": "2020-10-20T19:57:53.961", "TaxTypeId": "VAT", "TaxIdentifier5": null, "TaxIdentifier4": null, "JurisdictionTypeId": "COUNTRY", "Process": null, "UpdatedBy": "admin@globalorg-uk.com", "HeaderTaxDetailId": null, "TaxAmount": 5.46, "TaxCode": null, "TaxDate": "2020-10-20T00:00:00", "TaxRate": 0.2, "UpdatedTimestamp": "2020-10-20T19:57:53.961", "CreatedBy": "admin@globalorg-uk.com", "TaxDetailId": "Vertex-1083007140", "TaxableAmount": 27.3, "TaxEngineId": null, "Jurisdiction": "UNITED KINGDOM", "FulfillmentGroupId": "fa166a7e3c88f55cc6ca3c8abe24564e", "OrgId": "globalorg-uk", "IsInformational": false, "TaxIdentifier3": null, "ContextId": "1e07f114-33a3-4424-b4a6-f710478a1b32", "TaxIdentifier2": null, "TaxIdentifier1": "VAT", "PK": "6032238739613417686", "Unique_Identifier": "6032238739613417686__Vertex-1083007140" }, { "VatTaxCode": null, "IsInvoiceTax": false, "CreatedTimestamp": "2020-10-20T19:57:54.014", "TaxTypeId": "VAT", "TaxIdentifier5": null, "TaxIdentifier4": null, "JurisdictionTypeId": "COUNTRY", "Process": null, "UpdatedBy": "admin@globalorg-uk.com", "HeaderTaxDetailId": "Vertex1761067906", "TaxAmount": 0.0, "TaxCode": "Shipping", "TaxDate": "2020-10-20T00:00:00", "TaxRate": 0.0, "UpdatedTimestamp": "2020-10-20T19:57:54.014", "CreatedBy": "admin@globalorg-uk.com", "TaxDetailId": "68918868134579230353", "TaxableAmount": 0.0, "TaxEngineId": null, "Jurisdiction": "UNITED KINGDOM", "FulfillmentGroupId": "fa166a7e3c88f55cc6ca3c8abe24564e", "OrgId": "globalorg-uk", "IsInformational": false, "TaxIdentifier3": null, "ContextId": "1e07f114-33a3-4424-b4a6-f710478a1b32", "TaxIdentifier2": null, "TaxIdentifier1": "VAT", "PK": "6032238740143439022", "Unique_Identifier": "6032238740143439022__68918868134579230353" } ], "IsItemTaxOverridable": true, "OrderLineChargeDetail": [ { "CreatedTimestamp": "2020-10-20T19:17:50.354", "IsTaxIncluded": false, "RelatedChargeType": null, "Process": null, "UnitCharge": null, "ChargeReferenceId": null, "ChargeReferenceDetailId": null, "Reason": null, "OriginalChargeAmount": 0.0, "UpdatedBy": "admin@globalorg-uk.com", "TaxCode": "Shipping", "HeaderChargeDetailId": "d83cafb2970671385edb285fe2ebcd", "IsReturnCharge": false, "ChargeDetailId": "44882275790235134266", "ParentChargeDetailId": null, "RelatedOrderLineId": null, "RelatedChargeDetailId": null, "IsProratedAtSameLevel": false, "UpdatedTimestamp": "2020-10-20T19:17:50.354", "ChargePercent": null, "CreatedBy": "admin@globalorg-uk.com", "ChargeTotal": 0.0, "Comments": null, "TaxableAmount": null, "RequestedAmount": null, "IsLineDiscount": false, "IsCopied": false, "IsOverridden": false, "IsPostReturn": false, "ChargeSubType": null, "FulfillmentGroupId": "fa166a7e3c88f55cc6ca3c8abe24564e", "OrgId": "globalorg-uk", "ChargeSequence": 0, "IsInformational": false, "IsCopiedHeaderCharge": false, "DiscountOn": null, "ChargeType": { "ChargeTypeId": "Shipping" }, "ChargeDisplayName": null, "ContextId": "db72c415-7e26-4f1a-9eec-da930c6f0792", "PK": "6032214703543051370", "ChangeLog": null, "Unique_Identifier": "6032214703543051370__44882275790235134266" }, { "CreatedTimestamp": "2020-10-20T19:57:53.492", "IsTaxIncluded": false, "RelatedChargeType": null, "Process": null, "UnitCharge": null, "ChargeReferenceId": "AmtOff", "ChargeReferenceDetailId": null, "Reason": { "ReasonId": "Customer-Complaint" }, "OriginalChargeAmount": null, "UpdatedBy": "admin@globalorg-uk.com", "TaxCode": "Discount", "HeaderChargeDetailId": "6891255837358581580", "IsReturnCharge": false, "ChargeDetailId": "08d78641-d52a-4898-97d4-f9d8e25845e5", "ParentChargeDetailId": null, "RelatedOrderLineId": null, "RelatedChargeDetailId": null, "IsProratedAtSameLevel": false, "UpdatedTimestamp": "2020-10-20T19:57:53.492", "ChargePercent": null, "CreatedBy": "admin@globalorg-uk.com", "ChargeTotal": -8.0, "Comments": "", "TaxableAmount": null, "RequestedAmount": -8, "IsLineDiscount": false, "IsCopied": false, "IsOverridden": false, "IsPostReturn": false, "ChargeSubType": null, "FulfillmentGroupId": null, "OrgId": "globalorg-uk", "ChargeSequence": 0, "IsInformational": false, "IsCopiedHeaderCharge": false, "DiscountOn": { "DiscountOnId": "Order" }, "ChargeType": { "ChargeTypeId": "Appeasement" }, "ChargeDisplayName": null, "ContextId": "1e07f114-33a3-4424-b4a6-f710478a1b32", "PK": "6032238734923405224", "ChangeLog": null, "Unique_Identifier": "6032238734923405224__08d78641-d52a-4898-97d4-f9d8e25845e5" } ], "ItemSeason": null, "OrderLineTotal": 40.76, "ItemDescription": "The Duval printed linen cap sleeve top is a summer essential. Wear this with your favorite printed", "IsItemTaxExemptable": true, "Allocation": [ { "ServiceLevelCode": "UPS_GROUND", "InventorySegmentId": null, "CreatedTimestamp": "2020-10-20T19:17:52.606", "AllocationId": "44904792914792122528", "SubstitutionTypeId": null, "AllocationType": "Delivery", "CountryOfOrigin": null, "ShipFromLocationId": "globalorg-europe:HastingsDC", "EarliestDeliveryDate": "2020-10-20T19:17:00", "AllocatedOn": "2020-10-20T19:17:52.583", "EarliestShipDate": "2020-10-20T19:17:00", "Process": null, "SubstitutionRatio": null, "InventoryTypeId": null, "ItemId": "Tops-12238-Blue-L", "IsVirtual": false, "UpdatedBy": "admin@globalorg-uk.com", "CommittedDeliveryDate": null, "InventoryAttribute1": null, "InventoryAttribute2": null, "InventoryAttribute3": null, "InventoryAttribute4": null, "InventoryAttribute5": null, "AsnId": null, "AsnDetailId": null, "Status": { "StatusId": "Open" }, "UpdatedTimestamp": "2020-10-20T19:17:52.606", "CreatedBy": "admin@globalorg-uk.com", "ShipToLocationId": null, "CommittedShipDate": null, "BatchNumber": null, "LatestShipDate": null, "Quantity": 1.0, "ShipViaId": "UPSGR", "AllocationDependencyId": null, "GroupId": null, "ProductStatusId": null, "OrgId": "globalorg-uk", "UOM": "EA", "PoDetailId": null, "ReservationRequestDetailId": "1", "ContextId": "0d7e6ecd-7f04-445b-b837-f9cebabb42a7", "CarrierCode": "UPS", "LatestReleaseDate": null, "PK": "6032214726063156089", "PoId": null, "ReservationRequestId": "CC10006", "Unique_Identifier": "6032214726063156089__44904792914792122528" } ], "OrderLineVASInstructions": [], "PipelineId": "ShipToHome", "ItemSize": "L", "IsNonMerchandise": false, "LineType": null, "ShipToLocationId": null, "ShipFromAddressId": null, "IsActivationRequired": false, "Quantity": 1.0, "IsItemNotOnFile": false, "IsPackAndHold": false, "IsGiftCard": false, "CancelComments": null, "MaxFulfillmentStatus": { "StatusId": "2000" }, "VolumetricWeightUOM": null, "OrderLineExtension1": null, "FulfillmentDetail": [], "OrderLineExtension2": [], "UOM": "EA", "OrderLineExtension3": [], "OrderLineExtension4": [], "OrderLineId": "1", "TotalTaxes": 5.46, "OrderLineAdditional": null, "TransactionReferenceId": null, "RequestedDeliveryDate": null, "PK": "6032214316212805660", "OriginalUnitPrice": 35.3, "IsEvenExchange": false, "OrderLineExtension5": [], "LineProcessInfo": null, "Unique_Identifier": "6032214316212805660__1" } ], "CustomerEmail": "Khimanifaiyaz@gmail.com", "DoNotReleaseBefore": "2020-10-20T21:17:19.68", "OrderNote": [], "OrderAttribute": [], "CustomerCommPref": [], "CustomerSignature": null, "RunId": null, "MinFulfillmentStatusId": "2000", "DocType": { "DocTypeId": "CustomerOrder" }, "PublishStatus": null, "UpdatedTimestamp": "2020-10-20T19:57:54.082", "ReturnLabelEmail": null, "ProcessReturnReason": null, "TaxOverrideType": null, "ProcessReturnComments": null, "CancelledTotalDiscounts": null, "OrderMilestoneEvent": [], "IsUnArchiveInProgress": false, "MerchSaleLineCount": 1, "CustomerIdentityDoc": [], "OrgId": "globalorg-uk", "OrderLocale": "en", "IsOrderCountable": true, "OrderCaptureConfig": { "UpdatedTimestamp": "2020-10-20T19:17:12.577", "CreatedBy": "admin@globalorg-uk.com", "CreatedTimestamp": "2020-10-20T19:17:12.561", "InvoiceTaxModeId": "Quotation", "Process": null, "ReturnInvoiceTaxMode": "ReturnOrderLedger", "TrackDelivery": false, "UpdatedBy": "admin@globalorg-uk.com", "OrgId": "globalorg-uk", "TaxComparisonStrategy": "Jurisdiction", "ContextId": "1a6f6343-eb8e-4750-a2b3-340d6c3103cf", "PK": "6032214325612827149", "Unique_Identifier": "6032214325612827149" }, "CustomerLastName": "Khimani", "CapturedDate": "2020-10-20T19:17:11.614", "CustomerTypeId": null, "NextEventTime": "2020-10-20T23:17:19.68", "ChangeLog": { "ModTypes": { "Order": [ "Order::ChargeDetail::Appeasement::Apply" ] } }, "TotalDiscounts": -8.0, "CancelLineCount": 0, "SelfServiceAttribute": null, "OrderUpdatedBy": [ { "OrgId": "globalorg-uk", "UpdatedByUser": "admin@globalorg-uk.com", "UpdatedBy": "admin@globalorg-uk.com", "UpdatedTimestamp": "2020-10-20T19:17:12.558", "CreatedBy": "admin@globalorg-uk.com", "CreatedTimestamp": "2020-10-20T19:17:12.558", "UpdatedByDate": "2020-10-20", "ContextId": "1a6f6343-eb8e-4750-a2b3-340d6c3103cf", "Process": null, "PK": "6032214325582818763", "Unique_Identifier": "6032214325582818763__admin@globalorg-uk.com__2020-10-20" } ], "ReturnTrackingDetail": [], "IsOnHold": false, "Process": null, "IsConfirmed": true, "RefundPaymentMethod": null, "SellingLocationId": null, "OrderChargeDetail": [ { "CreatedTimestamp": "2020-10-20T19:17:50.346", "IsTaxIncluded": false, "RelatedChargeType": null, "Process": null, "ChargeReferenceId": null, "ChargeReferenceDetailId": null, "Reason": null, "IsProrated": true, "OriginalChargeAmount": 0.0, "UpdatedBy": "admin@globalorg-uk.com", "TaxCode": "Shipping", "IsReturnCharge": false, "ChargeDetailId": "d83cafb2970671385edb285fe2ebcd", "ParentChargeDetailId": null, "RelatedChargeDetailId": null, "IsProratedAtSameLevel": false, "UpdatedTimestamp": "2020-10-20T19:17:50.346", "ChargePercent": null, "CreatedBy": "admin@globalorg-uk.com", "ChargeTotal": 0.0, "Comments": null, "TaxableAmount": 0.0, "RequestedAmount": null, "IsOverridden": false, "IsPostReturn": false, "IsOrderDiscount": false, "ChargeSubType": null, "FulfillmentGroupId": "fa166a7e3c88f55cc6ca3c8abe24564e", "OrgId": "globalorg-uk", "ChargeSequence": 0, "IsInformational": false, "DiscountOn": null, "ChargeType": { "ChargeTypeId": "Shipping" }, "ChargeDisplayName": null, "ContextId": "db72c415-7e26-4f1a-9eec-da930c6f0792", "PK": "6032214703463045524", "ChangeLog": null, "Unique_Identifier": "6032214703463045524__d83cafb2970671385edb285fe2ebcd" }, { "CreatedTimestamp": "2020-10-20T19:57:53.383", "IsTaxIncluded": false, "RelatedChargeType": null, "Process": null, "ChargeReferenceId": "AmtOff", "ChargeReferenceDetailId": null, "Reason": { "ReasonId": "Customer-Complaint" }, "IsProrated": true, "OriginalChargeAmount": null, "UpdatedBy": "admin@globalorg-uk.com", "TaxCode": "Discount", "IsReturnCharge": false, "ChargeDetailId": "6891255837358581580", "ParentChargeDetailId": null, "RelatedChargeDetailId": null, "IsProratedAtSameLevel": false, "UpdatedTimestamp": "2020-10-20T19:57:54.084", "ChargePercent": null, "CreatedBy": "admin@globalorg-uk.com", "ChargeTotal": -8, "Comments": "", "TaxableAmount": null, "RequestedAmount": -8, "IsOverridden": false, "IsPostReturn": false, "IsOrderDiscount": false, "ChargeSubType": null, "FulfillmentGroupId": null, "OrgId": "globalorg-uk", "ChargeSequence": 0, "IsInformational": false, "DiscountOn": { "DiscountOnId": "Order" }, "ChargeType": { "ChargeTypeId": "Appeasement" }, "ChargeDisplayName": null, "ContextId": "1e07f114-33a3-4424-b4a6-f710478a1b32", "PK": "6032238733833398362", "ChangeLog": { "ModTypes": { "Order": [ "Order::ChargeDetail::Appeasement::Apply" ] }, "ChangeSet": [ { "Properties": [ { "New": "Appeasement", "Old": "null", "Property": "ChargeType" } ], "ModType": "Order::ChargeDetail::Appeasement::Apply" } ] }, "Unique_Identifier": "6032238733833398362__6891255837358581580" } ], "OrderType": { "OrderTypeId": "Call In Order" }, "CountedDate": "2020-10-20T19:20:06.892", "TotalCharges": 0.0, "ReturnLineCount": 0, "PaymentStatus": { "StatusId": "3000.000" }, "OrderSalesAssociate": [], "Priority": null, "StoreReturnCount": 0, "OrderTagDetail": [], "OrderId": "CC10006", "OrderSubTotal": 35.3, "OrderCaptureDetail": [], "CancelReason": null, "ContactPreference": [], "OrderPromotionRequest": [], "ConfirmedDate": "2020-10-20T19:20:06.649", "IsReadyForTender": false, "CustomerAddress": null, "TransactionReference": [], "TaxExemptComments": null, "CancelledOrderTotal": null, "OrderPromisingInfo": null, "OrderTaxDetail": [ { "VatTaxCode": null, "IsInvoiceTax": false, "CreatedTimestamp": "2020-10-20T19:57:54.006", "TaxTypeId": "VAT", "TaxIdentifier5": null, "TaxIdentifier4": null, "JurisdictionTypeId": "COUNTRY", "Process": null, "IsProrated": true, "UpdatedBy": "admin@globalorg-uk.com", "TaxAmount": 0.0, "TaxCode": "Shipping", "TaxDate": "2020-10-20T00:00:00", "TaxRate": 0.0, "UpdatedTimestamp": "2020-10-20T19:57:54.006", "CreatedBy": "admin@globalorg-uk.com", "TaxDetailId": "Vertex1761067906", "TaxableAmount": 0.0, "TaxEngineId": null, "Jurisdiction": "UNITED KINGDOM", "FulfillmentGroupId": "fa166a7e3c88f55cc6ca3c8abe24564e", "OrgId": "globalorg-uk", "IsInformational": false, "TaxIdentifier3": null, "ContextId": "1e07f114-33a3-4424-b4a6-f710478a1b32", "TaxIdentifier2": null, "TaxIdentifier1": "VAT", "PK": "6032238740063423967", "Unique_Identifier": "6032238740063423967__Vertex1761067906" } ], "SuggestedPromo": [], "PackageCount": null, "SellingChannel": { "SellingChannelId": "CallCenter" }, "Release": [], "MaxReturnStatusId": null, "MerchReturnLineCount": 0, "ProcessInfo": null, "CancelComments": null, "OrderMilestone": [ { "UpdatedTimestamp": "2020-10-20T19:17:19.675", "CreatedBy": "admin@globalorg-uk.com", "CreatedTimestamp": "2020-10-20T19:17:19.675", "ExpectedTime": null, "ActualTime": "2020-10-20T19:17:19.68", "MilestoneDefinitionId": "Order::Milestone::Created", "Process": null, "MonitoringRuleId": null, "OrgId": "globalorg-uk", "UpdatedBy": "admin@globalorg-uk.com", "ContextId": "1a6f6343-eb8e-4750-a2b3-340d6c3103cf", "NextEventTime": null, "PK": "6032214396752932349", "Unique_Identifier": "6032214396752932349__Order::Milestone::Created" }, { "UpdatedTimestamp": "2020-10-20T19:20:06.911", "CreatedBy": "admin@globalorg-uk.com", "CreatedTimestamp": "2020-10-20T19:17:19.677", "ExpectedTime": null, "ActualTime": "2020-10-20T19:20:06.889", "MilestoneDefinitionId": "Order::Milestone::Confirmed", "Process": null, "MonitoringRuleId": null, "OrgId": "globalorg-uk", "UpdatedBy": "admin@globalorg-uk.com", "ContextId": "f147983c-41cf-41b1-a439-edf86e7e6a03", "NextEventTime": null, "PK": "6032214396772947591", "Unique_Identifier": "6032214396772947591__Order::Milestone::Confirmed" }, { "UpdatedTimestamp": "2020-10-20T19:17:52.699", "CreatedBy": "admin@globalorg-uk.com", "CreatedTimestamp": "2020-10-20T19:17:19.678", "ExpectedTime": null, "ActualTime": "2020-10-20T19:17:52.679", "MilestoneDefinitionId": "Order::Milestone::Allocated", "Process": null, "MonitoringRuleId": null, "OrgId": "globalorg-uk", "UpdatedBy": "admin@globalorg-uk.com", "ContextId": "0d7e6ecd-7f04-445b-b837-f9cebabb42a7", "NextEventTime": null, "PK": "6032214396782955919", "Unique_Identifier": "6032214396782955919__Order::Milestone::Allocated" }, { "UpdatedTimestamp": "2020-10-20T19:17:19.678", "CreatedBy": "admin@globalorg-uk.com", "CreatedTimestamp": "2020-10-20T19:17:19.678", "ExpectedTime": "2020-10-20T21:17:19.68", "ActualTime": null, "MilestoneDefinitionId": "Order::Milestone::Released", "Process": null, "MonitoringRuleId": "RestrictRule", "OrgId": "globalorg-uk", "UpdatedBy": "admin@globalorg-uk.com", "ContextId": "1a6f6343-eb8e-4750-a2b3-340d6c3103cf", "NextEventTime": "2020-10-20T23:17:19.68", "PK": "6032214396782962184", "Unique_Identifier": "6032214396782962184__Order::Milestone::Released" }, { "UpdatedTimestamp": "2020-10-20T19:17:19.678", "CreatedBy": "admin@globalorg-uk.com", "CreatedTimestamp": "2020-10-20T19:17:19.678", "ExpectedTime": null, "ActualTime": null, "MilestoneDefinitionId": "Order::Milestone::Shipped", "Process": null, "MonitoringRuleId": null, "OrgId": "globalorg-uk", "UpdatedBy": "admin@globalorg-uk.com", "ContextId": "1a6f6343-eb8e-4750-a2b3-340d6c3103cf", "NextEventTime": null, "PK": "6032214396782971848", "Unique_Identifier": "6032214396782971848__Order::Milestone::Shipped" } ], "TotalTaxes": 5.46, "PK": "6032214316142792611", "OrderTotal": 32.76, "Unique_Identifier": "6032214316142792611__CC10006" } External Systems can consume these messages and make the necessary updates in their systems or create emails, if required. The outbound order message contains Change Log details which will include the Mod Types that triggered the message, and the new and old values that were updated for that mod type. The Change Log can be read by external systems to track updates made to the order. Publish Order/Order Line Message Manually Publish Order message can be triggered manually by calling the below API POST API : {{url}}/order/api/order/order/publish { "OrderIds": [ "TestOrderId1" ] } Publish Order Line message can be triggered manually by calling the below API POST API : {{url}}/order/api/order/order/orderLine/publish { "OrderLineIdDTOList": [ { "OrderId": "TestOrderId1", "OrderLineId": "1" } ] } Notes: External systems should be configured to read Date and Time with or without milliseconds. Due to the nature of Java and time, the message generated in milliseconds may not be included. As the product expands, additional attributes may be added to the base template to support additional features. If these additional attributes are not needed by external systems, the external systems should be configured to ignore these attributes to avoid any failures. Due to the nature of ShipToStore orders, ShipToAddress is not populated on the order and the PublishOrder. The LocationId of the store can be used by internal and external systems to retrieve the stores address. The default Publish Order format is JSON and XML is not supported. If customization to XML is required, recommendation is to make translation to XML once JSON has posted to the queues. Publish Order template in order config also applies to the payload published to the Email service. Note: The Publish Order is not cumulative. For example, if an order is imported with one line containing 5 quantities and 2 quantities are canceled: The first Publish Order will show: First PublishOrder (2 quantities canceled) ChangeSet.Old: 5 ChangeSet.New: 3 This indicates that 2 quantities have been canceled. If further changes are made to the order and one more quantity is canceled, the second Publish Order will show: ChangeSet.Old: 3 ChangeSet.New: 2 This reflects that 1 additional quantity has been canceled. At this stage, the total number of canceled quantities is not published cumulatively, but shows the changes made in each transaction separately rather than accumulating the changes. How To's How to Configure Publish Order Navigate to the Order Configuration UI and select the desired Order Config. In the Modification Rules, Publish Order service can be configured for specific MOD Types under Order, Order Line, Return Line, and Quantity section. For example, Order Status change, Quantity Increase/Decrease, and Payment Information updates. How to Customize Publish Order Template The Publish Order template provides the ability to customize to add or remove attributes from the order or order line to meet the customer requirements. To add order attributes to the order outbound template, add the tag "Order" under the header and add the required attributes or objects under it. For each order configuration, a template for the outbound order and order line messages can be customized to meet the requirements of downstream systems. Optionally, a change log can be included in the template. The change log section is added to the outbound order messages to communicate the list of mod types which have occurred and the new and old value of each updated attribute within the mod type. Example 1 - If an order update is sent which updates the order confirmation, the order is published with a change log as follows: Customize Publish Order TemplateAll custom templates must be posted with system admin token and with a unique Template Id. Updating the base template is not recommended as they would get overridden when updates are made to the application. When posting with System Admin Token, Org Id should be populated in the JSON body POST API : {{url}}/order/api/fwcore/responseTemplate/ { "BaseEntity": "Order", "TemplateJson": { "OrgId": "globalorg-uk", "OrderId": null, "ChangeLog": { "ModTypes": null, "ChangeSet": null }, "OrderLine": { "ItemId": null, "OrderLineId": null, "Extended": { "OrderLineExtAttribute": null } }, "Extended": { "OrderExtAttribute": null }, "Payment": { "PaymentMethod": { "NameOnCard": null, "BillingAddress": null, "PaymentTransaction": { "PaymentTransactionId": null } } } }, "TemplateId": "CustomTemplate" } Refer to the below section for a sample Publish Order message based on the customized template. Publish Order Message - Sample { "OrgId": "globalorg-uk", "Payment": [ { "Actions": {}, "PK": "6034693660332865761", "CreatedBy": "admin@globalorg-uk.com", "CreatedTimestamp": "2020-10-23T16:09:26.034", "UpdatedBy": "admin@globalorg-uk.com", "UpdatedTimestamp": "2020-10-23T16:10:09.468", "Messages": null, "OrgId": "globalorg-uk", "OrderId": "CC10009", "PaymentGroupId": null, "CustomerId": "Fkhimani@manh.com", "IsCancelled": false, "Status": { "StatusId": "3000.000" }, "Extended": {} } ], "OrderLine": [ { "OrderLineId": "1", "Extended": { "OrderLineExtAttribute": null }, "ItemId": "Tops-12238-Blue-L" } ], "Extended": { "OrderExtAttribute": "Test1" }, "ChangeLog": { "ModTypes": { "Order": [ "Order::Confirmed" ] }, "ChangeSet": [ { "Properties": [ { "New": "true", "Old": "false", "Property": "IsConfirmed" } ], "ModType": "Order::Confirmed" } ] }, "OrderId": "CC10009" } Example 2 - Payment information related to the order can be sent through order outbound. However, the default template does not include payment, but it can be configured in the custom template. Refer to a sample template for details. Specific payment related information can be sent by defining the template in the payment component. Make sure to define the same template across the order and payment components. Publish Order Template - Include Payment details{ "BaseEntity": "Order", "TemplateJson": { "OrgId": "ecomorg", "OrderId": null, "OrderLine": { "ItemId": null, "OrderLineId": null }, "Extended": null, "Payment": { "PaymentMethod": { "NameOnCard": null, "BillingAddress": null, "PaymentTransaction": { "PaymentTransactionId": null } } } }, "TemplateId": "TestPublishOrderTemplateG" } Implementation Flavors Types of Customer Wanted to use supply details breakup feature Inventory Config (System Augmentable) Custom Extension Management Comment Existing No EnablePublishReservationChange: False (default) No Changes Existing Yes EnablePublishReservationChange: True Step: Login as system user Url: {{url}}/inventory/api/inventory/featureRollout/Save Body: { "FeatureRolloutId": "defaultFeatureRollout", "EnablePublishReservationChange": true } Clear the cache Url: {{url}}/inventory/api/framework/cache/clearAll Method: Post (No body) All the custom extensions to Extension points of AllocationCorrection, PostReshuffleUpdate, and InvReservationCancellation needs to be to moved to extension point of PostReservationMatchChange New NA EnablePublishReservationChange: True NA From Base, you should explicitly enable this attribute  “EnablePublishReservationChange: True “ when all the existing customer move to code drop 2.1.40.x. Use Case 1 - Display supply details and supply quantity break up in publish order Step 1: Create Response Template Log in as a system user and save the template Order Template { "TemplateId": "OrderTemplateSupplyBreakUp", "BaseEntity": "Order", "TemplateJson": { "PK": null, "CustomerFirstName": null, "CustomerLastName": null, "CustomerPhone": null, "CustomerEmail": null, "ChangeLog": null, "OrderLine": { "PK": null, "OrderLineId": null, "AlternateOrderLineId": null, "ItemId": null, "Quantity": null, "UOM": null, "UnitPrice": null, "MinFulfillmentStatusId": null, "MaxFulfillmentStatusId": null, "OrderId": null, "ChangeLog": null, "Allocation": { "PK": null, "OrgId": null, "AllocationId": null, "ShipFromLocationId": null, "ItemId": null, "Quantity": null, "UOM": null, "SupplyDetailInfo": { "Quantity": null, "ShippedQuantity": null, "SupplyTypeId": null, "Eta": null, "EarliestShipDate": null, "EarliestDeliveryDate": null, "CommittedDeliveryDate": null, "SupplyAttributes": { "Eta": null, "SupplyTypeId": null, "IsInfiniteSupply": null, "ReferenceTypeId": null, "ReferenceId": null, "ReferenceDetailId": null, "ParentReferenceTypeId": null, "ParentReferenceId": null, "ParentReferenceDetailId": null, "InventoryType": null, "CountryOfOrigin": null, "BatchNumber": null, "ProductStatusId": null, "InventoryAttribute1": null, "InventoryAttribute2": null, "InventoryAttribute3": null, "InventoryAttribute4": null, "InventoryAttribute5": null } } } } } } Step 2: Choose the Template In Order Configuration UI, choose the template that you saved in step1 to publish the order. In this instance, choose OrderTemplateSupplyBreakup. Note: Order is allocated against multiple supply types (future and on hand). Step 3: Enable Compute Committed Delivery Date (CDD) and Additional Scheduling Dates Enable CDD to calculate CDD and publish at the quantity break-up level. Enable Compute Committed Delivery Datepost - {{url}}/promising/api/promising/promisingConfigParameters/save { "ComputeCommittedDeliveryDate": true, "ComputeAdditionalSchedulingDates":true, "PromisingConfigParameterId": "1" } Step 4: Publish Order Message When mod type is triggered and Publish Order service is configured with the template having the Supply details info section, then Order invokes Reservation Supply Search API to populate the Supply details info section Reservation Search API post - {{url}}/inventory/api/inventory/reservationRequest/search { "Query": "RequestId='Order_1001'", "Template": { "ReservationRequestDetail": { "ReservationRequestMatch": { "ItemId": null, "LocationId": null, "Quantity": null, "ShippedQuantity": null, "SupplyTypeId": null, "SegmentId": null, "Eta": null, "SupplyAttributes": { "Quantity": null, "SegmentId": null, "SupplyTypeId": null, "IsInfiniteSupply": null, "ReferenceTypeId": null, "ReferenceId": null, "ReferenceDetailId": null, "ParentReferenceTypeId": null, "ParentReferenceId": null, "ParentReferenceDetailId": null, "InventoryType": null, "CountryOfOrigin": null, "InventoryAttribute1": null, "InventoryAttribute2": null, "InventoryAttribute3": null, "InventoryAttribute4": null, "InventoryAttribute5": null } } } } } Publish Order message is triggered. Check the message published in queue.publishOrderEvent and queue.publishOrderLineEvent Messages are published with Change Log Modtypes Publish Order Message { "CustomerPhone": "123-333-3333", "CustomerFirstName": "John", "OrderLine": [ { "UOM": "EA", "UnitPrice": 1, "Allocation": [ { "OrgId": "ecomorg", "UOM": "EA", "AllocationId": "227158229932628840159", "ShipFromLocationId": "ecomorg:AtlantaDC", "Quantity": 5, "PK": "6548572336297746766", "ItemId": "Tops-30339-01", "SupplyDetailInfo": [ { "Quantity": 2, "ShippedQuantity": 0, "SupplyTypeId": "On Hand Available", "Eta": null, "EarliestShipDate": "2022-06-13T14:37:00", "EarliestDeliveryDate": "2022-06-15T14:37:00", "CommittedDeliveryDate": "2022-06-15T14:37:00", "SupplyAttributes": { "IsInfiniteSupply": false, "ReferenceTypeId": null, "ReferenceId": null, "ReferenceDetailId": null, "ParentReferenceTypeId": null, "ParentReferenceId": null, "ParentReferenceDetailId": null, "InventoryAttribute1": "1", "InventoryAttribute2": "2", "InventoryAttribute3": "3", "InventoryAttribute4": "4", "InventoryAttribute5": "5", "InventoryType": "Onhand", "BatchNumber": "12345", "CountryOfOrigin": "US", "ProductStatusId": null } }, { "Quantity": 3, "ShippedQuantity": 0, "SupplyTypeId": "In Transit", "Eta": "2022-06-12T14:37:00", "EarliestShipByDate": "2022-06-13T14:37:00", "EarliestDeliveryDate": "2022-06-15T14:37:00", "CommittedDeliveryDate": "2022-06-15T14:37:00", "SupplyAttributes": { "IsInfiniteSupply": false, "ReferenceTypeId": "ASN", "ReferenceId": "ASN1", "ReferenceDetailId": "L1", "ParentReferenceTypeId": "PO", "ParentReferenceId": "PO1", "ParentReferenceDetailId": "L1", "InventoryAttribute1": null, "InventoryAttribute2": null, "InventoryAttribute3": null, "InventoryAttribute4": null, "InventoryAttribute5": null, "InventoryType": null, "BatchNumber": null, "CountryOfOrigin": null, "ProductStatusId": null } } ] } ], "OrderLineId": "1", "MaxFulfillmentStatusId": "2000", "Quantity": 5, "PK": "6548560018575506805", "ChangeLog": { "ModTypes": { "OrderLine": [ "OrderLine::ReservationMatch::Update::Quantity" ] } }, "OrderId": "Order_1001", "AlternateOrderLineId": null, "ItemId": "Tops-30339-01", "MinFulfillmentStatusId": "2000" } ], "CustomerLastName": "Smith", "CustomerEmail": "jsmith@manh.com", "PK": "6548560018555499160", "ChangeLog": { "ModTypes": { "OrderLine": [ "OrderLine::ReservationMatch::Update::Quantity" ] } } } Use Case 2 - Publish order or order line message whenever there is a change in allocated quantity or change in delivery date due to supply updates Step 1: Configure Mod Type Two new MOD Types are added to trigger publish order on Reservation match update. Ensure to enable the following mod types. Update Reservation Match Quantity Update Reservation Match ETA Note: - For existing Order config, the newly added mod types will not be displayed automatically. User need to sync the Order config and refresh the UI. URL: {{url}}/order/api/order/orderConfig/sync Method: Post with empty body - For new order config, the new modtypes should be visible automatically. Step 2: When there is change in allocated quantity or change in delivery date due to a supply update, messages will be published in queue.publishOrderEvent and queue.publishOrderLineEvent Use Case 3 - Allocation supply details and supply quantity break up in get order Step 1: Create get order Template Log in as a system user and save the template Sample Get Order Template Url: /order/api/fwcore/responseTemplate/save { "TemplateId": "GetOrderTemplateSupplyBreakUp", "BaseEntity": "Order", "TemplateJson": { "PK": null, "CustomerFirstName": null, "CustomerLastName": null, "CustomerPhone": null, "CustomerEmail": null, "OrderLine": { "PK": null, "OrderLineId": null, "AlternateOrderLineId": null, "ItemId": null, "Quantity": null, "UOM": null, "UnitPrice": null, "MinFulfillmentStatusId": null, "MaxFulfillmentStatusId": null, "OrderId": null, "Allocation": { "PK": null, "OrgId": null, "AllocationId": null, "ShipFromLocationId": null, "ItemId": null, "Quantity": null, "UOM": null, "SupplyDetailInfo": { "Quantity": null, "ShippedQuantity": null, "SupplyTypeId": null, "Eta": null, "EarliestShipDate": null, "EarliestDeliveryDate": null, "CommittedDeliveryDate": null, "SupplyAttributes": { "SupplyTypeId": null, "IsInfiniteSupply": null, "ReferenceTypeId": null, "ReferenceId": null, "ReferenceDetailId": null, "ParentReferenceTypeId": null, "ParentReferenceId": null, "ParentReferenceDetailId": null, "InventoryType": null, "CountryOfOrigin": null, "BatchNumber": null, "ProductStatusId": null, "InventoryAttribute1": null, "InventoryAttribute2": null, "InventoryAttribute3": null, "InventoryAttribute4": null, "InventoryAttribute5": null } } } } } } Sample Get Order Message Get Order with Template Name Url: /order/api/order/order/orderId/Order_1001?templateName=OrderTemplateSupplyBreakUp { "success": true, "header": null, "data": { "Messages": null, "CustomerPhone": "123-333-3333", "CustomerFirstName": "John", "OrderLine": [ { "UOM": "EA", "UnitPrice": 1.00, "Allocation": [ { "OrgId": "ecomorg", "UOM": "EA", "AllocationId": "227158229932628840159", "ShipFromLocationId": "ecomorg:AtlantaDC", "Quantity": 5.0, "PK": "6548572336297746766", "ItemId": "Tops-30339-01", "SupplyDetailInfo": [ { "Quantity": 2.0, "ShippedQuantity": 0.0, "SupplyTypeId": "On Hand Available", "Eta": null, "EarliestShipDate": "2022-06-13T14:37:00", "EarliestDeliveryDate": "2022-06-15T14:37:00", "CommittedDeliveryDate": "2022-06-15T14:37:00", "SupplyAttributes": { "IsInfiniteSupply": false, "ReferenceTypeId": null, "ReferenceId": null, "ReferenceDetailId": null, "ParentReferenceTypeId": null, "ParentReferenceId": null, "ParentReferenceDetailId": null, "InventoryAttribute1": "1", "InventoryAttribute2": "2", "InventoryAttribute3": "3", "InventoryAttribute4": "4", "InventoryAttribute5": "5", "InventoryType": "Onhand", "BatchNumber": "12345", "CountryOfOrigin": "US", "ProductStatusId": null } }, { "Quantity": 3.0, "ShippedQuantity": 0.0, "SupplyTypeId": "In Transit", "Eta": "2022-06-12T14:37:00", "EarliestShipByDate": "2022-06-13T14:37:00", "EarliestDeliveryDate": "2022-06-15T14:37:00", "CommittedDeliveryDate": "2022-06-15T14:37:00", "SupplyAttributes": { "IsInfiniteSupply": false, "ReferenceTypeId": "ASN", "ReferenceId": "ASN1", "ReferenceDetailId": "L1", "ParentReferenceTypeId": "PO", "ParentReferenceId": "PO1", "ParentReferenceDetailId": "L1", "InventoryAttribute1": null, "InventoryAttribute2": null, "InventoryAttribute3": null, "InventoryAttribute4": null, "InventoryAttribute5": null, "InventoryType": null, "BatchNumber": null, "CountryOfOrigin": null, "ProductStatusId": null } } ] } ], "OrderLineId": "1", "MaxFulfillmentStatusId": "2000", "Quantity": 5.0, "PK": "6548560018575506805", "OrderId": "Order_1001", "AlternateOrderLineId": null, "ItemId": "Tops-30339-01", "MinFulfillmentStatusId": "2000" } ], "CustomerLastName": "Smith", "CustomerEmail": "jsmith@manh.com", "PK": "6548560018555499160" }, } Note: Currently, the allocation details breakup for retail orders are not available, the reason being these can be huge and there will be performance implications when trying to pull allocation details for these orders. Use Case 4 - Release Together Do not release an order line even if it has been allocated to onhand inventory, unless all the order lines are allocated. In other words, to restrict an order line to release when other order lines in the order are not eligible to release. Step1: To Configure Order line extended attribute Customers need to identify those order lines to be Released on LRD-OH-RDD and label them by passing in an  OrderlineExtendedAttribute (e.g. ‘Immediate’) Step2: Release configs ( A new parameter is introduced in the Release config 'EligibleDayForRelease' mapped to LatestReleaseDateOnHandForRDD in Order Allocation) Configure two Release configs with the following conditions: Release Config1: OrderLine.ExtendedAttribute.(value = Immediate) & Allocation.EligibleDateForRelease <= Current DTTM Note: This config will release Allocations on LRD-OH-RDD which are labeled “Immediate” Release Config2: OrderLine.ExtendedAttribute.(value != Immediate) & Allocation.LatestReleaseDate <= Current DTTM Note: This config will hold the release of non-labeled Order lines till LRD Use Case 5 - Allocation details in publish order for a cancelled order When the line is cancelled, the base will clear the allocation section. To achieve this, the below customizations can be followed. Step1: For these base ChangeEvents, Entity::Allocation::Add, Entity::Allocation::Update, Entity::Allocation::Remove have ModTypes configured. Step2: When ModType is triggered, have CustomExtensionService configured. In the custom service, copy the allocation section to extended field under order line. Step3: Now when the line gets cancelled, it posts the payload to PublishOrder. Listen this message in custom service, and copy from extended fields back to Allocation. Use Case 6 - PublishOrder outbound messages are asynchronous in nature. In certain instances, these messages are dispatched to the listener or consumed by a third party in an unordered manner Example: 1. The release outbound message arrives before the allocation outbound. Consequently, the order appears as allocated in the third-party system, but the actual order remains in the released status. 2. The Order Cancellation payload was reached before the order confirmation payload, which caused an issue in their downstream systems. Configuration: The framework will consolidate the message based on the time interval mentioned in the field ‘GroupingInterval’ Order will add the attribute ‘EventSubmitTimestamp’ in publish order/orderLine payload. Middleware/Target will wait for 10 seconds to receive the publish order/order line payload and sort them by ‘EventSubmitTimestamp’. Sample JSON: URL: {{url}}/order/api/ServiceDefinition/outBoundMessageType/save -> POST { "MessageType": "PublishOrderEventMSGType", "Transactional": true, "PersistMessageToMsgStore": false, "OutBoundQueues": { "QueueName": "queue.publishOrderEvent" }, "OutBoundDeliveryConfig": { "GroupingInterval": "10 sec", "GroupingKeys": "$.OrderId", "GroupingType": "CONSOLIDATION", "ConsolidationMaxSize": 50, "OutBoundDeliveryConfigId": "ConsolidateFor10sec" } } Sample Publish Order Payload with EventSubmitTimestamp{ "data": [ { "CustomerPhone": null, "CustomerFirstName": null, "OrderLine": [ { "UOM": "EA", "UnitPrice": 89.99, "Allocation": [], "OrderLineId": "1", "MaxFulfillmentStatusId": "1000", "Quantity": 1.0, "PK": "7036588419975341797", "ChangeLog": { "ModTypes": { "OrderLine": [ "OrderLine::EffectiveRank", "OrderLine::Add", "OrderLine::DeliveryMethod", "OrderLine::Tag::Add", "OrderLine::ItemId::Update", "OrderLine::FulfillmentGroupId", "OrderLine::ShippingInfo" ], "QuantityDetail": [ "QuantityDetail::QuantityStatus::Increase::1000" ] } }, "OrderId": "CC12441", "AlternateOrderLineId": null, "ItemId": "Tops-12238-Blue-M", "MinFulfillmentStatusId": "1000" } ], "CustomerLastName": null, "CustomerEmail": null, "PK": "7036588419945337668", "ChangeLog": { "ModTypes": { "Order": [ "Order::Hold::Apply", "Order::PaymentStatus::AwaitingPaymentInfo", "Order::OrderType", "Order::PaymentStatus" ], "OrderLine": [ "OrderLine::EffectiveRank", "OrderLine::Add", "OrderLine::DeliveryMethod", "OrderLine::Tag::Add", "OrderLine::ItemId::Update", "OrderLine::FulfillmentGroupId", "OrderLine::ShippingInfo" ], "QuantityDetail": [ "QuantityDetail::QuantityStatus::Increase::1000" ] } }, "EventSubmitTimestamp": "2023-12-27T06:34:02.632" }, { "CustomerPhone": "(989) 433-0894", "CustomerFirstName": "John", "OrderLine": [ { "UOM": "EA", "UnitPrice": 89.99, "Allocation": [], "OrderLineId": "1", "MaxFulfillmentStatusId": "1000", "Quantity": 1.0, "PK": "7036588419975341797", "ChangeLog": null, "OrderId": "CC12441", "AlternateOrderLineId": null, "ItemId": "Tops-12238-Blue-M", "MinFulfillmentStatusId": "1000" } ], "CustomerLastName": "Smith", "CustomerEmail": "Jsmith@gmail.com", "PK": "7036588419945337668", "ChangeLog": { "ModTypes": { "Order": [ "Order::CustomerId", "Order::Tag::Add", "Order::CustomerInfo" ] } }, "EventSubmitTimestamp": "2023-12-27T06:34:11.141" } ], "ConsolidatedPayload": true } How to set up template for base user exits to see the ChangeLog in the user exit If you are using Order Mod types based extension, then you can define the template used for these extension points in CustomExtensionServiceConfig as shown in the below sample { "ExtensionPointId": "Order:Order:UserExit:CustomExtensionService10", "TemplateId": "CustomExtensionService10" } In the above example, we have instructed order to use CustomExtensionService10 for Order:Order:UserExit:CustomExtensionService10 extensionpoint. Similarly, identify the extensionPoint you want to use and configure a template which includes the ChangeLog so that you can see the ChangeLog in the UE How to generate publish order line message when a merge line is shipped for ship to store orders Follow the below steps to generate publish order line message when a merge line is shipped for ship to store orders: Create order line extended attribute “Mergelegship” with the value set as false by default. Implement the postorderevent user exit. When Manhattan Active® Omni receives ship confirm event from store to DC for the merge leg, then update the “Mergelegship” attribute to true. Create a custom modification type for order line extended attribute for example, “Mergelegship”. For this custom mod type, enable the publish order. When this modification type changes to true, then generate the publish order message. Publish order will have change log updated with this new mod type, which helps to identify the line shipment that generated the message. Suppress this publish order from the existing publishorder queue as this is only needed for the custom change and prepare the publish email message as per the template and required structure format and send it to the new queue. How to stop sending email or messages when a return order is cancelled and parent order status changes from pending return to fulfilled or delivered (7000/7500) status Use Order:Order:UserExit:PrePublishEmailMessage and look at the change log to determine when not to publish the email or message. How to generate the publish order line message only when all the units are shipped Follow the below steps to generate the publish order line message only when all the units in the order are shipped: Create a line level extended attribute Whenever each unit is fulfilled, implement customExtensionService for QuantityDetail::QuantityStatus::Increase::7000 status In user exit, check if all units are fulfilled, then populate extended field = true Have modtype for Extended field and publish orderline enabled for this modtype Troubleshooting I want to stop publishing the supply detail break-ups from Order side Navigate to Order Configuration > General tab > In the Publish Options section, select a different template which does not contain Orderline->Allocation->SupplyDetailInfo How can I get to know which order line is allocated, the quantity and delivery date changes from publish order/order line? In Publish order, check for ChangeLog details. "OrderLine::ReservationMatch::Update::Quantity" "OrderLine::ReservationMatch::Update::ETA" Note: The new and old values are not published in the change log details for the above mode types. The old value is not stored in order component and hence it's not published. Not able to see the new Mod Types like Update Reservation Match Quantity and Update Reservation Match ETA in the order config UI Trigger Order Config sync Url: {{url}}/order/api/order/orderConfig/sync Method: Post, no body Refresh the Order config UI I want to stop generating Quantity Update/ ETA Update events from Reservation match change Url: /inventory/api/inventory/inventoryParameters Remove the Inventory parameter “EvaluteReservationMatchChange“ and save the Inventory Parameter I wanted to publish Committed Delivery Date closer to RDD and dont want to wait till LRD calculated based on LPDD Check the value of OrderlinePromisingInfo: "IsDeliveryByRequestedDate" (default false/null) Host system needs to bridge the order with OrderlinePromisingInfo.IsDeliveryByRequestedDate"= true If any Inventory event leads to both quantity change and ETA change, which Order Mod Type should trigger ETA mod Type should be triggered. Will order side changes like RDD/LPDD update and quantity update trigger republish event No, any order-side changes will not republish the messages. What kind of inventory changes leads to republish order ETA and allocated quantity changes lead to republish order. Note: Any changes which update the Reservation matches will re-trigger the outbound message Will the value update to OrderLinePromisingInfo.IsDeliveryByRequestedDate": (true/false) re-evaluate the dates Yes Will the value update to OrderLinePromisingInfo.IsDeliveryByRequestedDate": (true/false) re-publish the dates No What is the scenario when Onhand allocation can go to LPDD route evaluation? When RDD is very close to allocation date so that upon adding processing time, LRD > RDD How can I see dates other than UTC, in omnifacade UI? It is based on user time zone configured. If you are changing the user time zone, the changes can be reflected after logging out and re-logging in. Not able to see supply detailed breakup for Retail orders. (Orders having large number of orderlines) Currently, the allocation details breakup for Retail orders are not available, the reason being these can be huge and there will be performance implications when trying to pull allocation details for these orders. Is it possible to trigger a publish order on a specific mod type to get a specific changelog in the publish order? No, ChangeLog comes as part of order update. It is not possible to get the changelog on triggering API for publish order. Send PublishOrder message when OrderLine level milestone is not met. Below is an example of the "OrderLine::Milestone::ReadyForPickup" milestone. When an orderLine enters picked status, base checks the mod type configuration in “order configuration” and sends a publish order message if configured. Within “OrderLineMilestone” configuration if an OrderLine Milestone is configured, then the milestone will wait for the configured amount of time, and if not met, will call the custom Publish Order Event Custom Publish Order Event will perform a save order, and will edit each relevant orderLine’s extended field, for example, Order.OrderLine.Extended.PickupReminder. This Custom PublishOrder Event can be configured in OrderLineMonitoringRule for the Event field. A custom ModType is set up to listen to changes which occur to Extended.PickupReminder, and if PublishOrder is configured in Order Configuration UI, will trigger a Publish Order Outbound message. Why is ShippedQuantity is always 0 in Allocation.SupplyDetailInfo.SupplyAttributes in the Publish Order status on Fulfilled? This is as designed behaviour. In supply detail details, the break of Publish Order message “shippedQuantity” is not displayed. Only ESD, EDD, CDD, SupplyTypeId and Quantity fields gets published in publish Order. Will SupplyDetail Info get purged when reservation gets purged ? Yes, the SupplyDetailInfo (supply break up) is purged when the reservation is purged for a fulfilled order. The publish order event does not honor the publish order template when invoked through an extension handler When the monitoring rule invokes Order:Order:Event:OnPublishOrder, out of the box does not consider the customized publish order template defined in the order configuration. To resolve this issue, when the extension point Order:Order:Event:OnPublishOrder is called, add a Servicedefinition to make a get order with the template (customized template Id should be passed in the get order API) and publish the response while suppressing the base template. Related Articles Order ArchivingOrder TaggingOrder Orchestration ProcessCart and Preview ModeHoldsCreating and Updating OrderOrder CancellationDelivery TrackingMod TypesOrder Audit Shipping RestrictionOrder Orchestration Configuration