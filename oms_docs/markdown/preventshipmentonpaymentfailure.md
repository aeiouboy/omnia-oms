# Prevent Shipment on Payment Failure

**Permalink:** preventshipmentonpaymentfailure
**Content Length:** 19,922 characters
**Scraped:** 2025-08-09T22:34:14.051399

---

Home &rsaquo;&rsaquo;Manhattan Active® Omni&rsaquo;&rsaquo;Order Management&rsaquo;&rsaquo;Process & Configuration Guides&rsaquo;&rsaquo;Order Processing&rsaquo;&rsaquo;Order Fulfillment&rsaquo;&rsaquo;Late Order Modifications ››Prevent Shipment on Payment Failure Prevent Item Fulfillment on Payment Failure OverviewFunctional FlowOrder&nbsp;ProcessingCancellation Request TrackingCancellation Request IntegrationCancellation AcceptedCancellation Temporarily RejectedCancellation RejectedConfigurationImplementation FlavorsLeverage the pullback release process in an ad-hoc mannerFeature ScopeUIs and EntitiesServicesRelated Articles Overview With Manhattan&nbsp;Active&reg; Omni late order cancellations, retailers can request fulfillment systems to stop fulfillment of items if there is any payment failure.&nbsp;For example, if an order is picked in the Manhattan Store or&nbsp;MAWM and re-authorization fails, Manhattan Order Management would request cancellation of release. Here&#39;s how it works: A customer places a&nbsp;&lsquo;Ship to Home&rsquo;&nbsp;order. Order payment is authorized and confirmed. The items are released to a store or WM for&nbsp;processing. The fulfillment system may have started picking or picked the items. Order payment authorization expires Order Management to retry authorization and re-authorization fails Attempt automatic retries of re-authorization failure Retry&nbsp;attempts are exhausted and the payment is still failure Manhattan&nbsp;Active&reg; Omni to request cancellation of releases if the payment failure total is equal to the order total Fulfullment system cancels the release Order Management processes the response and cancels the release by retaining the allocation Recovery payment email/text is sent to customer Customer adds payment using DSS or CSR calls the&nbsp;customer to make&nbsp;new payment Order is Authorized Order is released for fulfillment Functional Flow Order&nbsp;Processing A ship to home line can be prevented from fulfillment due to payment failure leveraging&nbsp;late order cancellation process. Whenever there is a payment failure on the order and the failure amount is equivalent to the order total resulting in Awaiting Payment, Manhattan&nbsp;Active&reg; Omni triggers&nbsp;late order cancellation request. Once the cancellation is successful, customers are notified via email/text for payment recovery. Refer&nbsp;here for email/text details. If the customer adds payment via DSS and on successful authorization, the order line will be re-released for fulfillment again. Refer here for mod type configuration changes required for re-releasing the order on payment status update. If the customer does not add payment within&nbsp;the configured number of hours, then the line will be cancelled and a customer notification via email/text is sent indicating that the order is cancelled. Refer here for cancel order configuration. Cancellation Request Tracking To track the cancellation request, the order line attribute&nbsp;&quot;cancellationRequestStatus&quot; is set to &quot;Requested&quot;. When this occurs, a&nbsp;release update request&nbsp;is generated based on the fulfillment configuration and sent to the Manhattan Active&reg; Omni Store or any other third party store or warehouse system. In case of full line cancellation, the release line quantity on the request is&nbsp;set to zero. Cancellation Request Integration The request to Manhattan Active&reg; Omni Store will be through rest call if the location is &quot;Manhattan Active&reg; Location&quot; for location type Store, refer&nbsp;here&nbsp;for location configuration details. For anything else&nbsp;(MAWM or External Store or Warehouse applications), extension point&nbsp;Order:Release:UserExit:ProcessExternalReleaseUpdate&nbsp;should be configured. Manhattan Active&reg; Omni&nbsp;Store or other fulfillment or warehouse management applications&nbsp;can respond back with one of the three responses: Cancellation Accepted Fulfillment or warehouse management application&nbsp;immediately cancels the fulfillment line. Order Management immediately cancels the release only by retaining the allocation as is. Refer here to the pipeline configuration required for the orderline to move back to Allocated from Released/In Process/Picked&nbsp;status. The order line &quot;lineshortcount&quot; field is incremented to indicate that the release was cancelled so that the subsequent release can be prioritized for fulfillment.&nbsp; Cancellation Temporarily Rejected If the Manhattan&nbsp;Active&reg; Omni Store is actively picking an item, then the cancellation request cannot be immediately processed. However, the cancellation can be processed after picking is&nbsp;complete&nbsp;when the picker returns to the work station. On successful cancellation at a later point of time, the behaviour is similar to Cancellation Accepted as mentioned above. Cancellation Rejected If the fulfillment system rejects the cancellation, the shipment will continue to happen and CSR should call the customer to get new payment to settle the order. Note: There will be no email or text communication sent when the fulfillment system rejects the cancellation request&nbsp;for this feature, unlike post release order line cancellation failures. Configuration To use this feature, enable&nbsp;&#39;Allow post-release cancellation&#39; and &quot;Prevent shipments on payment failure&quot;&nbsp;configuration in the Order Configuration UI. Note: Preventing shipments on payment failure configuration cannot work independently of late order cancellation, hence it is required to have both the configurations enabled. Out of the box, when the fulfillment system processes the cancellation request, the release cancelled qty is updated and the fulfillment status remains released. The order status should&nbsp;move&nbsp;back to allocated and the same can happen when ShipToHome&nbsp;pipeline seed data is updated for ServiceId &quot;pullbackRelease&quot;. Refer below for pipeline seed data for ShipToHome. PaymentFailureCancelRelease{ &nbsp;&nbsp;&nbsp;&nbsp;&quot;PipelineId&quot;:&nbsp;&quot;ShipToHome&quot;, &nbsp;&nbsp;&nbsp;&nbsp;&quot;PickupService&quot;:&nbsp;[ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;FromStatus&quot;:&nbsp;&quot;3000&quot;, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;ComponentId&quot;:&nbsp;&quot;Order&quot;, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;ServiceId&quot;:&nbsp;&quot;pullbackRelease&quot; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;&nbsp;&nbsp;], &nbsp;&nbsp;&nbsp;&nbsp;&quot;DropStatusDetermination&quot;:&nbsp;[ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;FromStatus&quot;:&nbsp;&quot;3000&quot;, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;ComponentId&quot;:&nbsp;&quot;Order&quot;, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;ServiceId&quot;:&nbsp;&quot;pullbackRelease&quot;, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;IntendedDropStatus&quot;:&nbsp;&quot;2000&quot;, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Sequence&quot;:&nbsp;1, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;ConditionText&quot;:&nbsp;null, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;DropStatus&quot;:&nbsp;&quot;2000&quot; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;FromStatus&quot;:&nbsp;&quot;3500&quot;, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;ComponentId&quot;:&nbsp;&quot;Order&quot;, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;ServiceId&quot;:&nbsp;&quot;pullbackRelease&quot;, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;IntendedDropStatus&quot;:&nbsp;&quot;2000&quot;, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Sequence&quot;:&nbsp;1, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;ConditionText&quot;:&nbsp;null, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;DropStatus&quot;:&nbsp;&quot;2000&quot; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;FromStatus&quot;:&nbsp;&quot;3600&quot;, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;ComponentId&quot;:&nbsp;&quot;Order&quot;, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;ServiceId&quot;:&nbsp;&quot;pullbackRelease&quot;, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;IntendedDropStatus&quot;:&nbsp;&quot;2000&quot;, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Sequence&quot;:&nbsp;1, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;ConditionText&quot;:&nbsp;null, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;DropStatus&quot;:&nbsp;&quot;2000&quot; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}, &nbsp;&nbsp;&nbsp;&nbsp;] } Once payment is added and successfully authorized, the order should be moved from allocated to released. Configure &quot;Resubmit Pipeline&quot; for mod type&nbsp;&quot;Update Payment Status to Authorized&quot;. To enable&nbsp;cancellation of orders where payment is not captured within a configured number of hours after cancellation of release, specify cancel payment failed orders threshold in hours in the Order configuration UI. Implementation Flavors Leverage the pullback release process in an ad-hoc manner The pullback release process as outlined above can also be leveraged by calling an API during alternative flows un-related to payment failure. The prevent shipment on payment failure behavior does not need to be configured to use this, however, other post release cancel (late order cancelation) assumptions apply as outlined above and as part of the&nbsp;Late Order Cancellation&nbsp;guide. This API is only supported at the release level: POST&nbsp;{{url}}/order/api/order/order/release/cancel { &nbsp; &nbsp; &quot;OrderId&quot;: &quot;CC10052&quot;, &nbsp; &nbsp; &quot;Release&quot;: [ &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;ReleaseId&quot;: &quot;CC100521&quot; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; ] } Feature Scope If there is partial payment failure for an order, then the system will not initiate canceling release.&nbsp; Canceling release of a Ship To Store or Pick Up At Store is not supported. Canceling release of a ShipItInstead lines is not supported. Canceling release of a Ship To Home merge leg which is not shipped is not supported. UIs and Entities The configuration UIs mentioned in this document are listed in the following table,&nbsp;along with information to&nbsp;navigate&nbsp;to the API documentation. UI Name Component Group Seed Data Present? Seed Data Profile Order Config Order &nbsp; No Base Services The&nbsp;APIs listed in the following table are referenced in this document. Refer to the API documentation for additional details on&nbsp;each service. Service Component Group Service Endpoint Payment Header Payment Payment Services {{url}}/payment/api/payment/paymentHeader/save Related Articles Late Order CancellationPull Back Released OrdersExtend Pickup WindowChange Shipping Address &nbsp;