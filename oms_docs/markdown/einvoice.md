# eInvoice 

**Permalink:** einvoice
**Path:** Manhattan Active® Omni/Order Management/Process & Configuration Guides/Order Selling/Payment/eInvoice 
**Content Length:** 27,571 characters
**Scraped:** 2025-08-09T21:58:49.747635

---

Home ››Manhattan Active® Omni››Order Management››Process & Configuration Guides››Order Selling››Payment ››eInvoice eInvoice Previous I Next OverviewHow eInvoicing WorksInvoice TypesGeneration of eInvoiceeInvoice for Shipment InvoiceeInvoice for Adjustment InvoiceeInvoice for Return InvoiceExternal Invoice ID GenerationPublishing eInvoice and eAdjustmentEditing eInvoice and eAdjustmentConfigurationGenerate eInvoicePublish eInvoice and eAdjustmentGenerate External Invoice Id for eInvoice and eAdjustment InvoiceNextUp ConfigurationRelated Articles Overview Businesses are governed by various government policies, rules and regulations for reporting sales and taxes. Various countries have different kinds of rules and mandatory reporting formats which retailers have to comply with. There are various third party solutions that support electronic data interchange (EDI), compliant e-Invoicing, digital tax reporting and application integration that cater to these government policies, rules and regulations for reporting sales and taxes in different countries. Edicom is one such third party solution. The regular Shipment, Return, and Adjustment invoices currently being generated by Manhattan Active® Omni require additional information and processing so that they can confirm the requirements of third party solutions like Edicom. To facilitate this, ancillary invoices (eInvoice) need to be generated in Active® Omni which are based on the regular invoices but will contain additional information and structure. How eInvoicing Works Invoice Types There are two types of eInvoices: the eInvoice that is generated from shipment invoice and the eAdjustment Invoice that is generated from adjustment and return invoice. The eAdjustment Invoice is always associated with one or more eInvoices at any given time and never exist independently. Note: eInvoices are completely decoupled from payment and do not have any payment related attributes like processed amount, failed amount, "StatusId", and so on, on them. Payment Status is also not populated on eInvoice or eAdjustment Invoice. Generation of eInvoice eInvoices are generated as soon as any Shipment Invoice, Adjustment Invoice, and Return Invoices are generated in the system. Refer to Generate eInvoice in the configuration section for more details. eInvoice for Shipment Invoice The eInvoice generated for a Shipment Invoice is called an eInvoice, and it's an exact copy of the Shipment Invoice with a different Invoice Id. At any given point of time, the number of eInvoice generated for an order will be equal to the number of Shipment Invoices. eInvoice for Adjustment Invoice The eInvoice generated for an Adjustment Invoice is called an eAdjustment and is always associated with an existing eInvoice, treated as a child object of eInvoice. A single Adjustment Invoice may be split into multiple eAdjustments if the order has more than one eInvoice generated at the time of generating the eAdjustment. Each eAdjustment will have an Invoice Id generated which will be different from the Invoice Id of the parent Adjustment Invoice. The splitting of a single parent Adjustment Invoice into multiple eAdjustment is to accommodate the requirement of associating appeasement with an einvoice (Shipment Invoice) against which the appeasement was applied. Since any appeasement or any adjustment that is applied on the order post shipment applies to all the Shipment Invoices existing for that order, the adjustment is associated with all the eInvoices existing by splitting the Adjustment Invoice as per standard proration logic followed in the system for various other processes. Note: The adjustment will be split across all the eInvoices, irrespective of whether the appeasement was applied on the order header or to a specific order line. eInvoice for Return Invoice The eInvoice generated for a return Invoice is called an eAdjustment and is always associated with at least one eInvoice. As per the statutory regulations, any Return Invoice generated for a Return Order has to be associated with at least one eInvoice (Shipment Invoice) against which the return was processed. It is also mandatory that the Item description on the Return Invoice line matches with the Item description on the relevant eInvoice (Shipment Invoice) line. Along with this, the sum total of quantities returned for the item cannot exceed the quantities shipped and charged for in the eInvoice. Each eAdjustment will have an Invoice Id generated which will be different from the Invoice Id of the parent Return Invoice. Note: eAdjustment Invoices will be generated for the return invoice only if there is reference to the parent order and parent order line available on the return invoice. Else, Adjustment Invoices will not be generated. For example, a standalone store return order without any reference to a parent order will not have eAdjsutment generated for it. A single Return Invoice may be split into multiple eAdjustments if, The order has more than one eInvoice generated at the time of generating the eAdjustment. The items returned on the return invoice were shipped separately and are part of a different eInvoice (Shipment Invoice). Partial quantities of the same Item are shipped separately and are part of a different eInvoice (Shipment Invoice). The splitting of a single parent Return Invoice into multiple eAdjustment is to accommodate the requirement of associating items returned for the Return Invoice with the exact item and quantity on the eInvoice (Shipment Invoice) against which the return was accepted. Note: If the return fee is charged on the return invoice, it will be equally prorated across multiple eAdjustment split from a single return invoice. External Invoice ID Generation eInvoice IDs are system-generated numbers and do not follow any sequencing or logic based on order ID or order line ID. In some countries, regulations mandate each eInvoice to have a unique sequential ID in a specific format. This ID is generally composed of a prefix, the year and a sequential number. An "ExternalInvoiceID" attribute on the eInvoice can be used to generate this sequential value at the time of publishing eInvoices. An out of the box feature Next Up Number framework can be used and configured to generate the external invoice Id in the required format with separate series for eInvoice (Shipment Invoice) and eAdjustment Invoices Or a single series can be used across multiple eInvoice and eAdjustment types. The external Invoice Id is not generated/populated as soon as the eInvoice or eAdjustment is generated, but it is populated just before the eInvoice or eAdjustment is published. Refer to Generate External Invoice Id section for more details. Publishing eInvoice and eAdjustment To enable integration with third party service providers for statutory compliance and reporting, eInvoice and eAdjustment invoices generated in the system will be published through an outbound message which includes the orderId, eInvoice and any eAdjustment invoices existing and associated with the eInvoice. Refer the configuration section for more details. eInvoice and eAdjustment has Publish Status stamped on it along with the Publish Count which denotes the number of times an eInvoice or eAdjustment Invoice was successfully published. When an eInvoice or eAdjustment Invoice is generated but not published successfully even once, it will have "PublishStatusId" as "None" and Publish Count as 0 (zero). The Publish Count of the eInvoice or eAdjustment invoice will be incremented by 1 when it is published successfully. An eInvoice will be published as soon as all the below-mentioned conditions are met in real time. "StatusId" of the parent shipment invoice from which the eInvoice was generated is "Closed" "PublishStatusId" for the eInvoice is "Ready For Publishing" Only the new eInvoice generated will be published and any other eInvoice already existing and with "StatusId" as "Published" will not be published again. Note: To republish an eInvoice that has already been published, update the PublishStatusId of the eInvoice to Ready For Publishing through order save and the system will publish the eInvoice again with all the associated EAdjustment Invoices and increment the Publish Count on both eInvoice and EAdjustment invoices An eAdjustment invoice will be published as soon as all the below-mentioned conditions are met in real time. "StatusId" of the parent adjustment invoice or the return invoice from which the eAdjustment Invoice was generated is "Closed" "PublishStatusId" of the eAdjustment Invoice is "Ready For Publishing" "PublishStatusId" of the parent eInvoice with which the eAdjustment invoice is associated (child) is "Ready For Publishing" Note: To republish an eAdjustment Invoice that has already been published, update the PublishStatusId of the eAdjustment Invoice as well its parent eInvoice to Ready For Publishing. This can be done through order save and the system will publish the Adjustment Invoice along with the parent eInvoice again and increment the Publish Count on both eInvoice and eAdjustment invoices Note: Payment information is not included in publish eInvoice or publish eAdjustment outbound messages since eInvoices are completely decoupled from payment. Editing eInvoice and eAdjustment Manhattan Active® Omni supports editing of specific eInvoice/eAdjustment fields in cases where the government rejects the eInvoice due to invalid data. For example, if the government rejects the eInvoice for sending an incorrect 'TaxCode', the TaxCode value can be modified on the eInvoice and republished to the government. The following overridden fields can be directly updated using the Save order API. If any of the following fields are modified on the eInvoice/eAdjustment, eInvoice will be republished with the overridden fields and effective fields. The republished eInvoice will have the original, overridden, and effective field values. The effective fields will have the latest updated values of the overridden fields if they have been modified or will retain the original values. See example below. Overridden fields: OverridenTaxAmount OverridenTaxCode OverridenTaxDate Effective fields: EffectiveTaxAmount EffectiveTaxCode EffectiveTaxDate Editable eInvoice - example Original eInvoice: TaxCode : ABC TaxAmount: 100 TaxDate: Today Modified eInvoice: TaxCode : ABC OverridenTaxCode : XYZ TaxAmount: 100 OverridenTaxAmount: 90 TaxDate: Today OverridenTaxDate: null Republished eInvoice: TaxCode : ABC OverridenTaxCode : XYZ EffectiveTaxCode : XYZ TaxAmount: 100 OverridenTaxAmount: 90 EffectiveTaxAmount : 90 TaxDate: Today OverridenTaxDate: null EffectiveTaxDate: Today Any overridden fields modified at the eInvoice header level will be reflected on the prorated eInvoice line overridden fields. For example, if the "TaxAmount" overridden field is modified at the eInvoice header level, the same will be prorated to the eInvoice lines and the line overridden field will be updated. If the "TaxCode" is updated at the eInvoice header level, the same will be updated on overridden fields of the prorated eInvoice lines. Also, the eInvoice total taxes and the invoice total (both header and line level) will be reevaluated if the TaxAmount is overridden and then copied to the corresponding fields below for their effective values. Einvoice.EffectiveTotalTaxes Einvoice.EffectiveInvoiceTotal EInvoiceLine.EffectiveTotalTaxes EInvoiceLine.EffectiveInvoiceLineTotal These effective fields are not available by default on the get order, a template change is required for the information to be visible. Note: Any updates made to the eInvoice will not be propagated to eAdjustment invoices. If such updates are needed, retailers should explicitly call the Save order and update the overridden fields on the eAdjustment invoices. Note: It is recommended for retailers to update their data mapping to consider effective fields before sending the eInvoice to the government. Configuration Generate eInvoice To enable generation of eInvoices for an order type, "Create And Publish eInvoice" should be set to true. This configuration indicates the system to generate eInvoices for shipment, adjustment, and return invoices and publish them. While shipment eInvoice is an exact copy of the shipment invoice, multiple adjustment eInvoice and return eInvoice may be generated by associating them back to relevant shipment eInvoice or multiple shipment eInvoices to ensure the refund amount does not exceed the amount charged on the respective shipment eInvoice. Shipment eInvoices, adjustment eInvoices, and return eInvoices are persisted on the customer order on the eInvoice list. Here is a sample order configuration for reference: { "OrderConfigId": "EcommConfig", "CreateAndPublishEInvoice": true } The default "Create And Publish eInvoice" is false/disabled. Note: Generation of eInvoices is tightly coupled with generation of Shipment/Adjustment/Return Invoices in the system. If invoice generation is not enabled in the system, eInvoice generation will not be triggered. Publish eInvoice and eAdjustment The configuration to enable generation of eInvoices for an order type in the respective order configuration "Create And Publish eInvoice" also enables real-time publishing of eInvoice and eAdjustment invoice message outbound generation. The eInvoice and eAdjustment invoice message outbound format can be customized by configuring a custom template and selecting it in the order configuration by populating that templateId in "EInvoiceSalesPostingTemplateId" attribute. Here is a sample order configuration for reference: { "OrderConfigId": "EcommConfig", "EInvoiceSalesPostingTemplateId": "CUstomEInvoicePubish" } If the einvoice and eAdjustment invoices require an "ExternalInvoiceID" to be populated, an additional status "Awaiting Sequential Invoice Id" is used during the publishing process. This status will be used before the "ready for publishing" status. If External invoice Id generation is not configured, the system will leave the ExternalInvoiceId filed null and publish the eInvoice and eAdjustment Invoice without populating External Invoice Id on the eInvoice and eAdjustment. Generate External Invoice Id for eInvoice and eAdjustment Invoice Order configuration to indicate the system to generate external invoice Id for eInvoice and eAdjustment Invoice Here is a sample order configuration for reference: { "OrderConfigId": "EcommConfig", "ExcludeOpenInvoicesForSeqInvoiceId": false, "GenerateSeqInvoiceId": true, "EInvoiceNextUpConfig": [ { "InvoiceType": { "InvoiceTypeId": "Shipment" }, "NextUpConfigId": "EInvoiceShipment" }, { "InvoiceType": { "InvoiceTypeId": "Adjustment" }, "NextUpConfigId": "EInvoiceAdjustment" }, { "InvoiceType": { "InvoiceTypeId": "Return" }, "NextUpConfigId": "EInvoiceReturn" } ] } NextUp Configuration Configure next-up number generation rules in the Next-Up Configuration UI. This configuration is associated with each of the invoice types in the Order Configuration Additional UI. The menu link is managed in cmu::menuConfig profile. Next up number - External invoice IDEach Next up configuration is composed of: A counter ID => unique ID of the next up config. Will be used in the order configuration additional menu The length of the value returned by this next up configuration A prefix => prefix that will be added to the next up number The start and end value of the sequence The current value of the sequence The possibility to add the date to the next up number and its format. The increment of the number (should be set to 1 for the purpose of the External invoice ID) The next up configuration is protected by the omui::* resource. Make sure it is added to the users' role before trying to configure the next up configuration. Related Articles Rest APIs and User ExitsPayment TypesPayment Schedulers & Batch ProcessingInvoicing and Sales PostingHow Payment Processing WorksRefundsTesting & Troubleshooting PaymentPayment FailuresPayment Gateway IntegrationOther Transaction TypesFraudAuthorizationPayment OverviewCapturing PaymentSettlementPayment Health Dashboard