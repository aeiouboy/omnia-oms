# Cart Form

**Permalink:** pos-cartform
**Path:** Manhattan Active® Omni/Store/Process & Configuration Guides/Point of Sale/POS Guides/Cart Input Forms
**Content Length:** 72,606 characters
**Scraped:** 2025-08-09T22:01:56.908635

---

Home ››Manhattan Active® Omni››Store››Process & Configuration Guides››Point of Sale››POS Guides ››Cart Form Cart Input Forms OverviewCart Forms WorkflowConfiguration flowForm Execution flowCart Event and Form designCart EventCart Event ConfigCart Event ConditionEvent OperatorCart Event Location groupCart Form ConfigurationsCart Form GroupData FieldInput FieldInput Field TypeCart Forms - OfflineCart Forms on Customer-facing displayRule-Based Cart Forms (Non-Repeating)Use casesReturn Reason and DispositionApply Loyalty CertificatesAdd ItemAdditional data forms - Age RestrictionInput form - AttestationLimited capabilityServices Overview The Cart Input Form is a versatile framework designed to generate user interface (UI) forms for capturing data within a Point of Sale (POS) application in the context of a cart. This framework is engineered to address the need for dynamic forms during the selling process, eliminating the necessity for hardcoded forms tailored to specific use cases. The forms can be configured to support both the transaction level and the item level. Transaction Level Forms: Transaction-level forms are invoked to capture data pertaining to the entire transaction, such as customer information, loyalty program details, etc. Item Level Forms: Item-level forms are used to capture data for specific items, such as return reason codes or customer date of birth for purchasing age-restricted items etc. If there is a requirement to present a form to the POS user to capture information from the customer or from the POS user, then the Cart input framework can be used to configure one or more forms which can be rendered in the UI based on an event being triggered / invoking the form directly from the menu. The form can also display the data if the data is already present, allowing the data to be edited or deleted or saved. This framework is designed to meet both current and future base product requirements for data capture via forms. For example, in countries like Mexico and Portugal, customers can provide their tax ID information during checkout. A form generated by this framework would capture the necessary tax ID and customer information. The Cart Input Form Framework is also capable of addressing custom requirements from retailers. For instance, a retailer may need to capture a loyalty ID during checkout or require customer identification for purchasing age-restricted items. This framework can be configured to meet these specific needs efficiently. By utilizing the Cart Input Form Framework, most user input form requirements can be easily and effectively addressed. Cart Forms Workflow The framework has two aspects. There is a configuration aspect and the second aspect is how the configuration is used to build the forms in the UI and capture data. Configuration flow The "Cart Event" and "Cart Form" MUP UI screen will help the user to create and configure events for a defined condition. These conditions will be used to initiate forms on the UI. The forms can be created and configured from cart form configuration screen. Both these UIs are built as a wizard to help users through a step-by-step process of creating the configuration. Please note some of the data is managed by systemAugmentable profile, such as input fields and data fields. If you want to add custom forms or fields, then you will need a system admin role. Form Execution flow Cart Event and Form design There are many entities involved in this workflow, whilst the basic concept is that you define a trigger point which is an event and its conditions, and associate this event with forms via form group. The sections below are entities involved in the cart event/form design. Cart Event A cart event is a signal that something has happened, which could be initiated by user actions or system action.  Events are raised by the UI explicitly upon user action or system action. For example, a cart event can be raised when a user clicks on Checkout, scans an item etc. The cart event entity is a system entity and new events can only be added by R&D. A list of all available events will be seeded in the cartEvent entity. Each event will have a unit event Id and a description of when the event is raised. Sample events are as follows. CartEventId Description onCartCheckout This event is triggered when users click on the checkout button on the pos cart screen. preOrderLineAdd This event is triggered when a user initiates adding a line to the cart, but before making the API call to the backend. postOrderLineAdd This event is triggered when a user adds a line to the cart. capturePayment This event is triggered when the user receives a CapturePayment response indicating that PTT is set to true and implementation is local. It will be used for orchestrating interactions with the payment terminal. Cart Event Evaluation and Execution on POS UI: 1. All Cart Events are evaluated for the conditions and matching conditions are triggered on the POS UI based on event rank. 2. When items are added to cart, all "Pre Order Line Add" are evaluated and executed first based on rank and then "Post Order Line Add" are evaluated and executed. The ranks are considered within the Cart event type and not across the types. "preOrderLineAdd" cart Event uses local storage for items and their prices, so it's mandatory to export this data to the MAO POS application for local storage. The configured Input forms or cart prompts will not work as expected without this data. Read more on exports here "preOrderLineAdd" cart Event works only for sale workflows Cart Event Config The "cartEventConfig" is an entity that is used to configure what form group should be invoked when an event is triggered. An event can have either a form group or a terminal command invoked. A condition can also be configured to control the forms display, to only display if the condition is true. It is possible to have different form groups or terminal commands for the same event based on the condition. However, if there is more than one event config available for one event, the first one will always be picked and executed. The event conditions can be more than one. If there are more than one, then the matchAny attribute is used to define if all conditions have to match or not. If the MatchAny is false then the conditions are treated as “AND” else “OR” Action type attribute defines if the event is triggering a form or a terminal action. Sample Configuration: cartEventConfigId cartEvent description formGroup actionType matchAny eventRank peripheralCommandGroup postOrderLineAdd-ReturnReasonCaptureEventConfig postOrderLineAdd Capture Return Reason Code and Disposition Code for Return Order ReturnReasonCaptureFormGroup CartEventFormGroup true 1 null Cart Event Condition The "cartEventCondition" entity is to configure the conditions to be evaluated to determine if an event should invoke a form is configured here. More than one condition can be defined for an event config. The event config is referenced here to return the list of all the conditions. This can be used to make the form invocation conditional. For example, the use case may be to capture customer tax info only if the order total is greater than $100. Sample Config: parentCartEventConfig conditionEntity attributeName attributeValue operator postOrderLineAdd-ReturnReasonCaptureEventConfig OrderLine IsReturn true = Supported Cart Event conditions type Order OrderLine ItemLabel Restock Fee How to use cart event condition for "ItemLabel" The "ItemLabel" uses the label framework to evaluate if a particular item is eligible to trigger the event. The cart event condition "ItemLabel" only supports the "preOrderLineAdd" cart event. For an item to group of items, define a label on the item entity. (Only done via PostMan) Use this label in cartEventCondition field with {samplelabel} = true (Can be done via Cart Event MUP UI) Select CartEventCondition = Item Label AttributeValue = {samplelabel} that you added in item entity AttributeValue = true Note: For example, For Item1 and Item2, if you want a prompt message to be displayed when the items are added to cart, then define the label for these items. And define the Item label in the cart event condition as true. Example: Use the instructions below as a sample to insert labels into an item. Repeat the same if you have multiple items. {{url}}/item/api/item/item/save Cartprompt-ItemLabel{ "ItemId": "HF0110", "EntityLabels": { "Annotations": { "FinalSale": "true" } } } Event Operator "eventOperator" entity is used to define the list of supported operators that can be used when configuring the event condition. Sample Config: operatorId description = Equal to != Not equal to Cart Event Location group Use this configuration if you want the event to be specific to a particular location or group of locations. An alternative method to having an event specific to a location or location group is to use the profile purpose override framework feature, but if the retailer has a lot of forms/prompts, then this will become an ineffective task to manage cart events. parentCartEventConfig locationCriteriaConfigId locationCriteriaName locationCriteriaValue postOrderLineAdd-ReturnReasonCaptureEventConfig OrderLine WestCoastLocations true How it works: The location criteria use the label framework to evaluate if a particular location is eligible to trigger the event. If you want the cart event to be specific to a location or a group of locations, then you are required to do the two configurations below. For a location to group of locations, define a label on location entity. (Only done via PostMan) Use this label in "locationCriteriaName" field with locationCriteriaValue = true (Can be done via Cart Event MUP UI) Note: In the above example, "WestCoastLocations" can be assigned as a label to one or many locations of the retailer. This entity can have more than one "locationCriteriaName" Example: Use the instructions below as a sample to insert labels into a location. {{url}}/organization/api/organization/location/save CartForm-LocationGroup{ "LocationId": "miller-us:80228-1028", "EntityLabels": { "Annotations": { "SaleNotAllowed1028": "true", "WestCoastLocation": "true" } } } Cart Form Configurations Cart Form Group The cart input form group is the entity that groups one or more related forms and creates the association between the forms. For example, if there are two forms required to sign up a customer for loyalty, then a form group is configured for Loyalty and the group will contain two separate forms configured which are linked by the form group. The event is configured to invoke a form group, and the form group will list all the forms associated to the group. Sample Data: formGroupId displayName menuEnabled menuDisplayName adminResource formGroupType cartMode interfaceMode iconName isCustom addMultipleItems ReturnReasonCaptureFormGroup RETURN REASON true Edit Return Reason ui::pos::cart::returns::admin OrderLine Return Register and Peripheral false More Details: iconName: If you have defined the FormGroup to be displayed in the context menu i.e. if menuEnabled = true, then this menu needs a iconName to get the icon from UI bundle to be displayed on the UI. Support base icon names can be referred from proActive documentation. isCustom: If your form group needs a custom icon that is not coming from the base bundle, then use this field to configure if it's a custom icon. formGroupType: This is to identify the type of form. This will be used during or after the form is completed. Below are the available types Order : If menuEnabled = true and formGroupType = Order, the form will be available in the context menu. OrderLine: If menuEnabled = true and formGroupType = OrderLine, the form will be available in the edit teardrop down menu. AddItem: If menuEnabled = true and formGroupType = AddItem, the form will be available in the context menu. If formGroupType = AddItem and addMultipleItems = true, then the "Add more Items" button is displayed on checkout forms. Add Multiple Items: If the form group is for adding items to cart, then use this configuration to provide ability to add more than 1 item within the form group. This is only applicable when formGroupType = AddItem This is only applicable when it's linked to onCartCheckout event. Cart Form The cart input form entity is a new configuration entity introduced to capture the configuration for a form. A form is nothing but a simple UI form that can be used to input and capture information. A form can contain one or more fields, which are defined in the cartInputFormField entity. Cart input forms can be configured as needed by retailers. A business user can configure one or many forms as required for the use case that they are trying to solve. A name can be given for the form that will be displayed in the UI, when the form is rendered. when configuring multiple forms to solve a single requirement, a sequence can also be provided to indicate when the form should appear in the flow. The cart input form entity will be seeded with all the form configurations that are required by base. Services and customers can create their own configurations as needed. Sample form data: parentFormGroup fromId displayName displaySequence description allowSkip richText ReturnReasonCaptureFormGroup ReturnReasonCaptureForm RETURN REASON 1 This just FYI on the purpose of the form More Details: allowSkip: This will allow to show Skip button instead of cancel/void button. If enabled, then the form can be skipped. This form can be skipped even if the form has required fields to be populated. Enable this field if you want to keep the form as "Optional". richText Use this field to add a message in rich text format. This message will be displayed above all the input fields on a cart form. Read more on how to create a rich text format here: Cart Prompts displayName is localized in Cart Form Group, Cart Form, and Cart Form Field. richText at Cart Form is not localized Cart Form Field The form field entity is used to configure the different fields that are required in a form. The form field entity has a reference to the form that will use the field, which will tie the fields to the form. The fields can be configured with a display name, any validation if needed and also a sequence to indicate the placement of the field on the form if there are more than one field on a form. Note: The input form field only defines the properties of the field in reference to the form. The properties of the definition of the field like data type, data source for the field etc are defined in the inputField configuration. Design approach: Input fields can be generic and can be associated to multiple form fields. For example if Customer name is a common field that be used in multiple forms, a inputField can be configured as CustomerName and it can be associated to different forms by creating the association in the inputFormFields for different forms. The inputField property is a reference to the configured inputFields that is getting used in the form. By allowing detailed definition and management of individual fields, this entity ensures that forms are both functional and user-friendly. The ability to link fields to forms, set display names, apply validation, and control field sequence provides a robust framework. The cart input form field entity will be seeded with all the field configurations that are required by base. Services and customers can create their own configurations as needed. Sample form field Data: parentForm formFieldId displayName formFieldSize formFieldSizeMessage formFieldValidation formFieldValidationMessage formFieldRequired formFieldSequence inputField defaultValue displayAs enableScanning formFieldMinValue formFieldMaxValue ReturnReasonCaptureForm ReturnReason Select a Return Reason 50 true 1 ReturnReasonInputField pill ReturnReasonCaptureForm ReturnDisposition Select a Return Disposition 50 true 2 ReturnDispositionInputField pill More details: formFieldSize, formFieldSizeMessage: Use "formFieldSize" to define the max length for this inputfield. If the size is above the configured limit then use "formFieldSizeMessage" to define the message that needs to be displayed on UI. If "formFieldSizeMessage" is not configured then default message is displayed from base. formFieldValidation, formFieldValidationMessage: Use "formFieldValidation" to define a regular expression validation on this form field. If the regular expression is not met then use "formFieldValidationMessage" to define the message that needs to be displayed on UI. If "formFieldValidationMessage" is not configured then default message is displayed from base. enableScanning: Enable this if you want camera scanning capability for an inputField. formFieldMinValue and formFieldMaxValue: For Date: Users can use the Min and Max values to restrict customers from entering a date less than the defined formFieldMinValue. For example: 2007-12-01 "YYYY-MM-DD", The POS UI date picker will not show any date greater than 2007-12-01 to select. For Age: Users can use the Min and Max values to restrict or validate the user's entered numeric values. For example, For a pre-orderline cart event, if an item can be purchase only above Min Age of 18, then add formFieldMinValue as 18 and leave the formFieldMaxValue blank. defaultValue: This is applicable to only text and numeric input field type. (Not for field which fetch value from entity seed data or cartFormFieldData) When the value is set to defaultValue, this will be pre-populated with the configured value when the form is loaded onto the UI. Sample payload here. Cart Form Field Data This entity is used to seed data for loading values in an input field. For example, if there is a list of values that the user has to choose from, the list can be configured here and the inputfield can reference this to load the permitted values list. The data is stored as key value pairs. The typical use case for configuring this will be if the data is not already available in an entity, then this can be used as the source for seeding the data. For example, let's say the retailer has a list of values for customer loyalty status and wants to show that as an option in the form to choose when capturing loyalty info. The different values can be configured here. Note: If the input field has a reference data source configured, then the data for the list is fetched from the referenced entity. The formfield is referenced in this entity. Sample data: parentFormField keyData valueData isDefault FiscalRegimen "601: General Law Legal Persons" "601: General Law Legal Persons" true More Details: You can mark only one of the values from cart form field data as isDefault = true. When isDefault = true, this value will be prepopulated when the form is loaded. Use sample payload here Data Field The data field entity is used to define where data that is captured in a field on a form is persisted. The data fields can be generic and referenced in multiple forms to different fields as per the use case. The Target entity defines the entity where the data is stored and the Field name maps to the attribute in the entity. Note: The current scope is to only support order, orderAdditional, OrderAttribute and orderLine, orderLineAdditional, orderLineAttributes entities in the order component. Extended attributes for all the above attribute is supported. i.e. You will be able to save the custom/extended attributes on all order, orderAdditional, OrderAttribute and orderLine, orderLineAdditional, orderLineAttributes entities. Not all the attributes in the above entities will be exposed by base solution in the "POSIrisOrderTemplate". If there are attributes used in data fields which are not exposed in the templates, it is recommended for services or implementation teams to add these fields to the template as part of customization. Sample Data: dataFieldId targetEntity entityFieldName ReturnReasonDataField OrderLineAdditional ReturnReason ReturnDispositionDataField OrderLineAdditional ItemDisposition Request URL: {{url}}/posservice/api/posservice/dataField/save Request Payload: { "DataFieldId": "{Unique-Name}", "TargetEntity": "OrderLine", // You can choose to use any supported target entity "EntityFieldName": "Quantity" // you can choose to use any attribute in supported target entity } Input Field The inputField entity is used to configure generic input fields that can be associated to a form field. The input field configuration defines the data source for loading the data if the field type is a dropdown, where a permitted list of values has to be loaded. The configuration also defines the type of field. The dataField is a reference to the data field entity which is used to define where the data that is captured should be persisted. Sample data: inputFieldType InputFieldId refComponent refEntity refCriteria refKeyAttribute refValueAttribute dataField Text ReturnReasonInputField order reason ReasonTypeId = Return AND EligibleForPointOfSale = true ReasonId ShortDescription ReturnReasonDataField Text ReturnDispositionInputField posservice posReturnDisposition DispositionId Description ReturnDispositionDataField Capturing "customerId" and "employeeId" using Cart Input Form framework is not supported. These fields have internal business logic within the cart building workflow. Introducing or updating these fields as part of cart forms framework brings up additional challenges, so we recommend avoiding this. Request URL: {{url}}/posservice/api/posservice/inputField/save Request Payload: { "InputFieldId": "{Unique-Name}", "InputFieldType": "Text", // You can choose to use any supported Input Type "EntityFieldName": "{Unique-Name}" // Should reference to valid DataFieldId } Input Field Type Field type is the entity that lists the base supported list of field types. This will control the field type of the field on the form. UI will use this configuration to set the data type. Sample Data: inputFieldTypeId Description Text Represents the UI text input field which allows free text Numeric Represents the UI select input field which allows only numbers Date This will bring up the input form field as a date picker. Use this input field for date data fields. Age This will bring up the input form field as an input field. But retailers can use the formFieldMinValue and formFieldMaxValue for age-related restrictions, OR formFieldValidation for regex validation Checkbox This will bring up the input form field as a checkbox. Users can choose to add one or many such input fields to a form. Cart Forms - Offline Cart Input forms are supported when a POS application is in offline mode. The user can still interact with configured cart forms even when the device is in offline mode. This is achieved by storing the configured cart forms from static data into the local storage of the device. Cart Forms on Customer-facing display Cart Forms can be configured to be displayed on a customer-facing display. This can be defined in cart input form group configuration. If you want to display the form on CFD and on pos register, then configure Interface mode as "Register and Peripheral". If you don't want it to be displayed on CFD, then leave it blank or select "Register". Rule-Based Cart Forms (Non-Repeating) Rule-based cart forms are configurable UI forms triggered by specific conditions during a POS transaction (e.g., scanning a certain item or starting a return). These forms capture required data—once per transaction—and are not shown again once the input is successfully recorded. Key Characteristics: Condition-Driven: Triggered by pre-defined business rules (e.g., age verification, tax ID requirement). One-Time Capture: Once the form is filled in and saved during the transaction, it won’t reappear, even if other triggers for the same cart event occur again. Scope: Can be triggered at order or orderLine level on cart event configuration. But respect the rule to not prompt again once satisfied. Data Persistence: Captured data is stored for the current transaction and reused when needed. This is only applicable when data is stored in order, orderAdditional, OrderAttribute Benefits: Streamlined Checkout: Prevents repetitive prompts for the same data in the same transaction. Better User Experience: Reduces friction between cashiers and customers. Configurable Rules: Retailers define when and how forms appear—and when they don’t. Examples in POS and sample payloads: Age Verification Form (Transaction Level): Triggered once when the first age-restricted item is scanned. Doesn’t show again for subsequent age-restricted items in the same transaction. Payload: {{url}}/posservice/api/posservice/cartInputFormGroup/save Age Numeric: Age-Rule Base Input Form{ "FormGroupId": "CustomerAgeFormGroup", "AddMultipleItems": false, "CartInputForm": [ { "Description": "Customer Age", "DisplaySequence": 1, "CartInputFormField": [ { "FormFieldSize": 1, "EnableScanning": false, "FormFieldValidation": "^(?:1[01][0-9]|120|1[8-9]|[2-9][0-9])$", "FormFieldSequence": 1, "FormFieldRequired": true, "FormFieldValidationMessage": "Minimum age required is 18", "DisplayName": "Enter Customer Age", "FormFieldMaxValue": "100", "InputField": { "InputFieldId": "TestCustumerAgeInputField1" }, "FormFieldSizeMessage": "Overboard", "FormFieldMinValue": "18", "FormFieldId": "CustomerAgeFormField" } ], "AllowSkip": false, "DisplayName": "Customer Age Form", "FormId": "CustomerAgeForm" } ], "FormGroupType": { "FormGroupTypeId": "Order" }, "DisplayName": "Customer Age Verification", "CartMode": null } Make sure Form Group Type Id = "Order" and the Input field "TestCustumerAgeInputField1" is mapped at order level (order, orderAdditional, OrderAttribute) Payload: {{url}}/posservice/api/posservice/cartEventConfig/save Cart Event for Age Form: Age-Rule Base CartEvent{ "Description": "PreAdd-AdditionalDetails-Age-18Or21", "ActionType": { "ActionTypeId": "CartEventFormGroup" }, "CartEventConfigId": "PreAdd-AdditionalDetails-Age-18Or21", "FormGroup": "CustomerAgeFormGroup", "MatchAny": true, "CartEvent": { "CartEventId": "postOrderLineAdd" }, "LocationCriteria": [], "EventRank": 1, "CartEventCondition": [ { "Operator": { "OperatorId": "=" }, "AttributeValue": "PR0020", "AttributeName": "ItemId", "ConditionEntity": "OrderLine" } ], "PromptGroup": null } Use cases The following are some examples that use the cart form framework to show the forms on the Manhattan Active Omni® POS UI. Return Reason and Disposition The details are mentioned in the link. Apply Loyalty Certificates The Cart Forms framework provides the ability to show forms as a context menu option on the cart screen. "Apply Loyalty Certificates" is a context menu option that is provided out of base which uses the "Cart Form Framework" to display as a context menu option. Configuration used: To bring up a form as a context menu, you will need to create a "Cart Form group" and associated Cart Forms. You need no "Cart Event" configuration in this use case. Cart form group configuration: As part of the cart form framework, the base provides seed data for this capability. Users can use this as an example and modify to configure any custom context menu. This payload will add Cart form group, Cart form and Cart form field. This form will bring up a context menu and one entry field. Refer to Cart Input Form group section in this page for more details on icon names and define custom icons. Payload: {{url}}/posservice/api/posservice/cartInputFormGroup/save Loyalty_CartFormGroup { "FormGroupId": "LoyaltyNumberCaptureFormGroup", "DisplayName": "CAPTURE LOYALTY NUMBER", "MenuEnabled": true, "IconName": "far-star", "IsCustom": false, "MenuDisplayName": "Apply Loyalty Certificates", "FormGroupType": "Order", "AdminResource": null, "CartInputForm": [ { "FormId": "LoyaltyNumberCaptureForm", "DisplayName": "CAPTURE LOYALTY NUMBER", "DisplaySequence": 1, "CartInputFormField": [ { "FormFieldId": "LoyaltyNumber", "FormId": "LoyaltyNumberCaptureForm", "DisplayName": "Enter Loyalty Number", "FormFieldSize": 50, "FormFieldSizeMessage": "Invalid loyalty number, maximum characters exceeded.", "EnableScanning": true, "FormFieldSequence": 1, "DisplayAs": null, "InputField": "LoyaltyInputField" } ] } ] } Add Item The Cart Forms framework provides the ability to add items and their quantities to the cart based on Form group and cart event configuration. Business scenario: If you want to add a trigger point at checkout, bring a pop-up to show adding a bag (an item) and number of bags (quantity). Users can select a bag and its quantity to add to the cart and go to checkout or skip this form/pop-up and go to checkout. Required configuration: You will be required to set up a "Cart Form Group" and the "Cart Form" using the cart form configuration. And a cart event configurator i.e. a trigger point using a cart event configuration screen. Cart Form configuration screen: {{url}}//om/dm-config/screen/posservice/cartInputFormGroup Cart Event configuration screen: {{url}}/om/dm-config/screen/posservice/cartEventConfig It is recommended that users add regular expressions to validate the quantity field for the Add item form does not accept 0. Systematically, this is not handled, so regular expressions will be needed. For example: [1-9][0-9]*|0 Add item/Add Bag configuration To configure any cart forms, first you need to define a cart form group and then create a cart event along with its condition and link to the existing cart form group. You cannot create a event first and then cart form a group, but the other way. Cart form group configuration: As part of the cart form framework, the base does not provide seed data for this capability but just the ability to configure to perform such a feature. Given the complexity of the configuration, use the attached sample for cart form group configuration. This payload will add Cart form group, Cart form, Cart form field and Cart form field data. This form will bring up 2 fields. The first field is a drop-down for item selection. Make sure the item that you configure here is already present in item master. The second field is to enter the quantity. This below payload will also provide the below capabilities This will allow the user to skip the form/pop-up making it an optional selection. Bring this form on context menu, which can be accessed at any time while you are on the cart screen. The quantity will have regular expression validation, the below payload will allow min = 1 qty and max 99 qty. It will allow to add multiple items from the same trigger point using add more feature i.e. AddMultipleItems= true. First field: It will set one of the 2 items as default in the form dropdown. Second field: It will set the quantity to default as 1. Payload: {{url}}/posservice/api/posservice/cartInputFormGroup/save AddItem-CartFormgroup{ "FormGroupId": "AddBagFormGroup", "DisplayName": "Add Bag", "FormGroupType": "AddItem", "AddMultipleItems": true, "MenuEnabled": true, "MenuDisplayName": "Add Bag", "CartInputForm": [ { "FormId": "AddBagForm", "AllowSkip": true, "DisplayName": "Add Bag", "DisplaySequence": 1, "CartInputFormField": [ { "FormFieldId": "ItemId", "FormId": "AddBagForm", "DisplayName": "Select Item", "FormFieldSize": 50, "FormFieldSequence": 1, "InputField": "ItemIdInputField", "CartInputFormFieldData": [ { "KeyData": "PR0050", "IsDefault": false, "ValueData": "Plastic Bag" }, { "KeyData": "PR0020", "IsDefault": true, "ValueData": "Paper Bag" } ] }, { "FormFieldId": "Quantity", "FormId": "AddBagForm", "DisplayName": "Enter Quantity", "FormFieldSize": 50, "FormFieldSequence": 2, "FormFieldValidation": "^.{0,2}$", "DefaultValue": "1", "FormFieldValidationMessage": "Invalid quantity", "InputField": "QuantityInputField" } ] } ] } Cart event configuration: Once the cart form group and its form and fields are defined. You can link this from group to a cart event. This payload will trigger the above cart form for adding an item at checkout when the orderTotal is more than 0 and when you have atleast one sales item in the cart. Payload: {{url}}/posservice/api/posservice/cartEventConfig/save AddItem-CartEvent{ "CartEventConfigId": "onCartCheckout-AddBagFormGroup", "CartEvent": "onCartCheckout", "Description": "Capture Add bag information", "FormGroup": "AddBagFormGroup", "PeripheralCommandGroup": null, "EventRank": 1, "ActionType": "CartEventFormGroup", "CartEventCondition": [ { "ConditionEntity": "Order", "AttributeName": "StoreSaleCount", "AttributeValue": "0", "Operator": ">" }, { "ConditionEntity": "Order", "AttributeName": "OrderTotal", "AttributeValue": "0", "Operator": ">" } ], "MatchAny": true } The add item cart form is triggered only once at checkout. If it applied or skipped and If you go back to cart and click checkout again then it does not come up again. cartInputFormGroup.menuEnabled can be used to bring this form into the context menu. Use the iconName to define a icon that needs to be displayed on the context menu. If blank, it will show a default no icon tile on the UI. Refer to proactive documentation for the supported base icon, or if you are adding a custom icon then enable the isCustom flag on cartInputFormGroup. Additional data forms - Age Restriction Business scenario: The retailer can configure a variety of age-restriction messaging on the POS application whenever an item is attempted to be added to the cart. The age-restriction messaging on the POS application can be configured as any of the below A simple confirmation message to accept that the customer has met their age or not. If not met, the item will not be added to the cart. A cart input form message with a Numeric entry field. A cart input form message with an age entry field. Required configuration: You will be required to configure the "Cart Prompt" message that you want to show on the POS application. Payload URL: {{url}}/posservice/api/posservice/cartPromptGroup/save Payload Sample: Age Attestation: AgeAttestation-cartPrompt{ "FormGroupId": "AttestationFormGroup2", "IsCustom": false, "AddMultipleItems": false, "AdminResource": null, "CartInputForm": [ { "Description": "Age Restriction", "DisplaySequence": 1, "CartInputFormField": [ { "DisplayAs": null, "EnableScanning": false, "FormFieldSequence": 1, "FormFieldRequired": true, "DisplayName": "I have verified that customer is above 18 years of age", "CartInputFormFieldData": [], "InputField": { "InputFieldId": "AttestationEntityField_InputCheckbox" }, "FormFieldId": "Check_1", "CopyToField": null } ], "AllowSkip": false, "RichText": "# ⚠️ Age Restriction\n\n\"This Item has an age restriction associated with it. Please verify customer age.\"", "DisplayName": "Age Restriction", "FormId": "AttestationForm" } ], "FormGroupType": { "FormGroupTypeId": "OrderLine" }, "DisplayName": "AGE RESTRICTION", "CartMode": null } Age Numeric: AgeNumeric-CartForm{ "FormGroupId": "CustomerAgeFormGroup", "AddMultipleItems": false, "CartInputForm": [ { "Description": "Customer Age", "DisplaySequence": 1, "CartInputFormField": [ { "FormFieldSize": 1, "EnableScanning": false, "FormFieldValidation": "^(?:1[01][0-9]|120|1[8-9]|[2-9][0-9])$", "FormFieldSequence": 1, "FormFieldRequired": true, "FormFieldValidationMessage": "Minimum age required is 18", "DisplayName": "Enter Customer Age", "FormFieldMaxValue": "100", "InputField": { "InputFieldId": "TestCustumerAgeInputField1" }, "FormFieldSizeMessage": "Overboard", "FormFieldMinValue": "18", "FormFieldId": "CustomerAgeFormField" } ], "AllowSkip": false, "DisplayName": "Customer Age form", "FormId": "CustomerAgeForm" } ], "FormGroupType": { "FormGroupTypeId": "OrderLine" }, "DisplayName": "Customer Age Restriction", "CartMode": null } Age - Age Input field: Age-AgeField-CartForm{ "FormGroupId": "CustomerAgeFormGroup", "AddMultipleItems": false, "CartInputForm": [ { "Description": "Customer Age", "DisplaySequence": 1, "CartInputFormField": [ { "FormFieldSequence": 1, "FormFieldRequired": true, "FormFieldValidationMessage": "You should be minimum of 18 years of age", "DisplayName": "Enter/Select date of birth", "FormFieldMaxValue": "100", "InputField": { "InputFieldId": "CustomerAge002-Age-Input" }, "FormFieldMinValue": "18", "FormFieldId": "Age-2" } ], "AllowSkip": false, "DisplayName": "Customer Age form", "FormId": "CustomerAgeForm" } ], "FormGroupType": { "FormGroupTypeId": "OrderLine" }, "DisplayName": "Customer Age Restriction", "CartMode": null } Link the cart prompt group to a cart event: {{url}}/posservice/api/posservice/cartEventConfig/save Payload Sample: AgeAttestation-CartEvent{ "PeripheralCommandGroup": null, "Description": "PreAdd-Age-Attestation", "ActionType": { "ActionTypeId": "CartEventFormGroup" }, "CartEventConfigId": "PreAdd-AdditionalDetails-Attestation2", "FormGroup": "AttestationFormGroup2", "MatchAny": true, "CartEvent": { "CartEventId": "preOrderLineAdd" }, "LocationCriteria": [], "EventRank": 70, "CartEventCondition": [ { "Operator": { "OperatorId": "=" }, "AttributeValue": "true", "AttributeName": "Attestation", "ConditionEntity": "ItemLabel" } ] } The ItemLabel needs to be defined on item labels before it's used on the cart event condition. Refer to add item labels Input form - Attestation The Cart Forms framework provides the ability to show rich text messaging on the cart input forms. Business scenario: If you want to bring up a form with messages such as user acknowledgment, product disclaimer etc. which involves change of fonts, words/messages in different sentences etc. Then you can use this configuration Required configuration: You will be required to set up a "Cart Form Group" and the "Cart Form" using the cart form configuration. The rich text needs to be configured on cartForm > rich text, you can use the Cart Promptssamples and links to create rich text-formatted content and use this on cart input forms. Cart Form configuration screen: {{url}}//om/dm-config/screen/posservice/cartInputFormGroup Cart Event configuration screen: {{url}}/om/dm-config/screen/posservice/cartEventConfig Payload: {{url}}/posservice/api/posservice/cartInputFormGroup/save GeneralAttestation-CartForm{ "FormGroupId": "AttestationFormGroup1", "CartInputForm": [ { "Description": "General Attestation", "DisplaySequence": 1, "CartInputFormField": [ { "FormFieldSequence": 1, "FormFieldRequired": true, "DisplayName": "I agree to the terms and conditions", "InputField": { "InputFieldId": "AttestationEntityField_InputCheckbox" }, "FormFieldId": "Check_1" } ], "AllowSkip": false, "RichText": "# General Disclaimer\n\n**⚠️ Acknowledgment & Disclaimer**\n\n\"By completing this purchase, you acknowledge that certain items may have safety, warranty, or usage limitations. Please refer to the product manual and safety guidelines. Harbor Freight is not responsible for improper use of products. All sales are subject to our return and warranty policies.\"", "DisplayName": "General Attestation", "FormId": "AttestationForm" } ], "FormGroupType": { "FormGroupTypeId": "OrderLine" }, "DisplayName": "ATTESTATION", "CartMode": null } Payload: {{url}}/posservice/api/posservice/cartInputFormGroup/save GeneralAttestation-cartEvent{ "Description": "PreAdd-AdditionalDetails-Attestation", "ActionType": { "ActionTypeId": "CartEventFormGroup" }, "CartEventConfigId": "PreAdd-AdditionalDetails-Attestation11", "FormGroup": "AttestationFormGroup1", "MatchAny": true, "CartEvent": { "CartEventId": "preOrderLineAdd" }, "EventRank": 70, "CartEventCondition": [ { "Operator": { "OperatorId": "=" }, "AttributeValue": "true", "AttributeName": "Attestation", "ConditionEntity": "ItemLabel" } ] } The ItemLabel needs to be defined on item labels before it's used on the cart event condition. Refer to add item labels Limited capability There are some limitations to the cart input form framework. We are striving to make this framework to cover as many use cases that come along in the POS business, but since we are building this iteratively, you will see restrictions on how this framework can be used. Below are some existing limitations. Only one Cart form group can be enabled to show on the context menu. Only one cart form can be configured per cart group. Multiple cart forms within the cart input group are not supported. Input fields and data fields are defined as "System Augmentable". And it does not have a MUP UI. To configure new fields, it is recommended to use postMan scripts and system user credentials. displayAs capability on the cart form field is currently only supported for postOrderLineAdd cart event and is hardcoded to work only for return reason and disposition code seed data. Add item: The items configured as part of "AddItem" fromGroupType cannot be configured to have cart forms. Use these items to add the items to the cart at checkout by choosing quantity etc. Cart Event condition: Defining an attributevalue as null or blank is not supported, wither through postman or through MUP UI. This will be treated as a string and will not work to your expectation. Services The following are the key APIs related to cart forms. Refer to the API documentation for additional details on each service. Service Component Service Endpoint cart Event posservice /api/posservice/cartEventConfig Cart Form Group posservice /api/posservice/CartInputFormGroup Data Field posservice /api/posservice/dataField Input Field posservice /api/posservice/inputField